(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$2(e,a,s){this.props=e,this.context=a,this.refs=D$1,this.updater=s||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(e,a){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,a,"setState")};E$2.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$2.prototype;function G$1(e,a,s){this.props=e,this.context=a,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,a,s){var o,c={},d=null,h=null;if(a!=null)for(o in a.ref!==void 0&&(h=a.ref),a.key!==void 0&&(d=""+a.key),a)J.call(a,o)&&!L$1.hasOwnProperty(o)&&(c[o]=a[o]);var g=arguments.length-2;if(g===1)c.children=s;else if(1<g){for(var _=Array(g),$=0;$<g;$++)_[$]=arguments[$+2];c.children=_}if(e&&e.defaultProps)for(o in g=e.defaultProps,g)c[o]===void 0&&(c[o]=g[o]);return{$$typeof:l$1,type:e,key:d,ref:h,props:c,_owner:K$1.current}}function N$1(e,a){return{$$typeof:l$1,type:e.type,key:a,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape(e){var a={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return a[s]})}var P$1=/\/+/g;function Q$1(e,a){return typeof e=="object"&&e!==null&&e.key!=null?escape(""+e.key):a.toString(36)}function R$2(e,a,s,o,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(d){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:h=!0}}if(h)return h=e,c=c(h),e=o===""?"."+Q$1(h,0):o,I$1(c)?(s="",e!=null&&(s=e.replace(P$1,"$&/")+"/"),R$2(c,a,s,"",function($){return $})):c!=null&&(O$1(c)&&(c=N$1(c,s+(!c.key||h&&h.key===c.key?"":(""+c.key).replace(P$1,"$&/")+"/")+e)),a.push(c)),1;if(h=0,o=o===""?".":o+":",I$1(e))for(var g=0;g<e.length;g++){d=e[g];var _=o+Q$1(d,g);h+=R$2(d,a,s,_,c)}else if(_=A$1(e),typeof _=="function")for(e=_.call(e),g=0;!(d=e.next()).done;)d=d.value,_=o+Q$1(d,g++),h+=R$2(d,a,s,_,c);else if(d==="object")throw a=String(e),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return h}function S$1(e,a,s){if(e==null)return e;var o=[],c=0;return R$2(e,o,"","",function(d){return a.call(s,d,c++)}),o}function T$1(e){if(e._status===-1){var a=e._result;a=a(),a.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=a)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(e,a,s){S$1(e,function(){a.apply(this,arguments)},s)},count:function(e){var a=0;return S$1(e,function(){a++}),a},toArray:function(e){return S$1(e,function(a){return a})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$2;react_production_min.Fragment=p$2;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(e,a,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=C$1({},e.props),c=e.key,d=e.ref,h=e._owner;if(a!=null){if(a.ref!==void 0&&(d=a.ref,h=K$1.current),a.key!==void 0&&(c=""+a.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(_ in a)J.call(a,_)&&!L$1.hasOwnProperty(_)&&(o[_]=a[_]===void 0&&g!==void 0?g[_]:a[_])}var _=arguments.length-2;if(_===1)o.children=s;else if(1<_){g=Array(_);for(var $=0;$<_;$++)g[$]=arguments[$+2];o.children=g}return{$$typeof:l$1,type:e.type,key:c,ref:d,props:o,_owner:h}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var a=M$1.bind(null,e);return a.type=e,a};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,a){return{$$typeof:x,type:e,compare:a===void 0?null:a}};react_production_min.startTransition=function(e){var a=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=a}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(e,a){return U$1.current.useCallback(e,a)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,a){return U$1.current.useEffect(e,a)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,a,s){return U$1.current.useImperativeHandle(e,a,s)};react_production_min.useInsertionEffect=function(e,a){return U$1.current.useInsertionEffect(e,a)};react_production_min.useLayoutEffect=function(e,a){return U$1.current.useLayoutEffect(e,a)};react_production_min.useMemo=function(e,a){return U$1.current.useMemo(e,a)};react_production_min.useReducer=function(e,a,s){return U$1.current.useReducer(e,a,s)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,a,s){return U$1.current.useSyncExternalStore(e,a,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,a,s){var o,c={},d=null,h=null;s!==void 0&&(d=""+s),a.key!==void 0&&(d=""+a.key),a.ref!==void 0&&(h=a.ref);for(o in a)m$1.call(a,o)&&!p$1.hasOwnProperty(o)&&(c[o]=a[o]);if(e&&e.defaultProps)for(o in a=e.defaultProps,a)c[o]===void 0&&(c[o]=a[o]);return{$$typeof:k,type:e,key:d,ref:h,props:c,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(e){var a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.indexOf("=");s===-1&&(s=a);var o=s===a?0:4-s%4;return[s,o]}function byteLength(e){var a=getLens(e),s=a[0],o=a[1];return(s+o)*3/4-o}function _byteLength(e,a,s){return(a+s)*3/4-s}function toByteArray(e){var a,s=getLens(e),o=s[0],c=s[1],d=new Arr(_byteLength(e,o,c)),h=0,g=c>0?o-4:o,_;for(_=0;_<g;_+=4)a=revLookup[e.charCodeAt(_)]<<18|revLookup[e.charCodeAt(_+1)]<<12|revLookup[e.charCodeAt(_+2)]<<6|revLookup[e.charCodeAt(_+3)],d[h++]=a>>16&255,d[h++]=a>>8&255,d[h++]=a&255;return c===2&&(a=revLookup[e.charCodeAt(_)]<<2|revLookup[e.charCodeAt(_+1)]>>4,d[h++]=a&255),c===1&&(a=revLookup[e.charCodeAt(_)]<<10|revLookup[e.charCodeAt(_+1)]<<4|revLookup[e.charCodeAt(_+2)]>>2,d[h++]=a>>8&255,d[h++]=a&255),d}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,a,s){for(var o,c=[],d=a;d<s;d+=3)o=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),c.push(tripletToBase64(o));return c.join("")}function fromByteArray(e){for(var a,s=e.length,o=s%3,c=[],d=16383,h=0,g=s-o;h<g;h+=d)c.push(encodeChunk(e,h,h+d>g?g:h+d));return o===1?(a=e[s-1],c.push(lookup[a>>2]+lookup[a<<4&63]+"==")):o===2&&(a=(e[s-2]<<8)+e[s-1],c.push(lookup[a>>10]+lookup[a>>4&63]+lookup[a<<2&63]+"=")),c.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(e,a,s,o,c){var d,h,g=c*8-o-1,_=(1<<g)-1,$=_>>1,_e=-7,tt=s?c-1:0,nt=s?-1:1,lt=e[a+tt];for(tt+=nt,d=lt&(1<<-_e)-1,lt>>=-_e,_e+=g;_e>0;d=d*256+e[a+tt],tt+=nt,_e-=8);for(h=d&(1<<-_e)-1,d>>=-_e,_e+=o;_e>0;h=h*256+e[a+tt],tt+=nt,_e-=8);if(d===0)d=1-$;else{if(d===_)return h?NaN:(lt?-1:1)*(1/0);h=h+Math.pow(2,o),d=d-$}return(lt?-1:1)*h*Math.pow(2,d-o)};ieee754.write=function(e,a,s,o,c,d){var h,g,_,$=d*8-c-1,_e=(1<<$)-1,tt=_e>>1,nt=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,lt=o?0:d-1,dt=o?1:-1,ot=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(g=isNaN(a)?1:0,h=_e):(h=Math.floor(Math.log(a)/Math.LN2),a*(_=Math.pow(2,-h))<1&&(h--,_*=2),h+tt>=1?a+=nt/_:a+=nt*Math.pow(2,1-tt),a*_>=2&&(h++,_/=2),h+tt>=_e?(g=0,h=_e):h+tt>=1?(g=(a*_-1)*Math.pow(2,c),h=h+tt):(g=a*Math.pow(2,tt-1)*Math.pow(2,c),h=0));c>=8;e[s+lt]=g&255,lt+=dt,g/=256,c-=8);for(h=h<<c|g,$+=c;$>0;e[s+lt]=h&255,lt+=dt,h/=256,$-=8);e[s+lt-dt]|=ot*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const a=base64Js,s=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=g,e.SlowBuffer=mt,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,g.TYPED_ARRAY_SUPPORT=d(),!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const ft=new Uint8Array(1),rt={foo:function(){return 42}};return Object.setPrototypeOf(rt,Uint8Array.prototype),Object.setPrototypeOf(ft,rt),ft.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}});function h(ft){if(ft>c)throw new RangeError('The value "'+ft+'" is invalid for option "size"');const rt=new Uint8Array(ft);return Object.setPrototypeOf(rt,g.prototype),rt}function g(ft,rt,it){if(typeof ft=="number"){if(typeof rt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return tt(ft)}return _(ft,rt,it)}g.poolSize=8192;function _(ft,rt,it){if(typeof ft=="string")return nt(ft,rt);if(ArrayBuffer.isView(ft))return dt(ft);if(ft==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ft);if(yr(ft,ArrayBuffer)||ft&&yr(ft.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(yr(ft,SharedArrayBuffer)||ft&&yr(ft.buffer,SharedArrayBuffer)))return ot(ft,rt,it);if(typeof ft=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const xt=ft.valueOf&&ft.valueOf();if(xt!=null&&xt!==ft)return g.from(xt,rt,it);const Ct=gt(ft);if(Ct)return Ct;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ft[Symbol.toPrimitive]=="function")return g.from(ft[Symbol.toPrimitive]("string"),rt,it);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ft)}g.from=function(ft,rt,it){return _(ft,rt,it)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array);function $(ft){if(typeof ft!="number")throw new TypeError('"size" argument must be of type number');if(ft<0)throw new RangeError('The value "'+ft+'" is invalid for option "size"')}function _e(ft,rt,it){return $(ft),ft<=0?h(ft):rt!==void 0?typeof it=="string"?h(ft).fill(rt,it):h(ft).fill(rt):h(ft)}g.alloc=function(ft,rt,it){return _e(ft,rt,it)};function tt(ft){return $(ft),h(ft<0?0:pt(ft)|0)}g.allocUnsafe=function(ft){return tt(ft)},g.allocUnsafeSlow=function(ft){return tt(ft)};function nt(ft,rt){if((typeof rt!="string"||rt==="")&&(rt="utf8"),!g.isEncoding(rt))throw new TypeError("Unknown encoding: "+rt);const it=ht(ft,rt)|0;let xt=h(it);const Ct=xt.write(ft,rt);return Ct!==it&&(xt=xt.slice(0,Ct)),xt}function lt(ft){const rt=ft.length<0?0:pt(ft.length)|0,it=h(rt);for(let xt=0;xt<rt;xt+=1)it[xt]=ft[xt]&255;return it}function dt(ft){if(yr(ft,Uint8Array)){const rt=new Uint8Array(ft);return ot(rt.buffer,rt.byteOffset,rt.byteLength)}return lt(ft)}function ot(ft,rt,it){if(rt<0||ft.byteLength<rt)throw new RangeError('"offset" is outside of buffer bounds');if(ft.byteLength<rt+(it||0))throw new RangeError('"length" is outside of buffer bounds');let xt;return rt===void 0&&it===void 0?xt=new Uint8Array(ft):it===void 0?xt=new Uint8Array(ft,rt):xt=new Uint8Array(ft,rt,it),Object.setPrototypeOf(xt,g.prototype),xt}function gt(ft){if(g.isBuffer(ft)){const rt=pt(ft.length)|0,it=h(rt);return it.length===0||ft.copy(it,0,0,rt),it}if(ft.length!==void 0)return typeof ft.length!="number"||Gr(ft.length)?h(0):lt(ft);if(ft.type==="Buffer"&&Array.isArray(ft.data))return lt(ft.data)}function pt(ft){if(ft>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ft|0}function mt(ft){return+ft!=ft&&(ft=0),g.alloc(+ft)}g.isBuffer=function(rt){return rt!=null&&rt._isBuffer===!0&&rt!==g.prototype},g.compare=function(rt,it){if(yr(rt,Uint8Array)&&(rt=g.from(rt,rt.offset,rt.byteLength)),yr(it,Uint8Array)&&(it=g.from(it,it.offset,it.byteLength)),!g.isBuffer(rt)||!g.isBuffer(it))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(rt===it)return 0;let xt=rt.length,Ct=it.length;for(let jt=0,Wt=Math.min(xt,Ct);jt<Wt;++jt)if(rt[jt]!==it[jt]){xt=rt[jt],Ct=it[jt];break}return xt<Ct?-1:Ct<xt?1:0},g.isEncoding=function(rt){switch(String(rt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(rt,it){if(!Array.isArray(rt))throw new TypeError('"list" argument must be an Array of Buffers');if(rt.length===0)return g.alloc(0);let xt;if(it===void 0)for(it=0,xt=0;xt<rt.length;++xt)it+=rt[xt].length;const Ct=g.allocUnsafe(it);let jt=0;for(xt=0;xt<rt.length;++xt){let Wt=rt[xt];if(yr(Wt,Uint8Array))jt+Wt.length>Ct.length?(g.isBuffer(Wt)||(Wt=g.from(Wt)),Wt.copy(Ct,jt)):Uint8Array.prototype.set.call(Ct,Wt,jt);else if(g.isBuffer(Wt))Wt.copy(Ct,jt);else throw new TypeError('"list" argument must be an Array of Buffers');jt+=Wt.length}return Ct};function ht(ft,rt){if(g.isBuffer(ft))return ft.length;if(ArrayBuffer.isView(ft)||yr(ft,ArrayBuffer))return ft.byteLength;if(typeof ft!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ft);const it=ft.length,xt=arguments.length>2&&arguments[2]===!0;if(!xt&&it===0)return 0;let Ct=!1;for(;;)switch(rt){case"ascii":case"latin1":case"binary":return it;case"utf8":case"utf-8":return hr(ft).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it*2;case"hex":return it>>>1;case"base64":return Dr(ft).length;default:if(Ct)return xt?-1:hr(ft).length;rt=(""+rt).toLowerCase(),Ct=!0}}g.byteLength=ht;function St(ft,rt,it){let xt=!1;if((rt===void 0||rt<0)&&(rt=0),rt>this.length||((it===void 0||it>this.length)&&(it=this.length),it<=0)||(it>>>=0,rt>>>=0,it<=rt))return"";for(ft||(ft="utf8");;)switch(ft){case"hex":return nr(this,rt,it);case"utf8":case"utf-8":return vr(this,rt,it);case"ascii":return br(this,rt,it);case"latin1":case"binary":return Gt(this,rt,it);case"base64":return Ut(this,rt,it);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return or(this,rt,it);default:if(xt)throw new TypeError("Unknown encoding: "+ft);ft=(ft+"").toLowerCase(),xt=!0}}g.prototype._isBuffer=!0;function _t(ft,rt,it){const xt=ft[rt];ft[rt]=ft[it],ft[it]=xt}g.prototype.swap16=function(){const rt=this.length;if(rt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let it=0;it<rt;it+=2)_t(this,it,it+1);return this},g.prototype.swap32=function(){const rt=this.length;if(rt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let it=0;it<rt;it+=4)_t(this,it,it+3),_t(this,it+1,it+2);return this},g.prototype.swap64=function(){const rt=this.length;if(rt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let it=0;it<rt;it+=8)_t(this,it,it+7),_t(this,it+1,it+6),_t(this,it+2,it+5),_t(this,it+3,it+4);return this},g.prototype.toString=function(){const rt=this.length;return rt===0?"":arguments.length===0?vr(this,0,rt):St.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(rt){if(!g.isBuffer(rt))throw new TypeError("Argument must be a Buffer");return this===rt?!0:g.compare(this,rt)===0},g.prototype.inspect=function(){let rt="";const it=e.INSPECT_MAX_BYTES;return rt=this.toString("hex",0,it).replace(/(.{2})/g,"$1 ").trim(),this.length>it&&(rt+=" ... "),"<Buffer "+rt+">"},o&&(g.prototype[o]=g.prototype.inspect),g.prototype.compare=function(rt,it,xt,Ct,jt){if(yr(rt,Uint8Array)&&(rt=g.from(rt,rt.offset,rt.byteLength)),!g.isBuffer(rt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof rt);if(it===void 0&&(it=0),xt===void 0&&(xt=rt?rt.length:0),Ct===void 0&&(Ct=0),jt===void 0&&(jt=this.length),it<0||xt>rt.length||Ct<0||jt>this.length)throw new RangeError("out of range index");if(Ct>=jt&&it>=xt)return 0;if(Ct>=jt)return-1;if(it>=xt)return 1;if(it>>>=0,xt>>>=0,Ct>>>=0,jt>>>=0,this===rt)return 0;let Wt=jt-Ct,Er=xt-it;const $r=Math.min(Wt,Er),er=this.slice(Ct,jt),Br=rt.slice(it,xt);for(let Ir=0;Ir<$r;++Ir)if(er[Ir]!==Br[Ir]){Wt=er[Ir],Er=Br[Ir];break}return Wt<Er?-1:Er<Wt?1:0};function Tt(ft,rt,it,xt,Ct){if(ft.length===0)return-1;if(typeof it=="string"?(xt=it,it=0):it>2147483647?it=2147483647:it<-2147483648&&(it=-2147483648),it=+it,Gr(it)&&(it=Ct?0:ft.length-1),it<0&&(it=ft.length+it),it>=ft.length){if(Ct)return-1;it=ft.length-1}else if(it<0)if(Ct)it=0;else return-1;if(typeof rt=="string"&&(rt=g.from(rt,xt)),g.isBuffer(rt))return rt.length===0?-1:ut(ft,rt,it,xt,Ct);if(typeof rt=="number")return rt=rt&255,typeof Uint8Array.prototype.indexOf=="function"?Ct?Uint8Array.prototype.indexOf.call(ft,rt,it):Uint8Array.prototype.lastIndexOf.call(ft,rt,it):ut(ft,[rt],it,xt,Ct);throw new TypeError("val must be string, number or Buffer")}function ut(ft,rt,it,xt,Ct){let jt=1,Wt=ft.length,Er=rt.length;if(xt!==void 0&&(xt=String(xt).toLowerCase(),xt==="ucs2"||xt==="ucs-2"||xt==="utf16le"||xt==="utf-16le")){if(ft.length<2||rt.length<2)return-1;jt=2,Wt/=2,Er/=2,it/=2}function $r(Br,Ir){return jt===1?Br[Ir]:Br.readUInt16BE(Ir*jt)}let er;if(Ct){let Br=-1;for(er=it;er<Wt;er++)if($r(ft,er)===$r(rt,Br===-1?0:er-Br)){if(Br===-1&&(Br=er),er-Br+1===Er)return Br*jt}else Br!==-1&&(er-=er-Br),Br=-1}else for(it+Er>Wt&&(it=Wt-Er),er=it;er>=0;er--){let Br=!0;for(let Ir=0;Ir<Er;Ir++)if($r(ft,er+Ir)!==$r(rt,Ir)){Br=!1;break}if(Br)return er}return-1}g.prototype.includes=function(rt,it,xt){return this.indexOf(rt,it,xt)!==-1},g.prototype.indexOf=function(rt,it,xt){return Tt(this,rt,it,xt,!0)},g.prototype.lastIndexOf=function(rt,it,xt){return Tt(this,rt,it,xt,!1)};function bt(ft,rt,it,xt){it=Number(it)||0;const Ct=ft.length-it;xt?(xt=Number(xt),xt>Ct&&(xt=Ct)):xt=Ct;const jt=rt.length;xt>jt/2&&(xt=jt/2);let Wt;for(Wt=0;Wt<xt;++Wt){const Er=parseInt(rt.substr(Wt*2,2),16);if(Gr(Er))return Wt;ft[it+Wt]=Er}return Wt}function zt(ft,rt,it,xt){return Ur(hr(rt,ft.length-it),ft,it,xt)}function Ht(ft,rt,it,xt){return Ur(Fr(rt),ft,it,xt)}function Qt(ft,rt,it,xt){return Ur(Dr(rt),ft,it,xt)}function sr(ft,rt,it,xt){return Ur(Or(rt,ft.length-it),ft,it,xt)}g.prototype.write=function(rt,it,xt,Ct){if(it===void 0)Ct="utf8",xt=this.length,it=0;else if(xt===void 0&&typeof it=="string")Ct=it,xt=this.length,it=0;else if(isFinite(it))it=it>>>0,isFinite(xt)?(xt=xt>>>0,Ct===void 0&&(Ct="utf8")):(Ct=xt,xt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const jt=this.length-it;if((xt===void 0||xt>jt)&&(xt=jt),rt.length>0&&(xt<0||it<0)||it>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ct||(Ct="utf8");let Wt=!1;for(;;)switch(Ct){case"hex":return bt(this,rt,it,xt);case"utf8":case"utf-8":return zt(this,rt,it,xt);case"ascii":case"latin1":case"binary":return Ht(this,rt,it,xt);case"base64":return Qt(this,rt,it,xt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sr(this,rt,it,xt);default:if(Wt)throw new TypeError("Unknown encoding: "+Ct);Ct=(""+Ct).toLowerCase(),Wt=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ut(ft,rt,it){return rt===0&&it===ft.length?a.fromByteArray(ft):a.fromByteArray(ft.slice(rt,it))}function vr(ft,rt,it){it=Math.min(ft.length,it);const xt=[];let Ct=rt;for(;Ct<it;){const jt=ft[Ct];let Wt=null,Er=jt>239?4:jt>223?3:jt>191?2:1;if(Ct+Er<=it){let $r,er,Br,Ir;switch(Er){case 1:jt<128&&(Wt=jt);break;case 2:$r=ft[Ct+1],($r&192)===128&&(Ir=(jt&31)<<6|$r&63,Ir>127&&(Wt=Ir));break;case 3:$r=ft[Ct+1],er=ft[Ct+2],($r&192)===128&&(er&192)===128&&(Ir=(jt&15)<<12|($r&63)<<6|er&63,Ir>2047&&(Ir<55296||Ir>57343)&&(Wt=Ir));break;case 4:$r=ft[Ct+1],er=ft[Ct+2],Br=ft[Ct+3],($r&192)===128&&(er&192)===128&&(Br&192)===128&&(Ir=(jt&15)<<18|($r&63)<<12|(er&63)<<6|Br&63,Ir>65535&&Ir<1114112&&(Wt=Ir))}}Wt===null?(Wt=65533,Er=1):Wt>65535&&(Wt-=65536,xt.push(Wt>>>10&1023|55296),Wt=56320|Wt&1023),xt.push(Wt),Ct+=Er}return mr(xt)}const xr=4096;function mr(ft){const rt=ft.length;if(rt<=xr)return String.fromCharCode.apply(String,ft);let it="",xt=0;for(;xt<rt;)it+=String.fromCharCode.apply(String,ft.slice(xt,xt+=xr));return it}function br(ft,rt,it){let xt="";it=Math.min(ft.length,it);for(let Ct=rt;Ct<it;++Ct)xt+=String.fromCharCode(ft[Ct]&127);return xt}function Gt(ft,rt,it){let xt="";it=Math.min(ft.length,it);for(let Ct=rt;Ct<it;++Ct)xt+=String.fromCharCode(ft[Ct]);return xt}function nr(ft,rt,it){const xt=ft.length;(!rt||rt<0)&&(rt=0),(!it||it<0||it>xt)&&(it=xt);let Ct="";for(let jt=rt;jt<it;++jt)Ct+=yn[ft[jt]];return Ct}function or(ft,rt,it){const xt=ft.slice(rt,it);let Ct="";for(let jt=0;jt<xt.length-1;jt+=2)Ct+=String.fromCharCode(xt[jt]+xt[jt+1]*256);return Ct}g.prototype.slice=function(rt,it){const xt=this.length;rt=~~rt,it=it===void 0?xt:~~it,rt<0?(rt+=xt,rt<0&&(rt=0)):rt>xt&&(rt=xt),it<0?(it+=xt,it<0&&(it=0)):it>xt&&(it=xt),it<rt&&(it=rt);const Ct=this.subarray(rt,it);return Object.setPrototypeOf(Ct,g.prototype),Ct};function ir(ft,rt,it){if(ft%1!==0||ft<0)throw new RangeError("offset is not uint");if(ft+rt>it)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(rt,it,xt){rt=rt>>>0,it=it>>>0,xt||ir(rt,it,this.length);let Ct=this[rt],jt=1,Wt=0;for(;++Wt<it&&(jt*=256);)Ct+=this[rt+Wt]*jt;return Ct},g.prototype.readUintBE=g.prototype.readUIntBE=function(rt,it,xt){rt=rt>>>0,it=it>>>0,xt||ir(rt,it,this.length);let Ct=this[rt+--it],jt=1;for(;it>0&&(jt*=256);)Ct+=this[rt+--it]*jt;return Ct},g.prototype.readUint8=g.prototype.readUInt8=function(rt,it){return rt=rt>>>0,it||ir(rt,1,this.length),this[rt]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(rt,it){return rt=rt>>>0,it||ir(rt,2,this.length),this[rt]|this[rt+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(rt,it){return rt=rt>>>0,it||ir(rt,2,this.length),this[rt]<<8|this[rt+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(rt,it){return rt=rt>>>0,it||ir(rt,4,this.length),(this[rt]|this[rt+1]<<8|this[rt+2]<<16)+this[rt+3]*16777216},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(rt,it){return rt=rt>>>0,it||ir(rt,4,this.length),this[rt]*16777216+(this[rt+1]<<16|this[rt+2]<<8|this[rt+3])},g.prototype.readBigUInt64LE=qr(function(rt){rt=rt>>>0,Nt(rt,"offset");const it=this[rt],xt=this[rt+7];(it===void 0||xt===void 0)&&Ot(rt,this.length-8);const Ct=it+this[++rt]*2**8+this[++rt]*2**16+this[++rt]*2**24,jt=this[++rt]+this[++rt]*2**8+this[++rt]*2**16+xt*2**24;return BigInt(Ct)+(BigInt(jt)<<BigInt(32))}),g.prototype.readBigUInt64BE=qr(function(rt){rt=rt>>>0,Nt(rt,"offset");const it=this[rt],xt=this[rt+7];(it===void 0||xt===void 0)&&Ot(rt,this.length-8);const Ct=it*2**24+this[++rt]*2**16+this[++rt]*2**8+this[++rt],jt=this[++rt]*2**24+this[++rt]*2**16+this[++rt]*2**8+xt;return(BigInt(Ct)<<BigInt(32))+BigInt(jt)}),g.prototype.readIntLE=function(rt,it,xt){rt=rt>>>0,it=it>>>0,xt||ir(rt,it,this.length);let Ct=this[rt],jt=1,Wt=0;for(;++Wt<it&&(jt*=256);)Ct+=this[rt+Wt]*jt;return jt*=128,Ct>=jt&&(Ct-=Math.pow(2,8*it)),Ct},g.prototype.readIntBE=function(rt,it,xt){rt=rt>>>0,it=it>>>0,xt||ir(rt,it,this.length);let Ct=it,jt=1,Wt=this[rt+--Ct];for(;Ct>0&&(jt*=256);)Wt+=this[rt+--Ct]*jt;return jt*=128,Wt>=jt&&(Wt-=Math.pow(2,8*it)),Wt},g.prototype.readInt8=function(rt,it){return rt=rt>>>0,it||ir(rt,1,this.length),this[rt]&128?(255-this[rt]+1)*-1:this[rt]},g.prototype.readInt16LE=function(rt,it){rt=rt>>>0,it||ir(rt,2,this.length);const xt=this[rt]|this[rt+1]<<8;return xt&32768?xt|4294901760:xt},g.prototype.readInt16BE=function(rt,it){rt=rt>>>0,it||ir(rt,2,this.length);const xt=this[rt+1]|this[rt]<<8;return xt&32768?xt|4294901760:xt},g.prototype.readInt32LE=function(rt,it){return rt=rt>>>0,it||ir(rt,4,this.length),this[rt]|this[rt+1]<<8|this[rt+2]<<16|this[rt+3]<<24},g.prototype.readInt32BE=function(rt,it){return rt=rt>>>0,it||ir(rt,4,this.length),this[rt]<<24|this[rt+1]<<16|this[rt+2]<<8|this[rt+3]},g.prototype.readBigInt64LE=qr(function(rt){rt=rt>>>0,Nt(rt,"offset");const it=this[rt],xt=this[rt+7];(it===void 0||xt===void 0)&&Ot(rt,this.length-8);const Ct=this[rt+4]+this[rt+5]*2**8+this[rt+6]*2**16+(xt<<24);return(BigInt(Ct)<<BigInt(32))+BigInt(it+this[++rt]*2**8+this[++rt]*2**16+this[++rt]*2**24)}),g.prototype.readBigInt64BE=qr(function(rt){rt=rt>>>0,Nt(rt,"offset");const it=this[rt],xt=this[rt+7];(it===void 0||xt===void 0)&&Ot(rt,this.length-8);const Ct=(it<<24)+this[++rt]*2**16+this[++rt]*2**8+this[++rt];return(BigInt(Ct)<<BigInt(32))+BigInt(this[++rt]*2**24+this[++rt]*2**16+this[++rt]*2**8+xt)}),g.prototype.readFloatLE=function(rt,it){return rt=rt>>>0,it||ir(rt,4,this.length),s.read(this,rt,!0,23,4)},g.prototype.readFloatBE=function(rt,it){return rt=rt>>>0,it||ir(rt,4,this.length),s.read(this,rt,!1,23,4)},g.prototype.readDoubleLE=function(rt,it){return rt=rt>>>0,it||ir(rt,8,this.length),s.read(this,rt,!0,52,8)},g.prototype.readDoubleBE=function(rt,it){return rt=rt>>>0,it||ir(rt,8,this.length),s.read(this,rt,!1,52,8)};function wr(ft,rt,it,xt,Ct,jt){if(!g.isBuffer(ft))throw new TypeError('"buffer" argument must be a Buffer instance');if(rt>Ct||rt<jt)throw new RangeError('"value" argument is out of bounds');if(it+xt>ft.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(rt,it,xt,Ct){if(rt=+rt,it=it>>>0,xt=xt>>>0,!Ct){const Er=Math.pow(2,8*xt)-1;wr(this,rt,it,xt,Er,0)}let jt=1,Wt=0;for(this[it]=rt&255;++Wt<xt&&(jt*=256);)this[it+Wt]=rt/jt&255;return it+xt},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(rt,it,xt,Ct){if(rt=+rt,it=it>>>0,xt=xt>>>0,!Ct){const Er=Math.pow(2,8*xt)-1;wr(this,rt,it,xt,Er,0)}let jt=xt-1,Wt=1;for(this[it+jt]=rt&255;--jt>=0&&(Wt*=256);)this[it+jt]=rt/Wt&255;return it+xt},g.prototype.writeUint8=g.prototype.writeUInt8=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,1,255,0),this[it]=rt&255,it+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,2,65535,0),this[it]=rt&255,this[it+1]=rt>>>8,it+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,2,65535,0),this[it]=rt>>>8,this[it+1]=rt&255,it+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,4,4294967295,0),this[it+3]=rt>>>24,this[it+2]=rt>>>16,this[it+1]=rt>>>8,this[it]=rt&255,it+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,4,4294967295,0),this[it]=rt>>>24,this[it+1]=rt>>>16,this[it+2]=rt>>>8,this[it+3]=rt&255,it+4};function fr(ft,rt,it,xt,Ct){Pr(rt,xt,Ct,ft,it,7);let jt=Number(rt&BigInt(4294967295));ft[it++]=jt,jt=jt>>8,ft[it++]=jt,jt=jt>>8,ft[it++]=jt,jt=jt>>8,ft[it++]=jt;let Wt=Number(rt>>BigInt(32)&BigInt(4294967295));return ft[it++]=Wt,Wt=Wt>>8,ft[it++]=Wt,Wt=Wt>>8,ft[it++]=Wt,Wt=Wt>>8,ft[it++]=Wt,it}function Ar(ft,rt,it,xt,Ct){Pr(rt,xt,Ct,ft,it,7);let jt=Number(rt&BigInt(4294967295));ft[it+7]=jt,jt=jt>>8,ft[it+6]=jt,jt=jt>>8,ft[it+5]=jt,jt=jt>>8,ft[it+4]=jt;let Wt=Number(rt>>BigInt(32)&BigInt(4294967295));return ft[it+3]=Wt,Wt=Wt>>8,ft[it+2]=Wt,Wt=Wt>>8,ft[it+1]=Wt,Wt=Wt>>8,ft[it]=Wt,it+8}g.prototype.writeBigUInt64LE=qr(function(rt,it=0){return fr(this,rt,it,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=qr(function(rt,it=0){return Ar(this,rt,it,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(rt,it,xt,Ct){if(rt=+rt,it=it>>>0,!Ct){const $r=Math.pow(2,8*xt-1);wr(this,rt,it,xt,$r-1,-$r)}let jt=0,Wt=1,Er=0;for(this[it]=rt&255;++jt<xt&&(Wt*=256);)rt<0&&Er===0&&this[it+jt-1]!==0&&(Er=1),this[it+jt]=(rt/Wt>>0)-Er&255;return it+xt},g.prototype.writeIntBE=function(rt,it,xt,Ct){if(rt=+rt,it=it>>>0,!Ct){const $r=Math.pow(2,8*xt-1);wr(this,rt,it,xt,$r-1,-$r)}let jt=xt-1,Wt=1,Er=0;for(this[it+jt]=rt&255;--jt>=0&&(Wt*=256);)rt<0&&Er===0&&this[it+jt+1]!==0&&(Er=1),this[it+jt]=(rt/Wt>>0)-Er&255;return it+xt},g.prototype.writeInt8=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,1,127,-128),rt<0&&(rt=255+rt+1),this[it]=rt&255,it+1},g.prototype.writeInt16LE=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,2,32767,-32768),this[it]=rt&255,this[it+1]=rt>>>8,it+2},g.prototype.writeInt16BE=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,2,32767,-32768),this[it]=rt>>>8,this[it+1]=rt&255,it+2},g.prototype.writeInt32LE=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,4,2147483647,-2147483648),this[it]=rt&255,this[it+1]=rt>>>8,this[it+2]=rt>>>16,this[it+3]=rt>>>24,it+4},g.prototype.writeInt32BE=function(rt,it,xt){return rt=+rt,it=it>>>0,xt||wr(this,rt,it,4,2147483647,-2147483648),rt<0&&(rt=4294967295+rt+1),this[it]=rt>>>24,this[it+1]=rt>>>16,this[it+2]=rt>>>8,this[it+3]=rt&255,it+4},g.prototype.writeBigInt64LE=qr(function(rt,it=0){return fr(this,rt,it,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=qr(function(rt,it=0){return Ar(this,rt,it,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Lr(ft,rt,it,xt,Ct,jt){if(it+xt>ft.length)throw new RangeError("Index out of range");if(it<0)throw new RangeError("Index out of range")}function zr(ft,rt,it,xt,Ct){return rt=+rt,it=it>>>0,Ct||Lr(ft,rt,it,4),s.write(ft,rt,it,xt,23,4),it+4}g.prototype.writeFloatLE=function(rt,it,xt){return zr(this,rt,it,!0,xt)},g.prototype.writeFloatBE=function(rt,it,xt){return zr(this,rt,it,!1,xt)};function Hr(ft,rt,it,xt,Ct){return rt=+rt,it=it>>>0,Ct||Lr(ft,rt,it,8),s.write(ft,rt,it,xt,52,8),it+8}g.prototype.writeDoubleLE=function(rt,it,xt){return Hr(this,rt,it,!0,xt)},g.prototype.writeDoubleBE=function(rt,it,xt){return Hr(this,rt,it,!1,xt)},g.prototype.copy=function(rt,it,xt,Ct){if(!g.isBuffer(rt))throw new TypeError("argument should be a Buffer");if(xt||(xt=0),!Ct&&Ct!==0&&(Ct=this.length),it>=rt.length&&(it=rt.length),it||(it=0),Ct>0&&Ct<xt&&(Ct=xt),Ct===xt||rt.length===0||this.length===0)return 0;if(it<0)throw new RangeError("targetStart out of bounds");if(xt<0||xt>=this.length)throw new RangeError("Index out of range");if(Ct<0)throw new RangeError("sourceEnd out of bounds");Ct>this.length&&(Ct=this.length),rt.length-it<Ct-xt&&(Ct=rt.length-it+xt);const jt=Ct-xt;return this===rt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(it,xt,Ct):Uint8Array.prototype.set.call(rt,this.subarray(xt,Ct),it),jt},g.prototype.fill=function(rt,it,xt,Ct){if(typeof rt=="string"){if(typeof it=="string"?(Ct=it,it=0,xt=this.length):typeof xt=="string"&&(Ct=xt,xt=this.length),Ct!==void 0&&typeof Ct!="string")throw new TypeError("encoding must be a string");if(typeof Ct=="string"&&!g.isEncoding(Ct))throw new TypeError("Unknown encoding: "+Ct);if(rt.length===1){const Wt=rt.charCodeAt(0);(Ct==="utf8"&&Wt<128||Ct==="latin1")&&(rt=Wt)}}else typeof rt=="number"?rt=rt&255:typeof rt=="boolean"&&(rt=Number(rt));if(it<0||this.length<it||this.length<xt)throw new RangeError("Out of range index");if(xt<=it)return this;it=it>>>0,xt=xt===void 0?this.length:xt>>>0,rt||(rt=0);let jt;if(typeof rt=="number")for(jt=it;jt<xt;++jt)this[jt]=rt;else{const Wt=g.isBuffer(rt)?rt:g.from(rt,Ct),Er=Wt.length;if(Er===0)throw new TypeError('The value "'+rt+'" is invalid for argument "value"');for(jt=0;jt<xt-it;++jt)this[jt+it]=Wt[jt%Er]}return this};const Jr={};function pr(ft,rt,it){Jr[ft]=class extends it{constructor(){super(),Object.defineProperty(this,"message",{value:rt.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ft}]`,this.stack,delete this.name}get code(){return ft}set code(Ct){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ct,writable:!0})}toString(){return`${this.name} [${ft}]: ${this.message}`}}}pr("ERR_BUFFER_OUT_OF_BOUNDS",function(ft){return ft?`${ft} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pr("ERR_INVALID_ARG_TYPE",function(ft,rt){return`The "${ft}" argument must be of type number. Received type ${typeof rt}`},TypeError),pr("ERR_OUT_OF_RANGE",function(ft,rt,it){let xt=`The value of "${ft}" is out of range.`,Ct=it;return Number.isInteger(it)&&Math.abs(it)>2**32?Ct=hn(String(it)):typeof it=="bigint"&&(Ct=String(it),(it>BigInt(2)**BigInt(32)||it<-(BigInt(2)**BigInt(32)))&&(Ct=hn(Ct)),Ct+="n"),xt+=` It must be ${rt}. Received ${Ct}`,xt},RangeError);function hn(ft){let rt="",it=ft.length;const xt=ft[0]==="-"?1:0;for(;it>=xt+4;it-=3)rt=`_${ft.slice(it-3,it)}${rt}`;return`${ft.slice(0,it)}${rt}`}function nn(ft,rt,it){Nt(rt,"offset"),(ft[rt]===void 0||ft[rt+it]===void 0)&&Ot(rt,ft.length-(it+1))}function Pr(ft,rt,it,xt,Ct,jt){if(ft>it||ft<rt){const Wt=typeof rt=="bigint"?"n":"";let Er;throw rt===0||rt===BigInt(0)?Er=`>= 0${Wt} and < 2${Wt} ** ${(jt+1)*8}${Wt}`:Er=`>= -(2${Wt} ** ${(jt+1)*8-1}${Wt}) and < 2 ** ${(jt+1)*8-1}${Wt}`,new Jr.ERR_OUT_OF_RANGE("value",Er,ft)}nn(xt,Ct,jt)}function Nt(ft,rt){if(typeof ft!="number")throw new Jr.ERR_INVALID_ARG_TYPE(rt,"number",ft)}function Ot(ft,rt,it){throw Math.floor(ft)!==ft?(Nt(ft,it),new Jr.ERR_OUT_OF_RANGE("offset","an integer",ft)):rt<0?new Jr.ERR_BUFFER_OUT_OF_BOUNDS:new Jr.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${rt}`,ft)}const qt=/[^+/0-9A-Za-z-_]/g;function gr(ft){if(ft=ft.split("=")[0],ft=ft.trim().replace(qt,""),ft.length<2)return"";for(;ft.length%4!==0;)ft=ft+"=";return ft}function hr(ft,rt){rt=rt||1/0;let it;const xt=ft.length;let Ct=null;const jt=[];for(let Wt=0;Wt<xt;++Wt){if(it=ft.charCodeAt(Wt),it>55295&&it<57344){if(!Ct){if(it>56319){(rt-=3)>-1&&jt.push(239,191,189);continue}else if(Wt+1===xt){(rt-=3)>-1&&jt.push(239,191,189);continue}Ct=it;continue}if(it<56320){(rt-=3)>-1&&jt.push(239,191,189),Ct=it;continue}it=(Ct-55296<<10|it-56320)+65536}else Ct&&(rt-=3)>-1&&jt.push(239,191,189);if(Ct=null,it<128){if((rt-=1)<0)break;jt.push(it)}else if(it<2048){if((rt-=2)<0)break;jt.push(it>>6|192,it&63|128)}else if(it<65536){if((rt-=3)<0)break;jt.push(it>>12|224,it>>6&63|128,it&63|128)}else if(it<1114112){if((rt-=4)<0)break;jt.push(it>>18|240,it>>12&63|128,it>>6&63|128,it&63|128)}else throw new Error("Invalid code point")}return jt}function Fr(ft){const rt=[];for(let it=0;it<ft.length;++it)rt.push(ft.charCodeAt(it)&255);return rt}function Or(ft,rt){let it,xt,Ct;const jt=[];for(let Wt=0;Wt<ft.length&&!((rt-=2)<0);++Wt)it=ft.charCodeAt(Wt),xt=it>>8,Ct=it%256,jt.push(Ct),jt.push(xt);return jt}function Dr(ft){return a.toByteArray(gr(ft))}function Ur(ft,rt,it,xt){let Ct;for(Ct=0;Ct<xt&&!(Ct+it>=rt.length||Ct>=ft.length);++Ct)rt[Ct+it]=ft[Ct];return Ct}function yr(ft,rt){return ft instanceof rt||ft!=null&&ft.constructor!=null&&ft.constructor.name!=null&&ft.constructor.name===rt.name}function Gr(ft){return ft!==ft}const yn=function(){const ft="0123456789abcdef",rt=new Array(256);for(let it=0;it<16;++it){const xt=it*16;for(let Ct=0;Ct<16;++Ct)rt[xt+Ct]=ft[it]+ft[Ct]}return rt}();function qr(ft){return typeof BigInt>"u"?un:ft}function un(){throw new Error("BigInt not supported")}})(buffer);var browser$3={exports:{}},process$5=browser$3.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch{try{return cachedSetTimeout.call(null,e,0)}catch{return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch{try{return cachedClearTimeout.call(null,e)}catch{return cachedClearTimeout.call(this,e)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var a=queue.length;a;){for(currentQueue=queue,queue=[];++queueIndex<a;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,a=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}process$5.nextTick=function(e){var a=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)a[s-1]=arguments[s];queue.push(new Item(e,a)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(e,a){this.fun=e,this.array=a}Item.prototype.run=function(){this.fun.apply(null,this.array)};process$5.title="browser";process$5.browser=!0;process$5.env={};process$5.argv=[];process$5.version="";process$5.versions={};function noop$2(){}process$5.on=noop$2;process$5.addListener=noop$2;process$5.once=noop$2;process$5.off=noop$2;process$5.removeListener=noop$2;process$5.removeAllListeners=noop$2;process$5.emit=noop$2;process$5.prependListener=noop$2;process$5.prependOnceListener=noop$2;process$5.listeners=function(e){return[]};process$5.binding=function(e){throw new Error("process.binding is not supported")};process$5.cwd=function(){return"/"};process$5.chdir=function(e){throw new Error("process.chdir is not supported")};process$5.umask=function(){return 0};var browserExports$2=browser$3.exports;const process$6=getDefaultExportFromCjs(browserExports$2);window.Buffer=buffer.Buffer;window.process=process$6;var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function a(Gt,nr){var or=Gt.length;Gt.push(nr);e:for(;0<or;){var ir=or-1>>>1,wr=Gt[ir];if(0<c(wr,nr))Gt[ir]=nr,Gt[or]=wr,or=ir;else break e}}function s(Gt){return Gt.length===0?null:Gt[0]}function o(Gt){if(Gt.length===0)return null;var nr=Gt[0],or=Gt.pop();if(or!==nr){Gt[0]=or;e:for(var ir=0,wr=Gt.length,fr=wr>>>1;ir<fr;){var Ar=2*(ir+1)-1,Lr=Gt[Ar],zr=Ar+1,Hr=Gt[zr];if(0>c(Lr,or))zr<wr&&0>c(Hr,Lr)?(Gt[ir]=Hr,Gt[zr]=or,ir=zr):(Gt[ir]=Lr,Gt[Ar]=or,ir=Ar);else if(zr<wr&&0>c(Hr,or))Gt[ir]=Hr,Gt[zr]=or,ir=zr;else break e}}return nr}function c(Gt,nr){var or=Gt.sortIndex-nr.sortIndex;return or!==0?or:Gt.id-nr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var h=Date,g=h.now();e.unstable_now=function(){return h.now()-g}}var _=[],$=[],_e=1,tt=null,nt=3,lt=!1,dt=!1,ot=!1,gt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,mt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ht(Gt){for(var nr=s($);nr!==null;){if(nr.callback===null)o($);else if(nr.startTime<=Gt)o($),nr.sortIndex=nr.expirationTime,a(_,nr);else break;nr=s($)}}function St(Gt){if(ot=!1,ht(Gt),!dt)if(s(_)!==null)dt=!0,mr(_t);else{var nr=s($);nr!==null&&br(St,nr.startTime-Gt)}}function _t(Gt,nr){dt=!1,ot&&(ot=!1,pt(bt),bt=-1),lt=!0;var or=nt;try{for(ht(nr),tt=s(_);tt!==null&&(!(tt.expirationTime>nr)||Gt&&!Qt());){var ir=tt.callback;if(typeof ir=="function"){tt.callback=null,nt=tt.priorityLevel;var wr=ir(tt.expirationTime<=nr);nr=e.unstable_now(),typeof wr=="function"?tt.callback=wr:tt===s(_)&&o(_),ht(nr)}else o(_);tt=s(_)}if(tt!==null)var fr=!0;else{var Ar=s($);Ar!==null&&br(St,Ar.startTime-nr),fr=!1}return fr}finally{tt=null,nt=or,lt=!1}}var Tt=!1,ut=null,bt=-1,zt=5,Ht=-1;function Qt(){return!(e.unstable_now()-Ht<zt)}function sr(){if(ut!==null){var Gt=e.unstable_now();Ht=Gt;var nr=!0;try{nr=ut(!0,Gt)}finally{nr?Ut():(Tt=!1,ut=null)}}else Tt=!1}var Ut;if(typeof mt=="function")Ut=function(){mt(sr)};else if(typeof MessageChannel<"u"){var vr=new MessageChannel,xr=vr.port2;vr.port1.onmessage=sr,Ut=function(){xr.postMessage(null)}}else Ut=function(){gt(sr,0)};function mr(Gt){ut=Gt,Tt||(Tt=!0,Ut())}function br(Gt,nr){bt=gt(function(){Gt(e.unstable_now())},nr)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Gt){Gt.callback=null},e.unstable_continueExecution=function(){dt||lt||(dt=!0,mr(_t))},e.unstable_forceFrameRate=function(Gt){0>Gt||125<Gt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):zt=0<Gt?Math.floor(1e3/Gt):5},e.unstable_getCurrentPriorityLevel=function(){return nt},e.unstable_getFirstCallbackNode=function(){return s(_)},e.unstable_next=function(Gt){switch(nt){case 1:case 2:case 3:var nr=3;break;default:nr=nt}var or=nt;nt=nr;try{return Gt()}finally{nt=or}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Gt,nr){switch(Gt){case 1:case 2:case 3:case 4:case 5:break;default:Gt=3}var or=nt;nt=Gt;try{return nr()}finally{nt=or}},e.unstable_scheduleCallback=function(Gt,nr,or){var ir=e.unstable_now();switch(typeof or=="object"&&or!==null?(or=or.delay,or=typeof or=="number"&&0<or?ir+or:ir):or=ir,Gt){case 1:var wr=-1;break;case 2:wr=250;break;case 5:wr=1073741823;break;case 4:wr=1e4;break;default:wr=5e3}return wr=or+wr,Gt={id:_e++,callback:nr,priorityLevel:Gt,startTime:or,expirationTime:wr,sortIndex:-1},or>ir?(Gt.sortIndex=or,a($,Gt),s(_)===null&&Gt===s($)&&(ot?(pt(bt),bt=-1):ot=!0,br(St,or-ir))):(Gt.sortIndex=wr,a(_,Gt),dt||lt||(dt=!0,mr(_t))),Gt},e.unstable_shouldYield=Qt,e.unstable_wrapCallback=function(Gt){var nr=nt;return function(){var or=nt;nt=nr;try{return Gt.apply(this,arguments)}finally{nt=or}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,a){ha(e,a),ha(e+"Capture",a)}function ha(e,a){for(ea[e]=a,e=0;e<a.length;e++)da.add(a[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,a,s,o){if(s!==null&&s.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return o?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,a,s,o){if(a===null||typeof a>"u"||pa(e,a,s,o))return!0;if(o)return!1;if(s!==null)switch(s.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function v(e,a,s,o,c,d,h){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=e,this.type=a,this.sanitizeURL=d,this.removeEmptyString=h}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var a=e[0];z[a]=new v(a,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var a=e.replace(ra,sa);z[a]=new v(a,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var a=e.replace(ra,sa);z[a]=new v(a,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var a=e.replace(ra,sa);z[a]=new v(a,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,a,s,o){var c=z.hasOwnProperty(a)?z[a]:null;(c!==null?c.type!==0:o||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(qa(a,s,c,o)&&(s=null),o||c===null?oa(a)&&(s===null?e.removeAttribute(a):e.setAttribute(a,""+s)):c.mustUseProperty?e[c.propertyName]=s===null?c.type===3?!1:"":s:(a=c.attributeName,o=c.attributeNamespace,s===null?e.removeAttribute(a):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,o?e.setAttributeNS(o,a,s):e.setAttribute(a,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);La=a&&a[1]||""}return`
`+La+e}var Na=!1;function Oa(e,a){if(!e||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch($){var o=$}Reflect.construct(e,[],a)}else{try{a.call()}catch($){o=$}e.call(a.prototype)}else{try{throw Error()}catch($){o=$}e()}}catch($){if($&&o&&typeof $.stack=="string"){for(var c=$.stack.split(`
`),d=o.stack.split(`
`),h=c.length-1,g=d.length-1;1<=h&&0<=g&&c[h]!==d[g];)g--;for(;1<=h&&0<=g;h--,g--)if(c[h]!==d[g]){if(h!==1||g!==1)do if(h--,g--,0>g||c[h]!==d[g]){var _=`
`+c[h].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=h&&0<=g);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return a=e.displayName||null,a!==null?a:Qa(e.type)||"Memo";case Ha:a=e._payload,e=e._init;try{return Qa(e(a))}catch{}}return null}function Ra(e){var a=e.type;switch(e.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=a.render,e=e.displayName||e.name||"",a.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(a);case 8:return a===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ua(e){var a=Ta(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),o=""+e[a];if(!e.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,d=s.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return c.call(this)},set:function(h){o=""+h,d.call(this,h)}}),Object.defineProperty(e,a,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(h){o=""+h},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),o="";return e&&(o=Ta(e)?e.checked?"true":"false":e.value),e=o,e!==s?(a.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,a){var s=a.checked;return A({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Za(e,a){var s=a.defaultValue==null?"":a.defaultValue,o=a.checked!=null?a.checked:a.defaultChecked;s=Sa(a.value!=null?a.value:s),e._wrapperState={initialChecked:o,initialValue:s,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ab(e,a){a=a.checked,a!=null&&ta(e,"checked",a,!1)}function bb(e,a){ab(e,a);var s=Sa(a.value),o=a.type;if(s!=null)o==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}a.hasOwnProperty("value")?cb(e,a.type,s):a.hasOwnProperty("defaultValue")&&cb(e,a.type,Sa(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(e.defaultChecked=!!a.defaultChecked)}function db$1(e,a,s){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var o=a.type;if(!(o!=="submit"&&o!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+e._wrapperState.initialValue,s||a===e.value||(e.value=a),e.defaultValue=a}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function cb(e,a,s){(a!=="number"||Xa(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var eb=Array.isArray;function fb(e,a,s,o){if(e=e.options,a){a={};for(var c=0;c<s.length;c++)a["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=a.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&o&&(e[s].defaultSelected=!0)}else{for(s=""+Sa(s),a=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}a!==null||e[c].disabled||(a=e[c])}a!==null&&(a.selected=!0)}}function gb(e,a){if(a.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},a,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,a){var s=a.value;if(s==null){if(s=a.children,a=a.defaultValue,s!=null){if(a!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}a=s}a==null&&(a=""),s=a}e._wrapperState={initialValue:Sa(s)}}function ib(e,a){var s=Sa(a.value),o=Sa(a.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),a.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),o!=null&&(e.defaultValue=""+o)}function jb(e){var a=e.textContent;a===e._wrapperState.initialValue&&a!==""&&a!==null&&(e.value=a)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,a){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(a):e==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,s,o,c){MSApp.execUnsafeLocalFunction(function(){return e(a,s,o,c)})}:e}(function(e,a){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=a;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;a.firstChild;)e.appendChild(a.firstChild)}});function ob(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(a){a=a+e.charAt(0).toUpperCase()+e.substring(1),pb[a]=pb[e]})});function rb(e,a,s){return a==null||typeof a=="boolean"||a===""?"":s||typeof a!="number"||a===0||pb.hasOwnProperty(e)&&pb[e]?(""+a).trim():a+"px"}function sb(e,a){e=e.style;for(var s in a)if(a.hasOwnProperty(s)){var o=s.indexOf("--")===0,c=rb(s,a[s],o);s==="float"&&(s="cssFloat"),o?e.setProperty(s,c):e[s]=c}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,a){if(a){if(tb[e]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(p(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(p(61))}if(a.style!=null&&typeof a.style!="object")throw Error(p(62))}}function vb(e,a){if(e.indexOf("-")===-1)return typeof a.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var a=e.stateNode;a&&(a=Db(a),yb(e.stateNode,e.type,a))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,a=Ab;if(Ab=zb=null,Bb(e),a)for(e=0;e<a.length;e++)Bb(a[e])}}function Gb(e,a){return e(a)}function Hb(){}var Ib=!1;function Jb(e,a,s){if(Ib)return e(a,s);Ib=!0;try{return Gb(e,a,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,a){var s=e.stateNode;if(s===null)return null;var o=Db(s);if(o===null)return null;s=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(p(231,a,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,a,s,o,c,d,h,g,_){var $=Array.prototype.slice.call(arguments,3);try{a.apply(s,$)}catch(_e){this.onError(_e)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,a,s,o,c,d,h,g,_){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,a,s,o,c,d,h,g,_){if(Tb.apply(this,arguments),Ob){if(Ob){var $=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=$)}}function Vb(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,a.flags&4098&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function Wb(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var a=e.alternate;if(!a){if(a=Vb(e),a===null)throw Error(p(188));return a!==e?null:e}for(var s=e,o=a;;){var c=s.return;if(c===null)break;var d=c.alternate;if(d===null){if(o=c.return,o!==null){s=o;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===s)return Xb(c),e;if(d===o)return Xb(c),a;d=d.sibling}throw Error(p(188))}if(s.return!==o.return)s=c,o=d;else{for(var h=!1,g=c.child;g;){if(g===s){h=!0,s=c,o=d;break}if(g===o){h=!0,o=c,s=d;break}g=g.sibling}if(!h){for(g=d.child;g;){if(g===s){h=!0,s=d,o=c;break}if(g===o){h=!0,o=d,s=c;break}g=g.sibling}if(!h)throw Error(p(189))}}if(s.alternate!==o)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?e:a}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var a=$b(e);if(a!==null)return a;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,a){var s=e.pendingLanes;if(s===0)return 0;var o=0,c=e.suspendedLanes,d=e.pingedLanes,h=s&268435455;if(h!==0){var g=h&~c;g!==0?o=tc(g):(d&=h,d!==0&&(o=tc(d)))}else h=s&~c,h!==0?o=tc(h):d!==0&&(o=tc(d));if(o===0)return 0;if(a!==0&&a!==o&&!(a&c)&&(c=o&-o,d=a&-a,c>=d||c===16&&(d&4194240)!==0))return a;if(o&4&&(o|=s&16),a=e.entangledLanes,a!==0)for(e=e.entanglements,a&=o;0<a;)s=31-oc(a),c=1<<s,o|=e[s],a&=~c;return o}function vc(e,a){switch(e){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,a){for(var s=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var h=31-oc(d),g=1<<h,_=c[h];_===-1?(!(g&s)||g&o)&&(c[h]=vc(g,a)):_<=a&&(e.expiredLanes|=g),d&=~g}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function Ac(e,a,s){e.pendingLanes|=a,a!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,a=31-oc(a),e[a]=s}function Bc(e,a){var s=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<s;){var c=31-oc(s),d=1<<c;a[c]=0,o[c]=-1,e[c]=-1,s&=~d}}function Cc(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var o=31-oc(s),c=1<<o;c&a|e[o]&a&&(e[o]|=a),s&=~c}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,a){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(a.pointerId)}}function Tc(e,a,s,o,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:a,domEventName:s,eventSystemFlags:o,nativeEvent:d,targetContainers:[c]},a!==null&&(a=Cb(a),a!==null&&Fc(a)),e):(e.eventSystemFlags|=o,a=e.targetContainers,c!==null&&a.indexOf(c)===-1&&a.push(c),e)}function Uc(e,a,s,o,c){switch(a){case"focusin":return Lc=Tc(Lc,e,a,s,o,c),!0;case"dragenter":return Mc=Tc(Mc,e,a,s,o,c),!0;case"mouseover":return Nc=Tc(Nc,e,a,s,o,c),!0;case"pointerover":var d=c.pointerId;return Oc.set(d,Tc(Oc.get(d)||null,e,a,s,o,c)),!0;case"gotpointercapture":return d=c.pointerId,Pc.set(d,Tc(Pc.get(d)||null,e,a,s,o,c)),!0}return!1}function Vc(e){var a=Wc(e.target);if(a!==null){var s=Vb(a);if(s!==null){if(a=s.tag,a===13){if(a=Wb(s),a!==null){e.blockedOn=a,Ic(e.priority,function(){Gc(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=Yc(e.domEventName,e.eventSystemFlags,a[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var o=new s.constructor(s.type,s);wb=o,s.target.dispatchEvent(o),wb=null}else return a=Cb(s),a!==null&&Fc(a),e.blockedOn=s,!1;a.shift()}return!0}function Zc(e,a,s){Xc(e)&&s.delete(a)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,a){e.blockedOn===a&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function a(c){return ad(c,e)}if(0<Kc.length){ad(Kc[0],e);for(var s=1;s<Kc.length;s++){var o=Kc[s];o.blockedOn===e&&(o.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(a),Pc.forEach(a),s=0;s<Qc.length;s++)o=Qc[s],o.blockedOn===e&&(o.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,a,s,o){var c=C,d=cd.transition;cd.transition=null;try{C=1,fd(e,a,s,o)}finally{C=c,cd.transition=d}}function gd(e,a,s,o){var c=C,d=cd.transition;cd.transition=null;try{C=4,fd(e,a,s,o)}finally{C=c,cd.transition=d}}function fd(e,a,s,o){if(dd){var c=Yc(e,a,s,o);if(c===null)hd(e,a,o,id$2,s),Sc(e,o);else if(Uc(c,e,a,s,o))o.stopPropagation();else if(Sc(e,o),a&4&&-1<Rc.indexOf(e)){for(;c!==null;){var d=Cb(c);if(d!==null&&Ec(d),d=Yc(e,a,s,o),d===null&&hd(e,a,o,id$2,s),d===c)break;c=d}c!==null&&o.stopPropagation()}else hd(e,a,o,null,s)}}var id$2=null;function Yc(e,a,s,o){if(id$2=null,e=xb(o),e=Wc(e),e!==null)if(a=Vb(e),a===null)e=null;else if(s=a.tag,s===13){if(e=Wb(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null);return id$2=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,a=ld,s=a.length,o,c="value"in kd?kd.value:kd.textContent,d=c.length;for(e=0;e<s&&a[e]===c[e];e++);var h=s-e;for(o=1;o<=h&&a[s-o]===c[d-o];o++);return md=c.slice(e,1<o?1-o:void 0)}function od(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function a(s,o,c,d,h){this._reactName=s,this._targetInst=c,this.type=o,this.nativeEvent=d,this.target=h,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(s=e[g],this[g]=s?s(d):d[g]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),a}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Od[e])?!!a[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var a=Md[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(e,a){switch(e){case"keyup":return $d.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,a){switch(e){case"compositionend":return he(a);case"keypress":return a.which!==32?null:(fe=!0,ee);case"textInput":return e=a.data,e===ee&&fe?null:e;default:return null}}function ke(e,a){if(ie)return e==="compositionend"||!ae&&ge(e,a)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return de&&a.locale!=="ko"?null:a.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!le[e.type]:a==="textarea"}function ne(e,a,s,o){Eb(o),a=oe(a,"onChange"),0<a.length&&(s=new td("onChange","change",null,s,o),e.push({event:s,listeners:a}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var a=ue(e);if(Wa(a))return e}function ve(e,a){if(e==="change")return a}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var a=[];ne(a,qe,e,xb(e)),Jb(re,a)}}function Ce(e,a,s){e==="focusin"?(Ae(),pe=a,qe=s,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,a){if(e==="click")return te(a)}function Fe(e,a){if(e==="input"||e==="change")return te(a)}function Ge(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,a){if(He(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),o=Object.keys(a);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var c=s[o];if(!ja.call(a,c)||!He(e[c],a[c]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,a){var s=Je(e);e=0;for(var o;s;){if(s.nodeType===3){if(o=e+s.textContent.length,e<=a&&o>=a)return{node:s,offset:a-e};e=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Le(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Me(){for(var e=window,a=Xa();a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=Xa(e.document)}return a}function Ne(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}function Oe(e){var a=Me(),s=e.focusedElem,o=e.selectionRange;if(a!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(o!==null&&Ne(s)){if(a=o.start,e=o.end,e===void 0&&(e=a),"selectionStart"in s)s.selectionStart=a,s.selectionEnd=Math.min(e,s.value.length);else if(e=(a=s.ownerDocument||document)&&a.defaultView||window,e.getSelection){e=e.getSelection();var c=s.textContent.length,d=Math.min(o.start,c);o=o.end===void 0?d:Math.min(o.end,c),!e.extend&&d>o&&(c=o,o=d,d=c),c=Ke(s,d);var h=Ke(s,o);c&&h&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(a=a.createRange(),a.setStart(c.node,c.offset),e.removeAllRanges(),d>o?(e.addRange(a),e.extend(h.node,h.offset)):(a.setEnd(h.node,h.offset),e.addRange(a)))}}for(a=[],e=s;e=e.parentNode;)e.nodeType===1&&a.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<a.length;s++)e=a[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,a,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie(Se,o)||(Se=o,o=oe(Re,"onSelect"),0<o.length&&(a=new td("onSelect","select",null,a,s),e.push({event:a,listeners:o}),a.target=Qe)))}function Ve(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var a=We[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in Ye)return Xe[e]=a[s];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,a){df.set(e,a),fa(a,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,a,s){var o=e.type||"unknown-event";e.currentTarget=s,Ub(o,a,void 0,e),e.currentTarget=null}function se(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var o=e[s],c=o.event;o=o.listeners;e:{var d=void 0;if(a)for(var h=o.length-1;0<=h;h--){var g=o[h],_=g.instance,$=g.currentTarget;if(g=g.listener,_!==d&&c.isPropagationStopped())break e;nf(c,g,$),d=_}else for(h=0;h<o.length;h++){if(g=o[h],_=g.instance,$=g.currentTarget,g=g.listener,_!==d&&c.isPropagationStopped())break e;nf(c,g,$),d=_}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,a){var s=a[of];s===void 0&&(s=a[of]=new Set);var o=e+"__bubble";s.has(o)||(pf(a,e,2,!1),s.add(o))}function qf(e,a,s){var o=0;a&&(o|=4),pf(s,e,o,a)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,e),qf(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[rf]||(a[rf]=!0,qf("selectionchange",!1,a))}}function pf(e,a,s,o){switch(jd(a)){case 1:var c=ed;break;case 4:c=gd;break;default:c=fd}s=c.bind(null,a,s,e),c=void 0,!Lb||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(a,s,{capture:!0,passive:c}):e.addEventListener(a,s,!0):c!==void 0?e.addEventListener(a,s,{passive:c}):e.addEventListener(a,s,!1)}function hd(e,a,s,o,c){var d=o;if(!(a&1)&&!(a&2)&&o!==null)e:for(;;){if(o===null)return;var h=o.tag;if(h===3||h===4){var g=o.stateNode.containerInfo;if(g===c||g.nodeType===8&&g.parentNode===c)break;if(h===4)for(h=o.return;h!==null;){var _=h.tag;if((_===3||_===4)&&(_=h.stateNode.containerInfo,_===c||_.nodeType===8&&_.parentNode===c))return;h=h.return}for(;g!==null;){if(h=Wc(g),h===null)return;if(_=h.tag,_===5||_===6){o=d=h;continue e}g=g.parentNode}}o=o.return}Jb(function(){var $=d,_e=xb(s),tt=[];e:{var nt=df.get(e);if(nt!==void 0){var lt=td,dt=e;switch(e){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":lt=Rd;break;case"focusin":dt="focus",lt=Fd;break;case"focusout":dt="blur",lt=Fd;break;case"beforeblur":case"afterblur":lt=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Vd;break;case $e:case af:case bf:lt=Hd;break;case cf:lt=Xd;break;case"scroll":lt=vd;break;case"wheel":lt=Zd;break;case"copy":case"cut":case"paste":lt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Td}var ot=(a&4)!==0,gt=!ot&&e==="scroll",pt=ot?nt!==null?nt+"Capture":null:nt;ot=[];for(var mt=$,ht;mt!==null;){ht=mt;var St=ht.stateNode;if(ht.tag===5&&St!==null&&(ht=St,pt!==null&&(St=Kb(mt,pt),St!=null&&ot.push(tf(mt,St,ht)))),gt)break;mt=mt.return}0<ot.length&&(nt=new lt(nt,dt,null,s,_e),tt.push({event:nt,listeners:ot}))}}if(!(a&7)){e:{if(nt=e==="mouseover"||e==="pointerover",lt=e==="mouseout"||e==="pointerout",nt&&s!==wb&&(dt=s.relatedTarget||s.fromElement)&&(Wc(dt)||dt[uf]))break e;if((lt||nt)&&(nt=_e.window===_e?_e:(nt=_e.ownerDocument)?nt.defaultView||nt.parentWindow:window,lt?(dt=s.relatedTarget||s.toElement,lt=$,dt=dt?Wc(dt):null,dt!==null&&(gt=Vb(dt),dt!==gt||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(lt=null,dt=$),lt!==dt)){if(ot=Bd,St="onMouseLeave",pt="onMouseEnter",mt="mouse",(e==="pointerout"||e==="pointerover")&&(ot=Td,St="onPointerLeave",pt="onPointerEnter",mt="pointer"),gt=lt==null?nt:ue(lt),ht=dt==null?nt:ue(dt),nt=new ot(St,mt+"leave",lt,s,_e),nt.target=gt,nt.relatedTarget=ht,St=null,Wc(_e)===$&&(ot=new ot(pt,mt+"enter",dt,s,_e),ot.target=ht,ot.relatedTarget=gt,St=ot),gt=St,lt&&dt)t:{for(ot=lt,pt=dt,mt=0,ht=ot;ht;ht=vf(ht))mt++;for(ht=0,St=pt;St;St=vf(St))ht++;for(;0<mt-ht;)ot=vf(ot),mt--;for(;0<ht-mt;)pt=vf(pt),ht--;for(;mt--;){if(ot===pt||pt!==null&&ot===pt.alternate)break t;ot=vf(ot),pt=vf(pt)}ot=null}else ot=null;lt!==null&&wf(tt,nt,lt,ot,!1),dt!==null&&gt!==null&&wf(tt,gt,dt,ot,!0)}}e:{if(nt=$?ue($):window,lt=nt.nodeName&&nt.nodeName.toLowerCase(),lt==="select"||lt==="input"&&nt.type==="file")var _t=ve;else if(me(nt))if(we)_t=Fe;else{_t=De;var Tt=Ce}else(lt=nt.nodeName)&&lt.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(_t=Ee);if(_t&&(_t=_t(e,$))){ne(tt,_t,s,_e);break e}Tt&&Tt(e,nt,$),e==="focusout"&&(Tt=nt._wrapperState)&&Tt.controlled&&nt.type==="number"&&cb(nt,"number",nt.value)}switch(Tt=$?ue($):window,e){case"focusin":(me(Tt)||Tt.contentEditable==="true")&&(Qe=Tt,Re=$,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(tt,s,_e);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(tt,s,_e)}var ut;if(ae)e:{switch(e){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else ie?ge(e,s)&&(bt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(bt="onCompositionStart");bt&&(de&&s.locale!=="ko"&&(ie||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&ie&&(ut=nd()):(kd=_e,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Tt=oe($,bt),0<Tt.length&&(bt=new Ld(bt,e,null,s,_e),tt.push({event:bt,listeners:Tt}),ut?bt.data=ut:(ut=he(s),ut!==null&&(bt.data=ut)))),(ut=ce?je(e,s):ke(e,s))&&($=oe($,"onBeforeInput"),0<$.length&&(_e=new Ld("onBeforeInput","beforeinput",null,s,_e),tt.push({event:_e,listeners:$}),_e.data=ut))}se(tt,a)})}function tf(e,a,s){return{instance:e,listener:a,currentTarget:s}}function oe(e,a){for(var s=a+"Capture",o=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Kb(e,s),d!=null&&o.unshift(tf(e,d,c)),d=Kb(e,a),d!=null&&o.push(tf(e,d,c))),e=e.return}return o}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,a,s,o,c){for(var d=a._reactName,h=[];s!==null&&s!==o;){var g=s,_=g.alternate,$=g.stateNode;if(_!==null&&_===o)break;g.tag===5&&$!==null&&(g=$,c?(_=Kb(s,d),_!=null&&h.unshift(tf(s,_,g))):c||(_=Kb(s,d),_!=null&&h.push(tf(s,_,g)))),s=s.return}h.length!==0&&e.push({event:a,listeners:h})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,a,s){if(a=zf(a),zf(e)!==a&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,a){var s=a,o=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(o===0){e.removeChild(c),bd(a);return}o--}else s!=="$"&&s!=="$?"&&s!=="$!"||o++;s=c}while(s);bd(a)}function Lf(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return e;a--}else s==="/$"&&a++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var a=e[Of];if(a)return a;for(var s=e.parentNode;s;){if(a=s[uf]||s[Of]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=Mf(e);e!==null;){if(s=e[Of])return s;e=Mf(e)}return a}e=s,s=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E$1(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,a){Tf++,Sf[Tf]=e.current,e.current=a}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,a){var s=e.type.contextTypes;if(!s)return Vf;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===a)return o.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in s)c[d]=a[d];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),c}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E$1(Wf),E$1(H)}function ag(e,a,s){if(H.current!==Vf)throw Error(p(168));G(H,a),G(Wf,s)}function bg(e,a,s){var o=e.stateNode;if(a=a.childContextTypes,typeof o.getChildContext!="function")return s;o=o.getChildContext();for(var c in o)if(!(c in a))throw Error(p(108,Ra(e)||"Unknown",c));return A({},s,o)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,a,s){var o=e.stateNode;if(!o)throw Error(p(169));s?(e=bg(e,a,Xf),o.__reactInternalMemoizedMergedChildContext=e,E$1(Wf),E$1(H),G(H,e)):E$1(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,a=C;try{var s=eg;for(C=1;e<s.length;e++){var o=s[e];do o=o(!0);while(o!==null)}eg=null,fg=!1}catch(c){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),c}finally{C=a,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,a){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=a}function ug(e,a,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var o=rg;e=sg;var c=32-oc(o)-1;o&=~(1<<c),s+=1;var d=32-oc(a)+c;if(30<d){var h=c-c%5;d=(o&(1<<h)-1).toString(32),o>>=h,c-=h,rg=1<<32-oc(a)+c|s<<c|o,sg=d+e}else rg=1<<d|s<<c|o,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,a){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=a,s.return=e,a=e.deletions,a===null?(e.deletions=[s],e.flags|=16):a.push(s)}function Cg(e,a){switch(e.tag){case 5:var s=e.type;return a=a.nodeType!==1||s.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(e.stateNode=a,xg=e,yg=Lf(a.firstChild),!0):!1;case 6:return a=e.pendingProps===""||a.nodeType!==3?null:a,a!==null?(e.stateNode=a,xg=e,yg=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(s=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:a,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=a,s.return=e,e.child=s,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var a=yg;if(a){var s=a;if(!Cg(e,a)){if(Dg(e))throw Error(p(418));a=Lf(s.nextSibling);var o=xg;a&&Cg(e,a)?Ag(o,s):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var a;if((a=e.tag!==3)&&!(a=e.tag!==5)&&(a=e.type,a=a!=="head"&&a!=="body"&&!Ef(e.type,e.memoizedProps)),a&&(a=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;a;)Ag(e,a),a=Lf(a.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(a===0){yg=Lf(e.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,a,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var o=s.stateNode}if(!o)throw Error(p(147,e));var c=o,d=""+e;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===d?a.ref:(a=function(h){var g=c.refs;h===null?delete g[d]:g[d]=h},a._stringRef=d,a)}if(typeof e!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,e))}return e}function Mg(e,a){throw e=Object.prototype.toString.call(a),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e))}function Ng(e){var a=e._init;return a(e._payload)}function Og(e){function a(pt,mt){if(e){var ht=pt.deletions;ht===null?(pt.deletions=[mt],pt.flags|=16):ht.push(mt)}}function s(pt,mt){if(!e)return null;for(;mt!==null;)a(pt,mt),mt=mt.sibling;return null}function o(pt,mt){for(pt=new Map;mt!==null;)mt.key!==null?pt.set(mt.key,mt):pt.set(mt.index,mt),mt=mt.sibling;return pt}function c(pt,mt){return pt=Pg(pt,mt),pt.index=0,pt.sibling=null,pt}function d(pt,mt,ht){return pt.index=ht,e?(ht=pt.alternate,ht!==null?(ht=ht.index,ht<mt?(pt.flags|=2,mt):ht):(pt.flags|=2,mt)):(pt.flags|=1048576,mt)}function h(pt){return e&&pt.alternate===null&&(pt.flags|=2),pt}function g(pt,mt,ht,St){return mt===null||mt.tag!==6?(mt=Qg(ht,pt.mode,St),mt.return=pt,mt):(mt=c(mt,ht),mt.return=pt,mt)}function _(pt,mt,ht,St){var _t=ht.type;return _t===ya?_e(pt,mt,ht.props.children,St,ht.key):mt!==null&&(mt.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===Ha&&Ng(_t)===mt.type)?(St=c(mt,ht.props),St.ref=Lg(pt,mt,ht),St.return=pt,St):(St=Rg(ht.type,ht.key,ht.props,null,pt.mode,St),St.ref=Lg(pt,mt,ht),St.return=pt,St)}function $(pt,mt,ht,St){return mt===null||mt.tag!==4||mt.stateNode.containerInfo!==ht.containerInfo||mt.stateNode.implementation!==ht.implementation?(mt=Sg(ht,pt.mode,St),mt.return=pt,mt):(mt=c(mt,ht.children||[]),mt.return=pt,mt)}function _e(pt,mt,ht,St,_t){return mt===null||mt.tag!==7?(mt=Tg(ht,pt.mode,St,_t),mt.return=pt,mt):(mt=c(mt,ht),mt.return=pt,mt)}function tt(pt,mt,ht){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return mt=Qg(""+mt,pt.mode,ht),mt.return=pt,mt;if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return ht=Rg(mt.type,mt.key,mt.props,null,pt.mode,ht),ht.ref=Lg(pt,null,mt),ht.return=pt,ht;case wa:return mt=Sg(mt,pt.mode,ht),mt.return=pt,mt;case Ha:var St=mt._init;return tt(pt,St(mt._payload),ht)}if(eb(mt)||Ka(mt))return mt=Tg(mt,pt.mode,ht,null),mt.return=pt,mt;Mg(pt,mt)}return null}function nt(pt,mt,ht,St){var _t=mt!==null?mt.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number")return _t!==null?null:g(pt,mt,""+ht,St);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va:return ht.key===_t?_(pt,mt,ht,St):null;case wa:return ht.key===_t?$(pt,mt,ht,St):null;case Ha:return _t=ht._init,nt(pt,mt,_t(ht._payload),St)}if(eb(ht)||Ka(ht))return _t!==null?null:_e(pt,mt,ht,St,null);Mg(pt,ht)}return null}function lt(pt,mt,ht,St,_t){if(typeof St=="string"&&St!==""||typeof St=="number")return pt=pt.get(ht)||null,g(mt,pt,""+St,_t);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case va:return pt=pt.get(St.key===null?ht:St.key)||null,_(mt,pt,St,_t);case wa:return pt=pt.get(St.key===null?ht:St.key)||null,$(mt,pt,St,_t);case Ha:var Tt=St._init;return lt(pt,mt,ht,Tt(St._payload),_t)}if(eb(St)||Ka(St))return pt=pt.get(ht)||null,_e(mt,pt,St,_t,null);Mg(mt,St)}return null}function dt(pt,mt,ht,St){for(var _t=null,Tt=null,ut=mt,bt=mt=0,zt=null;ut!==null&&bt<ht.length;bt++){ut.index>bt?(zt=ut,ut=null):zt=ut.sibling;var Ht=nt(pt,ut,ht[bt],St);if(Ht===null){ut===null&&(ut=zt);break}e&&ut&&Ht.alternate===null&&a(pt,ut),mt=d(Ht,mt,bt),Tt===null?_t=Ht:Tt.sibling=Ht,Tt=Ht,ut=zt}if(bt===ht.length)return s(pt,ut),I&&tg(pt,bt),_t;if(ut===null){for(;bt<ht.length;bt++)ut=tt(pt,ht[bt],St),ut!==null&&(mt=d(ut,mt,bt),Tt===null?_t=ut:Tt.sibling=ut,Tt=ut);return I&&tg(pt,bt),_t}for(ut=o(pt,ut);bt<ht.length;bt++)zt=lt(ut,pt,bt,ht[bt],St),zt!==null&&(e&&zt.alternate!==null&&ut.delete(zt.key===null?bt:zt.key),mt=d(zt,mt,bt),Tt===null?_t=zt:Tt.sibling=zt,Tt=zt);return e&&ut.forEach(function(Qt){return a(pt,Qt)}),I&&tg(pt,bt),_t}function ot(pt,mt,ht,St){var _t=Ka(ht);if(typeof _t!="function")throw Error(p(150));if(ht=_t.call(ht),ht==null)throw Error(p(151));for(var Tt=_t=null,ut=mt,bt=mt=0,zt=null,Ht=ht.next();ut!==null&&!Ht.done;bt++,Ht=ht.next()){ut.index>bt?(zt=ut,ut=null):zt=ut.sibling;var Qt=nt(pt,ut,Ht.value,St);if(Qt===null){ut===null&&(ut=zt);break}e&&ut&&Qt.alternate===null&&a(pt,ut),mt=d(Qt,mt,bt),Tt===null?_t=Qt:Tt.sibling=Qt,Tt=Qt,ut=zt}if(Ht.done)return s(pt,ut),I&&tg(pt,bt),_t;if(ut===null){for(;!Ht.done;bt++,Ht=ht.next())Ht=tt(pt,Ht.value,St),Ht!==null&&(mt=d(Ht,mt,bt),Tt===null?_t=Ht:Tt.sibling=Ht,Tt=Ht);return I&&tg(pt,bt),_t}for(ut=o(pt,ut);!Ht.done;bt++,Ht=ht.next())Ht=lt(ut,pt,bt,Ht.value,St),Ht!==null&&(e&&Ht.alternate!==null&&ut.delete(Ht.key===null?bt:Ht.key),mt=d(Ht,mt,bt),Tt===null?_t=Ht:Tt.sibling=Ht,Tt=Ht);return e&&ut.forEach(function(sr){return a(pt,sr)}),I&&tg(pt,bt),_t}function gt(pt,mt,ht,St){if(typeof ht=="object"&&ht!==null&&ht.type===ya&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va:e:{for(var _t=ht.key,Tt=mt;Tt!==null;){if(Tt.key===_t){if(_t=ht.type,_t===ya){if(Tt.tag===7){s(pt,Tt.sibling),mt=c(Tt,ht.props.children),mt.return=pt,pt=mt;break e}}else if(Tt.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===Ha&&Ng(_t)===Tt.type){s(pt,Tt.sibling),mt=c(Tt,ht.props),mt.ref=Lg(pt,Tt,ht),mt.return=pt,pt=mt;break e}s(pt,Tt);break}else a(pt,Tt);Tt=Tt.sibling}ht.type===ya?(mt=Tg(ht.props.children,pt.mode,St,ht.key),mt.return=pt,pt=mt):(St=Rg(ht.type,ht.key,ht.props,null,pt.mode,St),St.ref=Lg(pt,mt,ht),St.return=pt,pt=St)}return h(pt);case wa:e:{for(Tt=ht.key;mt!==null;){if(mt.key===Tt)if(mt.tag===4&&mt.stateNode.containerInfo===ht.containerInfo&&mt.stateNode.implementation===ht.implementation){s(pt,mt.sibling),mt=c(mt,ht.children||[]),mt.return=pt,pt=mt;break e}else{s(pt,mt);break}else a(pt,mt);mt=mt.sibling}mt=Sg(ht,pt.mode,St),mt.return=pt,pt=mt}return h(pt);case Ha:return Tt=ht._init,gt(pt,mt,Tt(ht._payload),St)}if(eb(ht))return dt(pt,mt,ht,St);if(Ka(ht))return ot(pt,mt,ht,St);Mg(pt,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"?(ht=""+ht,mt!==null&&mt.tag===6?(s(pt,mt.sibling),mt=c(mt,ht),mt.return=pt,pt=mt):(s(pt,mt),mt=Qg(ht,pt.mode,St),mt.return=pt,pt=mt),h(pt)):s(pt,mt)}return gt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var a=Wg.current;E$1(Wg),e._currentValue=a}function bh(e,a,s){for(;e!==null;){var o=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),e===s)break;e=e.return}}function ch(e,a){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&a&&(dh=!0),e.firstContext=null)}function eh(e){var a=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:a,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return a}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,a,s,o){var c=a.interleaved;return c===null?(s.next=s,gh(a)):(s.next=c.next,c.next=s),a.interleaved=s,ih(e,o)}function ih(e,a){e.lanes|=a;var s=e.alternate;for(s!==null&&(s.lanes|=a),s=e,e=e.return;e!==null;)e.childLanes|=a,s=e.alternate,s!==null&&(s.childLanes|=a),s=e,e=e.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,a){return{eventTime:e,lane:a,tag:0,payload:null,callback:null,next:null}}function nh(e,a,s){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,K&2){var c=o.pending;return c===null?a.next=a:(a.next=c.next,c.next=a),o.pending=a,ih(e,s)}return c=o.interleaved,c===null?(a.next=a,gh(o)):(a.next=c.next,c.next=a),o.interleaved=a,ih(e,s)}function oh(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194240)!==0)){var o=a.lanes;o&=e.pendingLanes,s|=o,a.lanes=s,Cc(e,s)}}function ph(e,a){var s=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var c=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var h={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};d===null?c=d=h:d=d.next=h,s=s.next}while(s!==null);d===null?c=d=a:d=d.next=a}else c=d=a;s={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:o.shared,effects:o.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}function qh(e,a,s,o){var c=e.updateQueue;jh=!1;var d=c.firstBaseUpdate,h=c.lastBaseUpdate,g=c.shared.pending;if(g!==null){c.shared.pending=null;var _=g,$=_.next;_.next=null,h===null?d=$:h.next=$,h=_;var _e=e.alternate;_e!==null&&(_e=_e.updateQueue,g=_e.lastBaseUpdate,g!==h&&(g===null?_e.firstBaseUpdate=$:g.next=$,_e.lastBaseUpdate=_))}if(d!==null){var tt=c.baseState;h=0,_e=$=_=null,g=d;do{var nt=g.lane,lt=g.eventTime;if((o&nt)===nt){_e!==null&&(_e=_e.next={eventTime:lt,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var dt=e,ot=g;switch(nt=a,lt=s,ot.tag){case 1:if(dt=ot.payload,typeof dt=="function"){tt=dt.call(lt,tt,nt);break e}tt=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ot.payload,nt=typeof dt=="function"?dt.call(lt,tt,nt):dt,nt==null)break e;tt=A({},tt,nt);break e;case 2:jh=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,nt=c.effects,nt===null?c.effects=[g]:nt.push(g))}else lt={eventTime:lt,lane:nt,tag:g.tag,payload:g.payload,callback:g.callback,next:null},_e===null?($=_e=lt,_=tt):_e=_e.next=lt,h|=nt;if(g=g.next,g===null){if(g=c.shared.pending,g===null)break;nt=g,g=nt.next,nt.next=null,c.lastBaseUpdate=nt,c.shared.pending=null}}while(!0);if(_e===null&&(_=tt),c.baseState=_,c.firstBaseUpdate=$,c.lastBaseUpdate=_e,a=c.shared.interleaved,a!==null){c=a;do h|=c.lane,c=c.next;while(c!==a)}else d===null&&(c.shared.lanes=0);rh|=h,e.lanes=h,e.memoizedState=tt}}function sh(e,a,s){if(e=a.effects,a.effects=null,e!==null)for(a=0;a<e.length;a++){var o=e[a],c=o.callback;if(c!==null){if(o.callback=null,o=s,typeof c!="function")throw Error(p(191,c));c.call(o)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,a){switch(G(wh,a),G(vh$1,e),G(uh,th),e=a.nodeType,e){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:lb(null,"");break;default:e=e===8?a.parentNode:a,a=e.namespaceURI||null,e=e.tagName,a=lb(a,e)}E$1(uh),G(uh,a)}function zh(){E$1(uh),E$1(vh$1),E$1(wh)}function Ah(e){xh(wh.current);var a=xh(uh.current),s=lb(a,e.type);a!==s&&(G(vh$1,e),G(uh,s))}function Bh(e){vh$1.current===e&&(E$1(uh),E$1(vh$1))}var L=Uf(0);function Ch(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!He(e[s],a[s]))return!1;return!0}function Nh(e,a,s,o,c,d){if(Hh=d,M=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=s(o,c),Jh){d=0;do{if(Jh=!1,Kh=0,25<=d)throw Error(p(301));d+=1,O=N=null,a.updateQueue=null,Fh.current=Qh,e=s(o,c)}while(Jh)}if(Fh.current=Rh,a=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,a)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=e:O=O.next=e,O}function Uh(){if(N===null){var e=M.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var a=O===null?M.memoizedState:O.next;if(a!==null)O=a,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=e:O=O.next=e}return O}function Vh(e,a){return typeof a=="function"?a(e):a}function Wh(e){var a=Uh(),s=a.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var o=N,c=o.baseQueue,d=s.pending;if(d!==null){if(c!==null){var h=c.next;c.next=d.next,d.next=h}o.baseQueue=c=d,s.pending=null}if(c!==null){d=c.next,o=o.baseState;var g=h=null,_=null,$=d;do{var _e=$.lane;if((Hh&_e)===_e)_!==null&&(_=_.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),o=$.hasEagerState?$.eagerState:e(o,$.action);else{var tt={lane:_e,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};_===null?(g=_=tt,h=o):_=_.next=tt,M.lanes|=_e,rh|=_e}$=$.next}while($!==null&&$!==d);_===null?h=o:_.next=g,He(o,a.memoizedState)||(dh=!0),a.memoizedState=o,a.baseState=h,a.baseQueue=_,s.lastRenderedState=o}if(e=s.interleaved,e!==null){c=e;do d=c.lane,M.lanes|=d,rh|=d,c=c.next;while(c!==e)}else c===null&&(s.lanes=0);return[a.memoizedState,s.dispatch]}function Xh(e){var a=Uh(),s=a.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var o=s.dispatch,c=s.pending,d=a.memoizedState;if(c!==null){s.pending=null;var h=c=c.next;do d=e(d,h.action),h=h.next;while(h!==c);He(d,a.memoizedState)||(dh=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),s.lastRenderedState=d}return[d,o]}function Yh(){}function Zh(e,a){var s=M,o=Uh(),c=a(),d=!He(o.memoizedState,c);if(d&&(o.memoizedState=c,dh=!0),o=o.queue,$h(ai.bind(null,s,o,e),[e]),o.getSnapshot!==a||d||O!==null&&O.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,o,c,a),void 0,null),Q===null)throw Error(p(349));Hh&30||di(s,a,c)}return c}function di(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=M.updateQueue,a===null?(a={lastEffect:null,stores:null},M.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function ci(e,a,s,o){a.value=s,a.getSnapshot=o,ei(a)&&fi(e)}function ai(e,a,s){return s(function(){ei(a)&&fi(e)})}function ei(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!He(e,s)}catch{return!0}}function fi(e){var a=ih(e,1);a!==null&&gi(a,e,1,-1)}function hi(e){var a=Th();return typeof e=="function"&&(e=e()),a.memoizedState=a.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},a.queue=e,e=e.dispatch=ii.bind(null,M,e),[a.memoizedState,e]}function bi(e,a,s,o){return e={tag:e,create:a,destroy:s,deps:o,next:null},a=M.updateQueue,a===null?(a={lastEffect:null,stores:null},M.updateQueue=a,a.lastEffect=e.next=e):(s=a.lastEffect,s===null?a.lastEffect=e.next=e:(o=s.next,s.next=e,e.next=o,a.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,a,s,o){var c=Th();M.flags|=e,c.memoizedState=bi(1|a,s,void 0,o===void 0?null:o)}function li(e,a,s,o){var c=Uh();o=o===void 0?null:o;var d=void 0;if(N!==null){var h=N.memoizedState;if(d=h.destroy,o!==null&&Mh(o,h.deps)){c.memoizedState=bi(a,s,d,o);return}}M.flags|=e,c.memoizedState=bi(1|a,s,d,o)}function mi(e,a){return ki(8390656,8,e,a)}function $h(e,a){return li(2048,8,e,a)}function ni(e,a){return li(4,2,e,a)}function oi(e,a){return li(4,4,e,a)}function pi(e,a){if(typeof a=="function")return e=e(),a(e),function(){a(null)};if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function qi(e,a,s){return s=s!=null?s.concat([e]):null,li(4,4,pi.bind(null,a,e),s)}function ri(){}function si(e,a){var s=Uh();a=a===void 0?null:a;var o=s.memoizedState;return o!==null&&a!==null&&Mh(a,o[1])?o[0]:(s.memoizedState=[e,a],e)}function ti(e,a){var s=Uh();a=a===void 0?null:a;var o=s.memoizedState;return o!==null&&a!==null&&Mh(a,o[1])?o[0]:(e=e(),s.memoizedState=[e,a],e)}function ui(e,a,s){return Hh&21?(He(s,a)||(s=yc(),M.lanes|=s,rh|=s,e.baseState=!0),a):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=s)}function vi(e,a){var s=C;C=s!==0&&4>s?s:4,e(!0);var o=Gh.transition;Gh.transition={};try{e(!1),a()}finally{C=s,Gh.transition=o}}function wi(){return Uh().memoizedState}function xi(e,a,s){var o=yi(e);if(s={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(a,s);else if(s=hh(e,a,s,o),s!==null){var c=R$1();gi(s,e,o,c),Bi(s,a,o)}}function ii(e,a,s){var o=yi(e),c={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(a,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var h=a.lastRenderedState,g=d(h,s);if(c.hasEagerState=!0,c.eagerState=g,He(g,h)){var _=a.interleaved;_===null?(c.next=c,gh(a)):(c.next=_.next,_.next=c),a.interleaved=c;return}}catch{}finally{}s=hh(e,a,c,o),s!==null&&(c=R$1(),gi(s,e,o,c),Bi(s,a,o))}}function zi(e){var a=e.alternate;return e===M||a!==null&&a===M}function Ai(e,a){Jh=Ih=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function Bi(e,a,s){if(s&4194240){var o=a.lanes;o&=e.pendingLanes,s|=o,a.lanes=s,Cc(e,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,a){return Th().memoizedState=[e,a===void 0?null:a],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,a,s){return s=s!=null?s.concat([e]):null,ki(4194308,4,pi.bind(null,a,e),s)},useLayoutEffect:function(e,a){return ki(4194308,4,e,a)},useInsertionEffect:function(e,a){return ki(4,2,e,a)},useMemo:function(e,a){var s=Th();return a=a===void 0?null:a,e=e(),s.memoizedState=[e,a],e},useReducer:function(e,a,s){var o=Th();return a=s!==void 0?s(a):a,o.memoizedState=o.baseState=a,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},o.queue=e,e=e.dispatch=xi.bind(null,M,e),[o.memoizedState,e]},useRef:function(e){var a=Th();return e={current:e},a.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),a=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[a,e]},useMutableSource:function(){},useSyncExternalStore:function(e,a,s){var o=M,c=Th();if(I){if(s===void 0)throw Error(p(407));s=s()}else{if(s=a(),Q===null)throw Error(p(349));Hh&30||di(o,a,s)}c.memoizedState=s;var d={value:s,getSnapshot:a};return c.queue=d,mi(ai.bind(null,o,d,e),[e]),o.flags|=2048,bi(9,ci.bind(null,o,d,s,a),void 0,null),s},useId:function(){var e=Th(),a=Q.identifierPrefix;if(I){var s=sg,o=rg;s=(o&~(1<<32-oc(o)-1)).toString(32)+s,a=":"+a+"R"+s,s=Kh++,0<s&&(a+="H"+s.toString(32)),a+=":"}else s=Lh++,a=":"+a+"r"+s.toString(32)+":";return e.memoizedState=a},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var a=Uh();return ui(a,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],a=Uh().memoizedState;return[e,a]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var a=Uh();return N===null?a.memoizedState=e:ui(a,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],a=Uh().memoizedState;return[e,a]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,a){if(e&&e.defaultProps){a=A({},a),e=e.defaultProps;for(var s in e)a[s]===void 0&&(a[s]=e[s]);return a}return a}function Di(e,a,s,o){a=e.memoizedState,s=s(o,a),s=s==null?a:A({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,a,s){e=e._reactInternals;var o=R$1(),c=yi(e),d=mh(o,c);d.payload=a,s!=null&&(d.callback=s),a=nh(e,d,c),a!==null&&(gi(a,e,c,o),oh(a,e,c))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var o=R$1(),c=yi(e),d=mh(o,c);d.tag=1,d.payload=a,s!=null&&(d.callback=s),a=nh(e,d,c),a!==null&&(gi(a,e,c,o),oh(a,e,c))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=R$1(),o=yi(e),c=mh(s,o);c.tag=2,a!=null&&(c.callback=a),a=nh(e,c,o),a!==null&&(gi(a,e,o,s),oh(a,e,o))}};function Fi(e,a,s,o,c,d,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,h):a.prototype&&a.prototype.isPureReactComponent?!Ie(s,o)||!Ie(c,d):!0}function Gi(e,a,s){var o=!1,c=Vf,d=a.contextType;return typeof d=="object"&&d!==null?d=eh(d):(c=Zf(a)?Xf:H.current,o=a.contextTypes,d=(o=o!=null)?Yf(e,c):Vf),a=new a(s,d),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ei,e.stateNode=a,a._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),a}function Hi(e,a,s,o){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,o),a.state!==e&&Ei.enqueueReplaceState(a,a.state,null)}function Ii(e,a,s,o){var c=e.stateNode;c.props=s,c.state=e.memoizedState,c.refs={},kh(e);var d=a.contextType;typeof d=="object"&&d!==null?c.context=eh(d):(d=Zf(a)?Xf:H.current,c.context=Yf(e,d)),c.state=e.memoizedState,d=a.getDerivedStateFromProps,typeof d=="function"&&(Di(e,a,d,s),c.state=e.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(a=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),a!==c.state&&Ei.enqueueReplaceState(c,c.state,null),qh(e,s,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,a){try{var s="",o=a;do s+=Pa(o),o=o.return;while(o);var c=s}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:a,stack:c,digest:null}}function Ki(e,a,s){return{value:e,source:null,stack:s??null,digest:a??null}}function Li(e,a){try{console.error(a.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,a,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var o=a.value;return s.callback=function(){Oi||(Oi=!0,Pi=o),Li(e,a)},s}function Qi(e,a,s){s=mh(-1,s),s.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=a.value;s.payload=function(){return o(c)},s.callback=function(){Li(e,a)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(s.callback=function(){Li(e,a),typeof o!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var h=a.stack;this.componentDidCatch(a.value,{componentStack:h!==null?h:""})}),s}function Si(e,a,s){var o=e.pingCache;if(o===null){o=e.pingCache=new Mi;var c=new Set;o.set(a,c)}else c=o.get(a),c===void 0&&(c=new Set,o.set(a,c));c.has(s)||(c.add(s),e=Ti.bind(null,e,a,s),a.then(e,e))}function Ui(e){do{var a;if((a=e.tag===13)&&(a=e.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return e;e=e.return}while(e!==null);return null}function Vi(e,a,s,o,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===a?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(a=mh(-1,1),a.tag=2,nh(s,a,1))),s.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,a,s,o){a.child=e===null?Vg(a,null,s,o):Ug(a,e.child,s,o)}function Yi(e,a,s,o,c){s=s.render;var d=a.ref;return ch(a,c),o=Nh(e,a,s,o,d,c),s=Sh(),e!==null&&!dh?(a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~c,Zi(e,a,c)):(I&&s&&vg(a),a.flags|=1,Xi(e,a,o,c),a.child)}function $i(e,a,s,o,c){if(e===null){var d=s.type;return typeof d=="function"&&!aj(d)&&d.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(a.tag=15,a.type=d,bj(e,a,d,o,c)):(e=Rg(s.type,null,o,a,a.mode,c),e.ref=a.ref,e.return=a,a.child=e)}if(d=e.child,!(e.lanes&c)){var h=d.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(h,o)&&e.ref===a.ref)return Zi(e,a,c)}return a.flags|=1,e=Pg(d,o),e.ref=a.ref,e.return=a,a.child=e}function bj(e,a,s,o,c){if(e!==null){var d=e.memoizedProps;if(Ie(d,o)&&e.ref===a.ref)if(dh=!1,a.pendingProps=o=d,(e.lanes&c)!==0)e.flags&131072&&(dh=!0);else return a.lanes=e.lanes,Zi(e,a,c)}return cj(e,a,s,o,c)}function dj(e,a,s){var o=a.pendingProps,c=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=s;else{if(!(s&1073741824))return e=d!==null?d.baseLanes|s:s,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:e,cachePool:null,transitions:null},a.updateQueue=null,G(ej,fj),fj|=e,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:s,G(ej,fj),fj|=o}else d!==null?(o=d.baseLanes|s,a.memoizedState=null):o=s,G(ej,fj),fj|=o;return Xi(e,a,c,s),a.child}function gj(e,a){var s=a.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(a.flags|=512,a.flags|=2097152)}function cj(e,a,s,o,c){var d=Zf(s)?Xf:H.current;return d=Yf(a,d),ch(a,c),s=Nh(e,a,s,o,d,c),o=Sh(),e!==null&&!dh?(a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~c,Zi(e,a,c)):(I&&o&&vg(a),a.flags|=1,Xi(e,a,s,c),a.child)}function hj(e,a,s,o,c){if(Zf(s)){var d=!0;cg(a)}else d=!1;if(ch(a,c),a.stateNode===null)ij(e,a),Gi(a,s,o),Ii(a,s,o,c),o=!0;else if(e===null){var h=a.stateNode,g=a.memoizedProps;h.props=g;var _=h.context,$=s.contextType;typeof $=="object"&&$!==null?$=eh($):($=Zf(s)?Xf:H.current,$=Yf(a,$));var _e=s.getDerivedStateFromProps,tt=typeof _e=="function"||typeof h.getSnapshotBeforeUpdate=="function";tt||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==o||_!==$)&&Hi(a,h,o,$),jh=!1;var nt=a.memoizedState;h.state=nt,qh(a,o,h,c),_=a.memoizedState,g!==o||nt!==_||Wf.current||jh?(typeof _e=="function"&&(Di(a,s,_e,o),_=a.memoizedState),(g=jh||Fi(a,s,g,o,nt,_,$))?(tt||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(a.flags|=4194308)):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=_),h.props=o,h.state=_,h.context=$,o=g):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{h=a.stateNode,lh(e,a),g=a.memoizedProps,$=a.type===a.elementType?g:Ci(a.type,g),h.props=$,tt=a.pendingProps,nt=h.context,_=s.contextType,typeof _=="object"&&_!==null?_=eh(_):(_=Zf(s)?Xf:H.current,_=Yf(a,_));var lt=s.getDerivedStateFromProps;(_e=typeof lt=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==tt||nt!==_)&&Hi(a,h,o,_),jh=!1,nt=a.memoizedState,h.state=nt,qh(a,o,h,c);var dt=a.memoizedState;g!==tt||nt!==dt||Wf.current||jh?(typeof lt=="function"&&(Di(a,s,lt,o),dt=a.memoizedState),($=jh||Fi(a,s,$,o,nt,dt,_)||!1)?(_e||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,dt,_),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,dt,_)),typeof h.componentDidUpdate=="function"&&(a.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&nt===e.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&nt===e.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=dt),h.props=o,h.state=dt,h.context=_,o=$):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&nt===e.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&nt===e.memoizedState||(a.flags|=1024),o=!1)}return jj(e,a,s,o,d,c)}function jj(e,a,s,o,c,d){gj(e,a);var h=(a.flags&128)!==0;if(!o&&!h)return c&&dg(a,s,!1),Zi(e,a,d);o=a.stateNode,Wi.current=a;var g=h&&typeof s.getDerivedStateFromError!="function"?null:o.render();return a.flags|=1,e!==null&&h?(a.child=Ug(a,e.child,null,d),a.child=Ug(a,null,g,d)):Xi(e,a,g,d),a.memoizedState=o.state,c&&dg(a,s,!0),a.child}function kj(e){var a=e.stateNode;a.pendingContext?ag(e,a.pendingContext,a.pendingContext!==a.context):a.context&&ag(e,a.context,!1),yh(e,a.containerInfo)}function lj(e,a,s,o,c){return Ig(),Jg(c),a.flags|=256,Xi(e,a,s,o),a.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,a,s){var o=a.pendingProps,c=L.current,d=!1,h=(a.flags&128)!==0,g;if((g=h)||(g=e!==null&&e.memoizedState===null?!1:(c&2)!==0),g?(d=!0,a.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),G(L,c&1),e===null)return Eg(a),e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(a.mode&1?e.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(h=o.children,e=o.fallback,d?(o=a.mode,d=a.child,h={mode:"hidden",children:h},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=h):d=pj(h,o,0,null),e=Tg(e,o,s,null),d.return=a,e.return=a,d.sibling=e,a.child=d,a.child.memoizedState=nj(s),a.memoizedState=mj,e):qj(a,h));if(c=e.memoizedState,c!==null&&(g=c.dehydrated,g!==null))return rj(e,a,h,o,g,c,s);if(d){d=o.fallback,h=a.mode,c=e.child,g=c.sibling;var _={mode:"hidden",children:o.children};return!(h&1)&&a.child!==c?(o=a.child,o.childLanes=0,o.pendingProps=_,a.deletions=null):(o=Pg(c,_),o.subtreeFlags=c.subtreeFlags&14680064),g!==null?d=Pg(g,d):(d=Tg(d,h,s,null),d.flags|=2),d.return=a,o.return=a,o.sibling=d,a.child=o,o=d,d=a.child,h=e.child.memoizedState,h=h===null?nj(s):{baseLanes:h.baseLanes|s,cachePool:null,transitions:h.transitions},d.memoizedState=h,d.childLanes=e.childLanes&~s,a.memoizedState=mj,o}return d=e.child,e=d.sibling,o=Pg(d,{mode:"visible",children:o.children}),!(a.mode&1)&&(o.lanes=s),o.return=a,o.sibling=null,e!==null&&(s=a.deletions,s===null?(a.deletions=[e],a.flags|=16):s.push(e)),a.child=o,a.memoizedState=null,o}function qj(e,a){return a=pj({mode:"visible",children:a},e.mode,0,null),a.return=e,e.child=a}function sj(e,a,s,o){return o!==null&&Jg(o),Ug(a,e.child,null,s),e=qj(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function rj(e,a,s,o,c,d,h){if(s)return a.flags&256?(a.flags&=-257,o=Ki(Error(p(422))),sj(e,a,h,o)):a.memoizedState!==null?(a.child=e.child,a.flags|=128,null):(d=o.fallback,c=a.mode,o=pj({mode:"visible",children:o.children},c,0,null),d=Tg(d,c,h,null),d.flags|=2,o.return=a,d.return=a,o.sibling=d,a.child=o,a.mode&1&&Ug(a,e.child,null,h),a.child.memoizedState=nj(h),a.memoizedState=mj,d);if(!(a.mode&1))return sj(e,a,h,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var g=o.dgst;return o=g,d=Error(p(419)),o=Ki(d,o,void 0),sj(e,a,h,o)}if(g=(h&e.childLanes)!==0,dh||g){if(o=Q,o!==null){switch(h&-h){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(o.suspendedLanes|h)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,ih(e,c),gi(o,e,c,-1))}return tj(),o=Ki(Error(p(421))),sj(e,a,h,o)}return c.data==="$?"?(a.flags|=128,a.child=e.child,a=uj.bind(null,e),c._reactRetry=a,null):(e=d.treeContext,yg=Lf(c.nextSibling),xg=a,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=a),a=qj(a,o.children),a.flags|=4096,a)}function vj(e,a,s){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a),bh(e.return,a,s)}function wj(e,a,s,o,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:c}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=s,d.tailMode=c)}function xj(e,a,s){var o=a.pendingProps,c=o.revealOrder,d=o.tail;if(Xi(e,a,o.children,s),o=L.current,o&2)o=o&1|2,a.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,s,a);else if(e.tag===19)vj(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(G(L,o),!(a.mode&1))a.memoizedState=null;else switch(c){case"forwards":for(s=a.child,c=null;s!==null;)e=s.alternate,e!==null&&Ch(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=a.child,a.child=null):(c=s.sibling,s.sibling=null),wj(a,!1,c,s,d);break;case"backwards":for(s=null,c=a.child,a.child=null;c!==null;){if(e=c.alternate,e!==null&&Ch(e)===null){a.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}wj(a,!0,s,null,d);break;case"together":wj(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ij(e,a){!(a.mode&1)&&e!==null&&(e.alternate=null,a.alternate=null,a.flags|=2)}function Zi(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),rh|=a.lanes,!(s&a.childLanes))return null;if(e!==null&&a.child!==e.child)throw Error(p(153));if(a.child!==null){for(e=a.child,s=Pg(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=Pg(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function yj(e,a,s){switch(a.tag){case 3:kj(a),Ig();break;case 5:Ah(a);break;case 1:Zf(a.type)&&cg(a);break;case 4:yh(a,a.stateNode.containerInfo);break;case 10:var o=a.type._context,c=a.memoizedProps.value;G(Wg,o._currentValue),o._currentValue=c;break;case 13:if(o=a.memoizedState,o!==null)return o.dehydrated!==null?(G(L,L.current&1),a.flags|=128,null):s&a.child.childLanes?oj(e,a,s):(G(L,L.current&1),e=Zi(e,a,s),e!==null?e.sibling:null);G(L,L.current&1);break;case 19:if(o=(s&a.childLanes)!==0,e.flags&128){if(o)return xj(e,a,s);a.flags|=128}if(c=a.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G(L,L.current),o)break;return null;case 22:case 23:return a.lanes=0,dj(e,a,s)}return Zi(e,a,s)}var zj,Aj,Bj,Cj;zj=function(e,a){for(var s=a.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(e,a,s,o){var c=e.memoizedProps;if(c!==o){e=a.stateNode,xh(uh.current);var d=null;switch(s){case"input":c=Ya(e,c),o=Ya(e,o),d=[];break;case"select":c=A({},c,{value:void 0}),o=A({},o,{value:void 0}),d=[];break;case"textarea":c=gb(e,c),o=gb(e,o),d=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Bf)}ub(s,o);var h;s=null;for($ in c)if(!o.hasOwnProperty($)&&c.hasOwnProperty($)&&c[$]!=null)if($==="style"){var g=c[$];for(h in g)g.hasOwnProperty(h)&&(s||(s={}),s[h]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(ea.hasOwnProperty($)?d||(d=[]):(d=d||[]).push($,null));for($ in o){var _=o[$];if(g=c!=null?c[$]:void 0,o.hasOwnProperty($)&&_!==g&&(_!=null||g!=null))if($==="style")if(g){for(h in g)!g.hasOwnProperty(h)||_&&_.hasOwnProperty(h)||(s||(s={}),s[h]="");for(h in _)_.hasOwnProperty(h)&&g[h]!==_[h]&&(s||(s={}),s[h]=_[h])}else s||(d||(d=[]),d.push($,s)),s=_;else $==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,g=g?g.__html:void 0,_!=null&&g!==_&&(d=d||[]).push($,_)):$==="children"?typeof _!="string"&&typeof _!="number"||(d=d||[]).push($,""+_):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(ea.hasOwnProperty($)?(_!=null&&$==="onScroll"&&D("scroll",e),d||g===_||(d=[])):(d=d||[]).push($,_))}s&&(d=d||[]).push("style",s);var $=d;(a.updateQueue=$)&&(a.flags|=4)}};Cj=function(e,a,s,o){s!==o&&(a.flags|=4)};function Dj(e,a){if(!I)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function S(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,o=0;if(a)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=s,a}function Ej(e,a,s){var o=a.pendingProps;switch(wg(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(a),null;case 1:return Zf(a.type)&&$f(),S(a),null;case 3:return o=a.stateNode,zh(),E$1(Wf),E$1(H),Eh(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Gg(a)?a.flags|=4:e===null||e.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,a),S(a),null;case 5:Bh(a);var c=xh(wh.current);if(s=a.type,e!==null&&a.stateNode!=null)Bj(e,a,s,o,c),e.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!o){if(a.stateNode===null)throw Error(p(166));return S(a),null}if(e=xh(uh.current),Gg(a)){o=a.stateNode,s=a.type;var d=a.memoizedProps;switch(o[Of]=a,o[Pf]=d,e=(a.mode&1)!==0,s){case"dialog":D("cancel",o),D("close",o);break;case"iframe":case"object":case"embed":D("load",o);break;case"video":case"audio":for(c=0;c<lf.length;c++)D(lf[c],o);break;case"source":D("error",o);break;case"img":case"image":case"link":D("error",o),D("load",o);break;case"details":D("toggle",o);break;case"input":Za(o,d),D("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},D("invalid",o);break;case"textarea":hb(o,d),D("invalid",o)}ub(s,d),c=null;for(var h in d)if(d.hasOwnProperty(h)){var g=d[h];h==="children"?typeof g=="string"?o.textContent!==g&&(d.suppressHydrationWarning!==!0&&Af(o.textContent,g,e),c=["children",g]):typeof g=="number"&&o.textContent!==""+g&&(d.suppressHydrationWarning!==!0&&Af(o.textContent,g,e),c=["children",""+g]):ea.hasOwnProperty(h)&&g!=null&&h==="onScroll"&&D("scroll",o)}switch(s){case"input":Va(o),db$1(o,d,!0);break;case"textarea":Va(o),jb(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=Bf)}o=c,a.updateQueue=o,o!==null&&(a.flags|=4)}else{h=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=h.createElement(s,{is:o.is}):(e=h.createElement(s),s==="select"&&(h=e,o.multiple?h.multiple=!0:o.size&&(h.size=o.size))):e=h.createElementNS(e,s),e[Of]=a,e[Pf]=o,zj(e,a,!1,!1),a.stateNode=e;e:{switch(h=vb(s,o),s){case"dialog":D("cancel",e),D("close",e),c=o;break;case"iframe":case"object":case"embed":D("load",e),c=o;break;case"video":case"audio":for(c=0;c<lf.length;c++)D(lf[c],e);c=o;break;case"source":D("error",e),c=o;break;case"img":case"image":case"link":D("error",e),D("load",e),c=o;break;case"details":D("toggle",e),c=o;break;case"input":Za(e,o),c=Ya(e,o),D("invalid",e);break;case"option":c=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=A({},o,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,o),c=gb(e,o),D("invalid",e);break;default:c=o}ub(s,c),g=c;for(d in g)if(g.hasOwnProperty(d)){var _=g[d];d==="style"?sb(e,_):d==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&nb(e,_)):d==="children"?typeof _=="string"?(s!=="textarea"||_!=="")&&ob(e,_):typeof _=="number"&&ob(e,""+_):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ea.hasOwnProperty(d)?_!=null&&d==="onScroll"&&D("scroll",e):_!=null&&ta(e,d,_,h))}switch(s){case"input":Va(e),db$1(e,o,!1);break;case"textarea":Va(e),jb(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Sa(o.value));break;case"select":e.multiple=!!o.multiple,d=o.value,d!=null?fb(e,!!o.multiple,d,!1):o.defaultValue!=null&&fb(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return S(a),null;case 6:if(e&&a.stateNode!=null)Cj(e,a,e.memoizedProps,o);else{if(typeof o!="string"&&a.stateNode===null)throw Error(p(166));if(s=xh(wh.current),xh(uh.current),Gg(a)){if(o=a.stateNode,s=a.memoizedProps,o[Of]=a,(d=o.nodeValue!==s)&&(e=xg,e!==null))switch(e.tag){case 3:Af(o.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(o.nodeValue,s,(e.mode&1)!==0)}d&&(a.flags|=4)}else o=(s.nodeType===9?s:s.ownerDocument).createTextNode(o),o[Of]=a,a.stateNode=o}return S(a),null;case 13:if(E$1(L),o=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&a.mode&1&&!(a.flags&128))Hg(),Ig(),a.flags|=98560,d=!1;else if(d=Gg(a),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(p(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(p(317));d[Of]=a}else Ig(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;S(a),d=!1}else zg!==null&&(Fj(zg),zg=null),d=!0;if(!d)return a.flags&65536?a:null}return a.flags&128?(a.lanes=s,a):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(a.child.flags|=8192,a.mode&1&&(e===null||L.current&1?T===0&&(T=3):tj())),a.updateQueue!==null&&(a.flags|=4),S(a),null);case 4:return zh(),Aj(e,a),e===null&&sf(a.stateNode.containerInfo),S(a),null;case 10:return ah(a.type._context),S(a),null;case 17:return Zf(a.type)&&$f(),S(a),null;case 19:if(E$1(L),d=a.memoizedState,d===null)return S(a),null;if(o=(a.flags&128)!==0,h=d.rendering,h===null)if(o)Dj(d,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=a.child;e!==null;){if(h=Ch(e),h!==null){for(a.flags|=128,Dj(d,!1),o=h.updateQueue,o!==null&&(a.updateQueue=o,a.flags|=4),a.subtreeFlags=0,o=s,s=a.child;s!==null;)d=s,e=o,d.flags&=14680066,h=d.alternate,h===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=h.childLanes,d.lanes=h.lanes,d.child=h.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=h.memoizedProps,d.memoizedState=h.memoizedState,d.updateQueue=h.updateQueue,d.type=h.type,e=h.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return G(L,L.current&1|2),a.child}e=e.sibling}d.tail!==null&&B()>Gj&&(a.flags|=128,o=!0,Dj(d,!1),a.lanes=4194304)}else{if(!o)if(e=Ch(h),e!==null){if(a.flags|=128,o=!0,s=e.updateQueue,s!==null&&(a.updateQueue=s,a.flags|=4),Dj(d,!0),d.tail===null&&d.tailMode==="hidden"&&!h.alternate&&!I)return S(a),null}else 2*B()-d.renderingStartTime>Gj&&s!==1073741824&&(a.flags|=128,o=!0,Dj(d,!1),a.lanes=4194304);d.isBackwards?(h.sibling=a.child,a.child=h):(s=d.last,s!==null?s.sibling=h:a.child=h,d.last=h)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=B(),a.sibling=null,s=L.current,G(L,o?s&1|2:s&1),a):(S(a),null);case 22:case 23:return Hj(),o=a.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(a.flags|=8192),o&&a.mode&1?fj&1073741824&&(S(a),a.subtreeFlags&6&&(a.flags|=8192)):S(a),null;case 24:return null;case 25:return null}throw Error(p(156,a.tag))}function Ij(e,a){switch(wg(a),a.tag){case 1:return Zf(a.type)&&$f(),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return zh(),E$1(Wf),E$1(H),Eh(),e=a.flags,e&65536&&!(e&128)?(a.flags=e&-65537|128,a):null;case 5:return Bh(a),null;case 13:if(E$1(L),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(p(340));Ig()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return E$1(L),null;case 4:return zh(),null;case 10:return ah(a.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(e,a){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(o){W(e,a,o)}else s.current=null}function Mj(e,a,s){try{s()}catch(o){W(e,a,o)}}var Nj=!1;function Oj(e,a){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var c=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var h=0,g=-1,_=-1,$=0,_e=0,tt=e,nt=null;t:for(;;){for(var lt;tt!==s||c!==0&&tt.nodeType!==3||(g=h+c),tt!==d||o!==0&&tt.nodeType!==3||(_=h+o),tt.nodeType===3&&(h+=tt.nodeValue.length),(lt=tt.firstChild)!==null;)nt=tt,tt=lt;for(;;){if(tt===e)break t;if(nt===s&&++$===c&&(g=h),nt===d&&++_e===o&&(_=h),(lt=tt.nextSibling)!==null)break;tt=nt,nt=tt.parentNode}tt=lt}s=g===-1||_===-1?null:{start:g,end:_}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:e,selectionRange:s},dd=!1,V=a;V!==null;)if(a=V,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,V=e;else for(;V!==null;){a=V;try{var dt=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var ot=dt.memoizedProps,gt=dt.memoizedState,pt=a.stateNode,mt=pt.getSnapshotBeforeUpdate(a.elementType===a.type?ot:Ci(a.type,ot),gt);pt.__reactInternalSnapshotBeforeUpdate=mt}break;case 3:var ht=a.stateNode.containerInfo;ht.nodeType===1?ht.textContent="":ht.nodeType===9&&ht.documentElement&&ht.removeChild(ht.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(St){W(a,a.return,St)}if(e=a.sibling,e!==null){e.return=a.return,V=e;break}V=a.return}return dt=Nj,Nj=!1,dt}function Pj(e,a,s){var o=a.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Mj(a,s,d)}c=c.next}while(c!==o)}}function Qj(e,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var o=s.create;s.destroy=o()}s=s.next}while(s!==a)}}function Rj(e){var a=e.ref;if(a!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof a=="function"?a(e):a.current=e}}function Sj(e){var a=e.alternate;a!==null&&(e.alternate=null,Sj(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&(delete a[Of],delete a[Pf],delete a[of],delete a[Qf],delete a[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,a,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?s.nodeType===8?s.parentNode.insertBefore(e,a):s.insertBefore(e,a):(s.nodeType===8?(a=s.parentNode,a.insertBefore(e,s)):(a=s,a.appendChild(e)),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Bf));else if(o!==4&&(e=e.child,e!==null))for(Vj(e,a,s),e=e.sibling;e!==null;)Vj(e,a,s),e=e.sibling}function Wj(e,a,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Wj(e,a,s),e=e.sibling;e!==null;)Wj(e,a,s),e=e.sibling}var X=null,Xj=!1;function Yj(e,a,s){for(s=s.child;s!==null;)Zj(e,a,s),s=s.sibling}function Zj(e,a,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Lj(s,a);case 6:var o=X,c=Xj;X=null,Yj(e,a,s),X=o,Xj=c,X!==null&&(Xj?(e=X,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Xj?(e=X,s=s.stateNode,e.nodeType===8?Kf(e.parentNode,s):e.nodeType===1&&Kf(e,s),bd(e)):Kf(X,s.stateNode));break;case 4:o=X,c=Xj,X=s.stateNode.containerInfo,Xj=!0,Yj(e,a,s),X=o,Xj=c;break;case 0:case 11:case 14:case 15:if(!U&&(o=s.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var d=c,h=d.destroy;d=d.tag,h!==void 0&&(d&2||d&4)&&Mj(s,a,h),c=c.next}while(c!==o)}Yj(e,a,s);break;case 1:if(!U&&(Lj(s,a),o=s.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=s.memoizedProps,o.state=s.memoizedState,o.componentWillUnmount()}catch(g){W(s,a,g)}Yj(e,a,s);break;case 21:Yj(e,a,s);break;case 22:s.mode&1?(U=(o=U)||s.memoizedState!==null,Yj(e,a,s),U=o):Yj(e,a,s);break;default:Yj(e,a,s)}}function ak(e){var a=e.updateQueue;if(a!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Kj),a.forEach(function(o){var c=bk.bind(null,e,o);s.has(o)||(s.add(o),o.then(c,c))})}}function ck(e,a){var s=a.deletions;if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];try{var d=e,h=a,g=h;e:for(;g!==null;){switch(g.tag){case 5:X=g.stateNode,Xj=!1;break e;case 3:X=g.stateNode.containerInfo,Xj=!0;break e;case 4:X=g.stateNode.containerInfo,Xj=!0;break e}g=g.return}if(X===null)throw Error(p(160));Zj(d,h,c),X=null,Xj=!1;var _=c.alternate;_!==null&&(_.return=null),c.return=null}catch($){W(c,a,$)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)dk(a,e),a=a.sibling}function dk(e,a){var s=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(a,e),ek(e),o&4){try{Pj(3,e,e.return),Qj(3,e)}catch(ot){W(e,e.return,ot)}try{Pj(5,e,e.return)}catch(ot){W(e,e.return,ot)}}break;case 1:ck(a,e),ek(e),o&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(a,e),ek(e),o&512&&s!==null&&Lj(s,s.return),e.flags&32){var c=e.stateNode;try{ob(c,"")}catch(ot){W(e,e.return,ot)}}if(o&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,h=s!==null?s.memoizedProps:d,g=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{g==="input"&&d.type==="radio"&&d.name!=null&&ab(c,d),vb(g,h);var $=vb(g,d);for(h=0;h<_.length;h+=2){var _e=_[h],tt=_[h+1];_e==="style"?sb(c,tt):_e==="dangerouslySetInnerHTML"?nb(c,tt):_e==="children"?ob(c,tt):ta(c,_e,tt,$)}switch(g){case"input":bb(c,d);break;case"textarea":ib(c,d);break;case"select":var nt=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var lt=d.value;lt!=null?fb(c,!!d.multiple,lt,!1):nt!==!!d.multiple&&(d.defaultValue!=null?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:"",!1))}c[Pf]=d}catch(ot){W(e,e.return,ot)}}break;case 6:if(ck(a,e),ek(e),o&4){if(e.stateNode===null)throw Error(p(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(ot){W(e,e.return,ot)}}break;case 3:if(ck(a,e),ek(e),o&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(a.containerInfo)}catch(ot){W(e,e.return,ot)}break;case 4:ck(a,e),ek(e);break;case 13:ck(a,e),ek(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(fk=B())),o&4&&ak(e);break;case 22:if(_e=s!==null&&s.memoizedState!==null,e.mode&1?(U=($=U)||_e,ck(a,e),U=$):ck(a,e),ek(e),o&8192){if($=e.memoizedState!==null,(e.stateNode.isHidden=$)&&!_e&&e.mode&1)for(V=e,_e=e.child;_e!==null;){for(tt=V=_e;V!==null;){switch(nt=V,lt=nt.child,nt.tag){case 0:case 11:case 14:case 15:Pj(4,nt,nt.return);break;case 1:Lj(nt,nt.return);var dt=nt.stateNode;if(typeof dt.componentWillUnmount=="function"){o=nt,s=nt.return;try{a=o,dt.props=a.memoizedProps,dt.state=a.memoizedState,dt.componentWillUnmount()}catch(ot){W(o,s,ot)}}break;case 5:Lj(nt,nt.return);break;case 22:if(nt.memoizedState!==null){gk(tt);continue}}lt!==null?(lt.return=nt,V=lt):gk(tt)}_e=_e.sibling}e:for(_e=null,tt=e;;){if(tt.tag===5){if(_e===null){_e=tt;try{c=tt.stateNode,$?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(g=tt.stateNode,_=tt.memoizedProps.style,h=_!=null&&_.hasOwnProperty("display")?_.display:null,g.style.display=rb("display",h))}catch(ot){W(e,e.return,ot)}}}else if(tt.tag===6){if(_e===null)try{tt.stateNode.nodeValue=$?"":tt.memoizedProps}catch(ot){W(e,e.return,ot)}}else if((tt.tag!==22&&tt.tag!==23||tt.memoizedState===null||tt===e)&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===e)break e;for(;tt.sibling===null;){if(tt.return===null||tt.return===e)break e;_e===tt&&(_e=null),tt=tt.return}_e===tt&&(_e=null),tt.sibling.return=tt.return,tt=tt.sibling}}break;case 19:ck(a,e),ek(e),o&4&&ak(e);break;case 21:break;default:ck(a,e),ek(e)}}function ek(e){var a=e.flags;if(a&2){try{e:{for(var s=e.return;s!==null;){if(Tj(s)){var o=s;break e}s=s.return}throw Error(p(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(ob(c,""),o.flags&=-33);var d=Uj(e);Wj(e,d,c);break;case 3:case 4:var h=o.stateNode.containerInfo,g=Uj(e);Vj(e,g,h);break;default:throw Error(p(161))}}catch(_){W(e,e.return,_)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function hk(e,a,s){V=e,ik(e)}function ik(e,a,s){for(var o=(e.mode&1)!==0;V!==null;){var c=V,d=c.child;if(c.tag===22&&o){var h=c.memoizedState!==null||Jj;if(!h){var g=c.alternate,_=g!==null&&g.memoizedState!==null||U;g=Jj;var $=U;if(Jj=h,(U=_)&&!$)for(V=c;V!==null;)h=V,_=h.child,h.tag===22&&h.memoizedState!==null?jk(c):_!==null?(_.return=h,V=_):jk(c);for(;d!==null;)V=d,ik(d),d=d.sibling;V=c,Jj=g,U=$}kk(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,V=d):kk(e)}}function kk(e){for(;V!==null;){var a=V;if(a.flags&8772){var s=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:U||Qj(5,a);break;case 1:var o=a.stateNode;if(a.flags&4&&!U)if(s===null)o.componentDidMount();else{var c=a.elementType===a.type?s.memoizedProps:Ci(a.type,s.memoizedProps);o.componentDidUpdate(c,s.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=a.updateQueue;d!==null&&sh(a,d,o);break;case 3:var h=a.updateQueue;if(h!==null){if(s=null,a.child!==null)switch(a.child.tag){case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}sh(a,h,s)}break;case 5:var g=a.stateNode;if(s===null&&a.flags&4){s=g;var _=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&s.focus();break;case"img":_.src&&(s.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var $=a.alternate;if($!==null){var _e=$.memoizedState;if(_e!==null){var tt=_e.dehydrated;tt!==null&&bd(tt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||a.flags&512&&Rj(a)}catch(nt){W(a,a.return,nt)}}if(a===e){V=null;break}if(s=a.sibling,s!==null){s.return=a.return,V=s;break}V=a.return}}function gk(e){for(;V!==null;){var a=V;if(a===e){V=null;break}var s=a.sibling;if(s!==null){s.return=a.return,V=s;break}V=a.return}}function jk(e){for(;V!==null;){var a=V;try{switch(a.tag){case 0:case 11:case 15:var s=a.return;try{Qj(4,a)}catch(_){W(a,s,_)}break;case 1:var o=a.stateNode;if(typeof o.componentDidMount=="function"){var c=a.return;try{o.componentDidMount()}catch(_){W(a,c,_)}}var d=a.return;try{Rj(a)}catch(_){W(a,d,_)}break;case 5:var h=a.return;try{Rj(a)}catch(_){W(a,h,_)}}}catch(_){W(a,a.return,_)}if(a===e){V=null;break}var g=a.sibling;if(g!==null){g.return=a.return,V=g;break}V=a.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,a,s,o){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,s,o),(!(K&2)||e!==Q)&&(e===Q&&(!(K&2)&&(qk|=s),T===4&&Ck(e,Z)),Dk(e,o),s===1&&K===0&&!(a.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(e,a){var s=e.callbackNode;wc(e,a);var o=uc(e,e===Q?Z:0);if(o===0)s!==null&&bc(s),e.callbackNode=null,e.callbackPriority=0;else if(a=o&-o,e.callbackPriority!==a){if(s!=null&&bc(s),a===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(o)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,e))}e.callbackPriority=a,e.callbackNode=s}}function Gk(e,a){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var s=e.callbackNode;if(Hk()&&e.callbackNode!==s)return null;var o=uc(e,e===Q?Z:0);if(o===0)return null;if(o&30||o&e.expiredLanes||a)a=Ik(e,o);else{a=o;var c=K;K|=2;var d=Jk();(Q!==e||Z!==a)&&(uk=null,Gj=B()+500,Kk(e,a));do try{Lk();break}catch(g){Mk(e,g)}while(!0);$g(),mk.current=d,K=c,Y!==null?a=0:(Q=null,Z=0,a=T)}if(a!==0){if(a===2&&(c=xc(e),c!==0&&(o=c,a=Nk(e,c))),a===1)throw s=pk,Kk(e,0),Ck(e,o),Dk(e,B()),s;if(a===6)Ck(e,o);else{if(c=e.current.alternate,!(o&30)&&!Ok(c)&&(a=Ik(e,o),a===2&&(d=xc(e),d!==0&&(o=d,a=Nk(e,d))),a===1))throw s=pk,Kk(e,0),Ck(e,o),Dk(e,B()),s;switch(e.finishedWork=c,e.finishedLanes=o,a){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,o),(o&130023424)===o&&(a=fk+500-B(),10<a)){if(uc(e,0)!==0)break;if(c=e.suspendedLanes,(c&o)!==o){R$1(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),a);break}Pk(e,tk,uk);break;case 4:if(Ck(e,o),(o&4194240)===o)break;for(a=e.eventTimes,c=-1;0<o;){var h=31-oc(o);d=1<<h,h=a[h],h>c&&(c=h),o&=~d}if(o=c,o=B()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*lk(o/1960))-o,10<o){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),o);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B()),e.callbackNode===s?Gk.bind(null,e):null}function Nk(e,a){var s=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,a).flags|=256),e=Ik(e,a),e!==2&&(a=tk,tk=s,a!==null&&Fj(a)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var a=e;;){if(a.flags&16384){var s=a.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var o=0;o<s.length;o++){var c=s[o],d=c.getSnapshot;c=c.value;try{if(!He(d(),c))return!1}catch{return!1}}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ck(e,a){for(a&=~rk,a&=~qk,e.suspendedLanes|=a,e.pingedLanes&=~a,e=e.expirationTimes;0<a;){var s=31-oc(a),o=1<<s;e[s]=-1,a&=~o}}function Ek(e){if(K&6)throw Error(p(327));Hk();var a=uc(e,0);if(!(a&1))return Dk(e,B()),null;var s=Ik(e,a);if(e.tag!==0&&s===2){var o=xc(e);o!==0&&(a=o,s=Nk(e,o))}if(s===1)throw s=pk,Kk(e,0),Ck(e,a),Dk(e,B()),s;if(s===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=a,Pk(e,tk,uk),Dk(e,B()),null}function Qk(e,a){var s=K;K|=1;try{return e(a)}finally{K=s,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var a=K;K|=1;var s=ok.transition,o=C;try{if(ok.transition=null,C=1,e)return e()}finally{C=o,ok.transition=s,K=a,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(e,a){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var o=s;switch(wg(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H),Eh();break;case 5:Bh(o);break;case 4:zh();break;case 13:E$1(L);break;case 19:E$1(L);break;case 10:ah(o.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q=e,Y=e=Pg(e.current,null),Z=fj=a,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(a=0;a<fh.length;a++)if(s=fh[a],o=s.interleaved,o!==null){s.interleaved=null;var c=o.next,d=s.pending;if(d!==null){var h=d.next;d.next=c,o.next=h}s.pending=o}fh=null}return e}function Mk(e,a){do{var s=Y;try{if($g(),Fh.current=Rh,Ih){for(var o=M.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T=1,pk=a,Y=null;break}e:{var d=e,h=s.return,g=s,_=a;if(a=Z,g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var $=_,_e=g,tt=_e.tag;if(!(_e.mode&1)&&(tt===0||tt===11||tt===15)){var nt=_e.alternate;nt?(_e.updateQueue=nt.updateQueue,_e.memoizedState=nt.memoizedState,_e.lanes=nt.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var lt=Ui(h);if(lt!==null){lt.flags&=-257,Vi(lt,h,g,d,a),lt.mode&1&&Si(d,$,a),a=lt,_=$;var dt=a.updateQueue;if(dt===null){var ot=new Set;ot.add(_),a.updateQueue=ot}else dt.add(_);break e}else{if(!(a&1)){Si(d,$,a),tj();break e}_=Error(p(426))}}else if(I&&g.mode&1){var gt=Ui(h);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),Vi(gt,h,g,d,a),Jg(Ji(_,g));break e}}d=_=Ji(_,g),T!==4&&(T=2),sk===null?sk=[d]:sk.push(d),d=h;do{switch(d.tag){case 3:d.flags|=65536,a&=-a,d.lanes|=a;var pt=Ni(d,_,a);ph(d,pt);break e;case 1:g=_;var mt=d.type,ht=d.stateNode;if(!(d.flags&128)&&(typeof mt.getDerivedStateFromError=="function"||ht!==null&&typeof ht.componentDidCatch=="function"&&(Ri===null||!Ri.has(ht)))){d.flags|=65536,a&=-a,d.lanes|=a;var St=Qi(d,g,a);ph(d,St);break e}}d=d.return}while(d!==null)}Sk(s)}catch(_t){a=_t,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(e,a){var s=K;K|=2;var o=Jk();(Q!==e||Z!==a)&&(uk=null,Kk(e,a));do try{Tk();break}catch(c){Mk(e,c)}while(!0);if($g(),K=s,mk.current=o,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(e){var a=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,a===null?Sk(e):Y=a,nk.current=null}function Sk(e){var a=e;do{var s=a.alternate;if(e=a.return,a.flags&32768){if(s=Ij(s,a),s!==null){s.flags&=32767,Y=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(s=Ej(s,a,fj),s!==null){Y=s;return}if(a=a.sibling,a!==null){Y=a;return}Y=a=e}while(a!==null);T===0&&(T=5)}function Pk(e,a,s){var o=C,c=ok.transition;try{ok.transition=null,C=1,Wk(e,a,s,o)}finally{ok.transition=c,C=o}return null}function Wk(e,a,s,o){do Hk();while(wk!==null);if(K&6)throw Error(p(327));s=e.finishedWork;var c=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var d=s.lanes|s.childLanes;if(Bc(e,d),e===Q&&(Y=Q=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),d=(s.flags&15990)!==0,s.subtreeFlags&15990||d){d=ok.transition,ok.transition=null;var h=C;C=1;var g=K;K|=4,nk.current=null,Oj(e,s),dk(s,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=s,hk(s),dc(),K=g,C=h,ok.transition=d}else e.current=s;if(vk&&(vk=!1,wk=e,xk=c),d=e.pendingLanes,d===0&&(Ri=null),mc(s.stateNode),Dk(e,B()),a!==null)for(o=e.onRecoverableError,s=0;s<a.length;s++)c=a[s],o(c.value,{componentStack:c.stack,digest:c.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),d=e.pendingLanes,d&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),a=ok.transition,s=C;try{if(ok.transition=null,C=16>e?16:e,wk===null)var o=!1;else{if(e=wk,wk=null,xk=0,K&6)throw Error(p(331));var c=K;for(K|=4,V=e.current;V!==null;){var d=V,h=d.child;if(V.flags&16){var g=d.deletions;if(g!==null){for(var _=0;_<g.length;_++){var $=g[_];for(V=$;V!==null;){var _e=V;switch(_e.tag){case 0:case 11:case 15:Pj(8,_e,d)}var tt=_e.child;if(tt!==null)tt.return=_e,V=tt;else for(;V!==null;){_e=V;var nt=_e.sibling,lt=_e.return;if(Sj(_e),_e===$){V=null;break}if(nt!==null){nt.return=lt,V=nt;break}V=lt}}}var dt=d.alternate;if(dt!==null){var ot=dt.child;if(ot!==null){dt.child=null;do{var gt=ot.sibling;ot.sibling=null,ot=gt}while(ot!==null)}}V=d}}if(d.subtreeFlags&2064&&h!==null)h.return=d,V=h;else e:for(;V!==null;){if(d=V,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Pj(9,d,d.return)}var pt=d.sibling;if(pt!==null){pt.return=d.return,V=pt;break e}V=d.return}}var mt=e.current;for(V=mt;V!==null;){h=V;var ht=h.child;if(h.subtreeFlags&2064&&ht!==null)ht.return=h,V=ht;else e:for(h=mt;V!==null;){if(g=V,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Qj(9,g)}}catch(_t){W(g,g.return,_t)}if(g===h){V=null;break e}var St=g.sibling;if(St!==null){St.return=g.return,V=St;break e}V=g.return}}if(K=c,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}o=!0}return o}finally{C=s,ok.transition=a}}return!1}function Xk(e,a,s){a=Ji(s,a),a=Ni(e,a,1),e=nh(e,a,1),a=R$1(),e!==null&&(Ac(e,1,a),Dk(e,a))}function W(e,a,s){if(e.tag===3)Xk(e,e,s);else for(;a!==null;){if(a.tag===3){Xk(a,e,s);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ri===null||!Ri.has(o))){e=Ji(s,e),e=Qi(a,e,1),a=nh(a,e,1),e=R$1(),a!==null&&(Ac(a,1,e),Dk(a,e));break}}a=a.return}}function Ti(e,a,s){var o=e.pingCache;o!==null&&o.delete(a),a=R$1(),e.pingedLanes|=e.suspendedLanes&s,Q===e&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(e,0):rk|=s),Dk(e,a)}function Yk(e,a){a===0&&(e.mode&1?(a=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):a=1);var s=R$1();e=ih(e,a),e!==null&&(Ac(e,a,s),Dk(e,s))}function uj(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),Yk(e,s)}function bk(e,a){var s=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(p(314))}o!==null&&o.delete(a),Yk(e,s)}var Vk;Vk=function(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&s)&&!(a.flags&128))return dh=!1,yj(e,a,s);dh=!!(e.flags&131072)}else dh=!1,I&&a.flags&1048576&&ug(a,ng,a.index);switch(a.lanes=0,a.tag){case 2:var o=a.type;ij(e,a),e=a.pendingProps;var c=Yf(a,H.current);ch(a,s),c=Nh(null,a,o,e,c,s);var d=Sh();return a.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Zf(o)?(d=!0,cg(a)):d=!1,a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,kh(a),c.updater=Ei,a.stateNode=c,c._reactInternals=a,Ii(a,o,e,s),a=jj(null,a,o,!0,d,s)):(a.tag=0,I&&d&&vg(a),Xi(null,a,c,s),a=a.child),a;case 16:o=a.elementType;e:{switch(ij(e,a),e=a.pendingProps,c=o._init,o=c(o._payload),a.type=o,c=a.tag=Zk(o),e=Ci(o,e),c){case 0:a=cj(null,a,o,e,s);break e;case 1:a=hj(null,a,o,e,s);break e;case 11:a=Yi(null,a,o,e,s);break e;case 14:a=$i(null,a,o,Ci(o.type,e),s);break e}throw Error(p(306,o,""))}return a;case 0:return o=a.type,c=a.pendingProps,c=a.elementType===o?c:Ci(o,c),cj(e,a,o,c,s);case 1:return o=a.type,c=a.pendingProps,c=a.elementType===o?c:Ci(o,c),hj(e,a,o,c,s);case 3:e:{if(kj(a),e===null)throw Error(p(387));o=a.pendingProps,d=a.memoizedState,c=d.element,lh(e,a),qh(a,o,null,s);var h=a.memoizedState;if(o=h.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){c=Ji(Error(p(423)),a),a=lj(e,a,o,s,c);break e}else if(o!==c){c=Ji(Error(p(424)),a),a=lj(e,a,o,s,c);break e}else for(yg=Lf(a.stateNode.containerInfo.firstChild),xg=a,I=!0,zg=null,s=Vg(a,null,o,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),o===c){a=Zi(e,a,s);break e}Xi(e,a,o,s)}a=a.child}return a;case 5:return Ah(a),e===null&&Eg(a),o=a.type,c=a.pendingProps,d=e!==null?e.memoizedProps:null,h=c.children,Ef(o,c)?h=null:d!==null&&Ef(o,d)&&(a.flags|=32),gj(e,a),Xi(e,a,h,s),a.child;case 6:return e===null&&Eg(a),null;case 13:return oj(e,a,s);case 4:return yh(a,a.stateNode.containerInfo),o=a.pendingProps,e===null?a.child=Ug(a,null,o,s):Xi(e,a,o,s),a.child;case 11:return o=a.type,c=a.pendingProps,c=a.elementType===o?c:Ci(o,c),Yi(e,a,o,c,s);case 7:return Xi(e,a,a.pendingProps,s),a.child;case 8:return Xi(e,a,a.pendingProps.children,s),a.child;case 12:return Xi(e,a,a.pendingProps.children,s),a.child;case 10:e:{if(o=a.type._context,c=a.pendingProps,d=a.memoizedProps,h=c.value,G(Wg,o._currentValue),o._currentValue=h,d!==null)if(He(d.value,h)){if(d.children===c.children&&!Wf.current){a=Zi(e,a,s);break e}}else for(d=a.child,d!==null&&(d.return=a);d!==null;){var g=d.dependencies;if(g!==null){h=d.child;for(var _=g.firstContext;_!==null;){if(_.context===o){if(d.tag===1){_=mh(-1,s&-s),_.tag=2;var $=d.updateQueue;if($!==null){$=$.shared;var _e=$.pending;_e===null?_.next=_:(_.next=_e.next,_e.next=_),$.pending=_}}d.lanes|=s,_=d.alternate,_!==null&&(_.lanes|=s),bh(d.return,s,a),g.lanes|=s;break}_=_.next}}else if(d.tag===10)h=d.type===a.type?null:d.child;else if(d.tag===18){if(h=d.return,h===null)throw Error(p(341));h.lanes|=s,g=h.alternate,g!==null&&(g.lanes|=s),bh(h,s,a),h=d.sibling}else h=d.child;if(h!==null)h.return=d;else for(h=d;h!==null;){if(h===a){h=null;break}if(d=h.sibling,d!==null){d.return=h.return,h=d;break}h=h.return}d=h}Xi(e,a,c.children,s),a=a.child}return a;case 9:return c=a.type,o=a.pendingProps.children,ch(a,s),c=eh(c),o=o(c),a.flags|=1,Xi(e,a,o,s),a.child;case 14:return o=a.type,c=Ci(o,a.pendingProps),c=Ci(o.type,c),$i(e,a,o,c,s);case 15:return bj(e,a,a.type,a.pendingProps,s);case 17:return o=a.type,c=a.pendingProps,c=a.elementType===o?c:Ci(o,c),ij(e,a),a.tag=1,Zf(o)?(e=!0,cg(a)):e=!1,ch(a,s),Gi(a,o,c),Ii(a,o,c,s),jj(null,a,o,!0,e,s);case 19:return xj(e,a,s);case 22:return dj(e,a,s)}throw Error(p(156,a.tag))};function Fk(e,a){return ac(e,a)}function $k(e,a,s,o){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,a,s,o){return new $k(e,a,s,o)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,a){var s=e.alternate;return s===null?(s=Bg(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Rg(e,a,s,o,c,d){var h=2;if(o=e,typeof e=="function")aj(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case ya:return Tg(s.children,c,d,a);case za:h=8,c|=8;break;case Aa:return e=Bg(12,s,a,c|2),e.elementType=Aa,e.lanes=d,e;case Ea:return e=Bg(13,s,a,c),e.elementType=Ea,e.lanes=d,e;case Fa:return e=Bg(19,s,a,c),e.elementType=Fa,e.lanes=d,e;case Ia:return pj(s,c,d,a);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:h=10;break e;case Ca:h=9;break e;case Da:h=11;break e;case Ga:h=14;break e;case Ha:h=16,o=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return a=Bg(h,s,a,c),a.elementType=e,a.type=o,a.lanes=d,a}function Tg(e,a,s,o){return e=Bg(7,e,o,a),e.lanes=s,e}function pj(e,a,s,o){return e=Bg(22,e,o,a),e.elementType=Ia,e.lanes=s,e.stateNode={isHidden:!1},e}function Qg(e,a,s){return e=Bg(6,e,null,a),e.lanes=s,e}function Sg(e,a,s){return a=Bg(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}function al(e,a,s,o,c){this.tag=a,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function bl(e,a,s,o,c,d,h,g,_){return e=new al(e,a,s,g,_),a===1?(a=1,d===!0&&(a|=8)):a=0,d=Bg(3,null,null,a),e.current=d,d.stateNode=e,d.memoizedState={element:o,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(d),e}function cl(e,a,s){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:o==null?null:""+o,children:e,containerInfo:a,implementation:s}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var a=e;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Zf(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(p(171))}if(e.tag===1){var s=e.type;if(Zf(s))return bg(e,s,a)}return a}function el(e,a,s,o,c,d,h,g,_){return e=bl(s,o,!0,e,c,d,h,g,_),e.context=dl(null),s=e.current,o=R$1(),c=yi(s),d=mh(o,c),d.callback=a??null,nh(s,d,c),e.current.lanes=c,Ac(e,c,o),Dk(e,o),e}function fl(e,a,s,o){var c=a.current,d=R$1(),h=yi(c);return s=dl(s),a.context===null?a.context=s:a.pendingContext=s,a=mh(d,h),a.payload={element:e},o=o===void 0?null:o,o!==null&&(a.callback=o),e=nh(c,a,h),e!==null&&(gi(e,c,h,d),oh(e,c,h)),h}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function il(e,a){hl(e,a),(e=e.alternate)&&hl(e,a)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(p(409));fl(e,a,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Rk(function(){fl(null,e,null,null)}),a[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var a=Hc();e={blockedOn:null,target:e,priority:a};for(var s=0;s<Qc.length&&a!==0&&a<Qc[s].priority;s++);Qc.splice(s,0,e),s===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,a,s,o,c){if(c){if(typeof o=="function"){var d=o;o=function(){var $=gl(h);d.call($)}}var h=el(a,o,e,0,null,!1,!1,"",pl);return e._reactRootContainer=h,e[uf]=h.current,sf(e.nodeType===8?e.parentNode:e),Rk(),h}for(;c=e.lastChild;)e.removeChild(c);if(typeof o=="function"){var g=o;o=function(){var $=gl(_);g.call($)}}var _=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=_,e[uf]=_.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(a,_,s,o)}),_}function rl(e,a,s,o,c){var d=s._reactRootContainer;if(d){var h=d;if(typeof c=="function"){var g=c;c=function(){var _=gl(h);g.call(_)}}fl(a,h,e,c)}else h=ql(s,a,e,c,o);return gl(h)}Ec=function(e){switch(e.tag){case 3:var a=e.stateNode;if(a.current.memoizedState.isDehydrated){var s=tc(a.pendingLanes);s!==0&&(Cc(a,s|1),Dk(a,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var o=ih(e,1);if(o!==null){var c=R$1();gi(o,e,1,c)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var a=ih(e,134217728);if(a!==null){var s=R$1();gi(a,e,134217728,s)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var a=yi(e),s=ih(e,a);if(s!==null){var o=R$1();gi(s,e,a,o)}il(e,a)}};Hc=function(){return C};Ic=function(e,a){var s=C;try{return C=e,a()}finally{C=s}};yb=function(e,a,s){switch(a){case"input":if(bb(e,s),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<s.length;a++){var o=s[a];if(o!==e&&o.form===e.form){var c=Db(o);if(!c)throw Error(p(90));Wa(o),bb(o,c)}}}break;case"textarea":ib(e,s);break;case"select":a=s.value,a!=null&&fb(e,!!s.multiple,a,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,a){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(a))throw Error(p(200));return cl(e,a,null,s)};reactDom_production_min.createRoot=function(e,a){if(!nl(e))throw Error(p(299));var s=!1,o="",c=kl;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onRecoverableError!==void 0&&(c=a.onRecoverableError)),a=bl(e,1,!1,null,null,s,!1,o,c),e[uf]=a.current,sf(e.nodeType===8?e.parentNode:e),new ll(a)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(a),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,a,s){if(!ol(a))throw Error(p(200));return rl(null,e,a,!0,s)};reactDom_production_min.hydrateRoot=function(e,a,s){if(!nl(e))throw Error(p(405));var o=s!=null&&s.hydratedSources||null,c=!1,d="",h=kl;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),a=el(a,null,e,1,s??null,c,!1,d,h),e[uf]=a.current,sf(e),o)for(e=0;e<o.length;e++)s=o[e],c=s._getVersion,c=c(s._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[s,c]:a.mutableSourceEagerHydrationData.push(s,c);return new ml(a)};reactDom_production_min.render=function(e,a,s){if(!ol(a))throw Error(p(200));return rl(null,e,a,!1,s)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,a,s,o){if(!ol(s))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,a,s,!1,o)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const LayoutGroupContext=reactExports.createContext({});function useConstant(e){const a=reactExports.useRef(null);return a.current===null&&(a.current=e()),a.current}const PresenceContext=reactExports.createContext(null),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(a){const s=this.props.childRef.current;if(s&&a.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:e,isPresent:a}){const s=reactExports.useId(),o=reactExports.useRef(null),c=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:d}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:h,height:g,top:_,left:$}=c.current;if(a||!o.current||!h||!g)return;o.current.dataset.motionPopId=s;const _e=document.createElement("style");return d&&(_e.nonce=d),document.head.appendChild(_e),_e.sheet&&_e.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${g}px !important;
            top: ${_}px !important;
            left: ${$}px !important;
          }
        `),()=>{document.head.removeChild(_e)}},[a]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:a,childRef:o,sizeRef:c,children:reactExports.cloneElement(e,{ref:o})})}const PresenceChild=({children:e,initial:a,isPresent:s,onExitComplete:o,custom:c,presenceAffectsLayout:d,mode:h})=>{const g=useConstant(newChildrenMap),_=reactExports.useId(),$=reactExports.useCallback(tt=>{g.set(tt,!0);for(const nt of g.values())if(!nt)return;o&&o()},[g,o]),_e=reactExports.useMemo(()=>({id:_,initial:a,isPresent:s,custom:c,onExitComplete:$,register:tt=>(g.set(tt,!1),()=>g.delete(tt))}),d?[Math.random(),$]:[s,$]);return reactExports.useMemo(()=>{g.forEach((tt,nt)=>g.set(nt,!1))},[s]),reactExports.useEffect(()=>{!s&&!g.size&&o&&o()},[s]),h==="popLayout"&&(e=jsxRuntimeExports.jsx(PopChild,{isPresent:s,children:e})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:_e,children:e})};function newChildrenMap(){return new Map}function usePresence(e=!0){const a=reactExports.useContext(PresenceContext);if(a===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:c}=a,d=reactExports.useId();reactExports.useEffect(()=>{e&&c(d)},[e]);const h=reactExports.useCallback(()=>e&&o&&o(d),[d,o,e]);return!s&&o?[!1,h]:[!0]}const getChildKey=e=>e.key||"";function onlyElements(e){const a=[];return reactExports.Children.forEach(e,s=>{reactExports.isValidElement(s)&&a.push(s)}),a}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,AnimatePresence=({children:e,custom:a,initial:s=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:h=!1})=>{const[g,_]=usePresence(h),$=reactExports.useMemo(()=>onlyElements(e),[e]),_e=h&&!g?[]:$.map(getChildKey),tt=reactExports.useRef(!0),nt=reactExports.useRef($),lt=useConstant(()=>new Map),[dt,ot]=reactExports.useState($),[gt,pt]=reactExports.useState($);useIsomorphicLayoutEffect(()=>{tt.current=!1,nt.current=$;for(let St=0;St<gt.length;St++){const _t=getChildKey(gt[St]);_e.includes(_t)?lt.delete(_t):lt.get(_t)!==!0&&lt.set(_t,!1)}},[gt,_e.length,_e.join("-")]);const mt=[];if($!==dt){let St=[...$];for(let _t=0;_t<gt.length;_t++){const Tt=gt[_t],ut=getChildKey(Tt);_e.includes(ut)||(St.splice(_t,0,Tt),mt.push(Tt))}d==="wait"&&mt.length&&(St=mt),pt(onlyElements(St)),ot($);return}const{forceRender:ht}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:gt.map(St=>{const _t=getChildKey(St),Tt=h&&!g?!1:$===gt||_e.includes(_t),ut=()=>{if(lt.has(_t))lt.set(_t,!0);else return;let bt=!0;lt.forEach(zt=>{zt||(bt=!1)}),bt&&(ht==null||ht(),pt(nt.current),h&&(_==null||_()),o&&o())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:Tt,initial:!tt.current||s?void 0:!1,custom:Tt?void 0:a,presenceAffectsLayout:c,mode:d,onExitComplete:Tt?void 0:ut,children:St},_t)})})},noop$1=e=>e;let invariant=noop$1;function memo(e){let a;return()=>(a===void 0&&(a=e()),a)}const progress=(e,a,s)=>{const o=a-e;return o===0?1:(s-e)/o},secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3,MotionGlobalConfig={useManualTiming:!1};function createRenderStep(e){let a=new Set,s=new Set,o=!1,c=!1;const d=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function g($){d.has($)&&(_.schedule($),e()),$(h)}const _={schedule:($,_e=!1,tt=!1)=>{const lt=tt&&o?a:s;return _e&&d.add($),lt.has($)||lt.add($),$},cancel:$=>{s.delete($),d.delete($)},process:$=>{if(h=$,o){c=!0;return}o=!0,[a,s]=[s,a],a.forEach(g),a.clear(),o=!1,c&&(c=!1,_.process($))}};return _}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(e,a){let s=!1,o=!0;const c={delta:0,timestamp:0,isProcessing:!1},d=()=>s=!0,h=stepsOrder.reduce((pt,mt)=>(pt[mt]=createRenderStep(d),pt),{}),{read:g,resolveKeyframes:_,update:$,preRender:_e,render:tt,postRender:nt}=h,lt=()=>{const pt=performance.now();s=!1,c.delta=o?1e3/60:Math.max(Math.min(pt-c.timestamp,maxElapsed),1),c.timestamp=pt,c.isProcessing=!0,g.process(c),_.process(c),$.process(c),_e.process(c),tt.process(c),nt.process(c),c.isProcessing=!1,s&&a&&(o=!1,e(lt))},dt=()=>{s=!0,o=!0,c.isProcessing||e(lt)};return{schedule:stepsOrder.reduce((pt,mt)=>{const ht=h[mt];return pt[mt]=(St,_t=!1,Tt=!1)=>(s||dt(),ht.schedule(St,_t,Tt)),pt},{}),cancel:pt=>{for(let mt=0;mt<stepsOrder.length;mt++)h[stepsOrder[mt]].cancel(pt)},state:c,steps:h}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0),LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const e in featureProps)featureDefinitions[e]={isEnabled:a=>featureProps[e].some(s=>!!a[s])};function loadFeatures(e){for(const a in e)featureDefinitions[a]={...featureDefinitions[a],...e[a]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){e&&(shouldForward=a=>a.startsWith("on")?!isValidMotionProp(a):e(a))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,a,s){const o={};for(const c in e)c==="values"&&typeof e.values=="object"||(shouldForward(c)||s===!0&&isValidMotionProp(c)||!a&&!isValidMotionProp(c)||e.draggable&&c.startsWith("onDrag"))&&(o[c]=e[c]);return o}function createDOMMotionComponentProxy(e){if(typeof Proxy>"u")return e;const a=new Map,s=(...o)=>e(...o);return new Proxy(s,{get:(o,c)=>c==="create"?e:(a.has(c)||a.set(c,e(c)),a.get(c))})}const MotionContext=reactExports.createContext({});function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(a=>isVariantLabel(e[a]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,a){if(isControllingVariants(e)){const{initial:s,animate:o}=e;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(o)?o:void 0}}return e.inherit!==!1?a:{}}function useCreateMotionContext(e){const{initial:a,animate:s}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:a,animate:s}),[variantLabelsAsDependency(a),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,a,s){return reactExports.useCallback(o=>{o&&e.onMount&&e.onMount(o),a&&(o?a.mount(o):a.unmount()),s&&(typeof s=="function"?s(o):isRefObject(s)&&(s.current=o))},[a])}const camelToDash=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(e,a,s,o,c){var d,h;const{visualElement:g}=reactExports.useContext(MotionContext),_=reactExports.useContext(LazyContext),$=reactExports.useContext(PresenceContext),_e=reactExports.useContext(MotionConfigContext).reducedMotion,tt=reactExports.useRef(null);o=o||_.renderer,!tt.current&&o&&(tt.current=o(e,{visualState:a,parent:g,props:s,presenceContext:$,blockInitialAnimation:$?$.initial===!1:!1,reducedMotionConfig:_e}));const nt=tt.current,lt=reactExports.useContext(SwitchLayoutGroupContext);nt&&!nt.projection&&c&&(nt.type==="html"||nt.type==="svg")&&createProjectionNode$1(tt.current,s,c,lt);const dt=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{nt&&dt.current&&nt.update(s,$)});const ot=s[optimizedAppearDataAttribute],gt=reactExports.useRef(!!ot&&!(!((d=window.MotionHandoffIsComplete)===null||d===void 0)&&d.call(window,ot))&&((h=window.MotionHasOptimisedAnimation)===null||h===void 0?void 0:h.call(window,ot)));return useIsomorphicLayoutEffect(()=>{nt&&(dt.current=!0,window.MotionIsMounted=!0,nt.updateFeatures(),microtask.render(nt.render),gt.current&&nt.animationState&&nt.animationState.animateChanges())}),reactExports.useEffect(()=>{nt&&(!gt.current&&nt.animationState&&nt.animationState.animateChanges(),gt.current&&(queueMicrotask(()=>{var pt;(pt=window.MotionHandoffMarkAsComplete)===null||pt===void 0||pt.call(window,ot)}),gt.current=!1))}),nt}function createProjectionNode$1(e,a,s,o){const{layoutId:c,layout:d,drag:h,dragConstraints:g,layoutScroll:_,layoutRoot:$}=a;e.projection=new s(e.latestValues,a["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!h||g&&isRefObject(g),visualElement:e,animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,layoutScroll:_,layoutRoot:$})}function getClosestProjectingNode(e){if(e)return e.options.allowProjection!==!1?e.projection:getClosestProjectingNode(e.parent)}function createRendererMotionComponent({preloadedFeatures:e,createVisualElement:a,useRender:s,useVisualState:o,Component:c}){var d,h;e&&loadFeatures(e);function g($,_e){let tt;const nt={...reactExports.useContext(MotionConfigContext),...$,layoutId:useLayoutId($)},{isStatic:lt}=nt,dt=useCreateMotionContext($),ot=o($,lt);if(!lt&&isBrowser){useStrictMode();const gt=getProjectionFunctionality(nt);tt=gt.MeasureLayout,dt.visualElement=useVisualElement(c,ot,nt,a,gt.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:dt,children:[tt&&dt.visualElement?jsxRuntimeExports.jsx(tt,{visualElement:dt.visualElement,...nt}):null,s(c,$,useMotionRef(ot,dt.visualElement,_e),ot,lt,dt.visualElement)]})}g.displayName=`motion.${typeof c=="string"?c:`create(${(h=(d=c.displayName)!==null&&d!==void 0?d:c.name)!==null&&h!==void 0?h:""})`}`;const _=reactExports.forwardRef(g);return _[motionComponentSymbol]=c,_}function useLayoutId({layoutId:e}){const a=reactExports.useContext(LayoutGroupContext).id;return a&&e!==void 0?a+"-"+e:e}function useStrictMode(e,a){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const{drag:a,layout:s}=featureDefinitions;if(!a&&!s)return{};const o={...a,...s};return{MeasureLayout:a!=null&&a.isEnabled(e)||s!=null&&s.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function getValueState(e){const a=[{},{}];return e==null||e.values.forEach((s,o)=>{a[0][o]=s.get(),a[1][o]=s.getVelocity()}),a}function resolveVariantFromProps(e,a,s,o){if(typeof a=="function"){const[c,d]=getValueState(o);a=a(s!==void 0?s:e.custom,c,d)}if(typeof a=="string"&&(a=e.variants&&e.variants[a]),typeof a=="function"){const[c,d]=getValueState(o);a=a(s!==void 0?s:e.custom,c,d)}return a}const isKeyframesTarget=e=>Array.isArray(e),isCustomValue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),resolveFinalValueInKeyframes=e=>isKeyframesTarget(e)?e[e.length-1]||0:e,isMotionValue=e=>!!(e&&e.getVelocity);function resolveMotionValue(e){const a=isMotionValue(e)?e.get():e;return isCustomValue(a)?a.toValue():a}function makeState({scrapeMotionValuesFromProps:e,createRenderState:a,onUpdate:s},o,c,d){const h={latestValues:makeLatestValues(o,c,d,e),renderState:a()};return s&&(h.onMount=g=>s({props:o,current:g,...h}),h.onUpdate=g=>s(g)),h}const makeUseVisualState=e=>(a,s)=>{const o=reactExports.useContext(MotionContext),c=reactExports.useContext(PresenceContext),d=()=>makeState(e,a,o,c);return s?d():useConstant(d)};function makeLatestValues(e,a,s,o){const c={},d=o(e,{});for(const nt in d)c[nt]=resolveMotionValue(d[nt]);let{initial:h,animate:g}=e;const _=isControllingVariants(e),$=isVariantNode(e);a&&$&&!_&&e.inherit!==!1&&(h===void 0&&(h=a.initial),g===void 0&&(g=a.animate));let _e=s?s.initial===!1:!1;_e=_e||h===!1;const tt=_e?g:h;if(tt&&typeof tt!="boolean"&&!isAnimationControls(tt)){const nt=Array.isArray(tt)?tt:[tt];for(let lt=0;lt<nt.length;lt++){const dt=resolveVariantFromProps(e,nt[lt]);if(dt){const{transitionEnd:ot,transition:gt,...pt}=dt;for(const mt in pt){let ht=pt[mt];if(Array.isArray(ht)){const St=_e?ht.length-1:0;ht=ht[St]}ht!==null&&(c[mt]=ht)}for(const mt in ot)c[mt]=ot[mt]}}}return c}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),checkStringStartsWith=e=>a=>typeof a=="string"&&a.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>startsAsVariableToken(e)?singleCssVariableRegex.test(e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,getValueAsType=(e,a)=>a&&typeof e=="number"?a.transform(e):e,clamp=(e,a,s)=>s>a?a:s<e?e:s,number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp(0,1,e)},scale={...number,default:1},createUnitType=e=>({test:a=>typeof a=="string"&&a.endsWith(e)&&a.split(" ").length===1,parse:parseFloat,transform:a=>`${a}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,a,s){let o="",c=!0;for(let d=0;d<numTransforms;d++){const h=transformPropOrder[d],g=e[h];if(g===void 0)continue;let _=!0;if(typeof g=="number"?_=g===(h.startsWith("scale")?1:0):_=parseFloat(g)===0,!_||s){const $=getValueAsType(g,numberValueTypes[h]);if(!_){c=!1;const _e=translateAlias[h]||h;o+=`${_e}(${$}) `}s&&(a[h]=$)}}return o=o.trim(),s?o=s(a,c?"":o):c&&(o="none"),o}function buildHTMLStyles(e,a,s){const{style:o,vars:c,transformOrigin:d}=e;let h=!1,g=!1;for(const _ in a){const $=a[_];if(transformProps.has(_)){h=!0;continue}else if(isCSSVariableName(_)){c[_]=$;continue}else{const _e=getValueAsType($,numberValueTypes[_]);_.startsWith("origin")?(g=!0,d[_]=_e):o[_]=_e}}if(a.transform||(h||s?o.transform=buildTransform(a,e.transform,s):o.transform&&(o.transform="none")),g){const{originX:_="50%",originY:$="50%",originZ:_e=0}=d;o.transformOrigin=`${_} ${$} ${_e}`}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,a,s=1,o=0,c=!0){e.pathLength=1;const d=c?dashKeys:camelKeys;e[d.offset]=px.transform(-o);const h=px.transform(a),g=px.transform(s);e[d.array]=`${h} ${g}`}function calcOrigin$1(e,a,s){return typeof e=="string"?e:px.transform(a+s*e)}function calcSVGTransformOrigin(e,a,s){const o=calcOrigin$1(a,e.x,e.width),c=calcOrigin$1(s,e.y,e.height);return`${o} ${c}`}function buildSVGAttrs(e,{attrX:a,attrY:s,attrScale:o,originX:c,originY:d,pathLength:h,pathSpacing:g=1,pathOffset:_=0,...$},_e,tt){if(buildHTMLStyles(e,$,tt),_e){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:nt,style:lt,dimensions:dt}=e;nt.transform&&(dt&&(lt.transform=nt.transform),delete nt.transform),dt&&(c!==void 0||d!==void 0||lt.transform)&&(lt.transformOrigin=calcSVGTransformOrigin(dt,c!==void 0?c:.5,d!==void 0?d:.5)),a!==void 0&&(nt.x=a),s!==void 0&&(nt.y=s),o!==void 0&&(nt.scale=o),h!==void 0&&buildSVGPath(nt,h,g,_,!1)}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function renderHTML(e,{style:a,vars:s},o,c){Object.assign(e.style,a,c&&c.getProjectionStyles(o));for(const d in s)e.style.setProperty(d,s[d])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(e,a,s,o){renderHTML(e,a,void 0,o);for(const c in a.attrs)e.setAttribute(camelCaseAttributes.has(c)?c:camelToDash(c),a.attrs[c])}const scaleCorrectors={};function addScaleCorrector(e){Object.assign(scaleCorrectors,e)}function isForcedMotionValue(e,{layout:a,layoutId:s}){return transformProps.has(e)||e.startsWith("origin")||(a||s!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}function scrapeMotionValuesFromProps$1(e,a,s){var o;const{style:c}=e,d={};for(const h in c)(isMotionValue(c[h])||a.style&&isMotionValue(a.style[h])||isForcedMotionValue(h,e)||((o=s==null?void 0:s.getValue(h))===null||o===void 0?void 0:o.liveStyle)!==void 0)&&(d[h]=c[h]);return d}function scrapeMotionValuesFromProps(e,a,s){const o=scrapeMotionValuesFromProps$1(e,a,s);for(const c in e)if(isMotionValue(e[c])||isMotionValue(a[c])){const d=transformPropOrder.indexOf(c)!==-1?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c;o[d]=e[c]}return o}function updateSVGDimensions(e,a){try{a.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{a.dimensions={x:0,y:0,width:0,height:0}}}const layoutProps=["x","y","width","height","cx","cy","r"],svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onUpdate:({props:e,prevProps:a,current:s,renderState:o,latestValues:c})=>{if(!s)return;let d=!!e.drag;if(!d){for(const g in c)if(transformProps.has(g)){d=!0;break}}if(!d)return;let h=!a;if(a)for(let g=0;g<layoutProps.length;g++){const _=layoutProps[g];e[_]!==a[_]&&(h=!0)}h&&frame.read(()=>{updateSVGDimensions(s,o),frame.render(()=>{buildSVGAttrs(o,c,isSVGTag(s.tagName),e.transformTemplate),renderSVG(s,o)})})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(e,a,s){for(const o in a)!isMotionValue(a[o])&&!isForcedMotionValue(o,s)&&(e[o]=a[o])}function useInitialMotionValues({transformTemplate:e},a){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,a,e),Object.assign({},s.vars,s.style)},[a])}function useStyle(e,a){const s=e.style||{},o={};return copyRawValuesOnly(o,s,e),Object.assign(o,useInitialMotionValues(e,a)),o}function useHTMLProps(e,a){const s={},o=useStyle(e,a);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=o,s}function useSVGProps(e,a,s,o){const c=reactExports.useMemo(()=>{const d=createSvgRenderState();return buildSVGAttrs(d,a,isSVGTag(o),e.transformTemplate),{...d.attrs,style:{...d.style}}},[a]);if(e.style){const d={};copyRawValuesOnly(d,e.style,e),c.style={...d,...c.style}}return c}function createUseRender(e=!1){return(s,o,c,{latestValues:d},h)=>{const _=(isSVGComponent(s)?useSVGProps:useHTMLProps)(o,d,h,s),$=filterProps(o,typeof s=="string",e),_e=s!==reactExports.Fragment?{...$,..._,ref:c}:{},{children:tt}=o,nt=reactExports.useMemo(()=>isMotionValue(tt)?tt.get():tt,[tt]);return reactExports.createElement(s,{..._e,children:nt})}}function createMotionComponentFactory(e,a){return function(o,{forwardMotionProps:c}={forwardMotionProps:!1}){const h={...isSVGComponent(o)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:e,useRender:createUseRender(c),createVisualElement:a,Component:o};return createRendererMotionComponent(h)}}function shallowCompare(e,a){if(!Array.isArray(a))return!1;const s=a.length;if(s!==e.length)return!1;for(let o=0;o<s;o++)if(a[o]!==e[o])return!1;return!0}function resolveVariant(e,a,s){const o=e.getProps();return resolveVariantFromProps(o,a,s!==void 0?s:o.custom,e)}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class BaseGroupPlaybackControls{constructor(a){this.stop=()=>this.runAll("stop"),this.animations=a.filter(Boolean)}get finished(){return Promise.all(this.animations.map(a=>"finished"in a?a.finished:a))}getAll(a){return this.animations[0][a]}setAll(a,s){for(let o=0;o<this.animations.length;o++)this.animations[o][a]=s}attachTimeline(a,s){const o=this.animations.map(c=>{if(supportsScrollTimeline()&&c.attachTimeline)return c.attachTimeline(a);if(typeof s=="function")return s(c)});return()=>{o.forEach((c,d)=>{c&&c(),this.animations[d].stop()})}}get time(){return this.getAll("time")}set time(a){this.setAll("time",a)}get speed(){return this.getAll("speed")}set speed(a){this.setAll("speed",a)}get startTime(){return this.getAll("startTime")}get duration(){let a=0;for(let s=0;s<this.animations.length;s++)a=Math.max(a,this.animations[s].duration);return a}runAll(a){this.animations.forEach(s=>s[a]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GroupPlaybackControls extends BaseGroupPlaybackControls{then(a,s){return Promise.all(this.animations).then(a).catch(s)}}function getValueTransition(e,a){return e?e[a]||e.default||e:void 0}const maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let a=0;const s=50;let o=e.next(a);for(;!o.done&&a<maxGeneratorDuration;)a+=s,o=e.next(a);return a>=maxGeneratorDuration?1/0:a}function isGenerator(e){return typeof e=="function"}function attachTimeline(e,a){e.timeline=a,e.onfinish=null}const isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number",supportsFlags={linearEasing:void 0};function memoSupports(e,a){const s=memo(e);return()=>{var o;return(o=supportsFlags[a])!==null&&o!==void 0?o:s()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),generateLinearEasing=(e,a,s=10)=>{let o="";const c=Math.max(Math.round(a/s),2);for(let d=0;d<c;d++)o+=e(progress(0,c-1,d))+", ";return`linear(${o.substring(0,o.length-2)})`};function isWaapiSupportedEasing(e){return!!(typeof e=="function"&&supportsLinearEasing()||!e||typeof e=="string"&&(e in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(e)||Array.isArray(e)&&e.every(isWaapiSupportedEasing))}const cubicBezierAsString=([e,a,s,o])=>`cubic-bezier(${e}, ${a}, ${s}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,a){if(e)return typeof e=="function"&&supportsLinearEasing()?generateLinearEasing(e,a):isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(s=>mapEasingToNativeEasing(s,a)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]}const isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(e,a,s){var o;if(e instanceof Element)return[e];if(typeof e=="string"){let c=document;const d=(o=void 0)!==null&&o!==void 0?o:c.querySelectorAll(e);return d?Array.from(d):[]}return Array.from(e)}function setupGesture(e,a){const s=resolveElements(e),o=new AbortController,c={passive:!0,...a,signal:o.signal};return[s,c,()=>o.abort()]}function filterEvents$1(e){return a=>{a.pointerType==="touch"||isDragActive()||e(a)}}function hover(e,a,s={}){const[o,c,d]=setupGesture(e,s),h=filterEvents$1(g=>{const{target:_}=g,$=a(g);if(typeof $!="function"||!_)return;const _e=filterEvents$1(tt=>{$(tt),_.removeEventListener("pointerleave",_e)});_.addEventListener("pointerleave",_e,c)});return o.forEach(g=>{g.addEventListener("pointerenter",h,c)}),d}const isNodeOrChild=(e,a)=>a?e===a?!0:isNodeOrChild(e,a.parentElement):!1,isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return focusableElements.has(e.tagName)||e.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(e){return a=>{a.key==="Enter"&&e(a)}}function firePointerEvent(e,a){e.dispatchEvent(new PointerEvent("pointer"+a,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,a)=>{const s=e.currentTarget;if(!s)return;const o=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const c=filterEvents(()=>{firePointerEvent(s,"up")}),d=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",c,a),s.addEventListener("blur",d,a)});s.addEventListener("keydown",o,a),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),a)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,a,s={}){const[o,c,d]=setupGesture(e,s),h=g=>{const _=g.currentTarget;if(!isValidPressEvent(g)||isPressing.has(_))return;isPressing.add(_);const $=a(g),_e=(lt,dt)=>{window.removeEventListener("pointerup",tt),window.removeEventListener("pointercancel",nt),!(!isValidPressEvent(lt)||!isPressing.has(_))&&(isPressing.delete(_),typeof $=="function"&&$(lt,{success:dt}))},tt=lt=>{_e(lt,s.useGlobalTarget||isNodeOrChild(_,lt.target))},nt=lt=>{_e(lt,!1)};window.addEventListener("pointerup",tt,c),window.addEventListener("pointercancel",nt,c)};return o.forEach(g=>{!isElementKeyboardAccessible(g)&&g.getAttribute("tabindex")===null&&(g.tabIndex=0),(s.useGlobalTarget?window:g).addEventListener("pointerdown",h,c),g.addEventListener("focus",$=>enableKeyboardPress($,c),c)}),d}function setDragLock(e){return e==="x"||e==="y"?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:e=>{now=e,queueMicrotask(clearTime)}};function addUniqueItem(e,a){e.indexOf(a)===-1&&e.push(a)}function removeItem(e,a){const s=e.indexOf(a);s>-1&&e.splice(s,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(a){return addUniqueItem(this.subscriptions,a),()=>removeItem(this.subscriptions,a)}notify(a,s,o){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](a,s,o);else for(let d=0;d<c;d++){const h=this.subscriptions[d];h&&h(a,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function velocityPerSecond(e,a){return a?e*(1e3/a):0}const MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(a,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(o,c=!0)=>{const d=time.now();this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(a),this.owner=s.owner}setCurrent(a){this.current=a,this.updatedAt=time.now(),this.canTrackVelocity===null&&a!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(a=this.current){this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt}onChange(a){return this.on("change",a)}on(a,s){this.events[a]||(this.events[a]=new SubscriptionManager);const o=this.events[a].add(s);return a==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const a in this.events)this.events[a].clear()}attach(a,s){this.passiveEffect=a,this.stopPassiveEffect=s}set(a,s=!0){!s||!this.passiveEffect?this.updateAndNotify(a,s):this.passiveEffect(a,this.updateAndNotify)}setWithVelocity(a,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt-o}jump(a,s=!0){this.updateAndNotify(a),this.prev=a,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const a=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||a-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(a){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=a(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,a){return new MotionValue(e,a)}function setMotionValue(e,a,s){e.hasValue(a)?e.getValue(a).set(s):e.addValue(a,motionValue(s))}function setTarget(e,a){const s=resolveVariant(e,a);let{transitionEnd:o={},transition:c={},...d}=s||{};d={...d,...o};for(const h in d){const g=resolveFinalValueInKeyframes(d[h]);setMotionValue(e,h,g)}}function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}function addValueToWillChange(e,a){const s=e.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(a)}function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}const calcBezier=(e,a,s)=>(((1-3*s+3*a)*e+(3*s-6*a))*e+3*a)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,a,s,o,c){let d,h,g=0;do h=a+(s-a)/2,d=calcBezier(h,o,c)-e,d>0?s=h:a=h;while(Math.abs(d)>subdivisionPrecision&&++g<subdivisionMaxIterations);return h}function cubicBezier(e,a,s,o){if(e===a&&s===o)return noop$1;const c=d=>binarySubdivide(d,0,1,e,s);return d=>d===0||d===1?d:calcBezier(c(d),a,o)}const mirrorEasing=e=>a=>a<=.5?e(2*a)/2:(2-e(2*(1-a)))/2,reverseEasing=e=>a=>1-e(1-a),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function isNone(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||isZeroValueString(e):!0}const sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(e){return e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,a)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(e)||a&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,a)),splitColor=(e,a,s)=>o=>{if(typeof o!="string")return o;const[c,d,h,g]=o.match(floatRegex);return{[e]:parseFloat(c),[a]:parseFloat(d),[s]:parseFloat(h),alpha:g!==void 0?parseFloat(g):1}},clampRgbUnit=e=>clamp(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:a,blue:s,alpha:o=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(a)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(o))+")"};function parseHex(e){let a="",s="",o="",c="";return e.length>5?(a=e.substring(1,3),s=e.substring(3,5),o=e.substring(5,7),c=e.substring(7,9)):(a=e.substring(1,2),s=e.substring(2,3),o=e.substring(3,4),c=e.substring(4,5),a+=a,s+=s,o+=o,c+=c),{red:parseInt(a,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:c?parseInt(c,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:a,lightness:s,alpha:o=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(a))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(o))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$2(e){var a,s;return isNaN(e)&&typeof e=="string"&&(((a=e.match(floatRegex))===null||a===void 0?void 0:a.length)||0)+(((s=e.match(colorRegex))===null||s===void 0?void 0:s.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const a=e.toString(),s=[],o={color:[],number:[],var:[]},c=[];let d=0;const g=a.replace(complexRegex,_=>(color.test(_)?(o.color.push(d),c.push(COLOR_TOKEN),s.push(color.parse(_))):_.startsWith(VAR_FUNCTION_TOKEN)?(o.var.push(d),c.push(VAR_TOKEN),s.push(_)):(o.number.push(d),c.push(NUMBER_TOKEN),s.push(parseFloat(_))),++d,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:g,indexes:o,types:c}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:a,types:s}=analyseComplexValue(e),o=a.length;return c=>{let d="";for(let h=0;h<o;h++)if(d+=a[h],c[h]!==void 0){const g=s[h];g===NUMBER_TOKEN?d+=sanitize(c[h]):g===COLOR_TOKEN?d+=color.transform(c[h]):d+=c[h]}return d}}const convertNumbersToZero=e=>typeof e=="number"?0:e;function getAnimatableNone$1(e){const a=parseComplexValue(e);return createTransformer(e)(a.map(convertNumbersToZero))}const complex={test:test$2,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[a,s]=e.slice(0,-1).split("(");if(a==="drop-shadow")return e;const[o]=s.match(floatRegex)||[];if(!o)return e;const c=s.replace(o,"");let d=maxDefaults.has(a)?1:0;return o!==s&&(d*=100),a+"("+d+c+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter$1={...complex,getAnimatableNone:e=>{const a=e.match(functionRegex);return a?a.map(applyDefaultFilter).join(" "):e}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter:filter$1,WebkitFilter:filter$1},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,a){let s=getDefaultValueType(e);return s!==filter$1&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(a):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,a,s){let o=0,c;for(;o<e.length&&!c;){const d=e[o];typeof d=="string"&&!invalidTemplates.has(d)&&analyseComplexValue(d).values.length&&(c=e[o]),o++}if(c&&s)for(const d of a)e[d]=getAnimatableNone(s,c)}const isNumOrPxType=e=>e===number||e===px,getPosFromMatrix=(e,a)=>parseFloat(e.split(", ")[a]),getTranslateFromMatrix=(e,a)=>(s,{transform:o})=>{if(o==="none"||!o)return 0;const c=o.match(/^matrix3d\((.+)\)$/u);if(c)return getPosFromMatrix(c[1],a);{const d=o.match(/^matrix\((.+)\)$/u);return d?getPosFromMatrix(d[1],e):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const a=[];return nonTranslationalTransformKeys.forEach(s=>{const o=e.getValue(s);o!==void 0&&(a.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),a}const positionalValues={width:({x:e},{paddingLeft:a="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(a)-parseFloat(s),height:({y:e},{paddingTop:a="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(a)-parseFloat(s),top:(e,{top:a})=>parseFloat(a),left:(e,{left:a})=>parseFloat(a),bottom:({y:e},{top:a})=>parseFloat(a)+(e.max-e.min),right:({x:e},{left:a})=>parseFloat(a)+(e.max-e.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(o=>o.needsMeasurement),a=new Set(e.map(o=>o.element)),s=new Map;a.forEach(o=>{const c=removeNonTranslationalTransform(o);c.length&&(s.set(o,c),o.render())}),e.forEach(o=>o.measureInitialState()),a.forEach(o=>{o.render();const c=s.get(o);c&&c.forEach(([d,h])=>{var g;(g=o.getValue(d))===null||g===void 0||g.set(h)})}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(a,s,o,c,d,h=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...a],this.onComplete=s,this.name=o,this.motionValue=c,this.element=d,this.isAsync=h}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:a,name:s,element:o,motionValue:c}=this;for(let d=0;d<a.length;d++)if(a[d]===null)if(d===0){const h=c==null?void 0:c.get(),g=a[a.length-1];if(h!==void 0)a[0]=h;else if(o&&s){const _=o.readValue(s,g);_!=null&&(a[0]=_)}a[0]===void 0&&(a[0]=g),c&&h===void 0&&c.set(a[0])}else a[d]=a[d-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const a=splitCSSVariableRegex.exec(e);if(!a)return[,];const[,s,o,c]=a;return[`--${s??o}`,c]}function getVariableValue(e,a,s=1){const[o,c]=parseCSSVariable(e);if(!o)return;const d=window.getComputedStyle(a).getPropertyValue(o);if(d){const h=d.trim();return isNumericalString(h)?parseFloat(h):h}return isCSSVariableToken(c)?getVariableValue(c,a,s+1):c}const testValueType=e=>a=>a.test(e),auto={test:e=>e==="auto",parse:e=>e},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));class DOMKeyframesResolver extends KeyframeResolver{constructor(a,s,o,c,d){super(a,s,o,c,d,!0)}readKeyframes(){const{unresolvedKeyframes:a,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let _=0;_<a.length;_++){let $=a[_];if(typeof $=="string"&&($=$.trim(),isCSSVariableToken($))){const _e=getVariableValue($,s.current);_e!==void 0&&(a[_]=_e),_===a.length-1&&(this.finalKeyframe=$)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(o)||a.length!==2)return;const[c,d]=a,h=findDimensionValueType(c),g=findDimensionValueType(d);if(h!==g)if(isNumOrPxType(h)&&isNumOrPxType(g))for(let _=0;_<a.length;_++){const $=a[_];typeof $=="string"&&(a[_]=parseFloat($))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:a,name:s}=this,o=[];for(let c=0;c<a.length;c++)isNone(a[c])&&o.push(c);o.length&&makeNoneKeyframesAnimatable(a,o,s)}measureInitialState(){const{element:a,unresolvedKeyframes:s,name:o}=this;if(!a||!a.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[o](a.measureViewportBox(),window.getComputedStyle(a.current)),s[0]=this.measuredOrigin;const c=s[s.length-1];c!==void 0&&a.getValue(o,c).jump(c,!1)}measureEndState(){var a;const{element:s,name:o,unresolvedKeyframes:c}=this;if(!s||!s.current)return;const d=s.getValue(o);d&&d.jump(this.measuredOrigin,!1);const h=c.length-1,g=c[h];c[h]=positionalValues[o](s.measureViewportBox(),window.getComputedStyle(s.current)),g!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=g),!((a=this.removedTransforms)===null||a===void 0)&&a.length&&this.removedTransforms.forEach(([_,$])=>{s.getValue(_).set($)}),this.resolveNoneKeyframes()}}const isAnimatable=(e,a)=>a==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url("));function hasKeyframesChanged(e){const a=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==a)return!0}function canAnimate(e,a,s,o){const c=e[0];if(c===null)return!1;if(a==="display"||a==="visibility")return!0;const d=e[e.length-1],h=isAnimatable(c,a),g=isAnimatable(d,a);return!h||!g?!1:hasKeyframesChanged(e)||(s==="spring"||isGenerator(s))&&o}const isNotNull=e=>e!==null;function getFinalKeyframe(e,{repeat:a,repeatType:s="loop"},o){const c=e.filter(isNotNull),d=a&&s!=="loop"&&a%2===1?0:c.length-1;return!d||o===void 0?c[d]:o}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:a=!0,delay:s=0,type:o="keyframes",repeat:c=0,repeatDelay:d=0,repeatType:h="loop",...g}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:a,delay:s,type:o,repeat:c,repeatDelay:d,repeatType:h,...g},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(a,s){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:o,type:c,velocity:d,delay:h,onComplete:g,onUpdate:_,isGenerator:$}=this.options;if(!$&&!canAnimate(a,o,c,d))if(h)this.options.duration=0;else{_&&_(getFinalKeyframe(a,this.options,s)),g&&g(),this.resolveFinishedPromise();return}const _e=this.initPlayback(a,s);_e!==!1&&(this._resolved={keyframes:a,finalKeyframe:s,..._e},this.onPostResolved())}onPostResolved(){}then(a,s){return this.currentFinishedPromise.then(a,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(a=>{this.resolveFinishedPromise=a})}}const mixNumber$1=(e,a,s)=>e+(a-e)*s;function hueToRgb(e,a,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(a-e)*6*s:s<1/2?a:s<2/3?e+(a-e)*(2/3-s)*6:e}function hslaToRgba({hue:e,saturation:a,lightness:s,alpha:o}){e/=360,a/=100,s/=100;let c=0,d=0,h=0;if(!a)c=d=h=s;else{const g=s<.5?s*(1+a):s+a-s*a,_=2*s-g;c=hueToRgb(_,g,e+1/3),d=hueToRgb(_,g,e),h=hueToRgb(_,g,e-1/3)}return{red:Math.round(c*255),green:Math.round(d*255),blue:Math.round(h*255),alpha:o}}function mixImmediate(e,a){return s=>s>0?a:e}const mixLinearColor=(e,a,s)=>{const o=e*e,c=s*(a*a-o)+o;return c<0?0:Math.sqrt(c)},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(a=>a.test(e));function asRGBA(e){const a=getColorType(e);if(!a)return!1;let s=a.parse(e);return a===hsla&&(s=hslaToRgba(s)),s}const mixColor=(e,a)=>{const s=asRGBA(e),o=asRGBA(a);if(!s||!o)return mixImmediate(e,a);const c={...s};return d=>(c.red=mixLinearColor(s.red,o.red,d),c.green=mixLinearColor(s.green,o.green,d),c.blue=mixLinearColor(s.blue,o.blue,d),c.alpha=mixNumber$1(s.alpha,o.alpha,d),rgba.transform(c))},combineFunctions=(e,a)=>s=>a(e(s)),pipe$1=(...e)=>e.reduce(combineFunctions),invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,a){return invisibleValues.has(e)?s=>s<=0?e:a:s=>s>=1?a:e}function mixNumber(e,a){return s=>mixNumber$1(e,a,s)}function getMixer(e){return typeof e=="number"?mixNumber:typeof e=="string"?isCSSVariableToken(e)?mixImmediate:color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?color.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,a){const s=[...e],o=s.length,c=e.map((d,h)=>getMixer(d)(d,a[h]));return d=>{for(let h=0;h<o;h++)s[h]=c[h](d);return s}}function mixObject(e,a){const s={...e,...a},o={};for(const c in s)e[c]!==void 0&&a[c]!==void 0&&(o[c]=getMixer(e[c])(e[c],a[c]));return c=>{for(const d in o)s[d]=o[d](c);return s}}function matchOrder(e,a){var s;const o=[],c={color:0,var:0,number:0};for(let d=0;d<a.values.length;d++){const h=a.types[d],g=e.indexes[h][c[h]],_=(s=e.values[g])!==null&&s!==void 0?s:0;o[d]=_,c[h]++}return o}const mixComplex=(e,a)=>{const s=complex.createTransformer(a),o=analyseComplexValue(e),c=analyseComplexValue(a);return o.indexes.var.length===c.indexes.var.length&&o.indexes.color.length===c.indexes.color.length&&o.indexes.number.length>=c.indexes.number.length?invisibleValues.has(e)&&!c.values.length||invisibleValues.has(a)&&!o.values.length?mixVisibility(e,a):pipe$1(mixArray(matchOrder(o,c),c.values),s):mixImmediate(e,a)};function mix(e,a,s){return typeof e=="number"&&typeof a=="number"&&typeof s=="number"?mixNumber$1(e,a,s):getMixer(e)(e,a)}const velocitySampleDuration=5;function calcGeneratorVelocity(e,a,s){const o=Math.max(a-velocitySampleDuration,0);return velocityPerSecond(s-e(o),a-o)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:a=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:o=springDefaults.mass}){let c,d,h=1-a;h=clamp(springDefaults.minDamping,springDefaults.maxDamping,h),e=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),h<1?(c=$=>{const _e=$*h,tt=_e*e,nt=_e-s,lt=calcAngularFreq($,h),dt=Math.exp(-tt);return safeMin-nt/lt*dt},d=$=>{const tt=$*h*e,nt=tt*s+s,lt=Math.pow(h,2)*Math.pow($,2)*e,dt=Math.exp(-tt),ot=calcAngularFreq(Math.pow($,2),h);return(-c($)+safeMin>0?-1:1)*((nt-lt)*dt)/ot}):(c=$=>{const _e=Math.exp(-$*e),tt=($-s)*e+1;return-safeMin+_e*tt},d=$=>{const _e=Math.exp(-$*e),tt=(s-$)*(e*e);return _e*tt});const g=5/e,_=approximateRoot(c,d,g);if(e=secondsToMilliseconds(e),isNaN(_))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const $=Math.pow(_,2)*o;return{stiffness:$,damping:h*2*Math.sqrt(o*$),duration:e}}}const rootIterations=12;function approximateRoot(e,a,s){let o=s;for(let c=1;c<rootIterations;c++)o=o-e(o)/a(o);return o}function calcAngularFreq(e,a){return e*Math.sqrt(1-a*a)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,a){return a.some(s=>e[s]!==void 0)}function getSpringOptions(e){let a={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const s=e.visualDuration,o=2*Math.PI/(s*1.2),c=o*o,d=2*clamp(.05,1,1-(e.bounce||0))*Math.sqrt(c);a={...a,mass:springDefaults.mass,stiffness:c,damping:d}}else{const s=findSpring(e);a={...a,...s,mass:springDefaults.mass},a.isResolvedFromDuration=!0}return a}function spring(e=springDefaults.visualDuration,a=springDefaults.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:a}:e;let{restSpeed:o,restDelta:c}=s;const d=s.keyframes[0],h=s.keyframes[s.keyframes.length-1],g={done:!1,value:d},{stiffness:_,damping:$,mass:_e,duration:tt,velocity:nt,isResolvedFromDuration:lt}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),dt=nt||0,ot=$/(2*Math.sqrt(_*_e)),gt=h-d,pt=millisecondsToSeconds(Math.sqrt(_/_e)),mt=Math.abs(gt)<5;o||(o=mt?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),c||(c=mt?springDefaults.restDelta.granular:springDefaults.restDelta.default);let ht;if(ot<1){const _t=calcAngularFreq(pt,ot);ht=Tt=>{const ut=Math.exp(-ot*pt*Tt);return h-ut*((dt+ot*pt*gt)/_t*Math.sin(_t*Tt)+gt*Math.cos(_t*Tt))}}else if(ot===1)ht=_t=>h-Math.exp(-pt*_t)*(gt+(dt+pt*gt)*_t);else{const _t=pt*Math.sqrt(ot*ot-1);ht=Tt=>{const ut=Math.exp(-ot*pt*Tt),bt=Math.min(_t*Tt,300);return h-ut*((dt+ot*pt*gt)*Math.sinh(bt)+_t*gt*Math.cosh(bt))/_t}}const St={calculatedDuration:lt&&tt||null,next:_t=>{const Tt=ht(_t);if(lt)g.done=_t>=tt;else{let ut=0;ot<1&&(ut=_t===0?secondsToMilliseconds(dt):calcGeneratorVelocity(ht,_t,Tt));const bt=Math.abs(ut)<=o,zt=Math.abs(h-Tt)<=c;g.done=bt&&zt}return g.value=g.done?h:Tt,g},toString:()=>{const _t=Math.min(calcGeneratorDuration(St),maxGeneratorDuration),Tt=generateLinearEasing(ut=>St.next(_t*ut).value,_t,30);return _t+"ms "+Tt}};return St}function inertia({keyframes:e,velocity:a=0,power:s=.8,timeConstant:o=325,bounceDamping:c=10,bounceStiffness:d=500,modifyTarget:h,min:g,max:_,restDelta:$=.5,restSpeed:_e}){const tt=e[0],nt={done:!1,value:tt},lt=bt=>g!==void 0&&bt<g||_!==void 0&&bt>_,dt=bt=>g===void 0?_:_===void 0||Math.abs(g-bt)<Math.abs(_-bt)?g:_;let ot=s*a;const gt=tt+ot,pt=h===void 0?gt:h(gt);pt!==gt&&(ot=pt-tt);const mt=bt=>-ot*Math.exp(-bt/o),ht=bt=>pt+mt(bt),St=bt=>{const zt=mt(bt),Ht=ht(bt);nt.done=Math.abs(zt)<=$,nt.value=nt.done?pt:Ht};let _t,Tt;const ut=bt=>{lt(nt.value)&&(_t=bt,Tt=spring({keyframes:[nt.value,dt(nt.value)],velocity:calcGeneratorVelocity(ht,bt,nt.value),damping:c,stiffness:d,restDelta:$,restSpeed:_e}))};return ut(0),{calculatedDuration:null,next:bt=>{let zt=!1;return!Tt&&_t===void 0&&(zt=!0,St(bt),ut(bt)),_t!==void 0&&bt>=_t?Tt.next(bt-_t):(!zt&&St(bt),nt)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant(e.length===4);const[a,s,o,c]=e;return cubicBezier(a,s,o,c)}else if(typeof e=="string")return easingLookup[e];return e};function createMixers(e,a,s){const o=[],c=s||mix,d=e.length-1;for(let h=0;h<d;h++){let g=c(e[h],e[h+1]);if(a){const _=Array.isArray(a)?a[h]||noop$1:a;g=pipe$1(_,g)}o.push(g)}return o}function interpolate(e,a,{clamp:s=!0,ease:o,mixer:c}={}){const d=e.length;if(invariant(d===a.length),d===1)return()=>a[0];if(d===2&&a[0]===a[1])return()=>a[1];const h=e[0]===e[1];e[0]>e[d-1]&&(e=[...e].reverse(),a=[...a].reverse());const g=createMixers(a,o,c),_=g.length,$=_e=>{if(h&&_e<e[0])return a[0];let tt=0;if(_>1)for(;tt<e.length-2&&!(_e<e[tt+1]);tt++);const nt=progress(e[tt],e[tt+1],_e);return g[tt](nt)};return s?_e=>$(clamp(e[0],e[d-1],_e)):$}function fillOffset(e,a){const s=e[e.length-1];for(let o=1;o<=a;o++){const c=progress(0,a,o);e.push(mixNumber$1(s,1,c))}}function defaultOffset(e){const a=[0];return fillOffset(a,e.length-1),a}function convertOffsetToTimes(e,a){return e.map(s=>s*a)}function defaultEasing(e,a){return e.map(()=>a||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:a,times:s,ease:o="easeInOut"}){const c=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),d={done:!1,value:a[0]},h=convertOffsetToTimes(s&&s.length===a.length?s:defaultOffset(a),e),g=interpolate(h,a,{ease:Array.isArray(c)?c:defaultEasing(a,c)});return{calculatedDuration:e,next:_=>(d.value=g(_),d.done=_>=e,d)}}const frameloopDriver=e=>{const a=({timestamp:s})=>e(s);return{start:()=>frame.update(a,!0),stop:()=>cancelFrame(a),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=e=>e/100;class MainThreadAnimation extends BaseAnimation{constructor(a){super(a),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:_}=this.options;_&&_()};const{name:s,motionValue:o,element:c,keyframes:d}=this.options,h=(c==null?void 0:c.KeyframeResolver)||KeyframeResolver,g=(_,$)=>this.onKeyframesResolved(_,$);this.resolver=new h(d,g,s,o,c),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(a){const{type:s="keyframes",repeat:o=0,repeatDelay:c=0,repeatType:d,velocity:h=0}=this.options,g=isGenerator(s)?s:generators[s]||keyframes;let _,$;g!==keyframes&&typeof a[0]!="number"&&(_=pipe$1(percentToProgress,mix(a[0],a[1])),a=[0,100]);const _e=g({...this.options,keyframes:a});d==="mirror"&&($=g({...this.options,keyframes:[...a].reverse(),velocity:-h})),_e.calculatedDuration===null&&(_e.calculatedDuration=calcGeneratorDuration(_e));const{calculatedDuration:tt}=_e,nt=tt+c,lt=nt*(o+1)-c;return{generator:_e,mirroredGenerator:$,mapPercentToKeyframes:_,calculatedDuration:tt,resolvedDuration:nt,totalDuration:lt}}onPostResolved(){const{autoplay:a=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!a?this.pause():this.state=this.pendingPlayState}tick(a,s=!1){const{resolved:o}=this;if(!o){const{keyframes:bt}=this.options;return{done:!0,value:bt[bt.length-1]}}const{finalKeyframe:c,generator:d,mirroredGenerator:h,mapPercentToKeyframes:g,keyframes:_,calculatedDuration:$,totalDuration:_e,resolvedDuration:tt}=o;if(this.startTime===null)return d.next(0);const{delay:nt,repeat:lt,repeatType:dt,repeatDelay:ot,onUpdate:gt}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,a):this.speed<0&&(this.startTime=Math.min(a-_e/this.speed,this.startTime)),s?this.currentTime=a:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(a-this.startTime)*this.speed;const pt=this.currentTime-nt*(this.speed>=0?1:-1),mt=this.speed>=0?pt<0:pt>_e;this.currentTime=Math.max(pt,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=_e);let ht=this.currentTime,St=d;if(lt){const bt=Math.min(this.currentTime,_e)/tt;let zt=Math.floor(bt),Ht=bt%1;!Ht&&bt>=1&&(Ht=1),Ht===1&&zt--,zt=Math.min(zt,lt+1),!!(zt%2)&&(dt==="reverse"?(Ht=1-Ht,ot&&(Ht-=ot/tt)):dt==="mirror"&&(St=h)),ht=clamp(0,1,Ht)*tt}const _t=mt?{done:!1,value:_[0]}:St.next(ht);g&&(_t.value=g(_t.value));let{done:Tt}=_t;!mt&&$!==null&&(Tt=this.speed>=0?this.currentTime>=_e:this.currentTime<=0);const ut=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Tt);return ut&&c!==void 0&&(_t.value=getFinalKeyframe(_,this.options,c)),gt&&gt(_t.value),ut&&this.finish(),_t}get duration(){const{resolved:a}=this;return a?millisecondsToSeconds(a.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(a){a=secondsToMilliseconds(a),this.currentTime=a,this.holdTime!==null||this.speed===0?this.holdTime=a:this.driver&&(this.startTime=this.driver.now()-a/this.speed)}get speed(){return this.playbackSpeed}set speed(a){const s=this.playbackSpeed!==a;this.playbackSpeed=a,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:a=frameloopDriver,onPlay:s,startTime:o}=this.options;this.driver||(this.driver=a(d=>this.tick(d))),s&&s();const c=this.driver.now();this.holdTime!==null?this.startTime=c-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=c):this.startTime=o??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var a;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(a=this.currentTime)!==null&&a!==void 0?a:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:a}=this.options;a&&a()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(a){return this.startTime=0,this.tick(a,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function startWaapiAnimation(e,a,s,{delay:o=0,duration:c=300,repeat:d=0,repeatType:h="loop",ease:g="easeInOut",times:_}={}){const $={[a]:s};_&&($.offset=_);const _e=mapEasingToNativeEasing(g,c);return Array.isArray(_e)&&($.easing=_e),e.animate($,{delay:o,duration:c,easing:Array.isArray(_e)?"linear":_e,fill:"both",iterations:d+1,direction:h==="reverse"?"alternate":"normal"})}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(e){return isGenerator(e.type)||e.type==="spring"||!isWaapiSupportedEasing(e.ease)}function pregenerateKeyframes(e,a){const s=new MainThreadAnimation({...a,keyframes:e,repeat:0,delay:0,isGenerator:!0});let o={done:!1,value:e[0]};const c=[];let d=0;for(;!o.done&&d<maxDuration;)o=s.sample(d),c.push(o.value),d+=sampleDelta;return{times:void 0,keyframes:c,duration:d-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(a){super(a);const{name:s,motionValue:o,element:c,keyframes:d}=this.options;this.resolver=new DOMKeyframesResolver(d,(h,g)=>this.onKeyframesResolved(h,g),s,o,c),this.resolver.scheduleResolve()}initPlayback(a,s){let{duration:o=300,times:c,ease:d,type:h,motionValue:g,name:_,startTime:$}=this.options;if(!g.owner||!g.owner.current)return!1;if(typeof d=="string"&&supportsLinearEasing()&&isUnsupportedEase(d)&&(d=unsupportedEasingFunctions[d]),requiresPregeneratedKeyframes(this.options)){const{onComplete:tt,onUpdate:nt,motionValue:lt,element:dt,...ot}=this.options,gt=pregenerateKeyframes(a,ot);a=gt.keyframes,a.length===1&&(a[1]=a[0]),o=gt.duration,c=gt.times,d=gt.ease,h="keyframes"}const _e=startWaapiAnimation(g.owner.current,_,a,{...this.options,duration:o,times:c,ease:d});return _e.startTime=$??this.calcStartTime(),this.pendingTimeline?(attachTimeline(_e,this.pendingTimeline),this.pendingTimeline=void 0):_e.onfinish=()=>{const{onComplete:tt}=this.options;g.set(getFinalKeyframe(a,this.options,s)),tt&&tt(),this.cancel(),this.resolveFinishedPromise()},{animation:_e,duration:o,times:c,type:h,ease:d,keyframes:a}}get duration(){const{resolved:a}=this;if(!a)return 0;const{duration:s}=a;return millisecondsToSeconds(s)}get time(){const{resolved:a}=this;if(!a)return 0;const{animation:s}=a;return millisecondsToSeconds(s.currentTime||0)}set time(a){const{resolved:s}=this;if(!s)return;const{animation:o}=s;o.currentTime=secondsToMilliseconds(a)}get speed(){const{resolved:a}=this;if(!a)return 1;const{animation:s}=a;return s.playbackRate}set speed(a){const{resolved:s}=this;if(!s)return;const{animation:o}=s;o.playbackRate=a}get state(){const{resolved:a}=this;if(!a)return"idle";const{animation:s}=a;return s.playState}get startTime(){const{resolved:a}=this;if(!a)return null;const{animation:s}=a;return s.startTime}attachTimeline(a){if(!this._resolved)this.pendingTimeline=a;else{const{resolved:s}=this;if(!s)return noop$1;const{animation:o}=s;attachTimeline(o,a)}return noop$1}play(){if(this.isStopped)return;const{resolved:a}=this;if(!a)return;const{animation:s}=a;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:a}=this;if(!a)return;const{animation:s}=a;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:a}=this;if(!a)return;const{animation:s,keyframes:o,duration:c,type:d,ease:h,times:g}=a;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:$,onUpdate:_e,onComplete:tt,element:nt,...lt}=this.options,dt=new MainThreadAnimation({...lt,keyframes:o,duration:c,type:d,ease:h,times:g,isGenerator:!0}),ot=secondsToMilliseconds(this.time);$.setWithVelocity(dt.sample(ot-sampleDelta).value,dt.sample(ot).value,sampleDelta)}const{onStop:_}=this.options;_&&_(),this.cancel()}complete(){const{resolved:a}=this;a&&a.animation.finish()}cancel(){const{resolved:a}=this;a&&a.animation.cancel()}static supports(a){const{motionValue:s,name:o,repeatDelay:c,repeatType:d,damping:h,type:g}=a;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:_,transformTemplate:$}=s.owner.getProps();return supportsWaapi()&&o&&acceleratedValues.has(o)&&!_&&!$&&!c&&d!=="mirror"&&h!==0&&g!=="inertia"}}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:a})=>a.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(a[1]):underDampedSpring:ease;function isTransitionDefined({when:e,delay:a,delayChildren:s,staggerChildren:o,staggerDirection:c,repeat:d,repeatType:h,repeatDelay:g,from:_,elapsed:$,..._e}){return!!Object.keys(_e).length}const animateMotionValue=(e,a,s,o={},c,d)=>h=>{const g=getValueTransition(o,e)||{},_=g.delay||o.delay||0;let{elapsed:$=0}=o;$=$-secondsToMilliseconds(_);let _e={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:a.getVelocity(),...g,delay:-$,onUpdate:nt=>{a.set(nt),g.onUpdate&&g.onUpdate(nt)},onComplete:()=>{h(),g.onComplete&&g.onComplete()},name:e,motionValue:a,element:d?void 0:c};isTransitionDefined(g)||(_e={..._e,...getDefaultTransition(e,_e)}),_e.duration&&(_e.duration=secondsToMilliseconds(_e.duration)),_e.repeatDelay&&(_e.repeatDelay=secondsToMilliseconds(_e.repeatDelay)),_e.from!==void 0&&(_e.keyframes[0]=_e.from);let tt=!1;if((_e.type===!1||_e.duration===0&&!_e.repeatDelay)&&(_e.duration=0,_e.delay===0&&(tt=!0)),tt&&!d&&a.get()!==void 0){const nt=getFinalKeyframe(_e.keyframes,g);if(nt!==void 0)return frame.update(()=>{_e.onUpdate(nt),_e.onComplete()}),new GroupPlaybackControls([])}return!d&&AcceleratedAnimation.supports(_e)?new AcceleratedAnimation(_e):new MainThreadAnimation(_e)};function shouldBlockAnimation({protectedKeys:e,needsAnimating:a},s){const o=e.hasOwnProperty(s)&&a[s]!==!0;return a[s]=!1,o}function animateTarget(e,a,{delay:s=0,transitionOverride:o,type:c}={}){var d;let{transition:h=e.getDefaultTransition(),transitionEnd:g,..._}=a;o&&(h=o);const $=[],_e=c&&e.animationState&&e.animationState.getState()[c];for(const tt in _){const nt=e.getValue(tt,(d=e.latestValues[tt])!==null&&d!==void 0?d:null),lt=_[tt];if(lt===void 0||_e&&shouldBlockAnimation(_e,tt))continue;const dt={delay:s,...getValueTransition(h||{},tt)};let ot=!1;if(window.MotionHandoffAnimation){const pt=getOptimisedAppearId(e);if(pt){const mt=window.MotionHandoffAnimation(pt,tt,frame);mt!==null&&(dt.startTime=mt,ot=!0)}}addValueToWillChange(e,tt),nt.start(animateMotionValue(tt,nt,lt,e.shouldReduceMotion&&positionalKeys.has(tt)?{type:!1}:dt,e,ot));const gt=nt.animation;gt&&$.push(gt)}return g&&Promise.all($).then(()=>{frame.update(()=>{g&&setTarget(e,g)})}),$}function animateVariant(e,a,s={}){var o;const c=resolveVariant(e,a,s.type==="exit"?(o=e.presenceContext)===null||o===void 0?void 0:o.custom:void 0);let{transition:d=e.getDefaultTransition()||{}}=c||{};s.transitionOverride&&(d=s.transitionOverride);const h=c?()=>Promise.all(animateTarget(e,c,s)):()=>Promise.resolve(),g=e.variantChildren&&e.variantChildren.size?($=0)=>{const{delayChildren:_e=0,staggerChildren:tt,staggerDirection:nt}=d;return animateChildren(e,a,_e+$,tt,nt,s)}:()=>Promise.resolve(),{when:_}=d;if(_){const[$,_e]=_==="beforeChildren"?[h,g]:[g,h];return $().then(()=>_e())}else return Promise.all([h(),g(s.delay)])}function animateChildren(e,a,s=0,o=0,c=1,d){const h=[],g=(e.variantChildren.size-1)*o,_=c===1?($=0)=>$*o:($=0)=>g-$*o;return Array.from(e.variantChildren).sort(sortByTreeOrder).forEach(($,_e)=>{$.notify("AnimationStart",a),h.push(animateVariant($,a,{...d,delay:s+_(_e)}).then(()=>$.notify("AnimationComplete",a)))}),Promise.all(h)}function sortByTreeOrder(e,a){return e.sortNodePosition(a)}function animateVisualElement(e,a,s={}){e.notify("AnimationStart",a);let o;if(Array.isArray(a)){const c=a.map(d=>animateVariant(e,d,s));o=Promise.all(c)}else if(typeof a=="string")o=animateVariant(e,a,s);else{const c=typeof a=="function"?resolveVariant(e,a,s.custom):a;o=Promise.all(animateTarget(e,c,s))}return o.then(()=>{e.notify("AnimationComplete",a)})}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?getVariantContext(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const a={};for(let s=0;s<numVariantProps;s++){const o=variantProps[s],c=e.props[o];(isVariantLabel(c)||c===!1)&&(a[o]=c)}return a}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(e){return a=>Promise.all(a.map(({animation:s,options:o})=>animateVisualElement(e,s,o)))}function createAnimationState(e){let a=animateList(e),s=createState(),o=!0;const c=_=>($,_e)=>{var tt;const nt=resolveVariant(e,_e,_==="exit"?(tt=e.presenceContext)===null||tt===void 0?void 0:tt.custom:void 0);if(nt){const{transition:lt,transitionEnd:dt,...ot}=nt;$={...$,...ot,...dt}}return $};function d(_){a=_(e)}function h(_){const{props:$}=e,_e=getVariantContext(e.parent)||{},tt=[],nt=new Set;let lt={},dt=1/0;for(let gt=0;gt<numAnimationTypes;gt++){const pt=reversePriorityOrder[gt],mt=s[pt],ht=$[pt]!==void 0?$[pt]:_e[pt],St=isVariantLabel(ht),_t=pt===_?mt.isActive:null;_t===!1&&(dt=gt);let Tt=ht===_e[pt]&&ht!==$[pt]&&St;if(Tt&&o&&e.manuallyAnimateOnMount&&(Tt=!1),mt.protectedKeys={...lt},!mt.isActive&&_t===null||!ht&&!mt.prevProp||isAnimationControls(ht)||typeof ht=="boolean")continue;const ut=checkVariantsDidChange(mt.prevProp,ht);let bt=ut||pt===_&&mt.isActive&&!Tt&&St||gt>dt&&St,zt=!1;const Ht=Array.isArray(ht)?ht:[ht];let Qt=Ht.reduce(c(pt),{});_t===!1&&(Qt={});const{prevResolvedValues:sr={}}=mt,Ut={...sr,...Qt},vr=br=>{bt=!0,nt.has(br)&&(zt=!0,nt.delete(br)),mt.needsAnimating[br]=!0;const Gt=e.getValue(br);Gt&&(Gt.liveStyle=!1)};for(const br in Ut){const Gt=Qt[br],nr=sr[br];if(lt.hasOwnProperty(br))continue;let or=!1;isKeyframesTarget(Gt)&&isKeyframesTarget(nr)?or=!shallowCompare(Gt,nr):or=Gt!==nr,or?Gt!=null?vr(br):nt.add(br):Gt!==void 0&&nt.has(br)?vr(br):mt.protectedKeys[br]=!0}mt.prevProp=ht,mt.prevResolvedValues=Qt,mt.isActive&&(lt={...lt,...Qt}),o&&e.blockInitialAnimation&&(bt=!1),bt&&(!(Tt&&ut)||zt)&&tt.push(...Ht.map(br=>({animation:br,options:{type:pt}})))}if(nt.size){const gt={};nt.forEach(pt=>{const mt=e.getBaseTarget(pt),ht=e.getValue(pt);ht&&(ht.liveStyle=!0),gt[pt]=mt??null}),tt.push({animation:gt})}let ot=!!tt.length;return o&&($.initial===!1||$.initial===$.animate)&&!e.manuallyAnimateOnMount&&(ot=!1),o=!1,ot?a(tt):Promise.resolve()}function g(_,$){var _e;if(s[_].isActive===$)return Promise.resolve();(_e=e.variantChildren)===null||_e===void 0||_e.forEach(nt=>{var lt;return(lt=nt.animationState)===null||lt===void 0?void 0:lt.setActive(_,$)}),s[_].isActive=$;const tt=h(_);for(const nt in s)s[nt].protectedKeys={};return tt}return{animateChanges:h,setActive:g,setAnimateFunction:d,getState:()=>s,reset:()=>{s=createState(),o=!0}}}function checkVariantsDidChange(e,a){return typeof a=="string"?a!==e:Array.isArray(a)?!shallowCompare(a,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(a){this.isMounted=!1,this.node=a}update(){}}class AnimationFeature extends Feature{constructor(a){super(a),a.animationState||(a.animationState=createAnimationState(a))}updateAnimationControlsSubscription(){const{animate:a}=this.node.getProps();isAnimationControls(a)&&(this.unmountControls=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:a}=this.node.getProps(),{animate:s}=this.node.prevProps||{};a!==s&&this.updateAnimationControlsSubscription()}unmount(){var a;this.node.animationState.reset(),(a=this.unmountControls)===null||a===void 0||a.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:a,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===o)return;const c=this.node.animationState.setActive("exit",!a);s&&!a&&c.then(()=>s(this.id))}mount(){const{register:a}=this.node.presenceContext||{};a&&(this.unmount=a(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(e,a,s,o={passive:!0}){return e.addEventListener(a,s,o),()=>e.removeEventListener(a,s)}function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>a=>isPrimaryPointer(a)&&e(a,extractEventInfo(a));function addPointerEvent(e,a,s,o){return addDomEvent(e,a,addPointerInfo(s),o)}const distance=(e,a)=>Math.abs(e-a);function distance2D(e,a){const s=distance(e.x,a.x),o=distance(e.y,a.y);return Math.sqrt(s**2+o**2)}class PanSession{constructor(a,s,{transformPagePoint:o,contextWindow:c,dragSnapToOrigin:d=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const tt=getPanInfo(this.lastMoveEventInfo,this.history),nt=this.startEvent!==null,lt=distance2D(tt.offset,{x:0,y:0})>=3;if(!nt&&!lt)return;const{point:dt}=tt,{timestamp:ot}=frameData;this.history.push({...dt,timestamp:ot});const{onStart:gt,onMove:pt}=this.handlers;nt||(gt&&gt(this.lastMoveEvent,tt),this.startEvent=this.lastMoveEvent),pt&&pt(this.lastMoveEvent,tt)},this.handlePointerMove=(tt,nt)=>{this.lastMoveEvent=tt,this.lastMoveEventInfo=transformPoint(nt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(tt,nt)=>{this.end();const{onEnd:lt,onSessionEnd:dt,resumeAnimation:ot}=this.handlers;if(this.dragSnapToOrigin&&ot&&ot(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const gt=getPanInfo(tt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(nt,this.transformPagePoint),this.history);this.startEvent&&lt&&lt(tt,gt),dt&&dt(tt,gt)},!isPrimaryPointer(a))return;this.dragSnapToOrigin=d,this.handlers=s,this.transformPagePoint=o,this.contextWindow=c||window;const h=extractEventInfo(a),g=transformPoint(h,this.transformPagePoint),{point:_}=g,{timestamp:$}=frameData;this.history=[{..._,timestamp:$}];const{onSessionStart:_e}=s;_e&&_e(a,getPanInfo(g,this.history)),this.removeListeners=pipe$1(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(e,a){return a?{point:a(e.point)}:e}function subtractPoint(e,a){return{x:e.x-a.x,y:e.y-a.y}}function getPanInfo({point:e},a){return{point:e,delta:subtractPoint(e,lastDevicePoint(a)),offset:subtractPoint(e,startDevicePoint(a)),velocity:getVelocity(a,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,a){if(e.length<2)return{x:0,y:0};let s=e.length-1,o=null;const c=lastDevicePoint(e);for(;s>=0&&(o=e[s],!(c.timestamp-o.timestamp>secondsToMilliseconds(a)));)s--;if(!o)return{x:0,y:0};const d=millisecondsToSeconds(c.timestamp-o.timestamp);if(d===0)return{x:0,y:0};const h={x:(c.x-o.x)/d,y:(c.y-o.y)/d};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,a,s){return Math.abs(e-a)<=s}function calcAxisDelta(e,a,s,o=.5){e.origin=o,e.originPoint=mixNumber$1(a.min,a.max,e.origin),e.scale=calcLength(s)/calcLength(a),e.translate=mixNumber$1(s.min,s.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,a,s,o){calcAxisDelta(e.x,a.x,s.x,o?o.originX:void 0),calcAxisDelta(e.y,a.y,s.y,o?o.originY:void 0)}function calcRelativeAxis(e,a,s){e.min=s.min+a.min,e.max=e.min+calcLength(a)}function calcRelativeBox(e,a,s){calcRelativeAxis(e.x,a.x,s.x),calcRelativeAxis(e.y,a.y,s.y)}function calcRelativeAxisPosition(e,a,s){e.min=a.min-s.min,e.max=e.min+calcLength(a)}function calcRelativePosition(e,a,s){calcRelativeAxisPosition(e.x,a.x,s.x),calcRelativeAxisPosition(e.y,a.y,s.y)}function applyConstraints(e,{min:a,max:s},o){return a!==void 0&&e<a?e=o?mixNumber$1(a,e,o.min):Math.max(e,a):s!==void 0&&e>s&&(e=o?mixNumber$1(s,e,o.max):Math.min(e,s)),e}function calcRelativeAxisConstraints(e,a,s){return{min:a!==void 0?e.min+a:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:a,left:s,bottom:o,right:c}){return{x:calcRelativeAxisConstraints(e.x,s,c),y:calcRelativeAxisConstraints(e.y,a,o)}}function calcViewportAxisConstraints(e,a){let s=a.min-e.min,o=a.max-e.max;return a.max-a.min<e.max-e.min&&([s,o]=[o,s]),{min:s,max:o}}function calcViewportConstraints(e,a){return{x:calcViewportAxisConstraints(e.x,a.x),y:calcViewportAxisConstraints(e.y,a.y)}}function calcOrigin(e,a){let s=.5;const o=calcLength(e),c=calcLength(a);return c>o?s=progress(a.min,a.max-o,e.min):o>c&&(s=progress(e.min,e.max-c,a.min)),clamp(0,1,s)}function rebaseAxisConstraints(e,a){const s={};return a.min!==void 0&&(s.min=a.min-e.min),a.max!==void 0&&(s.max=a.max-e.min),s}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,a,s){return{min:resolvePointElastic(e,a),max:resolvePointElastic(e,s)}}function resolvePointElastic(e,a){return typeof e=="number"?e:e[a]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(e){return[e("x"),e("y")]}function convertBoundingBoxToBox({top:e,left:a,right:s,bottom:o}){return{x:{min:a,max:s},y:{min:e,max:o}}}function convertBoxToBoundingBox({x:e,y:a}){return{top:a.min,right:e.max,bottom:a.max,left:e.min}}function transformBoxPoints(e,a){if(!a)return e;const s=a({x:e.left,y:e.top}),o=a({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:a,scaleY:s}){return!isIdentityScale(e)||!isIdentityScale(a)||!isIdentityScale(s)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,a,s){const o=e-s,c=a*o;return s+c}function applyPointDelta(e,a,s,o,c){return c!==void 0&&(e=scalePoint(e,c,o)),scalePoint(e,s,o)+a}function applyAxisDelta(e,a=0,s=1,o,c){e.min=applyPointDelta(e.min,a,s,o,c),e.max=applyPointDelta(e.max,a,s,o,c)}function applyBoxDelta(e,{x:a,y:s}){applyAxisDelta(e.x,a.translate,a.scale,a.originPoint),applyAxisDelta(e.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,a,s,o=!1){const c=s.length;if(!c)return;a.x=a.y=1;let d,h;for(let g=0;g<c;g++){d=s[g],h=d.projectionDelta;const{visualElement:_}=d.options;_&&_.props.style&&_.props.style.display==="contents"||(o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&transformBox(e,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),h&&(a.x*=h.x.scale,a.y*=h.y.scale,applyBoxDelta(e,h)),o&&hasTransform(d.latestValues)&&transformBox(e,d.latestValues))}a.x<TREE_SCALE_SNAP_MAX&&a.x>TREE_SCALE_SNAP_MIN&&(a.x=1),a.y<TREE_SCALE_SNAP_MAX&&a.y>TREE_SCALE_SNAP_MIN&&(a.y=1)}function translateAxis(e,a){e.min=e.min+a,e.max=e.max+a}function transformAxis(e,a,s,o,c=.5){const d=mixNumber$1(e.min,e.max,c);applyAxisDelta(e,a,s,d,o)}function transformBox(e,a){transformAxis(e.x,a.x,a.scaleX,a.scale,a.originX),transformAxis(e.y,a.y,a.scaleY,a.scale,a.originY)}function measureViewportBox(e,a){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),a))}function measurePageBox(e,a,s){const o=measureViewportBox(e,s),{scroll:c}=a;return c&&(translateAxis(o.x,c.offset.x),translateAxis(o.y,c.offset.y)),o}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(a){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=a}start(a,{snapToCursor:s=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const c=_e=>{const{dragSnapToOrigin:tt}=this.getProps();tt?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(extractEventInfo(_e).point)},d=(_e,tt)=>{const{drag:nt,dragPropagation:lt,onDragStart:dt}=this.getProps();if(nt&&!lt&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(nt),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(gt=>{let pt=this.getAxisMotionValue(gt).get()||0;if(percent.test(pt)){const{projection:mt}=this.visualElement;if(mt&&mt.layout){const ht=mt.layout.layoutBox[gt];ht&&(pt=calcLength(ht)*(parseFloat(pt)/100))}}this.originPoint[gt]=pt}),dt&&frame.postRender(()=>dt(_e,tt)),addValueToWillChange(this.visualElement,"transform");const{animationState:ot}=this.visualElement;ot&&ot.setActive("whileDrag",!0)},h=(_e,tt)=>{const{dragPropagation:nt,dragDirectionLock:lt,onDirectionLock:dt,onDrag:ot}=this.getProps();if(!nt&&!this.openDragLock)return;const{offset:gt}=tt;if(lt&&this.currentDirection===null){this.currentDirection=getCurrentDirection(gt),this.currentDirection!==null&&dt&&dt(this.currentDirection);return}this.updateAxis("x",tt.point,gt),this.updateAxis("y",tt.point,gt),this.visualElement.render(),ot&&ot(_e,tt)},g=(_e,tt)=>this.stop(_e,tt),_=()=>eachAxis(_e=>{var tt;return this.getAnimationState(_e)==="paused"&&((tt=this.getAxisMotionValue(_e).animation)===null||tt===void 0?void 0:tt.play())}),{dragSnapToOrigin:$}=this.getProps();this.panSession=new PanSession(a,{onSessionStart:c,onStart:d,onMove:h,onSessionEnd:g,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:$,contextWindow:getContextWindow(this.visualElement)})}stop(a,s){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&frame.postRender(()=>d(a,s))}cancel(){this.isDragging=!1;const{projection:a,animationState:s}=this.visualElement;a&&(a.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(a,s,o){const{drag:c}=this.getProps();if(!o||!shouldDrag(a,c,this.currentDirection))return;const d=this.getAxisMotionValue(a);let h=this.originPoint[a]+o[a];this.constraints&&this.constraints[a]&&(h=applyConstraints(h,this.constraints[a],this.elastic[a])),d.set(h)}resolveConstraints(){var a;const{dragConstraints:s,dragElastic:o}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)===null||a===void 0?void 0:a.layout,d=this.constraints;s&&isRefObject(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&c?this.constraints=calcRelativeConstraints(c.layoutBox,s):this.constraints=!1,this.elastic=resolveDragElastic(o),d!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=rebaseAxisConstraints(c.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:a,onMeasureDragConstraints:s}=this.getProps();if(!a||!isRefObject(a))return!1;const o=a.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const d=measurePageBox(o,c.root,this.visualElement.getTransformPagePoint());let h=calcViewportConstraints(c.layout.layoutBox,d);if(s){const g=s(convertBoxToBoundingBox(h));this.hasMutatedConstraints=!!g,g&&(h=convertBoundingBoxToBox(g))}return h}startAnimation(a){const{drag:s,dragMomentum:o,dragElastic:c,dragTransition:d,dragSnapToOrigin:h,onDragTransitionEnd:g}=this.getProps(),_=this.constraints||{},$=eachAxis(_e=>{if(!shouldDrag(_e,s,this.currentDirection))return;let tt=_&&_[_e]||{};h&&(tt={min:0,max:0});const nt=c?200:1e6,lt=c?40:1e7,dt={type:"inertia",velocity:o?a[_e]:0,bounceStiffness:nt,bounceDamping:lt,timeConstant:750,restDelta:1,restSpeed:10,...d,...tt};return this.startAxisValueAnimation(_e,dt)});return Promise.all($).then(g)}startAxisValueAnimation(a,s){const o=this.getAxisMotionValue(a);return addValueToWillChange(this.visualElement,a),o.start(animateMotionValue(a,o,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(a=>this.getAxisMotionValue(a).stop())}pauseAnimation(){eachAxis(a=>{var s;return(s=this.getAxisMotionValue(a).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(a){var s;return(s=this.getAxisMotionValue(a).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(a){const s=`_drag${a.toUpperCase()}`,o=this.visualElement.getProps(),c=o[s];return c||this.visualElement.getValue(a,(o.initial?o.initial[a]:void 0)||0)}snapToCursor(a){eachAxis(s=>{const{drag:o}=this.getProps();if(!shouldDrag(s,o,this.currentDirection))return;const{projection:c}=this.visualElement,d=this.getAxisMotionValue(s);if(c&&c.layout){const{min:h,max:g}=c.layout.layoutBox[s];d.set(a[s]-mixNumber$1(h,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:a,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(s)||!o||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};eachAxis(h=>{const g=this.getAxisMotionValue(h);if(g&&this.constraints!==!1){const _=g.get();c[h]=calcOrigin({min:_,max:_},this.constraints[h])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(h=>{if(!shouldDrag(h,a,null))return;const g=this.getAxisMotionValue(h),{min:_,max:$}=this.constraints[h];g.set(mixNumber$1(_,$,c[h]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const a=this.visualElement.current,s=addPointerEvent(a,"pointerdown",_=>{const{drag:$,dragListener:_e=!0}=this.getProps();$&&_e&&this.start(_)}),o=()=>{const{dragConstraints:_}=this.getProps();isRefObject(_)&&_.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,d=c.addEventListener("measure",o);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),frame.read(o);const h=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),g=c.addEventListener("didUpdate",({delta:_,hasLayoutChanged:$})=>{this.isDragging&&$&&(eachAxis(_e=>{const tt=this.getAxisMotionValue(_e);tt&&(this.originPoint[_e]+=_[_e].translate,tt.set(tt.get()+_[_e].translate))}),this.visualElement.render())});return()=>{h(),s(),d(),g&&g()}}getProps(){const a=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:c=!1,dragConstraints:d=!1,dragElastic:h=defaultElastic,dragMomentum:g=!0}=a;return{...a,drag:s,dragDirectionLock:o,dragPropagation:c,dragConstraints:d,dragElastic:h,dragMomentum:g}}}function shouldDrag(e,a,s){return(a===!0||a===e)&&(s===null||s===e)}function getCurrentDirection(e,a=10){let s=null;return Math.abs(e.y)>a?s="y":Math.abs(e.x)>a&&(s="x"),s}class DragGesture extends Feature{constructor(a){super(a),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(a)}mount(){const{dragControls:a}=this.node.getProps();a&&(this.removeGroupControls=a.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(a,s)=>{e&&frame.postRender(()=>e(a,s))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(a){this.session=new PanSession(a,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:a,onPanStart:s,onPan:o,onPanEnd:c}=this.node.getProps();return{onSessionStart:asyncHandler(a),onStart:asyncHandler(s),onMove:o,onEnd:(d,h)=>{delete this.session,c&&frame.postRender(()=>c(d,h))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",a=>this.onPointerDown(a))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(e,a){return a.max===a.min?0:e/(a.max-a.min)*100}const correctBorderRadius={correct:(e,a)=>{if(!a.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const s=pixelsToPercent(e,a.target.x),o=pixelsToPercent(e,a.target.y);return`${s}% ${o}%`}},correctBoxShadow={correct:(e,{treeScale:a,projectionDelta:s})=>{const o=e,c=complex.parse(e);if(c.length>5)return o;const d=complex.createTransformer(e),h=typeof c[0]!="number"?1:0,g=s.x.scale*a.x,_=s.y.scale*a.y;c[0+h]/=g,c[1+h]/=_;const $=mixNumber$1(g,_,.5);return typeof c[2+h]=="number"&&(c[2+h]/=$),typeof c[3+h]=="number"&&(c[3+h]/=$),d(c)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:a,layoutGroup:s,switchLayoutGroup:o,layoutId:c}=this.props,{projection:d}=a;addScaleCorrector(defaultScaleCorrectors),d&&(s.group&&s.group.add(d),o&&o.register&&c&&o.register(d),d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(a){const{layoutDependency:s,visualElement:o,drag:c,isPresent:d}=this.props,h=o.projection;return h&&(h.isPresent=d,c||a.layoutDependency!==s||s===void 0?h.willUpdate():this.safeToRemove(),a.isPresent!==d&&(d?h.promote():h.relegate()||frame.postRender(()=>{const g=h.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),microtask.postRender(()=>{!a.currentAnimation&&a.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:a,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:c}=a;c&&(c.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(c),o&&o.deregister&&o.deregister(c))}safeToRemove(){const{safeToRemove:a}=this.props;a&&a()}render(){return null}}function MeasureLayout(e){const[a,s]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:a,safeToRemove:s})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(e,a,s){const o=isMotionValue(e)?e:motionValue(e);return o.start(animateMotionValue("",o,a,s)),o.animation}function isSVGElement(e){return e instanceof SVGElement&&e.tagName!=="svg"}const compareByDepth=(e,a)=>e.depth-a.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(a){addUniqueItem(this.children,a),this.isDirty=!0}remove(a){removeItem(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(a)}}function delay(e,a){const s=time.now(),o=({timestamp:c})=>{const d=c-s;d>=a&&(cancelFrame(o),e(d-a))};return frame.read(o,!0),()=>cancelFrame(o)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,a,s,o,c,d){c?(e.opacity=mixNumber$1(0,s.opacity!==void 0?s.opacity:1,easeCrossfadeIn(o)),e.opacityExit=mixNumber$1(a.opacity!==void 0?a.opacity:1,0,easeCrossfadeOut(o))):d&&(e.opacity=mixNumber$1(a.opacity!==void 0?a.opacity:1,s.opacity!==void 0?s.opacity:1,o));for(let h=0;h<numBorders;h++){const g=`border${borders[h]}Radius`;let _=getRadius(a,g),$=getRadius(s,g);if(_===void 0&&$===void 0)continue;_||(_=0),$||($=0),_===0||$===0||isPx(_)===isPx($)?(e[g]=Math.max(mixNumber$1(asNumber(_),asNumber($),o),0),(percent.test($)||percent.test(_))&&(e[g]+="%")):e[g]=$}(a.rotate||s.rotate)&&(e.rotate=mixNumber$1(a.rotate||0,s.rotate||0,o))}function getRadius(e,a){return e[a]!==void 0?e[a]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(e,a,s){return o=>o<e?0:o>a?1:s(progress(e,a,o))}function copyAxisInto(e,a){e.min=a.min,e.max=a.max}function copyBoxInto(e,a){copyAxisInto(e.x,a.x),copyAxisInto(e.y,a.y)}function copyAxisDeltaInto(e,a){e.translate=a.translate,e.scale=a.scale,e.originPoint=a.originPoint,e.origin=a.origin}function removePointDelta(e,a,s,o,c){return e-=a,e=scalePoint(e,1/s,o),c!==void 0&&(e=scalePoint(e,1/c,o)),e}function removeAxisDelta(e,a=0,s=1,o=.5,c,d=e,h=e){if(percent.test(a)&&(a=parseFloat(a),a=mixNumber$1(h.min,h.max,a/100)-h.min),typeof a!="number")return;let g=mixNumber$1(d.min,d.max,o);e===d&&(g-=a),e.min=removePointDelta(e.min,a,s,g,c),e.max=removePointDelta(e.max,a,s,g,c)}function removeAxisTransforms(e,a,[s,o,c],d,h){removeAxisDelta(e,a[s],a[o],a[c],a.scale,d,h)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,a,s,o){removeAxisTransforms(e.x,a,xKeys,s?s.x:void 0,o?o.x:void 0),removeAxisTransforms(e.y,a,yKeys,s?s.y:void 0,o?o.y:void 0)}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,a){return e.min===a.min&&e.max===a.max}function boxEquals(e,a){return axisEquals(e.x,a.x)&&axisEquals(e.y,a.y)}function axisEqualsRounded(e,a){return Math.round(e.min)===Math.round(a.min)&&Math.round(e.max)===Math.round(a.max)}function boxEqualsRounded(e,a){return axisEqualsRounded(e.x,a.x)&&axisEqualsRounded(e.y,a.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,a){return e.translate===a.translate&&e.scale===a.scale&&e.originPoint===a.originPoint}class NodeStack{constructor(){this.members=[]}add(a){addUniqueItem(this.members,a),a.scheduleRender()}remove(a){if(removeItem(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(a){const s=this.members.findIndex(c=>a===c);if(s===0)return!1;let o;for(let c=s;c>=0;c--){const d=this.members[c];if(d.isPresent!==!1){o=d;break}}return o?(this.promote(o),!0):!1}promote(a,s){const o=this.lead;if(a!==o&&(this.prevLead=o,this.lead=a,a.show(),o)){o.instance&&o.scheduleRender(),a.scheduleRender(),a.resumeFrom=o,s&&(a.resumeFrom.preserveOpacity=!0),o.snapshot&&(a.snapshot=o.snapshot,a.snapshot.latestValues=o.animationValues||o.latestValues),a.root&&a.root.isUpdating&&(a.isLayoutDirty=!0);const{crossfade:c}=a.options;c===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(a=>{const{options:s,resumingFrom:o}=a;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(e,a,s){let o="";const c=e.x.translate/a.x,d=e.y.translate/a.y,h=(s==null?void 0:s.z)||0;if((c||d||h)&&(o=`translate3d(${c}px, ${d}px, ${h}px) `),(a.x!==1||a.y!==1)&&(o+=`scale(${1/a.x}, ${1/a.y}) `),s){const{transformPerspective:$,rotate:_e,rotateX:tt,rotateY:nt,skewX:lt,skewY:dt}=s;$&&(o=`perspective(${$}px) ${o}`),_e&&(o+=`rotate(${_e}deg) `),tt&&(o+=`rotateX(${tt}deg) `),nt&&(o+=`rotateY(${nt}deg) `),lt&&(o+=`skewX(${lt}deg) `),dt&&(o+=`skewY(${dt}deg) `)}const g=e.x.scale*a.x,_=e.y.scale*a.y;return(g!==1||_!==1)&&(o+=`scale(${g}, ${_})`),o||"none"}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(e,a,s,o){const{latestValues:c}=a;c[e]&&(s[e]=c[e],a.setStaticValue(e,0),o&&(o[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:a}=e.options;if(!a)return;const s=getOptimisedAppearId(a);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:c,layoutId:d}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",frame,!(c||d))}const{parent:o}=e;o&&!o.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(o)}function createProjectionNode({attachResizeListener:e,defaultParent:a,measureScroll:s,checkIsScrollRoot:o,resetTransform:c}){return class{constructor(h={},g=a==null?void 0:a()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(h,g){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new SubscriptionManager),this.eventHandlers.get(h).add(g)}notifyListeners(h,...g){const _=this.eventHandlers.get(h);_&&_.notify(...g)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,g=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(h),this.instance=h;const{layoutId:_,layout:$,visualElement:_e}=this.options;if(_e&&!_e.current&&_e.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),g&&($||_)&&(this.isLayoutDirty=!0),e){let tt;const nt=()=>this.root.updateBlockedByResize=!1;e(h,()=>{this.root.updateBlockedByResize=!0,tt&&tt(),tt=delay(nt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&_e&&(_||$)&&this.addEventListener("didUpdate",({delta:tt,hasLayoutChanged:nt,hasRelativeTargetChanged:lt,layout:dt})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ot=this.options.transition||_e.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:gt,onLayoutAnimationComplete:pt}=_e.getProps(),mt=!this.targetLayout||!boxEqualsRounded(this.targetLayout,dt)||lt,ht=!nt&&lt;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||ht||nt&&(mt||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(tt,ht);const St={...getValueTransition(ot,"layout"),onPlay:gt,onComplete:pt};(_e.shouldReduceMotion||this.options.layoutRoot)&&(St.delay=0,St.type=!1),this.startAnimation(St)}else nt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=dt})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _e=0;_e<this.path.length;_e++){const tt=this.path[_e];tt.shouldResetTransform=!0,tt.updateScroll("snapshot"),tt.options.layoutRoot&&tt.willUpdate(!1)}const{layoutId:g,layout:_}=this.options;if(g===void 0&&!_)return;const $=this.getTransformTemplate();this.prevTransformTemplateValue=$?$(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const g=time.now();frameData.delta=clamp(0,1e3/60,g-frameData.timestamp),frameData.timestamp=g,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(g=!1),g){const _=o(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:_,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:_}}}resetTransform(){if(!c)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!isDeltaZero(this.projectionDelta),_=this.getTransformTemplate(),$=_?_(this.latestValues,""):void 0,_e=$!==this.prevTransformTemplateValue;h&&(g||hasTransform(this.latestValues)||_e)&&(c(this.instance,$),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const g=this.measurePageBox();let _=this.removeElementScroll(g);return h&&(_=this.removeTransform(_)),roundBox(_),{animationId:this.root.animationId,measuredBox:g,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:g}=this.options;if(!g)return createBox();const _=g.measureViewportBox();if(!(((h=this.scroll)===null||h===void 0?void 0:h.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:_e}=this.root;_e&&(translateAxis(_.x,_e.offset.x),translateAxis(_.y,_e.offset.y))}return _}removeElementScroll(h){var g;const _=createBox();if(copyBoxInto(_,h),!((g=this.scroll)===null||g===void 0)&&g.wasRoot)return _;for(let $=0;$<this.path.length;$++){const _e=this.path[$],{scroll:tt,options:nt}=_e;_e!==this.root&&tt&&nt.layoutScroll&&(tt.wasRoot&&copyBoxInto(_,h),translateAxis(_.x,tt.offset.x),translateAxis(_.y,tt.offset.y))}return _}applyTransform(h,g=!1){const _=createBox();copyBoxInto(_,h);for(let $=0;$<this.path.length;$++){const _e=this.path[$];!g&&_e.options.layoutScroll&&_e.scroll&&_e!==_e.root&&transformBox(_,{x:-_e.scroll.offset.x,y:-_e.scroll.offset.y}),hasTransform(_e.latestValues)&&transformBox(_,_e.latestValues)}return hasTransform(this.latestValues)&&transformBox(_,this.latestValues),_}removeTransform(h){const g=createBox();copyBoxInto(g,h);for(let _=0;_<this.path.length;_++){const $=this.path[_];if(!$.instance||!hasTransform($.latestValues))continue;hasScale($.latestValues)&&$.updateSnapshot();const _e=createBox(),tt=$.measurePageBox();copyBoxInto(_e,tt),removeBoxTransforms(g,$.latestValues,$.snapshot?$.snapshot.layoutBox:void 0,_e)}return hasTransform(this.latestValues)&&removeBoxTransforms(g,this.latestValues),g}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var g;const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const $=!!this.resumingFrom||this!==_;if(!(h||$&&this.isSharedProjectionDirty||this.isProjectionDirty||!((g=this.parent)===null||g===void 0)&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:tt,layoutId:nt}=this.options;if(!(!this.layout||!(tt||nt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const lt=this.getClosestProjectingParent();lt&&lt.layout&&this.animationProgress!==1?(this.relativeParent=lt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,lt.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const lt=this.getClosestProjectingParent();lt&&!!lt.resumingFrom==!!this.resumingFrom&&!lt.options.layoutScroll&&lt.target&&this.animationProgress!==1?(this.relativeParent=lt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,lt.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const g=this.getLead(),_=!!this.resumingFrom||this!==g;let $=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&($=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&($=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&($=!1),$)return;const{layout:_e,layoutId:tt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_e||tt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const nt=this.treeScale.x,lt=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,_),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox,g.targetWithTransforms=createBox());const{target:dt}=g;if(!dt){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,dt,this.latestValues),(this.treeScale.x!==nt||this.treeScale.y!==lt||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",dt)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var g;if((g=this.options.visualElement)===null||g===void 0||g.scheduleRender(),h){const _=this.getStack();_&&_.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(h,g=!1){const _=this.snapshot,$=_?_.latestValues:{},_e={...this.latestValues},tt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const nt=createBox(),lt=_?_.source:void 0,dt=this.layout?this.layout.source:void 0,ot=lt!==dt,gt=this.getStack(),pt=!gt||gt.members.length<=1,mt=!!(ot&&!pt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let ht;this.mixTargetDelta=St=>{const _t=St/1e3;mixAxisDelta(tt.x,h.x,_t),mixAxisDelta(tt.y,h.y,_t),this.setTargetDelta(tt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(nt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,nt,_t),ht&&boxEquals(this.relativeTarget,ht)&&(this.isProjectionDirty=!1),ht||(ht=createBox()),copyBoxInto(ht,this.relativeTarget)),ot&&(this.animationValues=_e,mixValues(_e,$,this.latestValues,_t,mt,pt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_t},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...h,onUpdate:g=>{this.mixTargetDelta(g),h.onUpdate&&h.onUpdate(g)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:g,target:_,layout:$,latestValues:_e}=h;if(!(!g||!_||!$)){if(this!==h&&this.layout&&$&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,$.layoutBox)){_=this.target||createBox();const tt=calcLength(this.layout.layoutBox.x);_.x.min=h.target.x.min,_.x.max=_.x.min+tt;const nt=calcLength(this.layout.layoutBox.y);_.y.min=h.target.y.min,_.y.max=_.y.min+nt}copyBoxInto(g,_),transformBox(g,_e),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,g,_e)}}registerSharedNode(h,g){this.sharedNodes.has(h)||this.sharedNodes.set(h,new NodeStack),this.sharedNodes.get(h).add(g);const $=g.options.initialPromotionConfig;g.promote({transition:$?$.transition:void 0,preserveFollowOpacity:$&&$.shouldPreserveFollowOpacity?$.shouldPreserveFollowOpacity(g):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:g}=this.options;return g?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:g}=this.options;return g?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:g,preserveFollowOpacity:_}={}){const $=this.getStack();$&&$.promote(this,_),h&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let g=!1;const{latestValues:_}=h;if((_.z||_.rotate||_.rotateX||_.rotateY||_.rotateZ||_.skewX||_.skewY)&&(g=!0),!g)return;const $={};_.z&&resetDistortingTransform("z",h,$,this.animationValues);for(let _e=0;_e<transformAxes.length;_e++)resetDistortingTransform(`rotate${transformAxes[_e]}`,h,$,this.animationValues),resetDistortingTransform(`skew${transformAxes[_e]}`,h,$,this.animationValues);h.render();for(const _e in $)h.setStaticValue(_e,$[_e]),this.animationValues&&(this.animationValues[_e]=$[_e]);h.scheduleRender()}getProjectionStyles(h){var g,_;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const $={visibility:""},_e=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,$.opacity="",$.pointerEvents=resolveMotionValue(h==null?void 0:h.pointerEvents)||"",$.transform=_e?_e(this.latestValues,""):"none",$;const tt=this.getLead();if(!this.projectionDelta||!this.layout||!tt.target){const ot={};return this.options.layoutId&&(ot.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,ot.pointerEvents=resolveMotionValue(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(ot.transform=_e?_e({},""):"none",this.hasProjected=!1),ot}const nt=tt.animationValues||tt.latestValues;this.applyTransformsToTarget(),$.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,nt),_e&&($.transform=_e(nt,$.transform));const{x:lt,y:dt}=this.projectionDelta;$.transformOrigin=`${lt.origin*100}% ${dt.origin*100}% 0`,tt.animationValues?$.opacity=tt===this?(_=(g=nt.opacity)!==null&&g!==void 0?g:this.latestValues.opacity)!==null&&_!==void 0?_:1:this.preserveOpacity?this.latestValues.opacity:nt.opacityExit:$.opacity=tt===this?nt.opacity!==void 0?nt.opacity:"":nt.opacityExit!==void 0?nt.opacityExit:0;for(const ot in scaleCorrectors){if(nt[ot]===void 0)continue;const{correct:gt,applyTo:pt}=scaleCorrectors[ot],mt=$.transform==="none"?nt[ot]:gt(nt[ot],tt);if(pt){const ht=pt.length;for(let St=0;St<ht;St++)$[pt[St]]=mt}else $[ot]=mt}return this.options.layoutId&&($.pointerEvents=tt===this?resolveMotionValue(h==null?void 0:h.pointerEvents)||"":"none"),$}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var g;return(g=h.currentAnimation)===null||g===void 0?void 0:g.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){var a;const s=((a=e.resumeFrom)===null||a===void 0?void 0:a.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:c}=e.layout,{animationType:d}=e.options,h=s.source!==e.layout.source;d==="size"?eachAxis(tt=>{const nt=h?s.measuredBox[tt]:s.layoutBox[tt],lt=calcLength(nt);nt.min=o[tt].min,nt.max=nt.min+lt}):shouldAnimatePositionOnly(d,s.layoutBox,o)&&eachAxis(tt=>{const nt=h?s.measuredBox[tt]:s.layoutBox[tt],lt=calcLength(o[tt]);nt.max=nt.min+lt,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[tt].max=e.relativeTarget[tt].min+lt)});const g=createDelta();calcBoxDelta(g,o,s.layoutBox);const _=createDelta();h?calcBoxDelta(_,e.applyTransform(c,!0),s.measuredBox):calcBoxDelta(_,o,s.layoutBox);const $=!isDeltaZero(g);let _e=!1;if(!e.resumeFrom){const tt=e.getClosestProjectingParent();if(tt&&!tt.resumeFrom){const{snapshot:nt,layout:lt}=tt;if(nt&&lt){const dt=createBox();calcRelativePosition(dt,s.layoutBox,nt.layoutBox);const ot=createBox();calcRelativePosition(ot,o,lt.layoutBox),boxEqualsRounded(dt,ot)||(_e=!0),tt.options.layoutRoot&&(e.relativeTarget=ot,e.relativeTargetOrigin=dt,e.relativeParent=tt)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:s,delta:_,layoutDelta:g,hasLayoutChanged:$,hasRelativeTargetChanged:_e})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function propagateDirtyNodes(e){isDebug&&metrics.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:a}=e.options;a&&a.getProps().onBeforeLayoutMeasure&&a.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,a,s){e.translate=mixNumber$1(a.translate,0,s),e.scale=mixNumber$1(a.scale,1,s),e.origin=a.origin,e.originPoint=a.originPoint}function mixAxis(e,a,s,o){e.min=mixNumber$1(a.min,s.min,o),e.max=mixNumber$1(a.max,s.max,o)}function mixBox(e,a,s,o){mixAxis(e.x,a.x,s.x,o),mixAxis(e.y,a.y,s.y,o)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,a,s){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(a),aspectRatio(s),.2)}function checkNodeWasScrollRoot(e){var a;return e!==e.root&&((a=e.scroll)===null||a===void 0?void 0:a.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(e,a)=>addDomEvent(e,"resize",a),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,a)=>{e.style.transform=a!==void 0?a:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(e,a,s){const{props:o}=e;e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",s==="Start");const c="onHover"+s,d=o[c];d&&frame.postRender(()=>d(a,extractEventInfo(a)))}class HoverGesture extends Feature{mount(){const{current:a}=this.node;a&&(this.unmount=hover(a,s=>(handleHoverEvent(this.node,s,"Start"),o=>handleHoverEvent(this.node,o,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let a=!1;try{a=this.node.current.matches(":focus-visible")}catch{a=!0}!a||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe$1(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,a,s){const{props:o}=e;e.animationState&&o.whileTap&&e.animationState.setActive("whileTap",s==="Start");const c="onTap"+(s==="End"?"":s),d=o[c];d&&frame.postRender(()=>d(a,extractEventInfo(a)))}class PressGesture extends Feature{mount(){const{current:a}=this.node;a&&(this.unmount=press(a,s=>(handlePressEvent(this.node,s,"Start"),(o,{success:c})=>handlePressEvent(this.node,o,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const a=observerCallbacks.get(e.target);a&&a(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...a}){const s=e||document;observers.has(s)||observers.set(s,{});const o=observers.get(s),c=JSON.stringify(a);return o[c]||(o[c]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...a})),o[c]}function observeIntersection(e,a,s){const o=initIntersectionObserver(a);return observerCallbacks.set(e,s),o.observe(e),()=>{observerCallbacks.delete(e),o.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:a={}}=this.node.getProps(),{root:s,margin:o,amount:c="some",once:d}=a,h={root:s?s.current:void 0,rootMargin:o,threshold:typeof c=="number"?c:thresholdNames[c]},g=_=>{const{isIntersecting:$}=_;if(this.isInView===$||(this.isInView=$,d&&!$&&this.hasEnteredView))return;$&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",$);const{onViewportEnter:_e,onViewportLeave:tt}=this.node.getProps(),nt=$?_e:tt;nt&&nt(_)};return observeIntersection(this.node.current,h,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:a,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(a,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:a={}}={}){return s=>e[s]!==a[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),a=()=>prefersReducedMotion.current=e.matches;e.addListener(a),a()}else prefersReducedMotion.current=!1}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e)),visualElementStore=new WeakMap;function updateMotionValuesFromProps(e,a,s){for(const o in a){const c=a[o],d=s[o];if(isMotionValue(c))e.addValue(o,c);else if(isMotionValue(d))e.addValue(o,motionValue(c,{owner:e}));else if(d!==c)if(e.hasValue(o)){const h=e.getValue(o);h.liveStyle===!0?h.jump(c):h.hasAnimated||h.set(c)}else{const h=e.getStaticValue(o);e.addValue(o,motionValue(h!==void 0?h:c,{owner:e}))}}for(const o in s)a[o]===void 0&&e.removeValue(o);return a}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(a,s,o){return{}}constructor({parent:a,props:s,presenceContext:o,reducedMotionConfig:c,blockInitialAnimation:d,visualState:h},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const lt=time.now();this.renderScheduledAt<lt&&(this.renderScheduledAt=lt,frame.render(this.render,!1,!0))};const{latestValues:_,renderState:$,onUpdate:_e}=h;this.onUpdate=_e,this.latestValues=_,this.baseTarget={..._},this.initialValues=s.initial?{..._}:{},this.renderState=$,this.parent=a,this.props=s,this.presenceContext=o,this.depth=a?a.depth+1:0,this.reducedMotionConfig=c,this.options=g,this.blockInitialAnimation=!!d,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);const{willChange:tt,...nt}=this.scrapeMotionValuesFromProps(s,{},this);for(const lt in nt){const dt=nt[lt];_[lt]!==void 0&&isMotionValue(dt)&&dt.set(_[lt],!1)}}mount(a){this.current=a,visualElementStore.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const s=this.features[a];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(a,s){this.valueSubscriptions.has(a)&&this.valueSubscriptions.get(a)();const o=transformProps.has(a),c=s.on("change",g=>{this.latestValues[a]=g,this.props.onUpdate&&frame.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0)}),d=s.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,a,s)),this.valueSubscriptions.set(a,()=>{c(),d(),h&&h(),s.owner&&s.stop()})}sortNodePosition(a){return!this.current||!this.sortInstanceNodePosition||this.type!==a.type?0:this.sortInstanceNodePosition(this.current,a.current)}updateFeatures(){let a="animation";for(a in featureDefinitions){const s=featureDefinitions[a];if(!s)continue;const{isEnabled:o,Feature:c}=s;if(!this.features[a]&&c&&o(this.props)&&(this.features[a]=new c(this)),this.features[a]){const d=this.features[a];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,s){this.latestValues[a]=s}update(a,s){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<propEventHandlers.length;o++){const c=propEventHandlers[o];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const d="on"+c,h=a[d];h&&(this.propEventSubscriptions[c]=this.on(c,h))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(a,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(a){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(a),()=>s.variantChildren.delete(a)}addValue(a,s){const o=this.values.get(a);s!==o&&(o&&this.removeValue(a),this.bindToMotionValue(a,s),this.values.set(a,s),this.latestValues[a]=s.get())}removeValue(a){this.values.delete(a);const s=this.valueSubscriptions.get(a);s&&(s(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,s){if(this.props.values&&this.props.values[a])return this.props.values[a];let o=this.values.get(a);return o===void 0&&s!==void 0&&(o=motionValue(s===null?void 0:s,{owner:this}),this.addValue(a,o)),o}readValue(a,s){var o;let c=this.latestValues[a]!==void 0||!this.current?this.latestValues[a]:(o=this.getBaseTargetFromProps(this.props,a))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,a,this.options);return c!=null&&(typeof c=="string"&&(isNumericalString(c)||isZeroValueString(c))?c=parseFloat(c):!findValueType(c)&&complex.test(s)&&(c=getAnimatableNone(a,s)),this.setBaseTarget(a,isMotionValue(c)?c.get():c)),isMotionValue(c)?c.get():c}setBaseTarget(a,s){this.baseTarget[a]=s}getBaseTarget(a){var s;const{initial:o}=this.props;let c;if(typeof o=="string"||typeof o=="object"){const h=resolveVariantFromProps(this.props,o,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);h&&(c=h[a])}if(o&&c!==void 0)return c;const d=this.getBaseTargetFromProps(this.props,a);return d!==void 0&&!isMotionValue(d)?d:this.initialValues[a]!==void 0&&c===void 0?void 0:this.baseTarget[a]}on(a,s){return this.events[a]||(this.events[a]=new SubscriptionManager),this.events[a].add(s)}notify(a,...s){this.events[a]&&this.events[a].notify(...s)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(a,s){return a.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(a,s){return a.style?a.style[s]:void 0}removeValueFromRenderState(a,{vars:s,style:o}){delete s[a],delete o[a]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:a}=this.props;isMotionValue(a)&&(this.childSubscription=a.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function getComputedStyle(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(a,s){if(transformProps.has(s)){const o=getDefaultValueType(s);return o&&o.default||0}else{const o=getComputedStyle(a),c=(isCSSVariableName(s)?o.getPropertyValue(s):o[s])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(a,{transformPagePoint:s}){return measureViewportBox(a,s)}build(a,s,o){buildHTMLStyles(a,s,o.transformTemplate)}scrapeMotionValuesFromProps(a,s,o){return scrapeMotionValuesFromProps$1(a,s,o)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(a,s){return a[s]}readValueFromInstance(a,s){if(transformProps.has(s)){const o=getDefaultValueType(s);return o&&o.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),a.getAttribute(s)}scrapeMotionValuesFromProps(a,s,o){return scrapeMotionValuesFromProps(a,s,o)}build(a,s,o){buildSVGAttrs(a,s,this.isSVGTag,o.transformTemplate)}renderInstance(a,s,o,c){renderSVG(a,s,o,c)}mount(a){this.isSVGTag=isSVGTag(a.tagName),super.mount(a)}}const createDomVisualElement=(e,a)=>isSVGComponent(e)?new SVGVisualElement(a):new HTMLVisualElement(a,{allowProjection:e!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,a)=>{const s=reactExports.forwardRef(({color:o="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:h,className:g="",children:_,...$},_e)=>reactExports.createElement("svg",{ref:_e,...defaultAttributes,width:c,height:c,stroke:o,strokeWidth:h?Number(d)*24/Number(c):d,className:["lucide",`lucide-${toKebabCase(e)}`,g].join(" "),...$},[...a.map(([tt,nt])=>reactExports.createElement(tt,nt)),...Array.isArray(_)?_:[_]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FolderPlus=createLucideIcon("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Grid3x3=createLucideIcon("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Heart=createLucideIcon("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Home=createLucideIcon("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ListMusic=createLucideIcon("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loader2=createLucideIcon("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Maximize2=createLucideIcon("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageSquareQuote=createLucideIcon("MessageSquareQuote",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 12a2 2 0 0 0 2-2V8H8",key:"1jfesj"}],["path",{d:"M14 12a2 2 0 0 0 2-2V8h-2",key:"1dq9mh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Music=createLucideIcon("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pause=createLucideIcon("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PlaySquare=createLucideIcon("PlaySquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Radio=createLucideIcon("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SkipBack=createLucideIcon("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SkipForward=createLucideIcon("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Volume2=createLucideIcon("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wand2=createLucideIcon("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);function r(e){var a,s,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(a=0;a<c;a++)e[a]&&(s=r(e[a]))&&(o&&(o+=" "),o+=s)}else for(s in e)e[s]&&(o&&(o+=" "),o+=s);return o}function clsx(){for(var e,a,s=0,o="",c=arguments.length;s<c;s++)(e=arguments[s])&&(a=r(e))&&(o&&(o+=" "),o+=a);return o}const createStoreImpl=e=>{let a;const s=new Set,o=($,_e)=>{const tt=typeof $=="function"?$(a):$;if(!Object.is(tt,a)){const nt=a;a=_e??(typeof tt!="object"||tt===null)?tt:Object.assign({},a,tt),s.forEach(lt=>lt(a,nt))}},c=()=>a,g={setState:o,getState:c,getInitialState:()=>_,subscribe:$=>(s.add($),()=>s.delete($))},_=a=e(o,c,g);return g},createStore=e=>e?createStoreImpl(e):createStoreImpl,identity=e=>e;function useStore(e,a=identity){const s=React.useSyncExternalStore(e.subscribe,React.useCallback(()=>a(e.getState()),[e,a]),React.useCallback(()=>a(e.getInitialState()),[e,a]));return React.useDebugValue(s),s}const createImpl=e=>{const a=createStore(e),s=o=>useStore(a,o);return Object.assign(s,a),s},create=e=>e?createImpl(e):createImpl;var dexie_min={exports:{}};(function(e,a){(function(s,o){e.exports=o()})(commonjsGlobal,function(){var s=function(b,j){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,at){et.__proto__=at}||function(et,at){for(var st in at)Object.prototype.hasOwnProperty.call(at,st)&&(et[st]=at[st])})(b,j)},o=function(){return(o=Object.assign||function(b){for(var j,et=1,at=arguments.length;et<at;et++)for(var st in j=arguments[et])Object.prototype.hasOwnProperty.call(j,st)&&(b[st]=j[st]);return b}).apply(this,arguments)};function c(b,j,et){for(var at,st=0,ct=j.length;st<ct;st++)!at&&st in j||((at=at||Array.prototype.slice.call(j,0,st))[st]=j[st]);return b.concat(at||Array.prototype.slice.call(j))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,h=Object.keys,g=Array.isArray;function _(b,j){return typeof j!="object"||h(j).forEach(function(et){b[et]=j[et]}),b}typeof Promise>"u"||d.Promise||(d.Promise=Promise);var $=Object.getPrototypeOf,_e={}.hasOwnProperty;function tt(b,j){return _e.call(b,j)}function nt(b,j){typeof j=="function"&&(j=j($(b))),(typeof Reflect>"u"?h:Reflect.ownKeys)(j).forEach(function(et){dt(b,et,j[et])})}var lt=Object.defineProperty;function dt(b,j,et,at){lt(b,j,_(et&&tt(et,"get")&&typeof et.get=="function"?{get:et.get,set:et.set,configurable:!0}:{value:et,configurable:!0,writable:!0},at))}function ot(b){return{from:function(j){return b.prototype=Object.create(j.prototype),dt(b.prototype,"constructor",b),{extend:nt.bind(null,b.prototype)}}}}var gt=Object.getOwnPropertyDescriptor,pt=[].slice;function mt(b,j,et){return pt.call(b,j,et)}function ht(b,j){return j(b)}function St(b){if(!b)throw new Error("Assertion Failed")}function _t(b){d.setImmediate?setImmediate(b):setTimeout(b,0)}function Tt(b,j){if(typeof j=="string"&&tt(b,j))return b[j];if(!j)return b;if(typeof j!="string"){for(var et=[],at=0,st=j.length;at<st;++at){var ct=Tt(b,j[at]);et.push(ct)}return et}var yt=j.indexOf(".");if(yt!==-1){var Et=b[j.substr(0,yt)];return Et==null?void 0:Tt(Et,j.substr(yt+1))}}function ut(b,j,et){if(b&&j!==void 0&&!("isFrozen"in Object&&Object.isFrozen(b)))if(typeof j!="string"&&"length"in j){St(typeof et!="string"&&"length"in et);for(var at=0,st=j.length;at<st;++at)ut(b,j[at],et[at])}else{var ct,yt,Et=j.indexOf(".");Et!==-1?(ct=j.substr(0,Et),(yt=j.substr(Et+1))===""?et===void 0?g(b)&&!isNaN(parseInt(ct))?b.splice(ct,1):delete b[ct]:b[ct]=et:ut(Et=!(Et=b[ct])||!tt(b,ct)?b[ct]={}:Et,yt,et)):et===void 0?g(b)&&!isNaN(parseInt(j))?b.splice(j,1):delete b[j]:b[j]=et}}function bt(b){var j,et={};for(j in b)tt(b,j)&&(et[j]=b[j]);return et}var zt=[].concat;function Ht(b){return zt.apply([],b)}var un="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ht([8,16,32,64].map(function(b){return["Int","Uint","Float"].map(function(j){return j+b+"Array"})}))).filter(function(b){return d[b]}),Qt=new Set(un.map(function(b){return d[b]})),sr=null;function Ut(b){return sr=new WeakMap,b=function j(et){if(!et||typeof et!="object")return et;var at=sr.get(et);if(at)return at;if(g(et)){at=[],sr.set(et,at);for(var st=0,ct=et.length;st<ct;++st)at.push(j(et[st]))}else if(Qt.has(et.constructor))at=et;else{var yt,Et=$(et);for(yt in at=Et===Object.prototype?{}:Object.create(Et),sr.set(et,at),et)tt(et,yt)&&(at[yt]=j(et[yt]))}return at}(b),sr=null,b}var vr={}.toString;function xr(b){return vr.call(b).slice(8,-1)}var mr=typeof Symbol<"u"?Symbol.iterator:"@@iterator",br=typeof mr=="symbol"?function(b){var j;return b!=null&&(j=b[mr])&&j.apply(b)}:function(){return null};function Gt(b,j){return j=b.indexOf(j),0<=j&&b.splice(j,1),0<=j}var nr={};function or(b){var j,et,at,st;if(arguments.length===1){if(g(b))return b.slice();if(this===nr&&typeof b=="string")return[b];if(st=br(b)){for(et=[];!(at=st.next()).done;)et.push(at.value);return et}if(b==null)return[b];if(typeof(j=b.length)!="number")return[b];for(et=new Array(j);j--;)et[j]=b[j];return et}for(j=arguments.length,et=new Array(j);j--;)et[j]=arguments[j];return et}var ir=typeof Symbol<"u"?function(b){return b[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},qr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ln=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(qr),wr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function fr(b,j){this.name=b,this.message=j}function Ar(b,j){return b+". Errors: "+Object.keys(j).map(function(et){return j[et].toString()}).filter(function(et,at,st){return st.indexOf(et)===at}).join(`
`)}function Lr(b,j,et,at){this.failures=j,this.failedKeys=at,this.successCount=et,this.message=Ar(b,j)}function zr(b,j){this.name="BulkError",this.failures=Object.keys(j).map(function(et){return j[et]}),this.failuresByPos=j,this.message=Ar(b,this.failures)}ot(fr).from(Error).extend({toString:function(){return this.name+": "+this.message}}),ot(Lr).from(fr),ot(zr).from(fr);var Hr=ln.reduce(function(b,j){return b[j]=j+"Error",b},{}),Jr=fr,pr=ln.reduce(function(b,j){var et=j+"Error";function at(st,ct){this.name=et,st?typeof st=="string"?(this.message="".concat(st).concat(ct?`
 `+ct:""),this.inner=ct||null):typeof st=="object"&&(this.message="".concat(st.name," ").concat(st.message),this.inner=st):(this.message=wr[j]||et,this.inner=null)}return ot(at).from(Jr),b[j]=at,b},{});pr.Syntax=SyntaxError,pr.Type=TypeError,pr.Range=RangeError;var hn=qr.reduce(function(b,j){return b[j+"Error"]=pr[j],b},{}),nn=ln.reduce(function(b,j){return["Syntax","Type","Range"].indexOf(j)===-1&&(b[j+"Error"]=pr[j]),b},{});function Pr(){}function Nt(b){return b}function Ot(b,j){return b==null||b===Nt?j:function(et){return j(b(et))}}function qt(b,j){return function(){b.apply(this,arguments),j.apply(this,arguments)}}function gr(b,j){return b===Pr?j:function(){var et=b.apply(this,arguments);et!==void 0&&(arguments[0]=et);var at=this.onsuccess,st=this.onerror;this.onsuccess=null,this.onerror=null;var ct=j.apply(this,arguments);return at&&(this.onsuccess=this.onsuccess?qt(at,this.onsuccess):at),st&&(this.onerror=this.onerror?qt(st,this.onerror):st),ct!==void 0?ct:et}}function hr(b,j){return b===Pr?j:function(){b.apply(this,arguments);var et=this.onsuccess,at=this.onerror;this.onsuccess=this.onerror=null,j.apply(this,arguments),et&&(this.onsuccess=this.onsuccess?qt(et,this.onsuccess):et),at&&(this.onerror=this.onerror?qt(at,this.onerror):at)}}function Fr(b,j){return b===Pr?j:function(et){var at=b.apply(this,arguments);_(et,at);var st=this.onsuccess,ct=this.onerror;return this.onsuccess=null,this.onerror=null,et=j.apply(this,arguments),st&&(this.onsuccess=this.onsuccess?qt(st,this.onsuccess):st),ct&&(this.onerror=this.onerror?qt(ct,this.onerror):ct),at===void 0?et===void 0?void 0:et:_(at,et)}}function Or(b,j){return b===Pr?j:function(){return j.apply(this,arguments)!==!1&&b.apply(this,arguments)}}function Dr(b,j){return b===Pr?j:function(){var et=b.apply(this,arguments);if(et&&typeof et.then=="function"){for(var at=this,st=arguments.length,ct=new Array(st);st--;)ct[st]=arguments[st];return et.then(function(){return j.apply(at,ct)})}return j.apply(this,arguments)}}nn.ModifyError=Lr,nn.DexieError=fr,nn.BulkError=zr;var Ur=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yr(b){Ur=b}var Gr={},yn=100,un=typeof Promise>"u"?[]:function(){var b=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[b,$(b),b];var j=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[j,$(j),b]}(),qr=un[0],ln=un[1],un=un[2],ln=ln&&ln.then,ft=qr&&qr.constructor,rt=!!un,it=function(b,j){Br.push([b,j]),Ct&&(queueMicrotask(vt),Ct=!1)},xt=!0,Ct=!0,jt=[],Wt=[],Er=Nt,$r={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pr,pgp:!1,env:{},finalize:Pr},er=$r,Br=[],Ir=0,En=[];function ur(b){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var j=this._PSD=er;if(typeof b!="function"){if(b!==Gr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ln(this,this._value))}this._state=null,this._value=null,++j.ref,function et(at,st){try{st(function(ct){if(at._state===null){if(ct===at)throw new TypeError("A promise cannot be resolved with itself.");var yt=at._lib&&wt();ct&&typeof ct.then=="function"?et(at,function(Et,At){ct instanceof ur?ct._then(Et,At):ct.then(Et,At)}):(at._state=!0,at._value=ct,Yn(at)),yt&&Yt()}},Ln.bind(null,at))}catch(ct){Ln(at,ct)}}(this,b)}var Dn={get:function(){var b=er,j=Mn;function et(at,st){var ct=this,yt=!b.global&&(b!==er||j!==Mn),Et=yt&&!sn(),At=new ur(function(Pt,$t){Tn(ct,new $n(js(at,b,yt,Et),js(st,b,yt,Et),Pt,$t,b))});return this._consoleTask&&(At._consoleTask=this._consoleTask),At}return et.prototype=Gr,et},set:function(b){dt(this,"then",b&&b.prototype===Gr?Dn:{get:function(){return b},set:Dn.set})}};function $n(b,j,et,at,st){this.onFulfilled=typeof b=="function"?b:null,this.onRejected=typeof j=="function"?j:null,this.resolve=et,this.reject=at,this.psd=st}function Ln(b,j){var et,at;Wt.push(j),b._state===null&&(et=b._lib&&wt(),j=Er(j),b._state=!1,b._value=j,at=b,jt.some(function(st){return st._value===at._value})||jt.push(at),Yn(b),et&&Yt())}function Yn(b){var j=b._listeners;b._listeners=[];for(var et=0,at=j.length;et<at;++et)Tn(b,j[et]);var st=b._PSD;--st.ref||st.finalize(),Ir===0&&(++Ir,it(function(){--Ir==0&&Jt()},[]))}function Tn(b,j){if(b._state!==null){var et=b._state?j.onFulfilled:j.onRejected;if(et===null)return(b._state?j.resolve:j.reject)(b._value);++j.psd.ref,++Ir,it(Qn,[et,b,j])}else b._listeners.push(j)}function Qn(b,j,et){try{var at,st=j._value;!j._state&&Wt.length&&(Wt=[]),at=Ur&&j._consoleTask?j._consoleTask.run(function(){return b(st)}):b(st),j._state||Wt.indexOf(st)!==-1||function(ct){for(var yt=jt.length;yt;)if(jt[--yt]._value===ct._value)return jt.splice(yt,1)}(j),et.resolve(at)}catch(ct){et.reject(ct)}finally{--Ir==0&&Jt(),--et.psd.ref||et.psd.finalize()}}function vt(){_n($r,function(){wt()&&Yt()})}function wt(){var b=xt;return Ct=xt=!1,b}function Yt(){var b,j,et;do for(;0<Br.length;)for(b=Br,Br=[],et=b.length,j=0;j<et;++j){var at=b[j];at[0].apply(null,at[1])}while(0<Br.length);Ct=xt=!0}function Jt(){var b=jt;jt=[],b.forEach(function(at){at._PSD.onunhandled.call(null,at._value,at)});for(var j=En.slice(0),et=j.length;et;)j[--et]()}function dr(b){return new ur(Gr,!1,b)}function kr(b,j){var et=er;return function(){var at=wt(),st=er;try{return Xr(et,!0),b.apply(this,arguments)}catch(ct){j&&j(ct)}finally{Xr(st,!1),at&&Yt()}}}nt(ur.prototype,{then:Dn,_then:function(b,j){Tn(this,new $n(null,null,b,j,er))},catch:function(b){if(arguments.length===1)return this.then(null,b);var j=b,et=arguments[1];return typeof j=="function"?this.then(null,function(at){return(at instanceof j?et:dr)(at)}):this.then(null,function(at){return(at&&at.name===j?et:dr)(at)})},finally:function(b){return this.then(function(j){return ur.resolve(b()).then(function(){return j})},function(j){return ur.resolve(b()).then(function(){return dr(j)})})},timeout:function(b,j){var et=this;return b<1/0?new ur(function(at,st){var ct=setTimeout(function(){return st(new pr.Timeout(j))},b);et.then(at,st).finally(clearTimeout.bind(null,ct))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&dt(ur.prototype,Symbol.toStringTag,"Dexie.Promise"),$r.env=on(),nt(ur,{all:function(){var b=or.apply(null,arguments).map(vn);return new ur(function(j,et){b.length===0&&j([]);var at=b.length;b.forEach(function(st,ct){return ur.resolve(st).then(function(yt){b[ct]=yt,--at||j(b)},et)})})},resolve:function(b){return b instanceof ur?b:b&&typeof b.then=="function"?new ur(function(j,et){b.then(j,et)}):new ur(Gr,!0,b)},reject:dr,race:function(){var b=or.apply(null,arguments).map(vn);return new ur(function(j,et){b.map(function(at){return ur.resolve(at).then(j,et)})})},PSD:{get:function(){return er},set:function(b){return er=b}},totalEchoes:{get:function(){return Mn}},newPSD:cn,usePSD:_n,scheduler:{get:function(){return it},set:function(b){it=b}},rejectionMapper:{get:function(){return Er},set:function(b){Er=b}},follow:function(b,j){return new ur(function(et,at){return cn(function(st,ct){var yt=er;yt.unhandleds=[],yt.onunhandled=ct,yt.finalize=qt(function(){var Et,At=this;Et=function(){At.unhandleds.length===0?st():ct(At.unhandleds[0])},En.push(function Pt(){Et(),En.splice(En.indexOf(Pt),1)}),++Ir,it(function(){--Ir==0&&Jt()},[])},yt.finalize),b()},j,et,at)})}}),ft&&(ft.allSettled&&dt(ur,"allSettled",function(){var b=or.apply(null,arguments).map(vn);return new ur(function(j){b.length===0&&j([]);var et=b.length,at=new Array(et);b.forEach(function(st,ct){return ur.resolve(st).then(function(yt){return at[ct]={status:"fulfilled",value:yt}},function(yt){return at[ct]={status:"rejected",reason:yt}}).then(function(){return--et||j(at)})})})}),ft.any&&typeof AggregateError<"u"&&dt(ur,"any",function(){var b=or.apply(null,arguments).map(vn);return new ur(function(j,et){b.length===0&&et(new AggregateError([]));var at=b.length,st=new Array(at);b.forEach(function(ct,yt){return ur.resolve(ct).then(function(Et){return j(Et)},function(Et){st[yt]=Et,--at||et(new AggregateError(st))})})})}),ft.withResolvers&&(ur.withResolvers=ft.withResolvers));var Nr={awaits:0,echoes:0,id:0},Zn=0,an=[],Sn=0,Mn=0,Jn=0;function cn(b,j,et,at){var st=er,ct=Object.create(st);return ct.parent=st,ct.ref=0,ct.global=!1,ct.id=++Jn,$r.env,ct.env=rt?{Promise:ur,PromiseProp:{value:ur,configurable:!0,writable:!0},all:ur.all,race:ur.race,allSettled:ur.allSettled,any:ur.any,resolve:ur.resolve,reject:ur.reject}:{},j&&_(ct,j),++st.ref,ct.finalize=function(){--this.parent.ref||this.parent.finalize()},at=_n(ct,b,et,at),ct.ref===0&&ct.finalize(),at}function dn(){return Nr.id||(Nr.id=++Zn),++Nr.awaits,Nr.echoes+=yn,Nr.id}function sn(){return!!Nr.awaits&&(--Nr.awaits==0&&(Nr.id=0),Nr.echoes=Nr.awaits*yn,!0)}function vn(b){return Nr.echoes&&b&&b.constructor===ft?(dn(),b.then(function(j){return sn(),j},function(j){return sn(),Vr(j)})):b}function kn(){var b=an[an.length-1];an.pop(),Xr(b,!1)}function Xr(b,j){var et,at=er;(j?!Nr.echoes||Sn++&&b===er:!Sn||--Sn&&b===er)||queueMicrotask(j?(function(st){++Mn,Nr.echoes&&--Nr.echoes!=0||(Nr.echoes=Nr.awaits=Nr.id=0),an.push(er),Xr(st,!0)}).bind(null,b):kn),b!==er&&(er=b,at===$r&&($r.env=on()),rt&&(et=$r.env.Promise,j=b.env,(at.global||b.global)&&(Object.defineProperty(d,"Promise",j.PromiseProp),et.all=j.all,et.race=j.race,et.resolve=j.resolve,et.reject=j.reject,j.allSettled&&(et.allSettled=j.allSettled),j.any&&(et.any=j.any))))}function on(){var b=d.Promise;return rt?{Promise:b,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:b.all,race:b.race,allSettled:b.allSettled,any:b.any,resolve:b.resolve,reject:b.reject}:{}}function _n(b,j,et,at,st){var ct=er;try{return Xr(b,!0),j(et,at,st)}finally{Xr(ct,!1)}}function js(b,j,et,at){return typeof b!="function"?b:function(){var st=er;et&&dn(),Xr(j,!0);try{return b.apply(this,arguments)}finally{Xr(st,!1),at&&queueMicrotask(sn)}}}function ds(b){Promise===ft&&Nr.echoes===0?Sn===0?b():enqueueNativeMicroTask(b):setTimeout(b,0)}(""+ln).indexOf("[native code]")===-1&&(dn=sn=Pr);var Vr=ur.reject,An="",mn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ls="String expected.",Nn=[],_i="__dbnames",fs="readonly",ps="readwrite";function Pn(b,j){return b?j?function(){return b.apply(this,arguments)&&j.apply(this,arguments)}:b:j}var Us={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function na(b){return typeof b!="string"||/\./.test(b)?function(j){return j}:function(j){return j[b]===void 0&&b in j&&delete(j=Ut(j))[b],j}}function zs(){throw pr.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Rr(b,j){try{var et=Vs(b),at=Vs(j);if(et!==at)return et==="Array"?1:at==="Array"?-1:et==="binary"?1:at==="binary"?-1:et==="string"?1:at==="string"?-1:et==="Date"?1:at!=="Date"?NaN:-1;switch(et){case"number":case"Date":case"string":return j<b?1:b<j?-1:0;case"binary":return function(st,ct){for(var yt=st.length,Et=ct.length,At=yt<Et?yt:Et,Pt=0;Pt<At;++Pt)if(st[Pt]!==ct[Pt])return st[Pt]<ct[Pt]?-1:1;return yt===Et?0:yt<Et?-1:1}(Ws(b),Ws(j));case"Array":return function(st,ct){for(var yt=st.length,Et=ct.length,At=yt<Et?yt:Et,Pt=0;Pt<At;++Pt){var $t=Rr(st[Pt],ct[Pt]);if($t!==0)return $t}return yt===Et?0:yt<Et?-1:1}(b,j)}}catch{}return NaN}function Vs(b){var j=typeof b;return j!="object"?j:ArrayBuffer.isView(b)?"binary":(b=xr(b),b==="ArrayBuffer"?"binary":b)}function Ws(b){return b instanceof Uint8Array?b:ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength):new Uint8Array(b)}function ga(b,j,et){var at=b.schema.yProps;return at?(j&&0<et.numFailures&&(j=j.filter(function(st,ct){return!et.failures[ct]})),Promise.all(at.map(function(st){return st=st.updatesTable,j?b.db.table(st).where("k").anyOf(j).delete():b.db.table(st).clear()})).then(function(){return et})):et}var Un=(Hs.prototype.execute=function(b){var j=this["@@propmod"];if(j.add!==void 0){var et=j.add;if(g(et))return c(c([],g(b)?b:[],!0),et).sort();if(typeof et=="number")return(Number(b)||0)+et;if(typeof et=="bigint")try{return BigInt(b)+et}catch{return BigInt(0)+et}throw new TypeError("Invalid term ".concat(et))}if(j.remove!==void 0){var at=j.remove;if(g(at))return g(b)?b.filter(function(st){return!at.includes(st)}).sort():[];if(typeof at=="number")return Number(b)-at;if(typeof at=="bigint")try{return BigInt(b)-at}catch{return BigInt(0)-at}throw new TypeError("Invalid subtrahend ".concat(at))}return et=(et=j.replacePrefix)===null||et===void 0?void 0:et[0],et&&typeof b=="string"&&b.startsWith(et)?j.replacePrefix[1]+b.substring(et.length):b},Hs);function Hs(b){this["@@propmod"]=b}function Gs(b,j){for(var et=h(j),at=et.length,st=!1,ct=0;ct<at;++ct){var yt=et[ct],Et=j[yt],At=Tt(b,yt);Et instanceof Un?(ut(b,yt,Et.execute(At)),st=!0):At!==Et&&(ut(b,yt,Et),st=!0)}return st}var Ks=(jr.prototype._trans=function(b,j,et){var at=this._tx||er.trans,st=this.name,ct=Ur&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(b==="readonly"?"read":"write"," ").concat(this.name));function yt(Pt,$t,kt){if(!kt.schema[st])throw new pr.NotFound("Table "+st+" not part of transaction");return j(kt.idbtrans,kt)}var Et=wt();try{var At=at&&at.db._novip===this.db._novip?at===er.trans?at._promise(b,yt,et):cn(function(){return at._promise(b,yt,et)},{trans:at,transless:er.transless||er}):function Pt($t,kt,Bt,It){if($t.idbdb&&($t._state.openComplete||er.letThrough||$t._vip)){var Rt=$t._createTransaction(kt,Bt,$t._dbSchema);try{Rt.create(),$t._state.PR1398_maxLoop=3}catch(Dt){return Dt.name===Hr.InvalidState&&$t.isOpen()&&0<--$t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$t.close({disableAutoOpen:!1}),$t.open().then(function(){return Pt($t,kt,Bt,It)})):Vr(Dt)}return Rt._promise(kt,function(Dt,Mt){return cn(function(){return er.trans=Rt,It(Dt,Mt,Rt)})}).then(function(Dt){if(kt==="readwrite")try{Rt.idbtrans.commit()}catch{}return kt==="readonly"?Dt:Rt._completion.then(function(){return Dt})})}if($t._state.openComplete)return Vr(new pr.DatabaseClosed($t._state.dbOpenError));if(!$t._state.isBeingOpened){if(!$t._state.autoOpen)return Vr(new pr.DatabaseClosed);$t.open().catch(Pr)}return $t._state.dbReadyPromise.then(function(){return Pt($t,kt,Bt,It)})}(this.db,b,[this.name],yt);return ct&&(At._consoleTask=ct,At=At.catch(function(Pt){return console.trace(Pt),Vr(Pt)})),At}finally{Et&&Yt()}},jr.prototype.get=function(b,j){var et=this;return b&&b.constructor===Object?this.where(b).first(j):b==null?Vr(new pr.Type("Invalid argument to Table.get()")):this._trans("readonly",function(at){return et.core.get({trans:at,key:b}).then(function(st){return et.hook.reading.fire(st)})}).then(j)},jr.prototype.where=function(b){if(typeof b=="string")return new this.db.WhereClause(this,b);if(g(b))return new this.db.WhereClause(this,"[".concat(b.join("+"),"]"));var j=h(b);if(j.length===1)return this.where(j[0]).equals(b[j[0]]);var et=this.schema.indexes.concat(this.schema.primKey).filter(function(Et){if(Et.compound&&j.every(function(Pt){return 0<=Et.keyPath.indexOf(Pt)})){for(var At=0;At<j.length;++At)if(j.indexOf(Et.keyPath[At])===-1)return!1;return!0}return!1}).sort(function(Et,At){return Et.keyPath.length-At.keyPath.length})[0];if(et&&this.db._maxKey!==An){var ct=et.keyPath.slice(0,j.length);return this.where(ct).equals(ct.map(function(At){return b[At]}))}!et&&Ur&&console.warn("The query ".concat(JSON.stringify(b)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(j.join("+"),"]"));var at=this.schema.idxByName;function st(Et,At){return Rr(Et,At)===0}var yt=j.reduce(function(kt,At){var Pt=kt[0],$t=kt[1],kt=at[At],Bt=b[At];return[Pt||kt,Pt||!kt?Pn($t,kt&&kt.multi?function(It){return It=Tt(It,At),g(It)&&It.some(function(Rt){return st(Bt,Rt)})}:function(It){return st(Bt,Tt(It,At))}):$t]},[null,null]),ct=yt[0],yt=yt[1];return ct?this.where(ct.name).equals(b[ct.keyPath]).filter(yt):et?this.filter(yt):this.where(j).equals("")},jr.prototype.filter=function(b){return this.toCollection().and(b)},jr.prototype.count=function(b){return this.toCollection().count(b)},jr.prototype.offset=function(b){return this.toCollection().offset(b)},jr.prototype.limit=function(b){return this.toCollection().limit(b)},jr.prototype.each=function(b){return this.toCollection().each(b)},jr.prototype.toArray=function(b){return this.toCollection().toArray(b)},jr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},jr.prototype.orderBy=function(b){return new this.db.Collection(new this.db.WhereClause(this,g(b)?"[".concat(b.join("+"),"]"):b))},jr.prototype.reverse=function(){return this.toCollection().reverse()},jr.prototype.mapToClass=function(b){var j,et=this.db,at=this.name;function st(){return j!==null&&j.apply(this,arguments)||this}(this.schema.mappedClass=b).prototype instanceof zs&&(function(At,Pt){if(typeof Pt!="function"&&Pt!==null)throw new TypeError("Class extends value "+String(Pt)+" is not a constructor or null");function $t(){this.constructor=At}s(At,Pt),At.prototype=Pt===null?Object.create(Pt):($t.prototype=Pt.prototype,new $t)}(st,j=b),Object.defineProperty(st.prototype,"db",{get:function(){return et},enumerable:!1,configurable:!0}),st.prototype.table=function(){return at},b=st);for(var ct=new Set,yt=b.prototype;yt;yt=$(yt))Object.getOwnPropertyNames(yt).forEach(function(At){return ct.add(At)});function Et(At){if(!At)return At;var Pt,$t=Object.create(b.prototype);for(Pt in At)if(!ct.has(Pt))try{$t[Pt]=At[Pt]}catch{}return $t}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Et,this.hook("reading",Et),b},jr.prototype.defineClass=function(){return this.mapToClass(function(b){_(this,b)})},jr.prototype.add=function(b,j){var et=this,at=this.schema.primKey,st=at.auto,ct=at.keyPath,yt=b;return ct&&st&&(yt=na(ct)(b)),this._trans("readwrite",function(Et){return et.core.mutate({trans:Et,type:"add",keys:j!=null?[j]:null,values:[yt]})}).then(function(Et){return Et.numFailures?ur.reject(Et.failures[0]):Et.lastResult}).then(function(Et){if(ct)try{ut(b,ct,Et)}catch{}return Et})},jr.prototype.upsert=function(b,j){var et=this,at=this.schema.primKey.keyPath;return this._trans("readwrite",function(st){return et.core.get({trans:st,key:b}).then(function(ct){var yt=ct??{};return Gs(yt,j),at&&ut(yt,at,b),et.core.mutate({trans:st,type:"put",values:[yt],keys:[b],upsert:!0,updates:{keys:[b],changeSpecs:[j]}}).then(function(Et){return Et.numFailures?ur.reject(Et.failures[0]):!!ct})})})},jr.prototype.update=function(b,j){return typeof b!="object"||g(b)?this.where(":id").equals(b).modify(j):(b=Tt(b,this.schema.primKey.keyPath),b===void 0?Vr(new pr.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(b).modify(j))},jr.prototype.put=function(b,j){var et=this,at=this.schema.primKey,st=at.auto,ct=at.keyPath,yt=b;return ct&&st&&(yt=na(ct)(b)),this._trans("readwrite",function(Et){return et.core.mutate({trans:Et,type:"put",values:[yt],keys:j!=null?[j]:null})}).then(function(Et){return Et.numFailures?ur.reject(Et.failures[0]):Et.lastResult}).then(function(Et){if(ct)try{ut(b,ct,Et)}catch{}return Et})},jr.prototype.delete=function(b){var j=this;return this._trans("readwrite",function(et){return j.core.mutate({trans:et,type:"delete",keys:[b]}).then(function(at){return ga(j,[b],at)}).then(function(at){return at.numFailures?ur.reject(at.failures[0]):void 0})})},jr.prototype.clear=function(){var b=this;return this._trans("readwrite",function(j){return b.core.mutate({trans:j,type:"deleteRange",range:Us}).then(function(et){return ga(b,null,et)})}).then(function(j){return j.numFailures?ur.reject(j.failures[0]):void 0})},jr.prototype.bulkGet=function(b){var j=this;return this._trans("readonly",function(et){return j.core.getMany({keys:b,trans:et}).then(function(at){return at.map(function(st){return j.hook.reading.fire(st)})})})},jr.prototype.bulkAdd=function(b,j,et){var at=this,st=Array.isArray(j)?j:void 0,ct=(et=et||(st?void 0:j))?et.allKeys:void 0;return this._trans("readwrite",function(yt){var Pt=at.schema.primKey,Et=Pt.auto,Pt=Pt.keyPath;if(Pt&&st)throw new pr.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(st&&st.length!==b.length)throw new pr.InvalidArgument("Arguments objects and keys must have the same length");var At=b.length,Pt=Pt&&Et?b.map(na(Pt)):b;return at.core.mutate({trans:yt,type:"add",keys:st,values:Pt,wantResults:ct}).then(function(Rt){var kt=Rt.numFailures,Bt=Rt.results,It=Rt.lastResult,Rt=Rt.failures;if(kt===0)return ct?Bt:It;throw new zr("".concat(at.name,".bulkAdd(): ").concat(kt," of ").concat(At," operations failed"),Rt)})})},jr.prototype.bulkPut=function(b,j,et){var at=this,st=Array.isArray(j)?j:void 0,ct=(et=et||(st?void 0:j))?et.allKeys:void 0;return this._trans("readwrite",function(yt){var Pt=at.schema.primKey,Et=Pt.auto,Pt=Pt.keyPath;if(Pt&&st)throw new pr.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(st&&st.length!==b.length)throw new pr.InvalidArgument("Arguments objects and keys must have the same length");var At=b.length,Pt=Pt&&Et?b.map(na(Pt)):b;return at.core.mutate({trans:yt,type:"put",keys:st,values:Pt,wantResults:ct}).then(function(Rt){var kt=Rt.numFailures,Bt=Rt.results,It=Rt.lastResult,Rt=Rt.failures;if(kt===0)return ct?Bt:It;throw new zr("".concat(at.name,".bulkPut(): ").concat(kt," of ").concat(At," operations failed"),Rt)})})},jr.prototype.bulkUpdate=function(b){var j=this,et=this.core,at=b.map(function(yt){return yt.key}),st=b.map(function(yt){return yt.changes}),ct=[];return this._trans("readwrite",function(yt){return et.getMany({trans:yt,keys:at,cache:"clone"}).then(function(Et){var At=[],Pt=[];b.forEach(function(kt,Bt){var It=kt.key,Rt=kt.changes,Dt=Et[Bt];if(Dt){for(var Mt=0,Ft=Object.keys(Rt);Mt<Ft.length;Mt++){var Lt=Ft[Mt],Vt=Rt[Lt];if(Lt===j.schema.primKey.keyPath){if(Rr(Vt,It)!==0)throw new pr.Constraint("Cannot update primary key in bulkUpdate()")}else ut(Dt,Lt,Vt)}ct.push(Bt),At.push(It),Pt.push(Dt)}});var $t=At.length;return et.mutate({trans:yt,type:"put",keys:At,values:Pt,updates:{keys:at,changeSpecs:st}}).then(function(kt){var Bt=kt.numFailures,It=kt.failures;if(Bt===0)return $t;for(var Rt=0,Dt=Object.keys(It);Rt<Dt.length;Rt++){var Mt,Ft=Dt[Rt],Lt=ct[Number(Ft)];Lt!=null&&(Mt=It[Ft],delete It[Ft],It[Lt]=Mt)}throw new zr("".concat(j.name,".bulkUpdate(): ").concat(Bt," of ").concat($t," operations failed"),It)})})})},jr.prototype.bulkDelete=function(b){var j=this,et=b.length;return this._trans("readwrite",function(at){return j.core.mutate({trans:at,type:"delete",keys:b}).then(function(st){return ga(j,b,st)})}).then(function(yt){var st=yt.numFailures,ct=yt.lastResult,yt=yt.failures;if(st===0)return ct;throw new zr("".concat(j.name,".bulkDelete(): ").concat(st," of ").concat(et," operations failed"),yt)})},jr);function jr(){}function zn(b){function j(yt,Et){if(Et){for(var At=arguments.length,Pt=new Array(At-1);--At;)Pt[At-1]=arguments[At];return et[yt].subscribe.apply(null,Pt),b}if(typeof yt=="string")return et[yt]}var et={};j.addEventType=ct;for(var at=1,st=arguments.length;at<st;++at)ct(arguments[at]);return j;function ct(yt,Et,At){if(typeof yt!="object"){var Pt;Et=Et||Or;var $t={subscribers:[],fire:At=At||Pr,subscribe:function(kt){$t.subscribers.indexOf(kt)===-1&&($t.subscribers.push(kt),$t.fire=Et($t.fire,kt))},unsubscribe:function(kt){$t.subscribers=$t.subscribers.filter(function(Bt){return Bt!==kt}),$t.fire=$t.subscribers.reduce(Et,At)}};return et[yt]=j[yt]=$t}h(Pt=yt).forEach(function(kt){var Bt=Pt[kt];if(g(Bt))ct(kt,Pt[kt][0],Pt[kt][1]);else{if(Bt!=="asap")throw new pr.InvalidArgument("Invalid event config");var It=ct(kt,Nt,function(){for(var Rt=arguments.length,Dt=new Array(Rt);Rt--;)Dt[Rt]=arguments[Rt];It.subscribers.forEach(function(Mt){_t(function(){Mt.apply(null,Dt)})})})}})}}function Vn(b,j){return ot(j).from({prototype:b}),j}function Bn(b,j){return!(b.filter||b.algorithm||b.or)&&(j?b.justLimit:!b.replayFilter)}function hs(b,j){b.filter=Pn(b.filter,j)}function gs(b,j,et){var at=b.replayFilter;b.replayFilter=at?function(){return Pn(at(),j())}:j,b.justLimit=et&&!at}function xa(b,j){if(b.isPrimKey)return j.primaryKey;var et=j.getIndexByKeyPath(b.index);if(!et)throw new pr.Schema("KeyPath "+b.index+" on object store "+j.name+" is not indexed");return et}function qs(b,j,et){var at=xa(b,j.schema);return j.openCursor({trans:et,values:!b.keysOnly,reverse:b.dir==="prev",unique:!!b.unique,query:{index:at,range:b.range}})}function ba(b,j,et,at){var st=b.replayFilter?Pn(b.filter,b.replayFilter()):b.filter;if(b.or){var ct={},yt=function(Et,At,Pt){var $t,kt;st&&!st(At,Pt,function(Bt){return At.stop(Bt)},function(Bt){return At.fail(Bt)})||((kt=""+($t=At.primaryKey))=="[object ArrayBuffer]"&&(kt=""+new Uint8Array($t)),tt(ct,kt)||(ct[kt]=!0,j(Et,At,Pt)))};return Promise.all([b.or._iterate(yt,et),Xs(qs(b,at,et),b.algorithm,yt,!b.keysOnly&&b.valueMapper)])}return Xs(qs(b,at,et),Pn(b.algorithm,st),j,!b.keysOnly&&b.valueMapper)}function Xs(b,j,et,at){var st=kr(at?function(ct,yt,Et){return et(at(ct),yt,Et)}:et);return b.then(function(ct){if(ct)return ct.start(function(){var yt=function(){return ct.continue()};j&&!j(ct,function(Et){return yt=Et},function(Et){ct.stop(Et),yt=Pr},function(Et){ct.fail(Et),yt=Pr})||st(ct.value,ct,function(Et){return yt=Et}),yt()})})}var yo=(Mr.prototype._read=function(b,j){var et=this._ctx;return et.error?et.table._trans(null,Vr.bind(null,et.error)):et.table._trans("readonly",b).then(j)},Mr.prototype._write=function(b){var j=this._ctx;return j.error?j.table._trans(null,Vr.bind(null,j.error)):j.table._trans("readwrite",b,"locked")},Mr.prototype._addAlgorithm=function(b){var j=this._ctx;j.algorithm=Pn(j.algorithm,b)},Mr.prototype._iterate=function(b,j){return ba(this._ctx,b,j,this._ctx.table.core)},Mr.prototype.clone=function(b){var j=Object.create(this.constructor.prototype),et=Object.create(this._ctx);return b&&_(et,b),j._ctx=et,j},Mr.prototype.raw=function(){return this._ctx.valueMapper=null,this},Mr.prototype.each=function(b){var j=this._ctx;return this._read(function(et){return ba(j,b,et,j.table.core)})},Mr.prototype.count=function(b){var j=this;return this._read(function(et){var at=j._ctx,st=at.table.core;if(Bn(at,!0))return st.count({trans:et,query:{index:xa(at,st.schema),range:at.range}}).then(function(yt){return Math.min(yt,at.limit)});var ct=0;return ba(at,function(){return++ct,!1},et,st).then(function(){return ct})}).then(b)},Mr.prototype.sortBy=function(b,j){var et=b.split(".").reverse(),at=et[0],st=et.length-1;function ct(At,Pt){return Pt?ct(At[et[Pt]],Pt-1):At[at]}var yt=this._ctx.dir==="next"?1:-1;function Et(At,Pt){return Rr(ct(At,st),ct(Pt,st))*yt}return this.toArray(function(At){return At.sort(Et)}).then(j)},Mr.prototype.toArray=function(b){var j=this;return this._read(function(et){var at=j._ctx;if(at.dir==="next"&&Bn(at,!0)&&0<at.limit){var st=at.valueMapper,ct=xa(at,at.table.core.schema);return at.table.core.query({trans:et,limit:at.limit,values:!0,query:{index:ct,range:at.range}}).then(function(Et){return Et=Et.result,st?Et.map(st):Et})}var yt=[];return ba(at,function(Et){return yt.push(Et)},et,at.table.core).then(function(){return yt})},b)},Mr.prototype.offset=function(b){var j=this._ctx;return b<=0||(j.offset+=b,Bn(j)?gs(j,function(){var et=b;return function(at,st){return et===0||(et===1?--et:st(function(){at.advance(et),et=0}),!1)}}):gs(j,function(){var et=b;return function(){return--et<0}})),this},Mr.prototype.limit=function(b){return this._ctx.limit=Math.min(this._ctx.limit,b),gs(this._ctx,function(){var j=b;return function(et,at,st){return--j<=0&&at(st),0<=j}},!0),this},Mr.prototype.until=function(b,j){return hs(this._ctx,function(et,at,st){return!b(et.value)||(at(st),j)}),this},Mr.prototype.first=function(b){return this.limit(1).toArray(function(j){return j[0]}).then(b)},Mr.prototype.last=function(b){return this.reverse().first(b)},Mr.prototype.filter=function(b){var j;return hs(this._ctx,function(et){return b(et.value)}),(j=this._ctx).isMatch=Pn(j.isMatch,b),this},Mr.prototype.and=function(b){return this.filter(b)},Mr.prototype.or=function(b){return new this.db.WhereClause(this._ctx.table,b,this)},Mr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Mr.prototype.desc=function(){return this.reverse()},Mr.prototype.eachKey=function(b){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(et,at){b(at.key,at)})},Mr.prototype.eachUniqueKey=function(b){return this._ctx.unique="unique",this.eachKey(b)},Mr.prototype.eachPrimaryKey=function(b){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(et,at){b(at.primaryKey,at)})},Mr.prototype.keys=function(b){var j=this._ctx;j.keysOnly=!j.isMatch;var et=[];return this.each(function(at,st){et.push(st.key)}).then(function(){return et}).then(b)},Mr.prototype.primaryKeys=function(b){var j=this._ctx;if(j.dir==="next"&&Bn(j,!0)&&0<j.limit)return this._read(function(at){var st=xa(j,j.table.core.schema);return j.table.core.query({trans:at,values:!1,limit:j.limit,query:{index:st,range:j.range}})}).then(function(at){return at.result}).then(b);j.keysOnly=!j.isMatch;var et=[];return this.each(function(at,st){et.push(st.primaryKey)}).then(function(){return et}).then(b)},Mr.prototype.uniqueKeys=function(b){return this._ctx.unique="unique",this.keys(b)},Mr.prototype.firstKey=function(b){return this.limit(1).keys(function(j){return j[0]}).then(b)},Mr.prototype.lastKey=function(b){return this.reverse().firstKey(b)},Mr.prototype.distinct=function(){var b=this._ctx,b=b.index&&b.table.schema.idxByName[b.index];if(!b||!b.multi)return this;var j={};return hs(this._ctx,function(st){var at=st.primaryKey.toString(),st=tt(j,at);return j[at]=!0,!st}),this},Mr.prototype.modify=function(b){var j=this,et=this._ctx;return this._write(function(at){var st=typeof b=="function"?b:function(Dt){return Gs(Dt,b)},ct=et.table.core,Pt=ct.schema.primaryKey,yt=Pt.outbound,Et=Pt.extractKey,At=200,Pt=j.db._options.modifyChunkSize;Pt&&(At=typeof Pt=="object"?Pt[ct.name]||Pt["*"]||200:Pt);function $t(Dt,Lt){var Ft=Lt.failures,Lt=Lt.numFailures;Bt+=Dt-Lt;for(var Vt=0,Kt=h(Ft);Vt<Kt.length;Vt++){var Zt=Kt[Vt];kt.push(Ft[Zt])}}var kt=[],Bt=0,It=[],Rt=b===Ys;return j.clone().primaryKeys().then(function(Dt){function Mt(Lt){var Vt=Math.min(At,Dt.length-Lt),Kt=Dt.slice(Lt,Lt+Vt);return(Rt?Promise.resolve([]):ct.getMany({trans:at,keys:Kt,cache:"immutable"})).then(function(Zt){var ar=[],Xt=[],tr=yt?[]:null,lr=Rt?Kt:[];if(!Rt)for(var rr=0;rr<Vt;++rr){var cr=Zt[rr],Sr={value:Ut(cr),primKey:Dt[Lt+rr]};st.call(Sr,Sr.value,Sr)!==!1&&(Sr.value==null?lr.push(Dt[Lt+rr]):yt||Rr(Et(cr),Et(Sr.value))===0?(Xt.push(Sr.value),yt&&tr.push(Dt[Lt+rr])):(lr.push(Dt[Lt+rr]),ar.push(Sr.value)))}return Promise.resolve(0<ar.length&&ct.mutate({trans:at,type:"add",values:ar}).then(function(_r){for(var Cr in _r.failures)lr.splice(parseInt(Cr),1);$t(ar.length,_r)})).then(function(){return(0<Xt.length||Ft&&typeof b=="object")&&ct.mutate({trans:at,type:"put",keys:tr,values:Xt,criteria:Ft,changeSpec:typeof b!="function"&&b,isAdditionalChunk:0<Lt}).then(function(_r){return $t(Xt.length,_r)})}).then(function(){return(0<lr.length||Ft&&Rt)&&ct.mutate({trans:at,type:"delete",keys:lr,criteria:Ft,isAdditionalChunk:0<Lt}).then(function(_r){return ga(et.table,lr,_r)}).then(function(_r){return $t(lr.length,_r)})}).then(function(){return Dt.length>Lt+Vt&&Mt(Lt+At)})})}var Ft=Bn(et)&&et.limit===1/0&&(typeof b!="function"||Rt)&&{index:et.index,range:et.range};return Mt(0).then(function(){if(0<kt.length)throw new Lr("Error modifying one or more objects",kt,Bt,It);return Dt.length})})})},Mr.prototype.delete=function(){var b=this._ctx,j=b.range;return!Bn(b)||b.table.schema.yProps||!b.isPrimKey&&j.type!==3?this.modify(Ys):this._write(function(et){var at=b.table.core.schema.primaryKey,st=j;return b.table.core.count({trans:et,query:{index:at,range:st}}).then(function(ct){return b.table.core.mutate({trans:et,type:"deleteRange",range:st}).then(function(At){var Et=At.failures,At=At.numFailures;if(At)throw new Lr("Could not delete some values",Object.keys(Et).map(function(Pt){return Et[Pt]}),ct-At);return ct-At})})})},Mr);function Mr(){}var Ys=function(b,j){return j.value=null};function vo(b,j){return b<j?-1:b===j?0:1}function xo(b,j){return j<b?-1:b===j?0:1}function tn(b,j,et){return b=b instanceof Zs?new b.Collection(b):b,b._ctx.error=new(et||TypeError)(j),b}function Fn(b){return new b.Collection(b,function(){return Qs("")}).limit(0)}function _a(b,j,et,at){var st,ct,yt,Et,At,Pt,$t,kt=et.length;if(!et.every(function(Rt){return typeof Rt=="string"}))return tn(b,Ls);function Bt(Rt){st=Rt==="next"?function(Mt){return Mt.toUpperCase()}:function(Mt){return Mt.toLowerCase()},ct=Rt==="next"?function(Mt){return Mt.toLowerCase()}:function(Mt){return Mt.toUpperCase()},yt=Rt==="next"?vo:xo;var Dt=et.map(function(Mt){return{lower:ct(Mt),upper:st(Mt)}}).sort(function(Mt,Ft){return yt(Mt.lower,Ft.lower)});Et=Dt.map(function(Mt){return Mt.upper}),At=Dt.map(function(Mt){return Mt.lower}),$t=(Pt=Rt)==="next"?"":at}Bt("next"),b=new b.Collection(b,function(){return xn(Et[0],At[kt-1]+at)}),b._ondirectionchange=function(Rt){Bt(Rt)};var It=0;return b._addAlgorithm(function(Rt,Dt,Mt){var Ft=Rt.key;if(typeof Ft!="string")return!1;var Lt=ct(Ft);if(j(Lt,At,It))return!0;for(var Vt=null,Kt=It;Kt<kt;++Kt){var Zt=function(ar,Xt,tr,lr,rr,cr){for(var Sr=Math.min(ar.length,lr.length),_r=-1,Cr=0;Cr<Sr;++Cr){var rn=Xt[Cr];if(rn!==lr[Cr])return rr(ar[Cr],tr[Cr])<0?ar.substr(0,Cr)+tr[Cr]+tr.substr(Cr+1):rr(ar[Cr],lr[Cr])<0?ar.substr(0,Cr)+lr[Cr]+tr.substr(Cr+1):0<=_r?ar.substr(0,_r)+Xt[_r]+tr.substr(_r+1):null;rr(ar[Cr],rn)<0&&(_r=Cr)}return Sr<lr.length&&cr==="next"?ar+tr.substr(ar.length):Sr<ar.length&&cr==="prev"?ar.substr(0,tr.length):_r<0?null:ar.substr(0,_r)+lr[_r]+tr.substr(_r+1)}(Ft,Lt,Et[Kt],At[Kt],yt,Pt);Zt===null&&Vt===null?It=Kt+1:(Vt===null||0<yt(Vt,Zt))&&(Vt=Zt)}return Dt(Vt!==null?function(){Rt.continue(Vt+$t)}:Mt),!1}),b}function xn(b,j,et,at){return{type:2,lower:b,upper:j,lowerOpen:et,upperOpen:at}}function Qs(b){return{type:1,lower:b,upper:b}}var Zs=(Object.defineProperty(Kr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kr.prototype.between=function(b,j,et,at){et=et!==!1,at=at===!0;try{return 0<this._cmp(b,j)||this._cmp(b,j)===0&&(et||at)&&(!et||!at)?Fn(this):new this.Collection(this,function(){return xn(b,j,!et,!at)})}catch{return tn(this,mn)}},Kr.prototype.equals=function(b){return b==null?tn(this,mn):new this.Collection(this,function(){return Qs(b)})},Kr.prototype.above=function(b){return b==null?tn(this,mn):new this.Collection(this,function(){return xn(b,void 0,!0)})},Kr.prototype.aboveOrEqual=function(b){return b==null?tn(this,mn):new this.Collection(this,function(){return xn(b,void 0,!1)})},Kr.prototype.below=function(b){return b==null?tn(this,mn):new this.Collection(this,function(){return xn(void 0,b,!1,!0)})},Kr.prototype.belowOrEqual=function(b){return b==null?tn(this,mn):new this.Collection(this,function(){return xn(void 0,b)})},Kr.prototype.startsWith=function(b){return typeof b!="string"?tn(this,Ls):this.between(b,b+An,!0,!0)},Kr.prototype.startsWithIgnoreCase=function(b){return b===""?this.startsWith(b):_a(this,function(j,et){return j.indexOf(et[0])===0},[b],An)},Kr.prototype.equalsIgnoreCase=function(b){return _a(this,function(j,et){return j===et[0]},[b],"")},Kr.prototype.anyOfIgnoreCase=function(){var b=or.apply(nr,arguments);return b.length===0?Fn(this):_a(this,function(j,et){return et.indexOf(j)!==-1},b,"")},Kr.prototype.startsWithAnyOfIgnoreCase=function(){var b=or.apply(nr,arguments);return b.length===0?Fn(this):_a(this,function(j,et){return et.some(function(at){return j.indexOf(at)===0})},b,An)},Kr.prototype.anyOf=function(){var b=this,j=or.apply(nr,arguments),et=this._cmp;try{j.sort(et)}catch{return tn(this,mn)}if(j.length===0)return Fn(this);var at=new this.Collection(this,function(){return xn(j[0],j[j.length-1])});at._ondirectionchange=function(ct){et=ct==="next"?b._ascending:b._descending,j.sort(et)};var st=0;return at._addAlgorithm(function(ct,yt,Et){for(var At=ct.key;0<et(At,j[st]);)if(++st===j.length)return yt(Et),!1;return et(At,j[st])===0||(yt(function(){ct.continue(j[st])}),!1)}),at},Kr.prototype.notEqual=function(b){return this.inAnyRange([[-1/0,b],[b,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kr.prototype.noneOf=function(){var b=or.apply(nr,arguments);if(b.length===0)return new this.Collection(this);try{b.sort(this._ascending)}catch{return tn(this,mn)}var j=b.reduce(function(et,at){return et?et.concat([[et[et.length-1][1],at]]):[[-1/0,at]]},null);return j.push([b[b.length-1],this.db._maxKey]),this.inAnyRange(j,{includeLowers:!1,includeUppers:!1})},Kr.prototype.inAnyRange=function(Ft,j){var et=this,at=this._cmp,st=this._ascending,ct=this._descending,yt=this._min,Et=this._max;if(Ft.length===0)return Fn(this);if(!Ft.every(function(Lt){return Lt[0]!==void 0&&Lt[1]!==void 0&&st(Lt[0],Lt[1])<=0}))return tn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",pr.InvalidArgument);var At=!j||j.includeLowers!==!1,Pt=j&&j.includeUppers===!0,$t,kt=st;function Bt(Lt,Vt){return kt(Lt[0],Vt[0])}try{($t=Ft.reduce(function(Lt,Vt){for(var Kt=0,Zt=Lt.length;Kt<Zt;++Kt){var ar=Lt[Kt];if(at(Vt[0],ar[1])<0&&0<at(Vt[1],ar[0])){ar[0]=yt(ar[0],Vt[0]),ar[1]=Et(ar[1],Vt[1]);break}}return Kt===Zt&&Lt.push(Vt),Lt},[])).sort(Bt)}catch{return tn(this,mn)}var It=0,Rt=Pt?function(Lt){return 0<st(Lt,$t[It][1])}:function(Lt){return 0<=st(Lt,$t[It][1])},Dt=At?function(Lt){return 0<ct(Lt,$t[It][0])}:function(Lt){return 0<=ct(Lt,$t[It][0])},Mt=Rt,Ft=new this.Collection(this,function(){return xn($t[0][0],$t[$t.length-1][1],!At,!Pt)});return Ft._ondirectionchange=function(Lt){kt=Lt==="next"?(Mt=Rt,st):(Mt=Dt,ct),$t.sort(Bt)},Ft._addAlgorithm(function(Lt,Vt,Kt){for(var Zt,ar=Lt.key;Mt(ar);)if(++It===$t.length)return Vt(Kt),!1;return!Rt(Zt=ar)&&!Dt(Zt)||(et._cmp(ar,$t[It][1])===0||et._cmp(ar,$t[It][0])===0||Vt(function(){kt===st?Lt.continue($t[It][0]):Lt.continue($t[It][1])}),!1)}),Ft},Kr.prototype.startsWithAnyOf=function(){var b=or.apply(nr,arguments);return b.every(function(j){return typeof j=="string"})?b.length===0?Fn(this):this.inAnyRange(b.map(function(j){return[j,j+An]})):tn(this,"startsWithAnyOf() only works with strings")},Kr);function Kr(){}function fn(b){return kr(function(j){return Wn(j),b(j.target.error),!1})}function Wn(b){b.stopPropagation&&b.stopPropagation(),b.preventDefault&&b.preventDefault()}var Hn="storagemutated",ys="x-storagemutated-1",bn=zn(null,Hn),bo=(pn.prototype._lock=function(){return St(!er.global),++this._reculock,this._reculock!==1||er.global||(er.lockOwnerFor=this),this},pn.prototype._unlock=function(){if(St(!er.global),--this._reculock==0)for(er.global||(er.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var b=this._blockedFuncs.shift();try{_n(b[1],b[0])}catch{}}return this},pn.prototype._locked=function(){return this._reculock&&er.lockOwnerFor!==this},pn.prototype.create=function(b){var j=this;if(!this.mode)return this;var et=this.db.idbdb,at=this.db._state.dbOpenError;if(St(!this.idbtrans),!b&&!et)switch(at&&at.name){case"DatabaseClosedError":throw new pr.DatabaseClosed(at);case"MissingAPIError":throw new pr.MissingAPI(at.message,at);default:throw new pr.OpenFailed(at)}if(!this.active)throw new pr.TransactionInactive;return St(this._completion._state===null),(b=this.idbtrans=b||(this.db.core||et).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=kr(function(st){Wn(st),j._reject(b.error)}),b.onabort=kr(function(st){Wn(st),j.active&&j._reject(new pr.Abort(b.error)),j.active=!1,j.on("abort").fire(st)}),b.oncomplete=kr(function(){j.active=!1,j._resolve(),"mutatedParts"in b&&bn.storagemutated.fire(b.mutatedParts)}),this},pn.prototype._promise=function(b,j,et){var at=this;if(b==="readwrite"&&this.mode!=="readwrite")return Vr(new pr.ReadOnly("Transaction is readonly"));if(!this.active)return Vr(new pr.TransactionInactive);if(this._locked())return new ur(function(ct,yt){at._blockedFuncs.push([function(){at._promise(b,j,et).then(ct,yt)},er])});if(et)return cn(function(){var ct=new ur(function(yt,Et){at._lock();var At=j(yt,Et,at);At&&At.then&&At.then(yt,Et)});return ct.finally(function(){return at._unlock()}),ct._lib=!0,ct});var st=new ur(function(ct,yt){var Et=j(ct,yt,at);Et&&Et.then&&Et.then(ct,yt)});return st._lib=!0,st},pn.prototype._root=function(){return this.parent?this.parent._root():this},pn.prototype.waitFor=function(b){var j,et=this._root(),at=ur.resolve(b);et._waitingFor?et._waitingFor=et._waitingFor.then(function(){return at}):(et._waitingFor=at,et._waitingQueue=[],j=et.idbtrans.objectStore(et.storeNames[0]),function ct(){for(++et._spinCount;et._waitingQueue.length;)et._waitingQueue.shift()();et._waitingFor&&(j.get(-1/0).onsuccess=ct)}());var st=et._waitingFor;return new ur(function(ct,yt){at.then(function(Et){return et._waitingQueue.push(kr(ct.bind(null,Et)))},function(Et){return et._waitingQueue.push(kr(yt.bind(null,Et)))}).finally(function(){et._waitingFor===st&&(et._waitingFor=null)})})},pn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new pr.Abort))},pn.prototype.table=function(b){var j=this._memoizedTables||(this._memoizedTables={});if(tt(j,b))return j[b];var et=this.schema[b];if(!et)throw new pr.NotFound("Table "+b+" not part of transaction");return et=new this.db.Table(b,et,this),et.core=this.db.core.table(b),j[b]=et},pn);function pn(){}function vs(b,j,et,at,st,ct,yt,Et){return{name:b,keyPath:j,unique:et,multi:at,auto:st,compound:ct,src:(et&&!yt?"&":"")+(at?"*":"")+(st?"++":"")+Js(j),type:Et}}function Js(b){return typeof b=="string"?b:b?"["+[].join.call(b,"+")+"]":""}function xs(b,j,et){return{name:b,primKey:j,indexes:et,mappedClass:null,idxByName:(at=function(st){return[st.name,st]},et.reduce(function(st,ct,yt){return yt=at(ct,yt),yt&&(st[yt[0]]=yt[1]),st},{}))};var at}var Gn=function(b){try{return b.only([[]]),Gn=function(){return[[]]},[[]]}catch{return Gn=function(){return An},An}};function bs(b){return b==null?function(){}:typeof b=="string"?(j=b).split(".").length===1?function(et){return et[j]}:function(et){return Tt(et,j)}:function(et){return Tt(et,b)};var j}function eo(b){return[].slice.call(b)}var wo=0;function Kn(b){return b==null?":id":typeof b=="string"?b:"[".concat(b.join("+"),"]")}function Eo(b,j,At){function at(Mt){if(Mt.type===3)return null;if(Mt.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var It=Mt.lower,Rt=Mt.upper,Dt=Mt.lowerOpen,Mt=Mt.upperOpen;return It===void 0?Rt===void 0?null:j.upperBound(Rt,!!Mt):Rt===void 0?j.lowerBound(It,!!Dt):j.bound(It,Rt,!!Dt,!!Mt)}function st(Bt){var It,Rt=Bt.name;return{name:Rt,schema:Bt,mutate:function(Dt){var Mt=Dt.trans,Ft=Dt.type,Lt=Dt.keys,Vt=Dt.values,Kt=Dt.range;return new Promise(function(Zt,ar){Zt=kr(Zt);var Xt=Mt.objectStore(Rt),tr=Xt.keyPath==null,lr=Ft==="put"||Ft==="add";if(!lr&&Ft!=="delete"&&Ft!=="deleteRange")throw new Error("Invalid operation type: "+Ft);var rr,cr=(Lt||Vt||{length:1}).length;if(Lt&&Vt&&Lt.length!==Vt.length)throw new Error("Given keys array must have same length as given values array.");if(cr===0)return Zt({numFailures:0,failures:{},results:[],lastResult:void 0});function Sr(en){++rn,Wn(en)}var _r=[],Cr=[],rn=0;if(Ft==="deleteRange"){if(Kt.type===4)return Zt({numFailures:rn,failures:Cr,results:[],lastResult:void 0});Kt.type===3?_r.push(rr=Xt.clear()):_r.push(rr=Xt.delete(at(Kt)))}else{var tr=lr?tr?[Vt,Lt]:[Vt,null]:[Lt,null],Tr=tr[0],Qr=tr[1];if(lr)for(var Zr=0;Zr<cr;++Zr)_r.push(rr=Qr&&Qr[Zr]!==void 0?Xt[Ft](Tr[Zr],Qr[Zr]):Xt[Ft](Tr[Zr])),rr.onerror=Sr;else for(Zr=0;Zr<cr;++Zr)_r.push(rr=Xt[Ft](Tr[Zr])),rr.onerror=Sr}function cs(en){en=en.target.result,_r.forEach(function(Rn,Os){return Rn.error!=null&&(Cr[Os]=Rn.error)}),Zt({numFailures:rn,failures:Cr,results:Ft==="delete"?Lt:_r.map(function(Rn){return Rn.result}),lastResult:en})}rr.onerror=function(en){Sr(en),cs(en)},rr.onsuccess=cs})},getMany:function(Dt){var Mt=Dt.trans,Ft=Dt.keys;return new Promise(function(Lt,Vt){Lt=kr(Lt);for(var Kt,Zt=Mt.objectStore(Rt),ar=Ft.length,Xt=new Array(ar),tr=0,lr=0,rr=function(_r){_r=_r.target,Xt[_r._pos]=_r.result,++lr===tr&&Lt(Xt)},cr=fn(Vt),Sr=0;Sr<ar;++Sr)Ft[Sr]!=null&&((Kt=Zt.get(Ft[Sr]))._pos=Sr,Kt.onsuccess=rr,Kt.onerror=cr,++tr);tr===0&&Lt(Xt)})},get:function(Dt){var Mt=Dt.trans,Ft=Dt.key;return new Promise(function(Lt,Vt){Lt=kr(Lt);var Kt=Mt.objectStore(Rt).get(Ft);Kt.onsuccess=function(Zt){return Lt(Zt.target.result)},Kt.onerror=fn(Vt)})},query:(It=Pt,function(Dt){return new Promise(function(Mt,Ft){Mt=kr(Mt);var Lt,Vt,Kt,tr=Dt.trans,Zt=Dt.values,ar=Dt.limit,rr=Dt.query,Xt=ar===1/0?void 0:ar,lr=rr.index,rr=rr.range,tr=tr.objectStore(Rt),lr=lr.isPrimaryKey?tr:tr.index(lr.name),rr=at(rr);if(ar===0)return Mt({result:[]});It?((Xt=Zt?lr.getAll(rr,Xt):lr.getAllKeys(rr,Xt)).onsuccess=function(cr){return Mt({result:cr.target.result})},Xt.onerror=fn(Ft)):(Lt=0,Vt=!Zt&&"openKeyCursor"in lr?lr.openKeyCursor(rr):lr.openCursor(rr),Kt=[],Vt.onsuccess=function(cr){var Sr=Vt.result;return Sr?(Kt.push(Zt?Sr.value:Sr.primaryKey),++Lt===ar?Mt({result:Kt}):void Sr.continue()):Mt({result:Kt})},Vt.onerror=fn(Ft))})}),openCursor:function(Dt){var Mt=Dt.trans,Ft=Dt.values,Lt=Dt.query,Vt=Dt.reverse,Kt=Dt.unique;return new Promise(function(Zt,ar){Zt=kr(Zt);var lr=Lt.index,Xt=Lt.range,tr=Mt.objectStore(Rt),tr=lr.isPrimaryKey?tr:tr.index(lr.name),lr=Vt?Kt?"prevunique":"prev":Kt?"nextunique":"next",rr=!Ft&&"openKeyCursor"in tr?tr.openKeyCursor(at(Xt),lr):tr.openCursor(at(Xt),lr);rr.onerror=fn(ar),rr.onsuccess=kr(function(cr){var Sr,_r,Cr,rn,Tr=rr.result;Tr?(Tr.___id=++wo,Tr.done=!1,Sr=Tr.continue.bind(Tr),_r=(_r=Tr.continuePrimaryKey)&&_r.bind(Tr),Cr=Tr.advance.bind(Tr),rn=function(){throw new Error("Cursor not stopped")},Tr.trans=Mt,Tr.stop=Tr.continue=Tr.continuePrimaryKey=Tr.advance=function(){throw new Error("Cursor not started")},Tr.fail=kr(ar),Tr.next=function(){var Qr=this,Zr=1;return this.start(function(){return Zr--?Qr.continue():Qr.stop()}).then(function(){return Qr})},Tr.start=function(Qr){function Zr(){if(rr.result)try{Qr()}catch(en){Tr.fail(en)}else Tr.done=!0,Tr.start=function(){throw new Error("Cursor behind last entry")},Tr.stop()}var cs=new Promise(function(en,Rn){en=kr(en),rr.onerror=fn(Rn),Tr.fail=Rn,Tr.stop=function(Os){Tr.stop=Tr.continue=Tr.continuePrimaryKey=Tr.advance=rn,en(Os)}});return rr.onsuccess=kr(function(en){rr.onsuccess=Zr,Zr()}),Tr.continue=Sr,Tr.continuePrimaryKey=_r,Tr.advance=Cr,Zr(),cs},Zt(Tr)):Zt(null)},ar)})},count:function(Dt){var Mt=Dt.query,Ft=Dt.trans,Lt=Mt.index,Vt=Mt.range;return new Promise(function(Kt,Zt){var ar=Ft.objectStore(Rt),Xt=Lt.isPrimaryKey?ar:ar.index(Lt.name),ar=at(Vt),Xt=ar?Xt.count(ar):Xt.count();Xt.onsuccess=kr(function(tr){return Kt(tr.target.result)}),Xt.onerror=fn(Zt)})}}}var ct,yt,Et,$t=(yt=At,Et=eo((ct=b).objectStoreNames),{schema:{name:ct.name,tables:Et.map(function(Bt){return yt.objectStore(Bt)}).map(function(Bt){var It=Bt.keyPath,Mt=Bt.autoIncrement,Rt=g(It),Dt={},Mt={name:Bt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:It==null,compound:Rt,keyPath:It,autoIncrement:Mt,unique:!0,extractKey:bs(It)},indexes:eo(Bt.indexNames).map(function(Ft){return Bt.index(Ft)}).map(function(Kt){var Lt=Kt.name,Vt=Kt.unique,Zt=Kt.multiEntry,Kt=Kt.keyPath,Zt={name:Lt,compound:g(Kt),keyPath:Kt,unique:Vt,multiEntry:Zt,extractKey:bs(Kt)};return Dt[Kn(Kt)]=Zt}),getIndexByKeyPath:function(Ft){return Dt[Kn(Ft)]}};return Dt[":id"]=Mt.primaryKey,It!=null&&(Dt[Kn(It)]=Mt.primaryKey),Mt})},hasGetAll:0<Et.length&&"getAll"in yt.objectStore(Et[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),At=$t.schema,Pt=$t.hasGetAll,$t=At.tables.map(st),kt={};return $t.forEach(function(Bt){return kt[Bt.name]=Bt}),{stack:"dbcore",transaction:b.transaction.bind(b),table:function(Bt){if(!kt[Bt])throw new Error("Table '".concat(Bt,"' not found"));return kt[Bt]},MIN_KEY:-1/0,MAX_KEY:Gn(j),schema:At}}function To(b,j,et,at){var st=et.IDBKeyRange;return et.indexedDB,{dbcore:(at=Eo(j,st,at),b.dbcore.reduce(function(ct,yt){return yt=yt.create,o(o({},ct),yt(ct))},at))}}function $a(b,at){var et=at.db,at=To(b._middlewares,et,b._deps,at);b.core=at.dbcore,b.tables.forEach(function(st){var ct=st.name;b.core.schema.tables.some(function(yt){return yt.name===ct})&&(st.core=b.core.table(ct),b[ct]instanceof b.Table&&(b[ct].core=st.core))})}function es(b,j,et,at){et.forEach(function(st){var ct=at[st];j.forEach(function(yt){var Et=function At(Pt,$t){return gt(Pt,$t)||(Pt=$(Pt))&&At(Pt,$t)}(yt,st);(!Et||"value"in Et&&Et.value===void 0)&&(yt===b.Transaction.prototype||yt instanceof b.Transaction?dt(yt,st,{get:function(){return this.table(st)},set:function(At){lt(this,st,{value:At,writable:!0,configurable:!0,enumerable:!0})}}):yt[st]=new b.Table(st,ct))})})}function ws(b,j){j.forEach(function(et){for(var at in et)et[at]instanceof b.Table&&delete et[at]})}function So(b,j){return b._cfg.version-j._cfg.version}function ko(b,j,et,at){var st=b._dbSchema;et.objectStoreNames.contains("$meta")&&!st.$meta&&(st.$meta=xs("$meta",ro("")[0],[]),b._storeNames.push("$meta"));var ct=b._createTransaction("readwrite",b._storeNames,st);ct.create(et),ct._completion.catch(at);var yt=ct._reject.bind(ct),Et=er.transless||er;cn(function(){return er.trans=ct,er.transless=Et,j!==0?($a(b,et),Pt=j,((At=ct).storeNames.includes("$meta")?At.table("$meta").get("version").then(function($t){return $t??Pt}):ur.resolve(Pt)).then(function($t){return Bt=$t,It=ct,Rt=et,Dt=[],$t=(kt=b)._versions,Mt=kt._dbSchema=rs(0,kt.idbdb,Rt),($t=$t.filter(function(Ft){return Ft._cfg.version>=Bt})).length!==0?($t.forEach(function(Ft){Dt.push(function(){var Lt=Mt,Vt=Ft._cfg.dbschema;ns(kt,Lt,Rt),ns(kt,Vt,Rt),Mt=kt._dbSchema=Vt;var Kt=Es(Lt,Vt);Kt.add.forEach(function(lr){Ts(Rt,lr[0],lr[1].primKey,lr[1].indexes)}),Kt.change.forEach(function(lr){if(lr.recreate)throw new pr.Upgrade("Not yet support for changing primary key");var rr=Rt.objectStore(lr.name);lr.add.forEach(function(cr){return ts(rr,cr)}),lr.change.forEach(function(cr){rr.deleteIndex(cr.name),ts(rr,cr)}),lr.del.forEach(function(cr){return rr.deleteIndex(cr)})});var Zt=Ft._cfg.contentUpgrade;if(Zt&&Ft._cfg.version>Bt){$a(kt,Rt),It._memoizedTables={};var ar=bt(Vt);Kt.del.forEach(function(lr){ar[lr]=Lt[lr]}),ws(kt,[kt.Transaction.prototype]),es(kt,[kt.Transaction.prototype],h(ar),ar),It.schema=ar;var Xt,tr=ir(Zt);return tr&&dn(),Kt=ur.follow(function(){var lr;(Xt=Zt(It))&&tr&&(lr=sn.bind(null,null),Xt.then(lr,lr))}),Xt&&typeof Xt.then=="function"?ur.resolve(Xt):Kt.then(function(){return Xt})}}),Dt.push(function(Lt){var Vt,Kt,Zt=Ft._cfg.dbschema;Vt=Zt,Kt=Lt,[].slice.call(Kt.db.objectStoreNames).forEach(function(ar){return Vt[ar]==null&&Kt.db.deleteObjectStore(ar)}),ws(kt,[kt.Transaction.prototype]),es(kt,[kt.Transaction.prototype],kt._storeNames,kt._dbSchema),It.schema=kt._dbSchema}),Dt.push(function(Lt){kt.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(kt.idbdb.version/10)===Ft._cfg.version?(kt.idbdb.deleteObjectStore("$meta"),delete kt._dbSchema.$meta,kt._storeNames=kt._storeNames.filter(function(Vt){return Vt!=="$meta"})):Lt.objectStore("$meta").put(Ft._cfg.version,"version"))})}),function Ft(){return Dt.length?ur.resolve(Dt.shift()(It.idbtrans)).then(Ft):ur.resolve()}().then(function(){to(Mt,Rt)})):ur.resolve();var kt,Bt,It,Rt,Dt,Mt}).catch(yt)):(h(st).forEach(function($t){Ts(et,$t,st[$t].primKey,st[$t].indexes)}),$a(b,et),void ur.follow(function(){return b.on.populate.fire(ct)}).catch(yt));var At,Pt})}function _o(b,j){to(b._dbSchema,j),j.db.version%10!=0||j.objectStoreNames.contains("$meta")||j.db.createObjectStore("$meta").add(Math.ceil(j.db.version/10-1),"version");var et=rs(0,b.idbdb,j);ns(b,b._dbSchema,j);for(var at=0,st=Es(et,b._dbSchema).change;at<st.length;at++){var ct=function(yt){if(yt.change.length||yt.recreate)return console.warn("Unable to patch indexes of table ".concat(yt.name," because it has changes on the type of index or primary key.")),{value:void 0};var Et=j.objectStore(yt.name);yt.add.forEach(function(At){Ur&&console.debug("Dexie upgrade patch: Creating missing index ".concat(yt.name,".").concat(At.src)),ts(Et,At)})}(st[at]);if(typeof ct=="object")return ct.value}}function Es(b,j){var et,at={del:[],add:[],change:[]};for(et in b)j[et]||at.del.push(et);for(et in j){var st=b[et],ct=j[et];if(st){var yt={name:et,def:ct,recreate:!1,del:[],add:[],change:[]};if(""+(st.primKey.keyPath||"")!=""+(ct.primKey.keyPath||"")||st.primKey.auto!==ct.primKey.auto)yt.recreate=!0,at.change.push(yt);else{var Et=st.idxByName,At=ct.idxByName,Pt=void 0;for(Pt in Et)At[Pt]||yt.del.push(Pt);for(Pt in At){var $t=Et[Pt],kt=At[Pt];$t?$t.src!==kt.src&&yt.change.push(kt):yt.add.push(kt)}(0<yt.del.length||0<yt.add.length||0<yt.change.length)&&at.change.push(yt)}}else at.add.push([et,ct])}return at}function Ts(b,j,et,at){var st=b.db.createObjectStore(j,et.keyPath?{keyPath:et.keyPath,autoIncrement:et.auto}:{autoIncrement:et.auto});return at.forEach(function(ct){return ts(st,ct)}),st}function to(b,j){h(b).forEach(function(et){j.db.objectStoreNames.contains(et)||(Ur&&console.debug("Dexie: Creating missing table",et),Ts(j,et,b[et].primKey,b[et].indexes))})}function ts(b,j){b.createIndex(j.name,j.keyPath,{unique:j.unique,multiEntry:j.multi})}function rs(b,j,et){var at={};return mt(j.objectStoreNames,0).forEach(function(st){for(var ct=et.objectStore(st),yt=vs(Js(Pt=ct.keyPath),Pt||"",!0,!1,!!ct.autoIncrement,Pt&&typeof Pt!="string",!0),Et=[],At=0;At<ct.indexNames.length;++At){var $t=ct.index(ct.indexNames[At]),Pt=$t.keyPath,$t=vs($t.name,Pt,!!$t.unique,!!$t.multiEntry,!1,Pt&&typeof Pt!="string",!1);Et.push($t)}at[st]=xs(st,yt,Et)}),at}function ns(b,j,et){for(var at=et.db.objectStoreNames,st=0;st<at.length;++st){var ct=at[st],yt=et.objectStore(ct);b._hasGetAll="getAll"in yt;for(var Et=0;Et<yt.indexNames.length;++Et){var At=yt.indexNames[Et],Pt=yt.index(At).keyPath,$t=typeof Pt=="string"?Pt:"["+mt(Pt).join("+")+"]";!j[ct]||(Pt=j[ct].idxByName[$t])&&(Pt.name=At,delete j[ct].idxByName[$t],j[ct].idxByName[At]=Pt)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(b._hasGetAll=!1)}function ro(b){return b.split(",").map(function(j,et){var ct=j.split(":"),at=(st=ct[1])===null||st===void 0?void 0:st.trim(),st=(j=ct[0].trim()).replace(/([&*]|\+\+)/g,""),ct=/^\[/.test(st)?st.match(/^\[(.*)\]$/)[1].split("+"):st;return vs(st,ct||null,/\&/.test(j),/\*/.test(j),/\+\+/.test(j),g(ct),et===0,at)})}var Ao=(On.prototype._createTableSchema=xs,On.prototype._parseIndexSyntax=ro,On.prototype._parseStoresSpec=function(b,j){var et=this;h(b).forEach(function(at){if(b[at]!==null){var st=et._parseIndexSyntax(b[at]),ct=st.shift();if(!ct)throw new pr.Schema("Invalid schema for table "+at+": "+b[at]);if(ct.unique=!0,ct.multi)throw new pr.Schema("Primary key cannot be multiEntry*");st.forEach(function(yt){if(yt.auto)throw new pr.Schema("Only primary key can be marked as autoIncrement (++)");if(!yt.keyPath)throw new pr.Schema("Index must have a name and cannot be an empty string")}),st=et._createTableSchema(at,ct,st),j[at]=st}})},On.prototype.stores=function(et){var j=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,et):et;var et=j._versions,at={},st={};return et.forEach(function(ct){_(at,ct._cfg.storesSource),st=ct._cfg.dbschema={},ct._parseStoresSpec(at,st)}),j._dbSchema=st,ws(j,[j._allTables,j,j.Transaction.prototype]),es(j,[j._allTables,j,j.Transaction.prototype,this._cfg.tables],h(st),st),j._storeNames=h(st),this},On.prototype.upgrade=function(b){return this._cfg.contentUpgrade=Dr(this._cfg.contentUpgrade||Pr,b),this},On);function On(){}function Ss(b,j){var et=b._dbNamesDB;return et||(et=b._dbNamesDB=new gn(_i,{addons:[],indexedDB:b,IDBKeyRange:j})).version(1).stores({dbnames:"name"}),et.table("dbnames")}function ks(b){return b&&typeof b.databases=="function"}function _s(b){return cn(function(){return er.letThrough=!0,b()})}function As(b){return!("from"in b)}var Yr=function(b,j){if(!this){var et=new Yr;return b&&"d"in b&&_(et,b),et}_(this,arguments.length?{d:1,from:b,to:1<arguments.length?j:b}:{d:0})};function qn(b,j,et){var at=Rr(j,et);if(!isNaN(at)){if(0<at)throw RangeError();if(As(b))return _(b,{from:j,to:et,d:1});var st=b.l,at=b.r;if(Rr(et,b.from)<0)return st?qn(st,j,et):b.l={from:j,to:et,d:1,l:null,r:null},io(b);if(0<Rr(j,b.to))return at?qn(at,j,et):b.r={from:j,to:et,d:1,l:null,r:null},io(b);Rr(j,b.from)<0&&(b.from=j,b.l=null,b.d=at?at.d+1:1),0<Rr(et,b.to)&&(b.to=et,b.r=null,b.d=b.l?b.l.d+1:1),et=!b.r,st&&!b.l&&Xn(b,st),at&&et&&Xn(b,at)}}function Xn(b,j){As(j)||function et(at,At){var ct=At.from,yt=At.to,Et=At.l,At=At.r;qn(at,ct,yt),Et&&et(at,Et),At&&et(at,At)}(b,j)}function no(b,j){var et=is(j),at=et.next();if(at.done)return!1;for(var st=at.value,ct=is(b),yt=ct.next(st.from),Et=yt.value;!at.done&&!yt.done;){if(Rr(Et.from,st.to)<=0&&0<=Rr(Et.to,st.from))return!0;Rr(st.from,Et.from)<0?st=(at=et.next(Et.from)).value:Et=(yt=ct.next(st.from)).value}return!1}function is(b){var j=As(b)?null:{s:0,n:b};return{next:function(et){for(var at=0<arguments.length;j;)switch(j.s){case 0:if(j.s=1,at)for(;j.n.l&&Rr(et,j.n.from)<0;)j={up:j,n:j.n.l,s:1};else for(;j.n.l;)j={up:j,n:j.n.l,s:1};case 1:if(j.s=2,!at||Rr(et,j.n.to)<=0)return{value:j.n,done:!1};case 2:if(j.n.r){j.s=3,j={up:j,n:j.n.r,s:0};continue}case 3:j=j.up}return{done:!0}}}}function io(b){var j,et,at=(((j=b.r)===null||j===void 0?void 0:j.d)||0)-(((et=b.l)===null||et===void 0?void 0:et.d)||0),st=1<at?"r":at<-1?"l":"";st&&(j=st=="r"?"l":"r",et=o({},b),at=b[st],b.from=at.from,b.to=at.to,b[st]=at[st],et[st]=at[j],(b[j]=et).d=ao(et)),b.d=ao(b)}function ao(et){var j=et.r,et=et.l;return(j?et?Math.max(j.d,et.d):j.d:et?et.d:0)+1}function as(b,j){return h(j).forEach(function(et){b[et]?Xn(b[et],j[et]):b[et]=function at(st){var ct,yt,Et={};for(ct in st)tt(st,ct)&&(yt=st[ct],Et[ct]=!yt||typeof yt!="object"||Qt.has(yt.constructor)?yt:at(yt));return Et}(j[et])}),b}function Ps(b,j){return b.all||j.all||Object.keys(b).some(function(et){return j[et]&&no(j[et],b[et])})}nt(Yr.prototype,((ln={add:function(b){return Xn(this,b),this},addKey:function(b){return qn(this,b,b),this},addKeys:function(b){var j=this;return b.forEach(function(et){return qn(j,et,et)}),this},hasKey:function(b){var j=is(this).next(b).value;return j&&Rr(j.from,b)<=0&&0<=Rr(j.to,b)}})[mr]=function(){return is(this)},ln));var In={},Is={},Cs=!1;function ss(b){as(Is,b),Cs||(Cs=!0,setTimeout(function(){Cs=!1,Rs(Is,!(Is={}))},0))}function Rs(b,j){j===void 0&&(j=!1);var et=new Set;if(b.all)for(var at=0,st=Object.values(In);at<st.length;at++)so(yt=st[at],b,et,j);else for(var ct in b){var yt,Et=/^idb\:\/\/(.*)\/(.*)\//.exec(ct);Et&&(ct=Et[1],Et=Et[2],(yt=In["idb://".concat(ct,"/").concat(Et)])&&so(yt,b,et,j))}et.forEach(function(At){return At()})}function so(b,j,et,at){for(var st=[],ct=0,yt=Object.entries(b.queries.query);ct<yt.length;ct++){for(var Et=yt[ct],At=Et[0],Pt=[],$t=0,kt=Et[1];$t<kt.length;$t++){var Bt=kt[$t];Ps(j,Bt.obsSet)?Bt.subscribers.forEach(function(Mt){return et.add(Mt)}):at&&Pt.push(Bt)}at&&st.push([At,Pt])}if(at)for(var It=0,Rt=st;It<Rt.length;It++){var Dt=Rt[It],At=Dt[0],Pt=Dt[1];b.queries.query[At]=Pt}}function Po(b){var j=b._state,et=b._deps.indexedDB;if(j.isBeingOpened||b.idbdb)return j.dbReadyPromise.then(function(){return j.dbOpenError?Vr(j.dbOpenError):b});j.isBeingOpened=!0,j.dbOpenError=null,j.openComplete=!1;var at=j.openCanceller,st=Math.round(10*b.verno),ct=!1;function yt(){if(j.openCanceller!==at)throw new pr.DatabaseClosed("db.open() was cancelled")}function Et(){return new ur(function(Bt,It){if(yt(),!et)throw new pr.MissingAPI;var Rt=b.name,Dt=j.autoSchema||!st?et.open(Rt):et.open(Rt,st);if(!Dt)throw new pr.MissingAPI;Dt.onerror=fn(It),Dt.onblocked=kr(b._fireOnBlocked),Dt.onupgradeneeded=kr(function(Mt){var Ft;$t=Dt.transaction,j.autoSchema&&!b._options.allowEmptyDB?(Dt.onerror=Wn,$t.abort(),Dt.result.close(),(Ft=et.deleteDatabase(Rt)).onsuccess=Ft.onerror=kr(function(){It(new pr.NoSuchDatabase("Database ".concat(Rt," doesnt exist")))})):($t.onerror=fn(It),Mt=Mt.oldVersion>Math.pow(2,62)?0:Mt.oldVersion,kt=Mt<1,b.idbdb=Dt.result,ct&&_o(b,$t),ko(b,Mt/10,$t,It))},It),Dt.onsuccess=kr(function(){$t=null;var Mt,Ft,Lt,Vt,Kt,Zt=b.idbdb=Dt.result,ar=mt(Zt.objectStoreNames);if(0<ar.length)try{var Xt=Zt.transaction((Vt=ar).length===1?Vt[0]:Vt,"readonly");if(j.autoSchema)Ft=Zt,Lt=Xt,(Mt=b).verno=Ft.version/10,Lt=Mt._dbSchema=rs(0,Ft,Lt),Mt._storeNames=mt(Ft.objectStoreNames,0),es(Mt,[Mt._allTables],h(Lt),Lt);else if(ns(b,b._dbSchema,Xt),((Kt=Es(rs(0,(Kt=b).idbdb,Xt),Kt._dbSchema)).add.length||Kt.change.some(function(tr){return tr.add.length||tr.change.length}))&&!ct)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Zt.close(),st=Zt.version+1,ct=!0,Bt(Et());$a(b,Xt)}catch{}Nn.push(b),Zt.onversionchange=kr(function(tr){j.vcFired=!0,b.on("versionchange").fire(tr)}),Zt.onclose=kr(function(){b.close({disableAutoOpen:!1})}),kt&&(Kt=b._deps,Xt=Rt,Zt=Kt.indexedDB,Kt=Kt.IDBKeyRange,ks(Zt)||Xt===_i||Ss(Zt,Kt).put({name:Xt}).catch(Pr)),Bt()},It)}).catch(function(Bt){switch(Bt==null?void 0:Bt.name){case"UnknownError":if(0<j.PR1398_maxLoop)return j.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Et();break;case"VersionError":if(0<st)return st=0,Et()}return ur.reject(Bt)})}var At,Pt=j.dbReadyResolve,$t=null,kt=!1;return ur.race([at,(typeof navigator>"u"?ur.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Bt){function It(){return indexedDB.databases().finally(Bt)}At=setInterval(It,100),It()}).finally(function(){return clearInterval(At)}):Promise.resolve()).then(Et)]).then(function(){return yt(),j.onReadyBeingFired=[],ur.resolve(_s(function(){return b.on.ready.fire(b.vip)})).then(function Bt(){if(0<j.onReadyBeingFired.length){var It=j.onReadyBeingFired.reduce(Dr,Pr);return j.onReadyBeingFired=[],ur.resolve(_s(function(){return It(b.vip)})).then(Bt)}})}).finally(function(){j.openCanceller===at&&(j.onReadyBeingFired=null,j.isBeingOpened=!1)}).catch(function(Bt){j.dbOpenError=Bt;try{$t&&$t.abort()}catch{}return at===j.openCanceller&&b._close(),Vr(Bt)}).finally(function(){j.openComplete=!0,Pt()}).then(function(){var Bt;return kt&&(Bt={},b.tables.forEach(function(It){It.schema.indexes.forEach(function(Rt){Rt.name&&(Bt["idb://".concat(b.name,"/").concat(It.name,"/").concat(Rt.name)]=new Yr(-1/0,[[[]]]))}),Bt["idb://".concat(b.name,"/").concat(It.name,"/")]=Bt["idb://".concat(b.name,"/").concat(It.name,"/:dels")]=new Yr(-1/0,[[[]]])}),bn(Hn).fire(Bt),Rs(Bt,!0)),b})}function Ds(b){function j(ct){return b.next(ct)}var et=st(j),at=st(function(ct){return b.throw(ct)});function st(ct){return function(At){var Et=ct(At),At=Et.value;return Et.done?At:At&&typeof At.then=="function"?At.then(et,at):g(At)?Promise.all(At).then(et,at):et(At)}}return st(j)()}function os(b,j,et){for(var at=g(b)?b.slice():[b],st=0;st<et;++st)at.push(j);return at}var Io={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(b){return o(o({},b),{table:function(j){var et=b.table(j),at=et.schema,st={},ct=[];function yt(kt,Bt,It){var Rt=Kn(kt),Dt=st[Rt]=st[Rt]||[],Mt=kt==null?0:typeof kt=="string"?1:kt.length,Ft=0<Bt,Ft=o(o({},It),{name:Ft?"".concat(Rt,"(virtual-from:").concat(It.name,")"):It.name,lowLevelIndex:It,isVirtual:Ft,keyTail:Bt,keyLength:Mt,extractKey:bs(kt),unique:!Ft&&It.unique});return Dt.push(Ft),Ft.isPrimaryKey||ct.push(Ft),1<Mt&&yt(Mt===2?kt[0]:kt.slice(0,Mt-1),Bt+1,It),Dt.sort(function(Lt,Vt){return Lt.keyTail-Vt.keyTail}),Ft}j=yt(at.primaryKey.keyPath,0,at.primaryKey),st[":id"]=[j];for(var Et=0,At=at.indexes;Et<At.length;Et++){var Pt=At[Et];yt(Pt.keyPath,0,Pt)}function $t(kt){var Bt,It=kt.query.index;return It.isVirtual?o(o({},kt),{query:{index:It.lowLevelIndex,range:(Bt=kt.query.range,It=It.keyTail,{type:Bt.type===1?2:Bt.type,lower:os(Bt.lower,Bt.lowerOpen?b.MAX_KEY:b.MIN_KEY,It),lowerOpen:!0,upper:os(Bt.upper,Bt.upperOpen?b.MIN_KEY:b.MAX_KEY,It),upperOpen:!0})}}):kt}return o(o({},et),{schema:o(o({},at),{primaryKey:j,indexes:ct,getIndexByKeyPath:function(kt){return(kt=st[Kn(kt)])&&kt[0]}}),count:function(kt){return et.count($t(kt))},query:function(kt){return et.query($t(kt))},openCursor:function(kt){var Bt=kt.query.index,It=Bt.keyTail,Rt=Bt.isVirtual,Dt=Bt.keyLength;return Rt?et.openCursor($t(kt)).then(function(Ft){return Ft&&Mt(Ft)}):et.openCursor(kt);function Mt(Ft){return Object.create(Ft,{continue:{value:function(Lt){Lt!=null?Ft.continue(os(Lt,kt.reverse?b.MAX_KEY:b.MIN_KEY,It)):kt.unique?Ft.continue(Ft.key.slice(0,Dt).concat(kt.reverse?b.MIN_KEY:b.MAX_KEY,It)):Ft.continue()}},continuePrimaryKey:{value:function(Lt,Vt){Ft.continuePrimaryKey(os(Lt,b.MAX_KEY,It),Vt)}},primaryKey:{get:function(){return Ft.primaryKey}},key:{get:function(){var Lt=Ft.key;return Dt===1?Lt[0]:Lt.slice(0,Dt)}},value:{get:function(){return Ft.value}}})}}})}})}};function $s(b,j,et,at){return et=et||{},at=at||"",h(b).forEach(function(st){var ct,yt,Et;tt(j,st)?(ct=b[st],yt=j[st],typeof ct=="object"&&typeof yt=="object"&&ct&&yt?(Et=xr(ct))!==xr(yt)?et[at+st]=j[st]:Et==="Object"?$s(ct,yt,et,at+st+"."):ct!==yt&&(et[at+st]=j[st]):ct!==yt&&(et[at+st]=j[st])):et[at+st]=void 0}),h(j).forEach(function(st){tt(b,st)||(et[at+st]=j[st])}),et}function Ms(b,j){return j.type==="delete"?j.keys:j.keys||j.values.map(b.extractKey)}var Co={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(b){return o(o({},b),{table:function(j){var et=b.table(j),at=et.schema.primaryKey;return o(o({},et),{mutate:function(st){var ct=er.trans,yt=ct.table(j).hook,Et=yt.deleting,At=yt.creating,Pt=yt.updating;switch(st.type){case"add":if(At.fire===Pr)break;return ct._promise("readwrite",function(){return $t(st)},!0);case"put":if(At.fire===Pr&&Pt.fire===Pr)break;return ct._promise("readwrite",function(){return $t(st)},!0);case"delete":if(Et.fire===Pr)break;return ct._promise("readwrite",function(){return $t(st)},!0);case"deleteRange":if(Et.fire===Pr)break;return ct._promise("readwrite",function(){return function kt(Bt,It,Rt){return et.query({trans:Bt,values:!1,query:{index:at,range:It},limit:Rt}).then(function(Dt){var Mt=Dt.result;return $t({type:"delete",keys:Mt,trans:Bt}).then(function(Ft){return 0<Ft.numFailures?Promise.reject(Ft.failures[0]):Mt.length<Rt?{failures:[],numFailures:0,lastResult:void 0}:kt(Bt,o(o({},It),{lower:Mt[Mt.length-1],lowerOpen:!0}),Rt)})})}(st.trans,st.range,1e4)},!0)}return et.mutate(st);function $t(kt){var Bt,It,Rt,Dt=er.trans,Mt=kt.keys||Ms(at,kt);if(!Mt)throw new Error("Keys missing");return(kt=kt.type==="add"||kt.type==="put"?o(o({},kt),{keys:Mt}):o({},kt)).type!=="delete"&&(kt.values=c([],kt.values)),kt.keys&&(kt.keys=c([],kt.keys)),Bt=et,Rt=Mt,((It=kt).type==="add"?Promise.resolve([]):Bt.getMany({trans:It.trans,keys:Rt,cache:"immutable"})).then(function(Ft){var Lt=Mt.map(function(Vt,Kt){var Zt,ar,Xt,tr=Ft[Kt],lr={onerror:null,onsuccess:null};return kt.type==="delete"?Et.fire.call(lr,Vt,tr,Dt):kt.type==="add"||tr===void 0?(Zt=At.fire.call(lr,Vt,kt.values[Kt],Dt),Vt==null&&Zt!=null&&(kt.keys[Kt]=Vt=Zt,at.outbound||ut(kt.values[Kt],at.keyPath,Vt))):(Zt=$s(tr,kt.values[Kt]),(ar=Pt.fire.call(lr,Zt,Vt,tr,Dt))&&(Xt=kt.values[Kt],Object.keys(ar).forEach(function(rr){tt(Xt,rr)?Xt[rr]=ar[rr]:ut(Xt,rr,ar[rr])}))),lr});return et.mutate(kt).then(function(Vt){for(var Kt=Vt.failures,Zt=Vt.results,ar=Vt.numFailures,Vt=Vt.lastResult,Xt=0;Xt<Mt.length;++Xt){var tr=(Zt||Mt)[Xt],lr=Lt[Xt];tr==null?lr.onerror&&lr.onerror(Kt[Xt]):lr.onsuccess&&lr.onsuccess(kt.type==="put"&&Ft[Xt]?kt.values[Xt]:tr)}return{failures:Kt,results:Zt,numFailures:ar,lastResult:Vt}}).catch(function(Vt){return Lt.forEach(function(Kt){return Kt.onerror&&Kt.onerror(Vt)}),Promise.reject(Vt)})})}}})}})}};function oo(b,j,et){try{if(!j||j.keys.length<b.length)return null;for(var at=[],st=0,ct=0;st<j.keys.length&&ct<b.length;++st)Rr(j.keys[st],b[ct])===0&&(at.push(et?Ut(j.values[st]):j.values[st]),++ct);return at.length===b.length?at:null}catch{return null}}var Ro={stack:"dbcore",level:-1,create:function(b){return{table:function(j){var et=b.table(j);return o(o({},et),{getMany:function(at){if(!at.cache)return et.getMany(at);var st=oo(at.keys,at.trans._cache,at.cache==="clone");return st?ur.resolve(st):et.getMany(at).then(function(ct){return at.trans._cache={keys:at.keys,values:at.cache==="clone"?Ut(ct):ct},ct})},mutate:function(at){return at.type!=="add"&&(at.trans._cache=null),et.mutate(at)}})}}}};function lo(b,j){return b.trans.mode==="readonly"&&!!b.subscr&&!b.trans.explicit&&b.trans.db._options.cache!=="disabled"&&!j.schema.primaryKey.outbound}function uo(b,j){switch(b){case"query":return j.values&&!j.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Do={stack:"dbcore",level:0,name:"Observability",create:function(b){var j=b.schema.name,et=new Yr(b.MIN_KEY,b.MAX_KEY);return o(o({},b),{transaction:function(at,st,ct){if(er.subscr&&st!=="readonly")throw new pr.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(er.querier));return b.transaction(at,st,ct)},table:function(at){var st=b.table(at),ct=st.schema,yt=ct.primaryKey,kt=ct.indexes,Et=yt.extractKey,At=yt.outbound,Pt=yt.autoIncrement&&kt.filter(function(It){return It.compound&&It.keyPath.includes(yt.keyPath)}),$t=o(o({},st),{mutate:function(It){function Rt(rr){return rr="idb://".concat(j,"/").concat(at,"/").concat(rr),Vt[rr]||(Vt[rr]=new Yr)}var Dt,Mt,Ft,Lt=It.trans,Vt=It.mutatedParts||(It.mutatedParts={}),Kt=Rt(""),Zt=Rt(":dels"),ar=It.type,lr=It.type==="deleteRange"?[It.range]:It.type==="delete"?[It.keys]:It.values.length<50?[Ms(yt,It).filter(function(rr){return rr}),It.values]:[],Xt=lr[0],tr=lr[1],lr=It.trans._cache;return g(Xt)?(Kt.addKeys(Xt),(lr=ar==="delete"||Xt.length===tr.length?oo(Xt,lr):null)||Zt.addKeys(Xt),(lr||tr)&&(Dt=Rt,Mt=lr,Ft=tr,ct.indexes.forEach(function(rr){var cr=Dt(rr.name||"");function Sr(Cr){return Cr!=null?rr.extractKey(Cr):null}function _r(Cr){return rr.multiEntry&&g(Cr)?Cr.forEach(function(rn){return cr.addKey(rn)}):cr.addKey(Cr)}(Mt||Ft).forEach(function(Cr,Qr){var Tr=Mt&&Sr(Mt[Qr]),Qr=Ft&&Sr(Ft[Qr]);Rr(Tr,Qr)!==0&&(Tr!=null&&_r(Tr),Qr!=null&&_r(Qr))})}))):Xt?(tr={from:(tr=Xt.lower)!==null&&tr!==void 0?tr:b.MIN_KEY,to:(tr=Xt.upper)!==null&&tr!==void 0?tr:b.MAX_KEY},Zt.add(tr),Kt.add(tr)):(Kt.add(et),Zt.add(et),ct.indexes.forEach(function(rr){return Rt(rr.name).add(et)})),st.mutate(It).then(function(rr){return!Xt||It.type!=="add"&&It.type!=="put"||(Kt.addKeys(rr.results),Pt&&Pt.forEach(function(cr){for(var Sr=It.values.map(function(Tr){return cr.extractKey(Tr)}),_r=cr.keyPath.findIndex(function(Tr){return Tr===yt.keyPath}),Cr=0,rn=rr.results.length;Cr<rn;++Cr)Sr[Cr][_r]=rr.results[Cr];Rt(cr.name).addKeys(Sr)})),Lt.mutatedParts=as(Lt.mutatedParts||{},Vt),rr})}}),kt=function(Rt){var Dt=Rt.query,Rt=Dt.index,Dt=Dt.range;return[Rt,new Yr((Rt=Dt.lower)!==null&&Rt!==void 0?Rt:b.MIN_KEY,(Dt=Dt.upper)!==null&&Dt!==void 0?Dt:b.MAX_KEY)]},Bt={get:function(It){return[yt,new Yr(It.key)]},getMany:function(It){return[yt,new Yr().addKeys(It.keys)]},count:kt,query:kt,openCursor:kt};return h(Bt).forEach(function(It){$t[It]=function(Rt){var Dt=er.subscr,Mt=!!Dt,Ft=lo(er,st)&&uo(It,Rt)?Rt.obsSet={}:Dt;if(Mt){var Lt=function(tr){return tr="idb://".concat(j,"/").concat(at,"/").concat(tr),Ft[tr]||(Ft[tr]=new Yr)},Vt=Lt(""),Kt=Lt(":dels"),Dt=Bt[It](Rt),Mt=Dt[0],Dt=Dt[1];if((It==="query"&&Mt.isPrimaryKey&&!Rt.values?Kt:Lt(Mt.name||"")).add(Dt),!Mt.isPrimaryKey){if(It!=="count"){var Zt=It==="query"&&At&&Rt.values&&st.query(o(o({},Rt),{values:!1}));return st[It].apply(this,arguments).then(function(tr){if(It==="query"){if(At&&Rt.values)return Zt.then(function(Sr){return Sr=Sr.result,Vt.addKeys(Sr),tr});var lr=Rt.values?tr.result.map(Et):tr.result;(Rt.values?Vt:Kt).addKeys(lr)}else if(It==="openCursor"){var rr=tr,cr=Rt.values;return rr&&Object.create(rr,{key:{get:function(){return Kt.addKey(rr.primaryKey),rr.key}},primaryKey:{get:function(){var Sr=rr.primaryKey;return Kt.addKey(Sr),Sr}},value:{get:function(){return cr&&Vt.addKey(rr.primaryKey),rr.value}}})}return tr})}Kt.add(et)}}return st[It].apply(this,arguments)}}),$t}})}};function co(b,j,et){if(et.numFailures===0)return j;if(j.type==="deleteRange")return null;var at=j.keys?j.keys.length:"values"in j&&j.values?j.values.length:1;return et.numFailures===at?null:(j=o({},j),g(j.keys)&&(j.keys=j.keys.filter(function(st,ct){return!(ct in et.failures)})),"values"in j&&g(j.values)&&(j.values=j.values.filter(function(st,ct){return!(ct in et.failures)})),j)}function Ns(b,j){return et=b,((at=j).lower===void 0||(at.lowerOpen?0<Rr(et,at.lower):0<=Rr(et,at.lower)))&&(b=b,(j=j).upper===void 0||(j.upperOpen?Rr(b,j.upper)<0:Rr(b,j.upper)<=0));var et,at}function fo(b,j,Bt,at,st,ct){if(!Bt||Bt.length===0)return b;var yt=j.query.index,Et=yt.multiEntry,At=j.query.range,Pt=at.schema.primaryKey.extractKey,$t=yt.extractKey,kt=(yt.lowLevelIndex||yt).extractKey,Bt=Bt.reduce(function(It,Rt){var Dt=It,Mt=[];if(Rt.type==="add"||Rt.type==="put")for(var Ft=new Yr,Lt=Rt.values.length-1;0<=Lt;--Lt){var Vt,Kt=Rt.values[Lt],Zt=Pt(Kt);Ft.hasKey(Zt)||(Vt=$t(Kt),(Et&&g(Vt)?Vt.some(function(rr){return Ns(rr,At)}):Ns(Vt,At))&&(Ft.addKey(Zt),Mt.push(Kt)))}switch(Rt.type){case"add":var ar=new Yr().addKeys(j.values?It.map(function(cr){return Pt(cr)}):It),Dt=It.concat(j.values?Mt.filter(function(cr){return cr=Pt(cr),!ar.hasKey(cr)&&(ar.addKey(cr),!0)}):Mt.map(function(cr){return Pt(cr)}).filter(function(cr){return!ar.hasKey(cr)&&(ar.addKey(cr),!0)}));break;case"put":var Xt=new Yr().addKeys(Rt.values.map(function(cr){return Pt(cr)}));Dt=It.filter(function(cr){return!Xt.hasKey(j.values?Pt(cr):cr)}).concat(j.values?Mt:Mt.map(function(cr){return Pt(cr)}));break;case"delete":var tr=new Yr().addKeys(Rt.keys);Dt=It.filter(function(cr){return!tr.hasKey(j.values?Pt(cr):cr)});break;case"deleteRange":var lr=Rt.range;Dt=It.filter(function(cr){return!Ns(Pt(cr),lr)})}return Dt},b);return Bt===b?b:(Bt.sort(function(It,Rt){return Rr(kt(It),kt(Rt))||Rr(Pt(It),Pt(Rt))}),j.limit&&j.limit<1/0&&(Bt.length>j.limit?Bt.length=j.limit:b.length===j.limit&&Bt.length<j.limit&&(st.dirty=!0)),ct?Object.freeze(Bt):Bt)}function po(b,j){return Rr(b.lower,j.lower)===0&&Rr(b.upper,j.upper)===0&&!!b.lowerOpen==!!j.lowerOpen&&!!b.upperOpen==!!j.upperOpen}function $o(b,j){return function(et,at,st,ct){if(et===void 0)return at!==void 0?-1:0;if(at===void 0)return 1;if((at=Rr(et,at))===0){if(st&&ct)return 0;if(st)return 1;if(ct)return-1}return at}(b.lower,j.lower,b.lowerOpen,j.lowerOpen)<=0&&0<=function(et,at,st,ct){if(et===void 0)return at!==void 0?1:0;if(at===void 0)return-1;if((at=Rr(et,at))===0){if(st&&ct)return 0;if(st)return-1;if(ct)return 1}return at}(b.upper,j.upper,b.upperOpen,j.upperOpen)}function Mo(b,j,et,at){b.subscribers.add(et),at.addEventListener("abort",function(){var st,ct;b.subscribers.delete(et),b.subscribers.size===0&&(st=b,ct=j,setTimeout(function(){st.subscribers.size===0&&Gt(ct,st)},3e3))})}var No={stack:"dbcore",level:0,name:"Cache",create:function(b){var j=b.schema.name;return o(o({},b),{transaction:function(et,at,st){var ct,yt,Et=b.transaction(et,at,st);return at==="readwrite"&&(yt=(ct=new AbortController).signal,st=function(At){return function(){if(ct.abort(),at==="readwrite"){for(var Pt=new Set,$t=0,kt=et;$t<kt.length;$t++){var Bt=kt[$t],It=In["idb://".concat(j,"/").concat(Bt)];if(It){var Rt=b.table(Bt),Dt=It.optimisticOps.filter(function(cr){return cr.trans===Et});if(Et._explicit&&At&&Et.mutatedParts)for(var Mt=0,Ft=Object.values(It.queries.query);Mt<Ft.length;Mt++)for(var Lt=0,Vt=(ar=Ft[Mt]).slice();Lt<Vt.length;Lt++)Ps((Xt=Vt[Lt]).obsSet,Et.mutatedParts)&&(Gt(ar,Xt),Xt.subscribers.forEach(function(cr){return Pt.add(cr)}));else if(0<Dt.length){It.optimisticOps=It.optimisticOps.filter(function(cr){return cr.trans!==Et});for(var Kt=0,Zt=Object.values(It.queries.query);Kt<Zt.length;Kt++)for(var ar,Xt,tr,lr=0,rr=(ar=Zt[Kt]).slice();lr<rr.length;lr++)(Xt=rr[lr]).res!=null&&Et.mutatedParts&&(At&&!Xt.dirty?(tr=Object.isFrozen(Xt.res),tr=fo(Xt.res,Xt.req,Dt,Rt,Xt,tr),Xt.dirty?(Gt(ar,Xt),Xt.subscribers.forEach(function(cr){return Pt.add(cr)})):tr!==Xt.res&&(Xt.res=tr,Xt.promise=ur.resolve({result:tr}))):(Xt.dirty&&Gt(ar,Xt),Xt.subscribers.forEach(function(cr){return Pt.add(cr)})))}}}Pt.forEach(function(cr){return cr()})}}},Et.addEventListener("abort",st(!1),{signal:yt}),Et.addEventListener("error",st(!1),{signal:yt}),Et.addEventListener("complete",st(!0),{signal:yt})),Et},table:function(et){var at=b.table(et),st=at.schema.primaryKey;return o(o({},at),{mutate:function(ct){var yt=er.trans;if(st.outbound||yt.db._options.cache==="disabled"||yt.explicit||yt.idbtrans.mode!=="readwrite")return at.mutate(ct);var Et=In["idb://".concat(j,"/").concat(et)];return Et?(yt=at.mutate(ct),ct.type!=="add"&&ct.type!=="put"||!(50<=ct.values.length||Ms(st,ct).some(function(At){return At==null}))?(Et.optimisticOps.push(ct),ct.mutatedParts&&ss(ct.mutatedParts),yt.then(function(At){0<At.numFailures&&(Gt(Et.optimisticOps,ct),(At=co(0,ct,At))&&Et.optimisticOps.push(At),ct.mutatedParts&&ss(ct.mutatedParts))}),yt.catch(function(){Gt(Et.optimisticOps,ct),ct.mutatedParts&&ss(ct.mutatedParts)})):yt.then(function(At){var Pt=co(0,o(o({},ct),{values:ct.values.map(function($t,kt){var Bt;return At.failures[kt]?$t:($t=(Bt=st.keyPath)!==null&&Bt!==void 0&&Bt.includes(".")?Ut($t):o({},$t),ut($t,st.keyPath,At.results[kt]),$t)})}),At);Et.optimisticOps.push(Pt),queueMicrotask(function(){return ct.mutatedParts&&ss(ct.mutatedParts)})}),yt):at.mutate(ct)},query:function(ct){if(!lo(er,at)||!uo("query",ct))return at.query(ct);var yt=((Pt=er.trans)===null||Pt===void 0?void 0:Pt.db._options.cache)==="immutable",kt=er,Et=kt.requery,At=kt.signal,Pt=function(Rt,Dt,Mt,Ft){var Lt=In["idb://".concat(Rt,"/").concat(Dt)];if(!Lt)return[];if(!(Dt=Lt.queries[Mt]))return[null,!1,Lt,null];var Vt=Dt[(Ft.query?Ft.query.index.name:null)||""];if(!Vt)return[null,!1,Lt,null];switch(Mt){case"query":var Kt=Vt.find(function(Zt){return Zt.req.limit===Ft.limit&&Zt.req.values===Ft.values&&po(Zt.req.query.range,Ft.query.range)});return Kt?[Kt,!0,Lt,Vt]:[Vt.find(function(Zt){return("limit"in Zt.req?Zt.req.limit:1/0)>=Ft.limit&&(!Ft.values||Zt.req.values)&&$o(Zt.req.query.range,Ft.query.range)}),!1,Lt,Vt];case"count":return Kt=Vt.find(function(Zt){return po(Zt.req.query.range,Ft.query.range)}),[Kt,!!Kt,Lt,Vt]}}(j,et,"query",ct),$t=Pt[0],kt=Pt[1],Bt=Pt[2],It=Pt[3];return $t&&kt?$t.obsSet=ct.obsSet:(kt=at.query(ct).then(function(Rt){var Dt=Rt.result;if($t&&($t.res=Dt),yt){for(var Mt=0,Ft=Dt.length;Mt<Ft;++Mt)Object.freeze(Dt[Mt]);Object.freeze(Dt)}else Rt.result=Ut(Dt);return Rt}).catch(function(Rt){return It&&$t&&Gt(It,$t),Promise.reject(Rt)}),$t={obsSet:ct.obsSet,promise:kt,subscribers:new Set,type:"query",req:ct,dirty:!1},It?It.push($t):(It=[$t],(Bt=Bt||(In["idb://".concat(j,"/").concat(et)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ct.query.index.name||""]=It)),Mo($t,It,Et,At),$t.promise.then(function(Rt){return{result:fo(Rt.result,ct,Bt==null?void 0:Bt.optimisticOps,at,$t,yt)}})}})}})}};function ls(b,j){return new Proxy(b,{get:function(et,at,st){return at==="db"?j:Reflect.get(et,at,st)}})}var gn=(Wr.prototype.version=function(b){if(isNaN(b)||b<.1)throw new pr.Type("Given version is not a positive number");if(b=Math.round(10*b)/10,this.idbdb||this._state.isBeingOpened)throw new pr.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,b);var j=this._versions,et=j.filter(function(at){return at._cfg.version===b})[0];return et||(et=new this.Version(b),j.push(et),j.sort(So),et.stores({}),this._state.autoSchema=!1,et)},Wr.prototype._whenReady=function(b){var j=this;return this.idbdb&&(this._state.openComplete||er.letThrough||this._vip)?b():new ur(function(et,at){if(j._state.openComplete)return at(new pr.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return void at(new pr.DatabaseClosed);j.open().catch(Pr)}j._state.dbReadyPromise.then(et,at)}).then(b)},Wr.prototype.use=function(b){var j=b.stack,et=b.create,at=b.level,st=b.name;return st&&this.unuse({stack:j,name:st}),b=this._middlewares[j]||(this._middlewares[j]=[]),b.push({stack:j,create:et,level:at??10,name:st}),b.sort(function(ct,yt){return ct.level-yt.level}),this},Wr.prototype.unuse=function(b){var j=b.stack,et=b.name,at=b.create;return j&&this._middlewares[j]&&(this._middlewares[j]=this._middlewares[j].filter(function(st){return at?st.create!==at:!!et&&st.name!==et})),this},Wr.prototype.open=function(){var b=this;return _n($r,function(){return Po(b)})},Wr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var b=this._state,j=Nn.indexOf(this);if(0<=j&&Nn.splice(j,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}b.isBeingOpened||(b.dbReadyPromise=new ur(function(et){b.dbReadyResolve=et}),b.openCanceller=new ur(function(et,at){b.cancelOpen=at}))},Wr.prototype.close=function(et){var j=(et===void 0?{disableAutoOpen:!0}:et).disableAutoOpen,et=this._state;j?(et.isBeingOpened&&et.cancelOpen(new pr.DatabaseClosed),this._close(),et.autoOpen=!1,et.dbOpenError=new pr.DatabaseClosed):(this._close(),et.autoOpen=this._options.autoOpen||et.isBeingOpened,et.openComplete=!1,et.dbOpenError=null)},Wr.prototype.delete=function(b){var j=this;b===void 0&&(b={disableAutoOpen:!0});var et=0<arguments.length&&typeof arguments[0]!="object",at=this._state;return new ur(function(st,ct){function yt(){j.close(b);var Et=j._deps.indexedDB.deleteDatabase(j.name);Et.onsuccess=kr(function(){var At,Pt,$t;At=j._deps,Pt=j.name,$t=At.indexedDB,At=At.IDBKeyRange,ks($t)||Pt===_i||Ss($t,At).delete(Pt).catch(Pr),st()}),Et.onerror=fn(ct),Et.onblocked=j._fireOnBlocked}if(et)throw new pr.InvalidArgument("Invalid closeOptions argument to db.delete()");at.isBeingOpened?at.dbReadyPromise.then(yt):yt()})},Wr.prototype.backendDB=function(){return this.idbdb},Wr.prototype.isOpen=function(){return this.idbdb!==null},Wr.prototype.hasBeenClosed=function(){var b=this._state.dbOpenError;return b&&b.name==="DatabaseClosed"},Wr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Wr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Wr.prototype,"tables",{get:function(){var b=this;return h(this._allTables).map(function(j){return b._allTables[j]})},enumerable:!1,configurable:!0}),Wr.prototype.transaction=function(){var b=(function(j,et,at){var st=arguments.length;if(st<2)throw new pr.InvalidArgument("Too few arguments");for(var ct=new Array(st-1);--st;)ct[st-1]=arguments[st];return at=ct.pop(),[j,Ht(ct),at]}).apply(this,arguments);return this._transaction.apply(this,b)},Wr.prototype._transaction=function(b,j,et){var at=this,st=er.trans;st&&st.db===this&&b.indexOf("!")===-1||(st=null);var ct,yt,Et=b.indexOf("?")!==-1;b=b.replace("!","").replace("?","");try{if(yt=j.map(function(Pt){if(Pt=Pt instanceof at.Table?Pt.name:Pt,typeof Pt!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Pt}),b=="r"||b===fs)ct=fs;else{if(b!="rw"&&b!=ps)throw new pr.InvalidArgument("Invalid transaction mode: "+b);ct=ps}if(st){if(st.mode===fs&&ct===ps){if(!Et)throw new pr.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");st=null}st&&yt.forEach(function(Pt){if(st&&st.storeNames.indexOf(Pt)===-1){if(!Et)throw new pr.SubTransaction("Table "+Pt+" not included in parent transaction.");st=null}}),Et&&st&&!st.active&&(st=null)}}catch(Pt){return st?st._promise(null,function($t,kt){kt(Pt)}):Vr(Pt)}var At=(function Pt($t,kt,Bt,It,Rt){return ur.resolve().then(function(){var Dt=er.transless||er,Mt=$t._createTransaction(kt,Bt,$t._dbSchema,It);if(Mt.explicit=!0,Dt={trans:Mt,transless:Dt},It)Mt.idbtrans=It.idbtrans;else try{Mt.create(),Mt.idbtrans._explicit=!0,$t._state.PR1398_maxLoop=3}catch(Vt){return Vt.name===Hr.InvalidState&&$t.isOpen()&&0<--$t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$t.close({disableAutoOpen:!1}),$t.open().then(function(){return Pt($t,kt,Bt,null,Rt)})):Vr(Vt)}var Ft,Lt=ir(Rt);return Lt&&dn(),Dt=ur.follow(function(){var Vt;(Ft=Rt.call(Mt,Mt))&&(Lt?(Vt=sn.bind(null,null),Ft.then(Vt,Vt)):typeof Ft.next=="function"&&typeof Ft.throw=="function"&&(Ft=Ds(Ft)))},Dt),(Ft&&typeof Ft.then=="function"?ur.resolve(Ft).then(function(Vt){return Mt.active?Vt:Vr(new pr.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Dt.then(function(){return Ft})).then(function(Vt){return It&&Mt._resolve(),Mt._completion.then(function(){return Vt})}).catch(function(Vt){return Mt._reject(Vt),Vr(Vt)})})}).bind(null,this,ct,yt,st,et);return st?st._promise(ct,At,"lock"):er.trans?_n(er.transless,function(){return at._whenReady(At)}):this._whenReady(At)},Wr.prototype.table=function(b){if(!tt(this._allTables,b))throw new pr.InvalidTable("Table ".concat(b," does not exist"));return this._allTables[b]},Wr);function Wr(b,j){var et=this;this._middlewares={},this.verno=0;var at=Wr.dependencies;this._options=j=o({addons:Wr.addons,autoOpen:!0,indexedDB:at.indexedDB,IDBKeyRange:at.IDBKeyRange,cache:"cloned"},j),this._deps={indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange},at=j.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var st,ct,yt,Et,At,Pt={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Pr,dbReadyPromise:null,cancelOpen:Pr,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:j.autoOpen};Pt.dbReadyPromise=new ur(function(kt){Pt.dbReadyResolve=kt}),Pt.openCanceller=new ur(function(kt,Bt){Pt.cancelOpen=Bt}),this._state=Pt,this.name=b,this.on=zn(this,"populate","blocked","versionchange","close",{ready:[Dr,Pr]}),this.once=function(kt,Bt){var It=function(){for(var Rt=[],Dt=0;Dt<arguments.length;Dt++)Rt[Dt]=arguments[Dt];et.on(kt).unsubscribe(It),Bt.apply(et,Rt)};return et.on(kt,It)},this.on.ready.subscribe=ht(this.on.ready.subscribe,function(kt){return function(Bt,It){Wr.vip(function(){var Rt,Dt=et._state;Dt.openComplete?(Dt.dbOpenError||ur.resolve().then(Bt),It&&kt(Bt)):Dt.onReadyBeingFired?(Dt.onReadyBeingFired.push(Bt),It&&kt(Bt)):(kt(Bt),Rt=et,It||kt(function Mt(){Rt.on.ready.unsubscribe(Bt),Rt.on.ready.unsubscribe(Mt)}))})}}),this.Collection=(st=this,Vn(yo.prototype,function(Ft,Mt){this.db=st;var It=Us,Rt=null;if(Mt)try{It=Mt()}catch(Lt){Rt=Lt}var Dt=Ft._ctx,Mt=Dt.table,Ft=Mt.hook.reading.fire;this._ctx={table:Mt,index:Dt.index,isPrimKey:!Dt.index||Mt.schema.primKey.keyPath&&Dt.index===Mt.schema.primKey.name,range:It,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Rt,or:Dt.or,valueMapper:Ft!==Nt?Ft:null}})),this.Table=(ct=this,Vn(Ks.prototype,function(kt,Bt,It){this.db=ct,this._tx=It,this.name=kt,this.schema=Bt,this.hook=ct._allTables[kt]?ct._allTables[kt].hook:zn(null,{creating:[gr,Pr],reading:[Ot,Nt],updating:[Fr,Pr],deleting:[hr,Pr]})})),this.Transaction=(yt=this,Vn(bo.prototype,function(kt,Bt,It,Rt,Dt){var Mt=this;kt!=="readonly"&&Bt.forEach(function(Ft){Ft=(Ft=It[Ft])===null||Ft===void 0?void 0:Ft.yProps,Ft&&(Bt=Bt.concat(Ft.map(function(Lt){return Lt.updatesTable})))}),this.db=yt,this.mode=kt,this.storeNames=Bt,this.schema=It,this.chromeTransactionDurability=Rt,this.idbtrans=null,this.on=zn(this,"complete","error","abort"),this.parent=Dt||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ur(function(Ft,Lt){Mt._resolve=Ft,Mt._reject=Lt}),this._completion.then(function(){Mt.active=!1,Mt.on.complete.fire()},function(Ft){var Lt=Mt.active;return Mt.active=!1,Mt.on.error.fire(Ft),Mt.parent?Mt.parent._reject(Ft):Lt&&Mt.idbtrans&&Mt.idbtrans.abort(),Vr(Ft)})})),this.Version=(Et=this,Vn(Ao.prototype,function(kt){this.db=Et,this._cfg={version:kt,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(At=this,Vn(Zs.prototype,function(kt,Bt,It){if(this.db=At,this._ctx={table:kt,index:Bt===":id"?null:Bt,or:It},this._cmp=this._ascending=Rr,this._descending=function(Rt,Dt){return Rr(Dt,Rt)},this._max=function(Rt,Dt){return 0<Rr(Rt,Dt)?Rt:Dt},this._min=function(Rt,Dt){return Rr(Rt,Dt)<0?Rt:Dt},this._IDBKeyRange=At._deps.IDBKeyRange,!this._IDBKeyRange)throw new pr.MissingAPI})),this.on("versionchange",function(kt){0<kt.newVersion?console.warn("Another connection wants to upgrade database '".concat(et.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(et.name,"'. Closing db now to resume the delete request.")),et.close({disableAutoOpen:!1})}),this.on("blocked",function(kt){!kt.newVersion||kt.newVersion<kt.oldVersion?console.warn("Dexie.delete('".concat(et.name,"') was blocked")):console.warn("Upgrade '".concat(et.name,"' blocked by other connection holding version ").concat(kt.oldVersion/10))}),this._maxKey=Gn(j.IDBKeyRange),this._createTransaction=function(kt,Bt,It,Rt){return new et.Transaction(kt,Bt,It,et._options.chromeTransactionDurability,Rt)},this._fireOnBlocked=function(kt){et.on("blocked").fire(kt),Nn.filter(function(Bt){return Bt.name===et.name&&Bt!==et&&!Bt._state.vcFired}).map(function(Bt){return Bt.on("versionchange").fire(kt)})},this.use(Ro),this.use(No),this.use(Do),this.use(Io),this.use(Co);var $t=new Proxy(this,{get:function(kt,Bt,It){if(Bt==="_vip")return!0;if(Bt==="table")return function(Dt){return ls(et.table(Dt),$t)};var Rt=Reflect.get(kt,Bt,It);return Rt instanceof Ks?ls(Rt,$t):Bt==="tables"?Rt.map(function(Dt){return ls(Dt,$t)}):Bt==="_createTransaction"?function(){return ls(Rt.apply(this,arguments),$t)}:Rt}});this.vip=$t,at.forEach(function(kt){return kt(et)})}var us,ln=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Bo=(Bs.prototype.subscribe=function(b,j,et){return this._subscribe(b&&typeof b!="function"?b:{next:b,error:j,complete:et})},Bs.prototype[ln]=function(){return this},Bs);function Bs(b){this._subscribe=b}try{us={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{us={indexedDB:null,IDBKeyRange:null}}function ho(b){var j,et=!1,at=new Bo(function(st){var ct=ir(b),yt,Et=!1,At={},Pt={},$t={get closed(){return Et},unsubscribe:function(){Et||(Et=!0,yt&&yt.abort(),kt&&bn.storagemutated.unsubscribe(It))}};st.start&&st.start($t);var kt=!1,Bt=function(){return ds(Rt)},It=function(Dt){as(At,Dt),Ps(Pt,At)&&Bt()},Rt=function(){var Dt,Mt,Ft;!Et&&us.indexedDB&&(At={},Dt={},yt&&yt.abort(),yt=new AbortController,Ft=function(Lt){var Vt=wt();try{ct&&dn();var Kt=cn(b,Lt);return Kt=ct?Kt.finally(sn):Kt}finally{Vt&&Yt()}}(Mt={subscr:Dt,signal:yt.signal,requery:Bt,querier:b,trans:null}),Promise.resolve(Ft).then(function(Lt){et=!0,j=Lt,Et||Mt.signal.aborted||(At={},function(Vt){for(var Kt in Vt)if(tt(Vt,Kt))return;return 1}(Pt=Dt)||kt||(bn(Hn,It),kt=!0),ds(function(){return!Et&&st.next&&st.next(Lt)}))},function(Lt){et=!1,["DatabaseClosedError","AbortError"].includes(Lt==null?void 0:Lt.name)||Et||ds(function(){Et||st.error&&st.error(Lt)})}))};return setTimeout(Bt,0),$t});return at.hasValue=function(){return et},at.getValue=function(){return j},at}var Cn=gn;function Fs(b){var j=wn;try{wn=!0,bn.storagemutated.fire(b),Rs(b,!0)}finally{wn=j}}nt(Cn,o(o({},nn),{delete:function(b){return new Cn(b,{addons:[]}).delete()},exists:function(b){return new Cn(b,{addons:[]}).open().then(function(j){return j.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(b){try{return j=Cn.dependencies,et=j.indexedDB,j=j.IDBKeyRange,(ks(et)?Promise.resolve(et.databases()).then(function(at){return at.map(function(st){return st.name}).filter(function(st){return st!==_i})}):Ss(et,j).toCollection().primaryKeys()).then(b)}catch{return Vr(new pr.MissingAPI)}var j,et},defineClass:function(){return function(b){_(this,b)}},ignoreTransaction:function(b){return er.trans?_n(er.transless,b):b()},vip:_s,async:function(b){return function(){try{var j=Ds(b.apply(this,arguments));return j&&typeof j.then=="function"?j:ur.resolve(j)}catch(et){return Vr(et)}}},spawn:function(b,j,et){try{var at=Ds(b.apply(et,j||[]));return at&&typeof at.then=="function"?at:ur.resolve(at)}catch(st){return Vr(st)}},currentTransaction:{get:function(){return er.trans||null}},waitFor:function(b,j){return j=ur.resolve(typeof b=="function"?Cn.ignoreTransaction(b):b).timeout(j||6e4),er.trans?er.trans.waitFor(j):j},Promise:ur,debug:{get:function(){return Ur},set:function(b){yr(b)}},derive:ot,extend:_,props:nt,override:ht,Events:zn,on:bn,liveQuery:ho,extendObservabilitySet:as,getByKeyPath:Tt,setByKeyPath:ut,delByKeyPath:function(b,j){typeof j=="string"?ut(b,j,void 0):"length"in j&&[].map.call(j,function(et){ut(b,et,void 0)})},shallowClone:bt,deepClone:Ut,getObjectDiff:$s,cmp:Rr,asap:_t,minKey:-1/0,addons:[],connections:Nn,errnames:Hr,dependencies:us,cache:In,semVer:"4.2.1",version:"4.2.1".split(".").map(function(b){return parseInt(b)}).reduce(function(b,j,et){return b+j/Math.pow(10,2*et)})})),Cn.maxKey=Gn(Cn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(bn(Hn,function(b){wn||(b=new CustomEvent(ys,{detail:b}),wn=!0,dispatchEvent(b),wn=!1)}),addEventListener(ys,function(b){b=b.detail,wn||Fs(b)}));var jn,wn=!1,mo=function(){};return typeof BroadcastChannel<"u"&&((mo=function(){(jn=new BroadcastChannel(ys)).onmessage=function(b){return b.data&&Fs(b.data)}})(),typeof jn.unref=="function"&&jn.unref(),bn(Hn,function(b){wn||jn.postMessage(b)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(b){if(!gn.disableBfCache&&b.persisted){Ur&&console.debug("Dexie: handling persisted pagehide"),jn!=null&&jn.close();for(var j=0,et=Nn;j<et.length;j++)et[j].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(b){!gn.disableBfCache&&b.persisted&&(Ur&&console.debug("Dexie: handling persisted pageshow"),mo(),Fs({all:new Yr(-1/0,[[]])}))})),ur.rejectionMapper=function(b,j){return!b||b instanceof fr||b instanceof TypeError||b instanceof SyntaxError||!b.name||!hn[b.name]?b:(j=new hn[b.name](j||b.message,b),"stack"in b&&dt(j,"stack",{get:function(){return this.inner.stack}}),j)},yr(Ur),o(gn,Object.freeze({__proto__:null,Dexie:gn,liveQuery:ho,Entity:zs,cmp:Rr,PropModification:Un,replacePrefix:function(b,j){return new Un({replacePrefix:[b,j]})},add:function(b){return new Un({add:b})},remove:function(b){return new Un({remove:b})},default:gn,RangeSet:Yr,mergeRanges:Xn,rangesOverlap:no}),{default:gn}),gn})})(dexie_min);var dexie_minExports=dexie_min.exports;const _Dexie=getDefaultExportFromCjs(dexie_minExports),DexieSymbol=Symbol.for("Dexie"),Dexie=globalThis[DexieSymbol]||(globalThis[DexieSymbol]=_Dexie);if(_Dexie.semVer!==Dexie.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);const{liveQuery,mergeRanges,rangesOverlap,RangeSet,cmp,Entity,PropModification,replacePrefix,add,remove,DexieYProvider}=Dexie,db=new Dexie("MusicDatabase");db.version(1).stores({songs:"++id, title, artist, album, duration, liked, fileHandle, [artist+album]",playlists:"++id, name",playlistSongs:"++id, playlistId, songId"});const usePlayerStore=create((e,a)=>({isPlaying:!1,currentSong:null,queue:[],currentIndex:-1,volume:1,duration:0,currentTime:0,isFullScreen:!1,currentView:"home",setCurrentView:s=>e({currentView:s}),setIsPlaying:s=>e({isPlaying:s}),playSong:(s,o=[])=>{const c=o.length>0?o:[s],d=c.findIndex(h=>h.id===s.id);e({currentSong:s,queue:c,currentIndex:d!==-1?d:0,isPlaying:!0})},nextSong:()=>{const{queue:s,currentIndex:o}=a();if(s.length===0)return;const c=(o+1)%s.length;e({currentSong:s[c],currentIndex:c})},prevSong:()=>{const{queue:s,currentIndex:o}=a();if(s.length===0)return;const c=(o-1+s.length)%s.length;e({currentSong:s[c],currentIndex:c})},updateCurrentSongMetadata:s=>e(o=>{if(!o.currentSong)return{};const c={...o.currentSong,...s},d=o.queue.map(h=>h.id===c.id?c:h);return db.songs.update(c.id,s).catch(h=>console.error("Failed to update DB",h)),{currentSong:c,queue:d}}),toggleLike:async s=>{if(!s)return;const o=!s.liked,c={...s,liked:o};await db.songs.update(s.id,{liked:o}),e(d=>{var _;const h=((_=d.currentSong)==null?void 0:_.id)===s.id,g=d.queue.map($=>$.id===s.id?c:$);return{currentSong:h?c:d.currentSong,queue:g}}),useLibraryStore.setState(d=>({songs:d.songs.map(h=>h.id===s.id?c:h)}))},toggleFullScreen:()=>e(s=>({isFullScreen:!s.isFullScreen})),setVolume:s=>e({volume:s}),setCurrentTime:s=>e({currentTime:s}),setDuration:s=>e({duration:s})})),useLibraryStore=create(e=>({songs:[],isLoading:!1,loadSongs:async()=>{e({isLoading:!0});const a=await db.songs.toArray();e({songs:a,isLoading:!1})},addSongsToLibrary:async a=>{await db.songs.bulkAdd(a);const s=await db.songs.toArray();e({songs:s})}})),SidebarItem=({icon:e,label:a,active:s,onClick:o})=>jsxRuntimeExports.jsxs("div",{onClick:o,className:clsx("flex items-center gap-3 px-4 py-2 rounded-lg cursor-pointer transition-colors text-sm font-medium",s?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:[jsxRuntimeExports.jsx(e,{size:20}),jsxRuntimeExports.jsx("span",{children:a})]}),SidebarGroup=({title:e,children:a})=>jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[e&&jsxRuntimeExports.jsx("h3",{className:"px-4 mb-2 text-xs font-semibold text-white/40 uppercase tracking-wider",children:e}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:a})]}),Sidebar=()=>{const{currentView:e,setCurrentView:a}=usePlayerStore();return jsxRuntimeExports.jsxs("div",{className:"w-64 h-full bg-[#1c1c1e]/90 backdrop-blur-xl border-r border-white/10 flex flex-col p-4 pt-10",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx(Music,{className:"text-pink-500",size:32}),jsxRuntimeExports.jsx("span",{className:"text-xl font-bold",children:"Music"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40",size:16}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search",className:"w-full bg-white/10 rounded-lg pl-10 pr-4 py-1.5 text-sm text-white placeholder-white/40 focus:outline-none focus:bg-white/20 transition-colors",onFocus:()=>a("home")})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[jsxRuntimeExports.jsxs(SidebarGroup,{children:[jsxRuntimeExports.jsx(SidebarItem,{icon:Home,label:"Search",active:e==="home",onClick:()=>a("home")}),jsxRuntimeExports.jsx(SidebarItem,{icon:Grid3x3,label:"Browse"}),jsxRuntimeExports.jsx(SidebarItem,{icon:Radio,label:"Radio"})]}),jsxRuntimeExports.jsxs(SidebarGroup,{title:"Library",children:[jsxRuntimeExports.jsx(SidebarItem,{icon:Clock,label:"Recently Added"}),jsxRuntimeExports.jsx(SidebarItem,{icon:Music,label:"Songs",active:e==="library",onClick:()=>a("library")}),jsxRuntimeExports.jsx(SidebarItem,{icon:PlaySquare,label:"Albums",active:e==="albums",onClick:()=>a("albums")}),jsxRuntimeExports.jsx(SidebarItem,{icon:Heart,label:"Artists"})]}),jsxRuntimeExports.jsxs(SidebarGroup,{title:"Playlists",children:[jsxRuntimeExports.jsx(SidebarItem,{icon:PlaySquare,label:"My Top Rated"}),jsxRuntimeExports.jsx(SidebarItem,{icon:PlaySquare,label:"Workout Mix"})]})]})]})};var lib$3={},browser$2={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,a=e*60,s=a*60,o=s*24,c=o*7,d=o*365.25;ms=function(_e,tt){tt=tt||{};var nt=typeof _e;if(nt==="string"&&_e.length>0)return h(_e);if(nt==="number"&&isFinite(_e))return tt.long?_(_e):g(_e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_e))};function h(_e){if(_e=String(_e),!(_e.length>100)){var tt=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_e);if(tt){var nt=parseFloat(tt[1]),lt=(tt[2]||"ms").toLowerCase();switch(lt){case"years":case"year":case"yrs":case"yr":case"y":return nt*d;case"weeks":case"week":case"w":return nt*c;case"days":case"day":case"d":return nt*o;case"hours":case"hour":case"hrs":case"hr":case"h":return nt*s;case"minutes":case"minute":case"mins":case"min":case"m":return nt*a;case"seconds":case"second":case"secs":case"sec":case"s":return nt*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return nt;default:return}}}}function g(_e){var tt=Math.abs(_e);return tt>=o?Math.round(_e/o)+"d":tt>=s?Math.round(_e/s)+"h":tt>=a?Math.round(_e/a)+"m":tt>=e?Math.round(_e/e)+"s":_e+"ms"}function _(_e){var tt=Math.abs(_e);return tt>=o?$(_e,tt,o,"day"):tt>=s?$(_e,tt,s,"hour"):tt>=a?$(_e,tt,a,"minute"):tt>=e?$(_e,tt,e,"second"):_e+" ms"}function $(_e,tt,nt,lt){var dt=tt>=nt*1.5;return Math.round(_e/nt)+" "+lt+(dt?"s":"")}return ms}function setup(e){s.debug=s,s.default=s,s.coerce=_,s.disable=h,s.enable=c,s.enabled=g,s.humanize=requireMs(),s.destroy=$,Object.keys(e).forEach(_e=>{s[_e]=e[_e]}),s.names=[],s.skips=[],s.formatters={};function a(_e){let tt=0;for(let nt=0;nt<_e.length;nt++)tt=(tt<<5)-tt+_e.charCodeAt(nt),tt|=0;return s.colors[Math.abs(tt)%s.colors.length]}s.selectColor=a;function s(_e){let tt,nt=null,lt,dt;function ot(...gt){if(!ot.enabled)return;const pt=ot,mt=Number(new Date),ht=mt-(tt||mt);pt.diff=ht,pt.prev=tt,pt.curr=mt,tt=mt,gt[0]=s.coerce(gt[0]),typeof gt[0]!="string"&&gt.unshift("%O");let St=0;gt[0]=gt[0].replace(/%([a-zA-Z%])/g,(Tt,ut)=>{if(Tt==="%%")return"%";St++;const bt=s.formatters[ut];if(typeof bt=="function"){const zt=gt[St];Tt=bt.call(pt,zt),gt.splice(St,1),St--}return Tt}),s.formatArgs.call(pt,gt),(pt.log||s.log).apply(pt,gt)}return ot.namespace=_e,ot.useColors=s.useColors(),ot.color=s.selectColor(_e),ot.extend=o,ot.destroy=s.destroy,Object.defineProperty(ot,"enabled",{enumerable:!0,configurable:!1,get:()=>nt!==null?nt:(lt!==s.namespaces&&(lt=s.namespaces,dt=s.enabled(_e)),dt),set:gt=>{nt=gt}}),typeof s.init=="function"&&s.init(ot),ot}function o(_e,tt){const nt=s(this.namespace+(typeof tt>"u"?":":tt)+_e);return nt.log=this.log,nt}function c(_e){s.save(_e),s.namespaces=_e,s.names=[],s.skips=[];const tt=(typeof _e=="string"?_e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const nt of tt)nt[0]==="-"?s.skips.push(nt.slice(1)):s.names.push(nt)}function d(_e,tt){let nt=0,lt=0,dt=-1,ot=0;for(;nt<_e.length;)if(lt<tt.length&&(tt[lt]===_e[nt]||tt[lt]==="*"))tt[lt]==="*"?(dt=lt,ot=nt,lt++):(nt++,lt++);else if(dt!==-1)lt=dt+1,ot++,nt=ot;else return!1;for(;lt<tt.length&&tt[lt]==="*";)lt++;return lt===tt.length}function h(){const _e=[...s.names,...s.skips.map(tt=>"-"+tt)].join(",");return s.enable(""),_e}function g(_e){for(const tt of s.skips)if(d(_e,tt))return!1;for(const tt of s.names)if(d(_e,tt))return!0;return!1}function _(_e){return _e instanceof Error?_e.stack||_e.message:_e}function $(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}var common$3=setup;(function(e,a){var s={};a.formatArgs=c,a.save=d,a.load=h,a.useColors=o,a.storage=g(),a.destroy=(()=>{let $=!1;return()=>{$||($=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function c($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const _e="color: "+this.color;$.splice(1,0,_e,"color: inherit");let tt=0,nt=0;$[0].replace(/%[a-zA-Z%]/g,lt=>{lt!=="%%"&&(tt++,lt==="%c"&&(nt=tt))}),$.splice(nt,0,_e)}a.log=console.debug||console.log||(()=>{});function d($){try{$?a.storage.setItem("debug",$):a.storage.removeItem("debug")}catch{}}function h(){let $;try{$=a.storage.getItem("debug")||a.storage.getItem("DEBUG")}catch{}return!$&&typeof process<"u"&&"env"in process&&($=s.DEBUG),$}function g(){try{return localStorage}catch{}}e.exports=common$3(a);const{formatters:_}=e.exports;_.j=function($){try{return JSON.stringify($)}catch(_e){return"[UnexpectedJSONParseError]: "+_e.message}}})(browser$2,browser$2.exports);var browserExports$1=browser$2.exports,core$2={},core$1={},ReadStreamTokenizer$1={},AbstractTokenizer$1={},lib$2={},EndOfFileStream={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EndOfStreamError=e.defaultMessages=void 0,e.defaultMessages="End-Of-Stream";class a extends Error{constructor(){super(e.defaultMessages)}}e.EndOfStreamError=a})(EndOfFileStream);var StreamReader$1={},Deferred$1={};Object.defineProperty(Deferred$1,"__esModule",{value:!0});Deferred$1.Deferred=void 0;class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((a,s)=>{this.reject=s,this.resolve=a})}}Deferred$1.Deferred=Deferred;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;const a=EndOfFileStream,s=Deferred$1;var o=EndOfFileStream;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return o.EndOfStreamError}});const c=1*1024*1024;class d{constructor(g){if(this.s=g,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!g.read||!g.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new a.EndOfStreamError)),this.s.once("error",_=>this.reject(_)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(g,_,$){const _e=await this.read(g,_,$);return this.peekQueue.push(g.subarray(_,_+_e)),_e}async read(g,_,$){if($===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new a.EndOfStreamError;let _e=$,tt=0;for(;this.peekQueue.length>0&&_e>0;){const nt=this.peekQueue.pop();if(!nt)throw new Error("peekData should be defined");const lt=Math.min(nt.length,_e);g.set(nt.subarray(0,lt),_+tt),tt+=lt,_e-=lt,lt<nt.length&&this.peekQueue.push(nt.subarray(lt))}for(;_e>0&&!this.endOfStream;){const nt=Math.min(_e,c),lt=await this.readFromStream(g,_+tt,nt);if(tt+=lt,lt<nt)break;_e-=lt}return tt}async readFromStream(g,_,$){const _e=this.s.read($);if(_e)return g.set(_e,_),_e.length;{const tt={buffer:g,offset:_,length:$,deferred:new s.Deferred};return this.deferred=tt.deferred,this.s.once("readable",()=>{this.readDeferred(tt)}),tt.deferred.promise}}readDeferred(g){const _=this.s.read(g.length);_?(g.buffer.set(_,g.offset),g.deferred.resolve(_.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(g)})}reject(g){this.endOfStream=!0,this.deferred&&(this.deferred.reject(g),this.deferred=null)}}e.StreamReader=d})(StreamReader$1);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;var a=EndOfFileStream;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return a.EndOfStreamError}});var s=StreamReader$1;Object.defineProperty(e,"StreamReader",{enumerable:!0,get:function(){return s.StreamReader}})})(lib$2);Object.defineProperty(AbstractTokenizer$1,"__esModule",{value:!0});AbstractTokenizer$1.AbstractTokenizer=void 0;const peek_readable_1$2=lib$2;class AbstractTokenizer{constructor(a){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=a||{}}async readToken(a,s=this.position){const o=Buffer.alloc(a.len);if(await this.readBuffer(o,{position:s})<a.len)throw new peek_readable_1$2.EndOfStreamError;return a.get(o,0)}async peekToken(a,s=this.position){const o=Buffer.alloc(a.len);if(await this.peekBuffer(o,{position:s})<a.len)throw new peek_readable_1$2.EndOfStreamError;return a.get(o,0)}async readNumber(a){if(await this.readBuffer(this.numBuffer,{length:a.len})<a.len)throw new peek_readable_1$2.EndOfStreamError;return a.get(this.numBuffer,0)}async peekNumber(a){if(await this.peekBuffer(this.numBuffer,{length:a.len})<a.len)throw new peek_readable_1$2.EndOfStreamError;return a.get(this.numBuffer,0)}async ignore(a){if(this.fileInfo.size!==void 0){const s=this.fileInfo.size-this.position;if(a>s)return this.position+=s,s}return this.position+=a,a}async close(){}normalizeOptions(a,s){if(s&&s.position!==void 0&&s.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return s?{mayBeLess:s.mayBeLess===!0,offset:s.offset?s.offset:0,length:s.length?s.length:a.length-(s.offset?s.offset:0),position:s.position?s.position:this.position}:{mayBeLess:!1,offset:0,length:a.length,position:this.position}}}AbstractTokenizer$1.AbstractTokenizer=AbstractTokenizer;Object.defineProperty(ReadStreamTokenizer$1,"__esModule",{value:!0});ReadStreamTokenizer$1.ReadStreamTokenizer=void 0;const AbstractTokenizer_1$1=AbstractTokenizer$1,peek_readable_1$1=lib$2,maxBufferSize=256e3;class ReadStreamTokenizer extends AbstractTokenizer_1$1.AbstractTokenizer{constructor(a,s){super(s),this.streamReader=new peek_readable_1$1.StreamReader(a)}async getFileInfo(){return this.fileInfo}async readBuffer(a,s){const o=this.normalizeOptions(a,s),c=o.position-this.position;if(c>0)return await this.ignore(c),this.readBuffer(a,s);if(c<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(o.length===0)return 0;const d=await this.streamReader.read(a,o.offset,o.length);if(this.position+=d,(!s||!s.mayBeLess)&&d<o.length)throw new peek_readable_1$1.EndOfStreamError;return d}async peekBuffer(a,s){const o=this.normalizeOptions(a,s);let c=0;if(o.position){const d=o.position-this.position;if(d>0){const h=new Uint8Array(o.length+d);return c=await this.peekBuffer(h,{mayBeLess:o.mayBeLess}),a.set(h.subarray(d),o.offset),c-d}else if(d<0)throw new Error("Cannot peek from a negative offset in a stream")}if(o.length>0){try{c=await this.streamReader.peek(a,o.offset,o.length)}catch(d){if(s&&s.mayBeLess&&d instanceof peek_readable_1$1.EndOfStreamError)return 0;throw d}if(!o.mayBeLess&&c<o.length)throw new peek_readable_1$1.EndOfStreamError}return c}async ignore(a){const s=Math.min(maxBufferSize,a),o=new Uint8Array(s);let c=0;for(;c<a;){const d=a-c,h=await this.readBuffer(o,{length:Math.min(s,d)});if(h<0)return h;c+=h}return c}}ReadStreamTokenizer$1.ReadStreamTokenizer=ReadStreamTokenizer;var BufferTokenizer$1={};Object.defineProperty(BufferTokenizer$1,"__esModule",{value:!0});BufferTokenizer$1.BufferTokenizer=void 0;const peek_readable_1=lib$2,AbstractTokenizer_1=AbstractTokenizer$1;class BufferTokenizer extends AbstractTokenizer_1.AbstractTokenizer{constructor(a,s){super(s),this.uint8Array=a,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:a.length}async readBuffer(a,s){if(s&&s.position){if(s.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=s.position}const o=await this.peekBuffer(a,s);return this.position+=o,o}async peekBuffer(a,s){const o=this.normalizeOptions(a,s),c=Math.min(this.uint8Array.length-o.position,o.length);if(!o.mayBeLess&&c<o.length)throw new peek_readable_1.EndOfStreamError;return a.set(this.uint8Array.subarray(o.position,o.position+c),o.offset),c}async close(){}}BufferTokenizer$1.BufferTokenizer=BufferTokenizer;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromBuffer=e.fromStream=e.EndOfStreamError=void 0;const a=ReadStreamTokenizer$1,s=BufferTokenizer$1;var o=lib$2;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return o.EndOfStreamError}});function c(h,g){return g=g||{},new a.ReadStreamTokenizer(h,g)}e.fromStream=c;function d(h,g){return new s.BufferTokenizer(h,g)}e.fromBuffer=d})(core$1);var ParserFactory$1={},lib$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AnsiStringType=e.StringType=e.BufferType=e.Uint8ArrayType=e.IgnoreType=e.Float80_LE=e.Float80_BE=e.Float64_LE=e.Float64_BE=e.Float32_LE=e.Float32_BE=e.Float16_LE=e.Float16_BE=e.INT64_BE=e.UINT64_BE=e.INT64_LE=e.UINT64_LE=e.INT32_LE=e.INT32_BE=e.INT24_BE=e.INT24_LE=e.INT16_LE=e.INT16_BE=e.INT8=e.UINT32_BE=e.UINT32_LE=e.UINT24_BE=e.UINT24_LE=e.UINT16_BE=e.UINT16_LE=e.UINT8=void 0;const a=ieee754;function s(_){return new DataView(_.buffer,_.byteOffset)}e.UINT8={len:1,get(_,$){return s(_).getUint8($)},put(_,$,_e){return s(_).setUint8($,_e),$+1}},e.UINT16_LE={len:2,get(_,$){return s(_).getUint16($,!0)},put(_,$,_e){return s(_).setUint16($,_e,!0),$+2}},e.UINT16_BE={len:2,get(_,$){return s(_).getUint16($)},put(_,$,_e){return s(_).setUint16($,_e),$+2}},e.UINT24_LE={len:3,get(_,$){const _e=s(_);return _e.getUint8($)+(_e.getUint16($+1,!0)<<8)},put(_,$,_e){const tt=s(_);return tt.setUint8($,_e&255),tt.setUint16($+1,_e>>8,!0),$+3}},e.UINT24_BE={len:3,get(_,$){const _e=s(_);return(_e.getUint16($)<<8)+_e.getUint8($+2)},put(_,$,_e){const tt=s(_);return tt.setUint16($,_e>>8),tt.setUint8($+2,_e&255),$+3}},e.UINT32_LE={len:4,get(_,$){return s(_).getUint32($,!0)},put(_,$,_e){return s(_).setUint32($,_e,!0),$+4}},e.UINT32_BE={len:4,get(_,$){return s(_).getUint32($)},put(_,$,_e){return s(_).setUint32($,_e),$+4}},e.INT8={len:1,get(_,$){return s(_).getInt8($)},put(_,$,_e){return s(_).setInt8($,_e),$+1}},e.INT16_BE={len:2,get(_,$){return s(_).getInt16($)},put(_,$,_e){return s(_).setInt16($,_e),$+2}},e.INT16_LE={len:2,get(_,$){return s(_).getInt16($,!0)},put(_,$,_e){return s(_).setInt16($,_e,!0),$+2}},e.INT24_LE={len:3,get(_,$){const _e=e.UINT24_LE.get(_,$);return _e>8388607?_e-16777216:_e},put(_,$,_e){const tt=s(_);return tt.setUint8($,_e&255),tt.setUint16($+1,_e>>8,!0),$+3}},e.INT24_BE={len:3,get(_,$){const _e=e.UINT24_BE.get(_,$);return _e>8388607?_e-16777216:_e},put(_,$,_e){const tt=s(_);return tt.setUint16($,_e>>8),tt.setUint8($+2,_e&255),$+3}},e.INT32_BE={len:4,get(_,$){return s(_).getInt32($)},put(_,$,_e){return s(_).setInt32($,_e),$+4}},e.INT32_LE={len:4,get(_,$){return s(_).getInt32($,!0)},put(_,$,_e){return s(_).setInt32($,_e,!0),$+4}},e.UINT64_LE={len:8,get(_,$){return s(_).getBigUint64($,!0)},put(_,$,_e){return s(_).setBigUint64($,_e,!0),$+8}},e.INT64_LE={len:8,get(_,$){return s(_).getBigInt64($,!0)},put(_,$,_e){return s(_).setBigInt64($,_e,!0),$+8}},e.UINT64_BE={len:8,get(_,$){return s(_).getBigUint64($)},put(_,$,_e){return s(_).setBigUint64($,_e),$+8}},e.INT64_BE={len:8,get(_,$){return s(_).getBigInt64($)},put(_,$,_e){return s(_).setBigInt64($,_e),$+8}},e.Float16_BE={len:2,get(_,$){return a.read(_,$,!1,10,this.len)},put(_,$,_e){return a.write(_,_e,$,!1,10,this.len),$+this.len}},e.Float16_LE={len:2,get(_,$){return a.read(_,$,!0,10,this.len)},put(_,$,_e){return a.write(_,_e,$,!0,10,this.len),$+this.len}},e.Float32_BE={len:4,get(_,$){return s(_).getFloat32($)},put(_,$,_e){return s(_).setFloat32($,_e),$+4}},e.Float32_LE={len:4,get(_,$){return s(_).getFloat32($,!0)},put(_,$,_e){return s(_).setFloat32($,_e,!0),$+4}},e.Float64_BE={len:8,get(_,$){return s(_).getFloat64($)},put(_,$,_e){return s(_).setFloat64($,_e),$+8}},e.Float64_LE={len:8,get(_,$){return s(_).getFloat64($,!0)},put(_,$,_e){return s(_).setFloat64($,_e,!0),$+8}},e.Float80_BE={len:10,get(_,$){return a.read(_,$,!1,63,this.len)},put(_,$,_e){return a.write(_,_e,$,!1,63,this.len),$+this.len}},e.Float80_LE={len:10,get(_,$){return a.read(_,$,!0,63,this.len)},put(_,$,_e){return a.write(_,_e,$,!0,63,this.len),$+this.len}};class o{constructor($){this.len=$}get($,_e){}}e.IgnoreType=o;class c{constructor($){this.len=$}get($,_e){return $.subarray(_e,_e+this.len)}}e.Uint8ArrayType=c;class d{constructor($){this.len=$}get($,_e){return Buffer.from($.subarray(_e,_e+this.len))}}e.BufferType=d;class h{constructor($,_e){this.len=$,this.encoding=_e}get($,_e){return Buffer.from($).toString(this.encoding,_e,_e+this.len)}}e.StringType=h;class g{constructor($){this.len=$}static decode($,_e,tt){let nt="";for(let lt=_e;lt<tt;++lt)nt+=g.codePointToString(g.singleByteDecoder($[lt]));return nt}static inRange($,_e,tt){return _e<=$&&$<=tt}static codePointToString($){return $<=65535?String.fromCharCode($):($-=65536,String.fromCharCode(($>>10)+55296,($&1023)+56320))}static singleByteDecoder($){if(g.inRange($,0,127))return $;const _e=g.windows1252[$-128];if(_e===null)throw Error("invaliding encoding");return _e}get($,_e=0){return g.decode($,_e,_e+this.len)}}e.AnsiStringType=g,g.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1);var util$c={};util$c.stringToBytes=e=>[...e].map(a=>a.charCodeAt(0));util$c.tarHeaderChecksumMatches=(e,a=0)=>{const s=parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(s))return!1;let o=8*32;for(let c=a;c<a+148;c++)o+=e[c];for(let c=a+156;c<a+512;c++)o+=e[c];return s===o};util$c.uint32SyncSafeToken={get:(e,a)=>e[a+3]&127|e[a+2]<<7|e[a+1]<<14|e[a]<<21,len:4};var supported$1={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};const Token$s=lib$1,strtok3$5=core$1,{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=util$c,supported=supported$1,minimumBytes=4100;async function fromStream(e){const a=await strtok3$5.fromStream(e);try{return await fromTokenizer(a)}finally{await a.close()}}async function fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const a=e instanceof Buffer?e:Buffer.from(e);if(!(a&&a.length>1))return;const s=strtok3$5.fromBuffer(a);return fromTokenizer(s)}function _check(e,a,s){s={offset:0,...s};for(const[o,c]of a.entries())if(s.mask){if(c!==(s.mask[o]&e[o+s.offset]))return!1}else if(c!==e[o+s.offset])return!1;return!0}async function fromTokenizer(e){try{return _fromTokenizer(e)}catch(a){if(!(a instanceof strtok3$5.EndOfStreamError))throw a}}async function _fromTokenizer(e){let a=Buffer.alloc(minimumBytes);const s=12,o=(d,h)=>_check(a,d,h),c=(d,h)=>o(stringToBytes(d),h);if(e.fileInfo.size||(e.fileInfo.size=Number.MAX_SAFE_INTEGER),await e.peekBuffer(a,{length:s,mayBeLess:!0}),o([66,77]))return{ext:"bmp",mime:"image/bmp"};if(o([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(o([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(o([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(o([37,33]))return await e.peekBuffer(a,{length:24,mayBeLess:!0}),c("PS-Adobe-",{offset:2})&&c(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(o([31,160])||o([31,157]))return{ext:"Z",mime:"application/x-compress"};if(o([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(o([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(o([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(o([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(c("ID3")){await e.ignore(6);const d=await e.readToken(uint32SyncSafeToken);return e.position+d>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(d),fromTokenizer(e))}if(c("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((a[0]===67||a[0]===70)&&o([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(o([71,73,70]))return{ext:"gif",mime:"image/gif"};if(c("FLIF"))return{ext:"flif",mime:"image/flif"};if(c("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(c("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(c("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(c("FORM"))return{ext:"aif",mime:"audio/aiff"};if(c("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(o([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(a,{length:30});const d={compressedSize:a.readUInt32LE(18),uncompressedSize:a.readUInt32LE(22),filenameLength:a.readUInt16LE(26),extraFieldLength:a.readUInt16LE(28)};if(d.filename=await e.readToken(new Token$s.StringType(d.filenameLength,"utf-8")),await e.ignore(d.extraFieldLength),d.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(d.filename.endsWith(".rels")||d.filename.endsWith(".xml"))switch(d.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(d.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(d.filename.startsWith("3D/")&&d.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(d.filename==="mimetype"&&d.compressedSize===d.uncompressedSize)switch(await e.readToken(new Token$s.StringType(d.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(d.compressedSize===0){let h=-1;for(;h<0&&e.position<e.fileInfo.size;)await e.peekBuffer(a,{mayBeLess:!0}),h=a.indexOf("504B0304",0,"hex"),await e.ignore(h>=0?h:a.length)}else await e.ignore(d.compressedSize)}}catch(d){if(!(d instanceof strtok3$5.EndOfStreamError))throw d}return{ext:"zip",mime:"application/zip"}}if(c("OggS")){await e.ignore(28);const d=Buffer.alloc(8);return await e.readBuffer(d),_check(d,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(d,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(d,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(d,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(d,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(d,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(o([80,75])&&(a[2]===3||a[2]===5||a[2]===7)&&(a[3]===4||a[3]===6||a[3]===8))return{ext:"zip",mime:"application/zip"};if(c("ftyp",{offset:4})&&a[8]&96){const d=a.toString("binary",8,12).replace("\0"," ").trim();switch(d){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return d.startsWith("3g")?d.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(c("MThd"))return{ext:"mid",mime:"audio/midi"};if(c("wOFF")&&(o([0,1,0,0],{offset:4})||c("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(c("wOF2")&&(o([0,1,0,0],{offset:4})||c("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(o([212,195,178,161])||o([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(c("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(c("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(c("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(o([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(c("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(c("%PDF")){await e.ignore(1350);const d=10*1024*1024,h=Buffer.alloc(Math.min(d,e.fileInfo.size));return await e.readBuffer(h,{mayBeLess:!0}),h.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(o([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(o([73,73,42,0]))return c("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:o([28,0,254,0],{offset:8})||o([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:o([8,0,0,0],{offset:4})&&(o([45,0,254,0],{offset:8})||o([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(a=Buffer.alloc(24),await e.peekBuffer(a),(o([16,251,134,1],{offset:4})||o([8,0,0,0],{offset:4}))&&o([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(o([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(c("MAC "))return{ext:"ape",mime:"audio/ape"};if(o([26,69,223,163])){async function d(){const _e=await e.peekNumber(Token$s.UINT8);let tt=128,nt=0;for(;!(_e&tt)&&tt!==0;)++nt,tt>>=1;const lt=Buffer.alloc(nt+1);return await e.readBuffer(lt),lt}async function h(){const _e=await d(),tt=await d();tt[0]^=128>>tt.length-1;const nt=Math.min(6,tt.length);return{id:_e.readUIntBE(0,_e.length),len:tt.readUIntBE(tt.length-nt,nt)}}async function g(_e,tt){for(;tt>0;){const nt=await h();if(nt.id===17026)return e.readToken(new Token$s.StringType(nt.len,"utf-8"));await e.ignore(nt.len),--tt}}const _=await h();switch(await g(1,_.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(o([82,73,70,70])){if(o([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(o([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(o([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(c("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(o([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(c("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(c("MSCF")||c("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(o([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(o([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(o([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(o([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(c("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(c("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(o([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(c("IMPM"))return{ext:"it",mime:"audio/x-it"};if(c("-lh0-",{offset:2})||c("-lh1-",{offset:2})||c("-lh2-",{offset:2})||c("-lh3-",{offset:2})||c("-lh4-",{offset:2})||c("-lh5-",{offset:2})||c("-lh6-",{offset:2})||c("-lh7-",{offset:2})||c("-lzs-",{offset:2})||c("-lz4-",{offset:2})||c("-lz5-",{offset:2})||c("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(o([0,0,1,186])){if(o([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(o([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(c("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(o([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(c("<?xml "))return{ext:"xml",mime:"application/xml"};if(o([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(o([82,97,114,33,26,7])&&(a[6]===0||a[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(c("solid "))return{ext:"stl",mime:"model/stl"};if(c("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(c("!<arch>"))return await e.ignore(8),await e.readToken(new Token$s.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(o([137,80,78,71,13,10,26,10])){await e.ignore(8);async function d(){return{length:await e.readToken(Token$s.INT32_BE),type:await e.readToken(new Token$s.StringType(4,"binary"))}}do{const h=await d();if(h.length<0)return;switch(h.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(h.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(o([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(o([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(o([102,114,101,101],{offset:4})||o([109,100,97,116],{offset:4})||o([109,111,111,118],{offset:4})||o([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(o([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(c("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(o([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(o([48,38,178,117,142,102,207,17,166,217])){async function d(){const h=Buffer.alloc(16);return await e.readBuffer(h),{id:h,size:Number(await e.readToken(Token$s.UINT64_LE))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const h=await d();let g=h.size-24;if(_check(h.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const _=Buffer.alloc(16);if(g-=await e.readBuffer(_),_check(_,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(_,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(g)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(o([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((o([126,16,4])||o([126,24,4]))&&o([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(o([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(o([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new Token$s.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(o([255,10])||o([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(o([0,0,1,186])||o([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(o([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(o([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(o([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(o([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(a,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),c("BEGIN:")){if(c("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(c("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(c("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(c("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(c("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(o([4,0,0,0])&&a.length>=16){const d=a.readUInt32LE(12);if(d>12&&a.length>=d+16)try{const h=a.slice(16,d+16).toString();if(JSON.parse(h).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(o([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(c("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(o([71],{offset:4})&&(o([71],{offset:192})||o([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(o([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(o([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(o([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(o([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(o([76,80],{offset:34})&&(o([0,0,1],{offset:8})||o([1,0,2],{offset:8})||o([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(o([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(a,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(a))return{ext:"tar",mime:"application/x-tar"};if(o([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(c("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(a.length>=2&&o([255,224],{offset:0,mask:[255,224]})){if(o([16],{offset:1,mask:[22]}))return o([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(o([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(o([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(o([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream$1=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const e=new stream.PassThrough;let a;stream.pipeline?a=stream.pipeline(readableStream,e,()=>{}):a=readableStream.pipe(e);const s=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const o=await fromBuffer(s);e.fileType=o}catch(o){reject(o)}resolve(a)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream:stream$1};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});var core=fileType,contentType={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var PARAM_REGEXP=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,TEXT_REGEXP=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,TOKEN_REGEXP=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,QESC_REGEXP=/\\([\u000b\u0020-\u00ff])/g,QUOTE_REGEXP=/([\\"])/g,TYPE_REGEXP$1=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=format$2;contentType.parse=parse$2;function format$2(e){if(!e||typeof e!="object")throw new TypeError("argument obj is required");var a=e.parameters,s=e.type;if(!s||!TYPE_REGEXP$1.test(s))throw new TypeError("invalid type");var o=s;if(a&&typeof a=="object")for(var c,d=Object.keys(a).sort(),h=0;h<d.length;h++){if(c=d[h],!TOKEN_REGEXP.test(c))throw new TypeError("invalid parameter name");o+="; "+c+"="+qstring(a[c])}return o}function parse$2(e){if(!e)throw new TypeError("argument string is required");var a=typeof e=="object"?getcontenttype(e):e;if(typeof a!="string")throw new TypeError("argument string is required to be a string");var s=a.indexOf(";"),o=s!==-1?a.slice(0,s).trim():a.trim();if(!TYPE_REGEXP$1.test(o))throw new TypeError("invalid media type");var c=new ContentType$1(o.toLowerCase());if(s!==-1){var d,h,g;for(PARAM_REGEXP.lastIndex=s;h=PARAM_REGEXP.exec(a);){if(h.index!==s)throw new TypeError("invalid parameter format");s+=h[0].length,d=h[1].toLowerCase(),g=h[2],g.charCodeAt(0)===34&&(g=g.slice(1,-1),g.indexOf("\\")!==-1&&(g=g.replace(QESC_REGEXP,"$1"))),c.parameters[d]=g}if(s!==a.length)throw new TypeError("invalid parameter format")}return c}function getcontenttype(e){var a;if(typeof e.getHeader=="function"?a=e.getHeader("content-type"):typeof e.headers=="object"&&(a=e.headers&&e.headers["content-type"]),typeof a!="string")throw new TypeError("content-type header is missing from object");return a}function qstring(e){var a=String(e);if(TOKEN_REGEXP.test(a))return a;if(a.length>0&&!TEXT_REGEXP.test(a))throw new TypeError("invalid parameter value");return'"'+a.replace(QUOTE_REGEXP,"\\$1")+'"'}function ContentType$1(e){this.parameters=Object.create(null),this.type=e}var mediaTyper={};/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var SUBTYPE_NAME_REGEXP=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,TYPE_NAME_REGEXP=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,TYPE_REGEXP=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=format$1;mediaTyper.parse=parse$1;mediaTyper.test=test$1;function format$1(e){if(!e||typeof e!="object")throw new TypeError("argument obj is required");var a=e.subtype,s=e.suffix,o=e.type;if(!o||!TYPE_NAME_REGEXP.test(o))throw new TypeError("invalid type");if(!a||!SUBTYPE_NAME_REGEXP.test(a))throw new TypeError("invalid subtype");var c=o+"/"+a;if(s){if(!TYPE_NAME_REGEXP.test(s))throw new TypeError("invalid suffix");c+="+"+s}return c}function test$1(e){if(!e)throw new TypeError("argument string is required");if(typeof e!="string")throw new TypeError("argument string is required to be a string");return TYPE_REGEXP.test(e.toLowerCase())}function parse$1(e){if(!e)throw new TypeError("argument string is required");if(typeof e!="string")throw new TypeError("argument string is required to be a string");var a=TYPE_REGEXP.exec(e.toLowerCase());if(!a)throw new TypeError("invalid media type");var s=a[1],o=a[2],c,d=o.lastIndexOf("+");return d!==-1&&(c=o.substr(d+1),o=o.substr(0,d)),new MediaType(s,o,c)}function MediaType(e,a,s){this.type=e,this.subtype=a,this.suffix=s}var MetadataCollector$1={},type={},types={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=e.TargetType=e.DataType=void 0,function(a){a[a.string=0]="string",a[a.uint=1]="uint",a[a.uid=2]="uid",a[a.bool=3]="bool",a[a.binary=4]="binary",a[a.float=5]="float"}(e.DataType||(e.DataType={})),function(a){a[a.shot=10]="shot",a[a.scene=20]="scene",a[a.track=30]="track",a[a.part=40]="part",a[a.album=50]="album",a[a.edition=60]="edition",a[a.collection=70]="collection"}(e.TargetType||(e.TargetType={})),function(a){a[a.video=1]="video",a[a.audio=2]="audio",a[a.complex=3]="complex",a[a.logo=4]="logo",a[a.subtitle=17]="subtitle",a[a.button=18]="button",a[a.control=32]="control"}(e.TrackType||(e.TrackType={}))})(types);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=void 0;var a=types;Object.defineProperty(e,"TrackType",{enumerable:!0,get:function(){return a.TrackType}})})(type);var GenericTagTypes={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUnique=e.isSingleton=e.commonTags=void 0,e.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function a(o){return e.commonTags.hasOwnProperty(o)&&!e.commonTags[o].multiple}e.isSingleton=a;function s(o){return!e.commonTags[o].multiple||e.commonTags[o].unique}e.isUnique=s})(GenericTagTypes);var CombinedTagMapper$1={},ID3v1TagMap={},GenericTagMapper={};Object.defineProperty(GenericTagMapper,"__esModule",{value:!0});GenericTagMapper.CommonTagMapper=void 0;class CommonTagMapper{static toIntOrNull(a){const s=parseInt(a,10);return isNaN(s)?null:s}static normalizeTrack(a){const s=a.toString().split("/");return{no:parseInt(s[0],10)||null,of:parseInt(s[1],10)||null}}constructor(a,s){this.tagTypes=a,this.tagMap=s}mapGenericTag(a,s){a={id:a.id,value:a.value},this.postMap(a,s);const o=this.getCommonName(a.id);return o?{id:o,value:a.value}:null}getCommonName(a){return this.tagMap[a]}postMap(a,s){}}CommonTagMapper.maxRatingScore=1;GenericTagMapper.CommonTagMapper=CommonTagMapper;Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0});ID3v1TagMap.ID3v1TagMapper=void 0;const GenericTagMapper_1$6=GenericTagMapper,id3v1TagMap={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class ID3v1TagMapper extends GenericTagMapper_1$6.CommonTagMapper{constructor(){super(["ID3v1"],id3v1TagMap)}}ID3v1TagMap.ID3v1TagMapper=ID3v1TagMapper;var ID3v24TagMapper$1={},CaseInsensitiveTagMap$1={};Object.defineProperty(CaseInsensitiveTagMap$1,"__esModule",{value:!0});CaseInsensitiveTagMap$1.CaseInsensitiveTagMap=void 0;const GenericTagMapper_1$5=GenericTagMapper;class CaseInsensitiveTagMap extends GenericTagMapper_1$5.CommonTagMapper{constructor(a,s){const o={};for(const c of Object.keys(s))o[c.toUpperCase()]=s[c];super(a,o)}getCommonName(a){return this.tagMap[a.toUpperCase()]}}CaseInsensitiveTagMap$1.CaseInsensitiveTagMap=CaseInsensitiveTagMap;var Util={};Object.defineProperty(Util,"__esModule",{value:!0});Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function getBit(e,a,s){return(e[a]&1<<s)!==0}Util.getBit=getBit;function findZero(e,a,s,o){let c=a;if(o==="utf16le"){for(;e[c]!==0||e[c+1]!==0;){if(c>=s)return s;c+=2}return c}else{for(;e[c]!==0;){if(c>=s)return s;c++}return c}}Util.findZero=findZero;function trimRightNull(e){const a=e.indexOf("\0");return a===-1?e:e.substr(0,a)}Util.trimRightNull=trimRightNull;function swapBytes(e){const a=e.length;if(a&1)throw new Error("Buffer length must be even");for(let s=0;s<a;s+=2){const o=e[s];e[s]=e[s+1],e[s+1]=o}return e}function decodeString(e,a){if(e[0]===255&&e[1]===254)return decodeString(e.subarray(2),a);if(a==="utf16le"&&e[0]===254&&e[1]===255){if(e.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return decodeString(swapBytes(e),a)}return Buffer.from(e).toString(a)}Util.decodeString=decodeString;function stripNulls(e){return e=e.replace(/^\x00+/g,""),e=e.replace(/\x00+$/g,""),e}Util.stripNulls=stripNulls;function getBitAllignedNumber(e,a,s,o){const c=a+~~(s/8),d=s%8;let h=e[c];h&=255>>d;const g=8-d,_=o-g;return _<0?h>>=8-d-o:_>0&&(h<<=_,h|=getBitAllignedNumber(e,a,s+g,_)),h}Util.getBitAllignedNumber=getBitAllignedNumber;function isBitSet(e,a,s){return getBitAllignedNumber(e,a,s,1)===1}Util.isBitSet=isBitSet;function a2hex(e){const a=[];for(let s=0,o=e.length;s<o;s++){const c=Number(e.charCodeAt(s)).toString(16);a.push(c.length===1?"0"+c:c)}return a.join(" ")}Util.a2hex=a2hex;function ratioToDb(e){return 10*Math.log10(e)}Util.ratioToDb=ratioToDb;function dbToRatio(e){return Math.pow(10,e/10)}Util.dbToRatio=dbToRatio;function toRatio(e){const a=e.split(" ").map(s=>s.trim().toLowerCase());if(a.length>=1){const s=parseFloat(a[0]);return a.length===2&&a[1]==="db"?{dB:s,ratio:dbToRatio(s)}:{dB:ratioToDb(s),ratio:s}}}Util.toRatio=toRatio;Object.defineProperty(ID3v24TagMapper$1,"__esModule",{value:!0});ID3v24TagMapper$1.ID3v24TagMapper=void 0;const GenericTagMapper_1$4=GenericTagMapper,CaseInsensitiveTagMap_1$2=CaseInsensitiveTagMap$1,util$b=Util,id3v24TagMap={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};class ID3v24TagMapper extends CaseInsensitiveTagMap_1$2.CaseInsensitiveTagMap{static toRating(a){return{source:a.email,rating:a.rating>0?(a.rating-1)/254*GenericTagMapper_1$4.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],id3v24TagMap)}postMap(a,s){switch(a.id){case"UFID":a.value.owner_identifier==="http://musicbrainz.org"&&(a.id+=":"+a.value.owner_identifier,a.value=util$b.decodeString(a.value.identifier,"latin1"));break;case"PRIV":switch(a.value.owner_identifier){case"AverageLevel":case"PeakValue":a.id+=":"+a.value.owner_identifier,a.value=a.value.data.length===4?a.value.data.readUInt32LE(0):null,a.value===null&&s.addWarning("Failed to parse PRIV:PeakValue");break;default:s.addWarning(`Unknown PRIV owner-identifier: ${a.value.owner_identifier}`)}break;case"COMM":a.value=a.value?a.value.text:null;break;case"POPM":a.value=ID3v24TagMapper.toRating(a.value);break}}}ID3v24TagMapper$1.ID3v24TagMapper=ID3v24TagMapper;var AsfTagMapper$1={};Object.defineProperty(AsfTagMapper$1,"__esModule",{value:!0});AsfTagMapper$1.AsfTagMapper=void 0;const GenericTagMapper_1$3=GenericTagMapper,asfTagMap={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class AsfTagMapper extends GenericTagMapper_1$3.CommonTagMapper{static toRating(a){return{rating:parseFloat(a+1)/5}}constructor(){super(["asf"],asfTagMap)}postMap(a){switch(a.id){case"WM/SharedUserRating":const s=a.id.split(":");a.value=AsfTagMapper.toRating(a.value),a.id=s[0];break}}}AsfTagMapper$1.AsfTagMapper=AsfTagMapper;var ID3v22TagMapper={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ID3v22TagMapper=e.id3v22TagMap=void 0;const a=CaseInsensitiveTagMap$1;e.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class s extends a.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],e.id3v22TagMap)}}e.ID3v22TagMapper=s})(ID3v22TagMapper);var APEv2TagMapper$1={};Object.defineProperty(APEv2TagMapper$1,"__esModule",{value:!0});APEv2TagMapper$1.APEv2TagMapper=void 0;const CaseInsensitiveTagMap_1$1=CaseInsensitiveTagMap$1,apev2TagMap={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class APEv2TagMapper extends CaseInsensitiveTagMap_1$1.CaseInsensitiveTagMap{constructor(){super(["APEv2"],apev2TagMap)}}APEv2TagMapper$1.APEv2TagMapper=APEv2TagMapper;var MP4TagMapper={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MP4TagMapper=e.tagType=void 0;const a=CaseInsensitiveTagMap$1,s={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};e.tagType="iTunes";class o extends a.CaseInsensitiveTagMap{constructor(){super([e.tagType],s)}postMap(d,h){switch(d.id){case"rate":d.value={source:void 0,rating:parseFloat(d.value)/100};break}}}e.MP4TagMapper=o})(MP4TagMapper);var VorbisTagMapper$1={};Object.defineProperty(VorbisTagMapper$1,"__esModule",{value:!0});VorbisTagMapper$1.VorbisTagMapper=void 0;const GenericTagMapper_1$2=GenericTagMapper,vorbisTagMap={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class VorbisTagMapper extends GenericTagMapper_1$2.CommonTagMapper{static toRating(a,s,o){return{source:a&&a.toLowerCase(),rating:parseFloat(s)/o*GenericTagMapper_1$2.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],vorbisTagMap)}postMap(a){if(a.id==="RATING")a.value=VorbisTagMapper.toRating(void 0,a.value,100);else if(a.id.indexOf("RATING:")===0){const s=a.id.split(":");a.value=VorbisTagMapper.toRating(s[1],a.value,1),a.id=s[0]}}}VorbisTagMapper$1.VorbisTagMapper=VorbisTagMapper;var RiffInfoTagMap={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RiffInfoTagMapper=e.riffInfoTagMap=void 0;const a=GenericTagMapper;e.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class s extends a.CommonTagMapper{constructor(){super(["exif"],e.riffInfoTagMap)}}e.RiffInfoTagMapper=s})(RiffInfoTagMap);var MatroskaTagMapper$1={};Object.defineProperty(MatroskaTagMapper$1,"__esModule",{value:!0});MatroskaTagMapper$1.MatroskaTagMapper=void 0;const CaseInsensitiveTagMap_1=CaseInsensitiveTagMap$1,ebmlTagMap={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class MatroskaTagMapper extends CaseInsensitiveTagMap_1.CaseInsensitiveTagMap{constructor(){super(["matroska"],ebmlTagMap)}}MatroskaTagMapper$1.MatroskaTagMapper=MatroskaTagMapper;var AiffTagMap={};Object.defineProperty(AiffTagMap,"__esModule",{value:!0});AiffTagMap.AiffTagMapper=void 0;const GenericTagMapper_1$1=GenericTagMapper,tagMap={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class AiffTagMapper extends GenericTagMapper_1$1.CommonTagMapper{constructor(){super(["AIFF"],tagMap)}}AiffTagMap.AiffTagMapper=AiffTagMapper;Object.defineProperty(CombinedTagMapper$1,"__esModule",{value:!0});CombinedTagMapper$1.CombinedTagMapper=void 0;const ID3v1TagMap_1=ID3v1TagMap,ID3v24TagMapper_1=ID3v24TagMapper$1,AsfTagMapper_1=AsfTagMapper$1,ID3v22TagMapper_1=ID3v22TagMapper,APEv2TagMapper_1=APEv2TagMapper$1,MP4TagMapper_1=MP4TagMapper,VorbisTagMapper_1=VorbisTagMapper$1,RiffInfoTagMap_1=RiffInfoTagMap,MatroskaTagMapper_1=MatroskaTagMapper$1,AiffTagMap_1=AiffTagMap;class CombinedTagMapper{constructor(){this.tagMappers={},[new ID3v1TagMap_1.ID3v1TagMapper,new ID3v22TagMapper_1.ID3v22TagMapper,new ID3v24TagMapper_1.ID3v24TagMapper,new MP4TagMapper_1.MP4TagMapper,new MP4TagMapper_1.MP4TagMapper,new VorbisTagMapper_1.VorbisTagMapper,new APEv2TagMapper_1.APEv2TagMapper,new AsfTagMapper_1.AsfTagMapper,new RiffInfoTagMap_1.RiffInfoTagMapper,new MatroskaTagMapper_1.MatroskaTagMapper,new AiffTagMap_1.AiffTagMapper].forEach(a=>{this.registerTagMapper(a)})}mapTag(a,s,o){if(this.tagMappers[a])return this.tagMappers[a].mapGenericTag(s,o);throw new Error("No generic tag mapper defined for tag-format: "+a)}registerTagMapper(a){for(const s of a.tagTypes)this.tagMappers[s]=a}}CombinedTagMapper$1.CombinedTagMapper=CombinedTagMapper;Object.defineProperty(MetadataCollector$1,"__esModule",{value:!0});MetadataCollector$1.joinArtists=MetadataCollector$1.MetadataCollector=void 0;const type_1$2=type,debug_1$n=browserExports$1,GenericTagTypes_1=GenericTagTypes,CombinedTagMapper_1=CombinedTagMapper$1,GenericTagMapper_1=GenericTagMapper,Util_1$1=Util,FileType$1=core,debug$n=(0,debug_1$n.default)("music-metadata:collector"),TagPriority=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class MetadataCollector{constructor(a){this.opts=a,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new CombinedTagMapper_1.CombinedTagMapper;let s=1;for(const o of TagPriority)this.originPriority[o]=s++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(a){debug$n(`streamInfo: type=${type_1$2.TrackType[a.type]}, codec=${a.codecName}`),this.format.trackInfo.push(a)}setFormat(a,s){debug$n(`format: ${a} = ${s}`),this.format[a]=s,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:a,value:s}})}addTag(a,s,o){debug$n(`tag ${a}.${s} = ${o}`),this.native[a]||(this.format.tagTypes.push(a),this.native[a]=[]),this.native[a].push({id:s,value:o}),this.toCommon(a,s,o)}addWarning(a){this.quality.warnings.push({message:a})}postMap(a,s){switch(s.id){case"artist":if(this.commonOrigin.artist===this.originPriority[a])return this.postMap("artificial",{id:"artists",value:s.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:s.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(s.value)===-1)){const h=(this.common.artists||[]).concat([s.value]),_={id:"artist",value:joinArtists(h)};this.setGenericTag("artificial",_)}break;case"picture":this.postFixPicture(s.value).then(h=>{h!==null&&(s.value=h,this.setGenericTag(a,s))});return;case"totaltracks":this.common.track.of=GenericTagMapper_1.CommonTagMapper.toIntOrNull(s.value);return;case"totaldiscs":this.common.disk.of=GenericTagMapper_1.CommonTagMapper.toIntOrNull(s.value);return;case"movementTotal":this.common.movementIndex.of=GenericTagMapper_1.CommonTagMapper.toIntOrNull(s.value);return;case"track":case"disk":case"movementIndex":const o=this.common[s.id].of;this.common[s.id]=GenericTagMapper_1.CommonTagMapper.normalizeTrack(s.value),this.common[s.id].of=o??this.common[s.id].of;return;case"bpm":case"year":case"originalyear":s.value=parseInt(s.value,10);break;case"date":const c=parseInt(s.value.substr(0,4),10);isNaN(c)||(this.common.year=c);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":s.value=typeof s.value=="string"?parseInt(s.value,10):s.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":s.value=(0,Util_1$1.toRatio)(s.value);break;case"replaygain_track_minmax":s.value=s.value.split(",").map(h=>parseInt(h,10));break;case"replaygain_undo":const d=s.value.split(",").map(h=>parseInt(h,10));s.value={leftChannel:d[0],rightChannel:d[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":s.value=s.value==="1"||s.value===1;break;case"isrc":if(this.common[s.id]&&this.common[s.id].indexOf(s.value)!==-1)return;break}s.value!==null&&this.setGenericTag(a,s)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(a){if(a.data&&a.data.length>0){if(!a.format){const s=await FileType$1.fromBuffer(a.data);if(s)a.format=s.mime;else return null}switch(a.format=a.format.toLocaleLowerCase(),a.format){case"image/jpg":a.format="image/jpeg"}return a}return this.addWarning("Empty picture tag found"),null}toCommon(a,s,o){const c={id:s,value:o},d=this.tagMapper.mapTag(a,c,this);d&&this.postMap(a,d)}setGenericTag(a,s){debug$n(`common.${s.id} = ${s.value}`);const o=this.commonOrigin[s.id]||1e3,c=this.originPriority[a];if((0,GenericTagTypes_1.isSingleton)(s.id))if(c<=o)this.common[s.id]=s.value,this.commonOrigin[s.id]=c;else return debug$n(`Ignore native tag (singleton): ${a}.${s.id} = ${s.value}`);else if(c===o)!(0,GenericTagTypes_1.isUnique)(s.id)||this.common[s.id].indexOf(s.value)===-1?this.common[s.id].push(s.value):debug$n(`Ignore duplicate value: ${a}.${s.id} = ${s.value}`);else if(c<o)this.common[s.id]=[s.value],this.commonOrigin[s.id]=c;else return debug$n(`Ignore native tag (list): ${a}.${s.id} = ${s.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:s.id,value:s.value}})}}MetadataCollector$1.MetadataCollector=MetadataCollector;function joinArtists(e){return e.length>2?e.slice(0,e.length-1).join(", ")+" & "+e[e.length-1]:e.join(" & ")}MetadataCollector$1.joinArtists=joinArtists;var AiffParser={},ID3v2Parser$1={},FrameParser$1={},ID3v2Token={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextEncodingToken=e.ExtendedHeader=e.ID3v2Header=e.UINT32SYNCSAFE=e.AttachedPictureType=void 0;const a=lib$1,s=Util;(function(o){o[o.Other=0]="Other",o[o["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",o[o["Other file icon"]=2]="Other file icon",o[o["Cover (front)"]=3]="Cover (front)",o[o["Cover (back)"]=4]="Cover (back)",o[o["Leaflet page"]=5]="Leaflet page",o[o["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",o[o["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",o[o["Artist/performer"]=8]="Artist/performer",o[o.Conductor=9]="Conductor",o[o["Band/Orchestra"]=10]="Band/Orchestra",o[o.Composer=11]="Composer",o[o["Lyricist/text writer"]=12]="Lyricist/text writer",o[o["Recording Location"]=13]="Recording Location",o[o["During recording"]=14]="During recording",o[o["During performance"]=15]="During performance",o[o["Movie/video screen capture"]=16]="Movie/video screen capture",o[o["A bright coloured fish"]=17]="A bright coloured fish",o[o.Illustration=18]="Illustration",o[o["Band/artist logotype"]=19]="Band/artist logotype",o[o["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(e.AttachedPictureType||(e.AttachedPictureType={})),e.UINT32SYNCSAFE={get:(o,c)=>o[c+3]&127|o[c+2]<<7|o[c+1]<<14|o[c]<<21,len:4},e.ID3v2Header={len:10,get:(o,c)=>({fileIdentifier:new a.StringType(3,"ascii").get(o,c),version:{major:a.INT8.get(o,c+3),revision:a.INT8.get(o,c+4)},flags:{unsynchronisation:s.getBit(o,c+5,7),isExtendedHeader:s.getBit(o,c+5,6),expIndicator:s.getBit(o,c+5,5),footer:s.getBit(o,c+5,4)},size:e.UINT32SYNCSAFE.get(o,c+6)})},e.ExtendedHeader={len:10,get:(o,c)=>({size:a.UINT32_BE.get(o,c),extendedFlags:a.UINT16_BE.get(o,c+4),sizeOfPadding:a.UINT32_BE.get(o,c+6),crcDataPresent:s.getBit(o,c+4,31)})},e.TextEncodingToken={len:1,get:(o,c)=>{switch(o[c]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}})(ID3v2Token);var ID3v1Parser={},BasicParser$1={};Object.defineProperty(BasicParser$1,"__esModule",{value:!0});BasicParser$1.BasicParser=void 0;class BasicParser{init(a,s,o){return this.metadata=a,this.tokenizer=s,this.options=o,this}}BasicParser$1.BasicParser=BasicParser;var APEv2Parser$1={},APEv2Token={},FourCC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FourCcToken=void 0;const a=Util,s=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;e.FourCcToken={len:4,get:(o,c)=>{const d=o.toString("binary",c,c+e.FourCcToken.len);if(!d.match(s))throw new Error(`FourCC contains invalid characters: ${a.a2hex(d)} "${d}"`);return d},put:(o,c,d)=>{const h=Buffer.from(d,"binary");if(h.length!==4)throw new Error("Invalid length");return h.copy(o,c)}}})(FourCC);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isBitSet=e.parseTagFlags=e.TagField=e.TagItemHeader=e.TagFooter=e.Header=e.DescriptorParser=e.DataType=void 0;const a=lib$1,s=FourCC;(function(h){h[h.text_utf8=0]="text_utf8",h[h.binary=1]="binary",h[h.external_info=2]="external_info",h[h.reserved=3]="reserved"})(e.DataType||(e.DataType={})),e.DescriptorParser={len:52,get:(h,g)=>({ID:s.FourCcToken.get(h,g),version:a.UINT32_LE.get(h,g+4)/1e3,descriptorBytes:a.UINT32_LE.get(h,g+8),headerBytes:a.UINT32_LE.get(h,g+12),seekTableBytes:a.UINT32_LE.get(h,g+16),headerDataBytes:a.UINT32_LE.get(h,g+20),apeFrameDataBytes:a.UINT32_LE.get(h,g+24),apeFrameDataBytesHigh:a.UINT32_LE.get(h,g+28),terminatingDataBytes:a.UINT32_LE.get(h,g+32),fileMD5:new a.Uint8ArrayType(16).get(h,g+36)})},e.Header={len:24,get:(h,g)=>({compressionLevel:a.UINT16_LE.get(h,g),formatFlags:a.UINT16_LE.get(h,g+2),blocksPerFrame:a.UINT32_LE.get(h,g+4),finalFrameBlocks:a.UINT32_LE.get(h,g+8),totalFrames:a.UINT32_LE.get(h,g+12),bitsPerSample:a.UINT16_LE.get(h,g+16),channel:a.UINT16_LE.get(h,g+18),sampleRate:a.UINT32_LE.get(h,g+20)})},e.TagFooter={len:32,get:(h,g)=>({ID:new a.StringType(8,"ascii").get(h,g),version:a.UINT32_LE.get(h,g+8),size:a.UINT32_LE.get(h,g+12),fields:a.UINT32_LE.get(h,g+16),flags:c(a.UINT32_LE.get(h,g+20))})},e.TagItemHeader={len:8,get:(h,g)=>({size:a.UINT32_LE.get(h,g),flags:c(a.UINT32_LE.get(h,g+4))})};const o=h=>new a.Uint8ArrayType(h.size-e.TagFooter.len);e.TagField=o;function c(h){return{containsHeader:d(h,31),containsFooter:d(h,30),isHeader:d(h,31),readOnly:d(h,0),dataType:(h&6)>>1}}e.parseTagFlags=c;function d(h,g){return(h&1<<g)!==0}e.isBitSet=d})(APEv2Token);Object.defineProperty(APEv2Parser$1,"__esModule",{value:!0});APEv2Parser$1.APEv2Parser=void 0;const debug_1$m=browserExports$1,strtok3$4=core$1,token_types_1$2=lib$1,util$a=Util,BasicParser_1$b=BasicParser$1,APEv2Token_1=APEv2Token,debug$m=(0,debug_1$m.default)("music-metadata:parser:APEv2"),tagFormat$1="APEv2",preamble="APETAGEX";class APEv2Parser extends BasicParser_1$b.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(a,s,o){const c=new APEv2Parser;return c.init(a,s,o),c.tryParseApeHeader()}static calculateDuration(a){let s=a.totalFrames>1?a.blocksPerFrame*(a.totalFrames-1):0;return s+=a.finalFrameBlocks,s/a.sampleRate}static async findApeFooterOffset(a,s){const o=Buffer.alloc(APEv2Token_1.TagFooter.len);await a.randomRead(o,0,APEv2Token_1.TagFooter.len,s-APEv2Token_1.TagFooter.len);const c=APEv2Token_1.TagFooter.get(o,0);if(c.ID==="APETAGEX")return debug$m(`APE footer header at offset=${s}`),{footer:c,offset:s-c.size}}static parseTagFooter(a,s,o){const c=APEv2Token_1.TagFooter.get(s,s.length-APEv2Token_1.TagFooter.len);if(c.ID!==preamble)throw new Error("Unexpected APEv2 Footer ID preamble value.");strtok3$4.fromBuffer(s);const d=new APEv2Parser;return d.init(a,strtok3$4.fromBuffer(s),o),d.parseTags(c)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<APEv2Token_1.TagFooter.len){debug$m("No APEv2 header found, end-of-file reached");return}const a=await this.tokenizer.peekToken(APEv2Token_1.TagFooter);if(a.ID===preamble)return await this.tokenizer.ignore(APEv2Token_1.TagFooter.len),this.parseTags(a);if(debug$m(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const s=this.tokenizer.fileInfo.size-this.tokenizer.position,o=Buffer.alloc(s);return await this.tokenizer.readBuffer(o),APEv2Parser.parseTagFooter(this.metadata,o,this.options)}}async parse(){const a=await this.tokenizer.readToken(APEv2Token_1.DescriptorParser);if(a.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=a;const s=a.descriptorBytes-APEv2Token_1.DescriptorParser.len,o=await(s>0?this.parseDescriptorExpansion(s):this.parseHeader());return await this.tokenizer.ignore(o.forwardBytes),this.tryParseApeHeader()}async parseTags(a){const s=Buffer.alloc(256);let o=a.size-APEv2Token_1.TagFooter.len;debug$m(`Parse APE tags at offset=${this.tokenizer.position}, size=${o}`);for(let c=0;c<a.fields;c++){if(o<APEv2Token_1.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${a.fields-c} items remaining, but no more tag data to read.`);break}const d=await this.tokenizer.readToken(APEv2Token_1.TagItemHeader);o-=APEv2Token_1.TagItemHeader.len+d.size,await this.tokenizer.peekBuffer(s,{length:Math.min(s.length,o)});let h=util$a.findZero(s,0,s.length);const g=await this.tokenizer.readToken(new token_types_1$2.StringType(h,"ascii"));switch(await this.tokenizer.ignore(1),o-=g.length+1,d.flags.dataType){case APEv2Token_1.DataType.text_utf8:{const $=(await this.tokenizer.readToken(new token_types_1$2.StringType(d.size,"utf8"))).split(/\x00/g);for(const _e of $)this.metadata.addTag(tagFormat$1,g,_e);break}case APEv2Token_1.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore(d.size);else{const _=Buffer.alloc(d.size);await this.tokenizer.readBuffer(_),h=util$a.findZero(_,0,_.length);const $=_.toString("utf8",0,h),_e=Buffer.from(_.slice(h+1));this.metadata.addTag(tagFormat$1,g,{description:$,data:_e})}break;case APEv2Token_1.DataType.external_info:debug$m(`Ignore external info ${g}`),await this.tokenizer.ignore(d.size);break;case APEv2Token_1.DataType.reserved:debug$m(`Ignore external info ${g}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${g}"`),await this.tokenizer.ignore(d.size);break}}}async parseDescriptorExpansion(a){return await this.tokenizer.ignore(a),this.parseHeader()}async parseHeader(){const a=await this.tokenizer.readToken(APEv2Token_1.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",a.bitsPerSample),this.metadata.setFormat("sampleRate",a.sampleRate),this.metadata.setFormat("numberOfChannels",a.channel),this.metadata.setFormat("duration",APEv2Parser.calculateDuration(a)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}APEv2Parser$1.APEv2Parser=APEv2Parser;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasID3v1Header=e.ID3v1Parser=e.Genres=void 0;const a=browserExports$1,s=lib$1,o=Util,c=BasicParser$1,d=APEv2Parser$1,h=(0,a.default)("music-metadata:parser:ID3v1");e.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const g={len:128,get:(tt,nt)=>{const lt=new _(3).get(tt,nt);return lt==="TAG"?{header:lt,title:new _(30).get(tt,nt+3),artist:new _(30).get(tt,nt+33),album:new _(30).get(tt,nt+63),year:new _(4).get(tt,nt+93),comment:new _(28).get(tt,nt+97),zeroByte:s.UINT8.get(tt,nt+127),track:s.UINT8.get(tt,nt+126),genre:s.UINT8.get(tt,nt+127)}:null}};class _ extends s.StringType{constructor(nt){super(nt,"binary")}get(nt,lt){let dt=super.get(nt,lt);return dt=o.trimRightNull(dt),dt=dt.trim(),dt.length>0?dt:void 0}}class $ extends c.BasicParser{static getGenre(nt){if(nt<e.Genres.length)return e.Genres[nt]}async parse(){if(!this.tokenizer.fileInfo.size){h("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const dt=new d.APEv2Parser;dt.init(this.metadata,this.tokenizer,this.options),await dt.parseTags(this.options.apeHeader.footer)}const nt=this.tokenizer.fileInfo.size-g.len;if(this.tokenizer.position>nt){h("Already consumed the last 128 bytes");return}const lt=await this.tokenizer.readToken(g,nt);if(lt){h("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-g.len);for(const ot of["title","artist","album","comment","track","year"])lt[ot]&&lt[ot]!==""&&this.addTag(ot,lt[ot]);const dt=$.getGenre(lt.genre);dt&&this.addTag("genre",dt)}else h("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-g.len)}addTag(nt,lt){this.metadata.addTag("ID3v1",nt,lt)}}e.ID3v1Parser=$;async function _e(tt){if(tt.fileSize>=128){const nt=Buffer.alloc(3);return await tt.randomRead(nt,0,nt.length,tt.fileSize-128),nt.toString("binary")==="TAG"}return!1}e.hasID3v1Header=_e})(ID3v1Parser);Object.defineProperty(FrameParser$1,"__esModule",{value:!0});FrameParser$1.FrameParser=FrameParser$1.parseGenre=void 0;const debug_1$l=browserExports$1,Token$r=lib$1,util$9=Util,ID3v2Token_1$3=ID3v2Token,ID3v1Parser_1$3=ID3v1Parser,debug$l=(0,debug_1$l.default)("music-metadata:id3v2:frame-parser"),defaultEnc="latin1";function parseGenre(e){const a=[];let s,o="";for(const c of e)if(typeof s=="string")if(c==="("&&s==="")o+="(",s=void 0;else if(c===")"){o!==""&&(a.push(o),o="");const d=parseGenreCode(s);d&&a.push(d),s=void 0}else s+=c;else c==="("?s="":o+=c;return o&&(a.length===0&&o.match(/^\d*$/)&&(o=ID3v1Parser_1$3.Genres[o]),a.push(o)),a}FrameParser$1.parseGenre=parseGenre;function parseGenreCode(e){if(e==="RX")return"Remix";if(e==="CR")return"Cover";if(e.match(/^\d*$/))return ID3v1Parser_1$3.Genres[e]}class FrameParser{constructor(a,s){this.major=a,this.warningCollector=s}readData(a,s,o){if(a.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${s}`);return}const{encoding:c,bom:d}=ID3v2Token_1$3.TextEncodingToken.get(a,0),h=a.length;let g=0,_=[];const $=FrameParser.getNullTerminatorLength(c);let _e;const tt={};switch(debug$l(`Parsing tag type=${s}, encoding=${c}, bom=${d}`),s!=="TXXX"&&s[0]==="T"?"T*":s){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let nt;try{nt=util$9.decodeString(a.slice(1),c).replace(/\x00+$/,"")}catch(ot){this.warningCollector.addWarning(`id3v2.${this.major} type=${s} header has invalid string value: ${ot.message}`)}switch(s){case"TMCL":case"TIPL":case"IPLS":_=this.splitValue(s,nt),_=FrameParser.functionList(_);break;case"TRK":case"TRCK":case"TPOS":_=nt;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":_=this.splitValue(s,nt);break;case"TCO":case"TCON":_=this.splitValue(s,nt).map(ot=>parseGenre(ot)).reduce((ot,gt)=>ot.concat(gt),[]);break;case"PCS":case"PCST":_=this.major>=4?this.splitValue(s,nt):[nt],_=Array.isArray(_)&&_[0]===""?1:0;break;default:_=this.major>=4?this.splitValue(s,nt):[nt]}break;case"TXXX":_=FrameParser.readIdentifierAndData(a,g+1,h,c),_={description:_.id,text:this.splitValue(s,util$9.decodeString(_.data,c).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(o){const ot={};switch(g+=1,this.major){case 2:ot.format=util$9.decodeString(a.slice(g,g+3),"latin1"),g+=3;break;case 3:case 4:_e=util$9.findZero(a,g,h,defaultEnc),ot.format=util$9.decodeString(a.slice(g,_e),defaultEnc),g=_e+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}ot.format=FrameParser.fixPictureMimeType(ot.format),ot.type=ID3v2Token_1$3.AttachedPictureType[a[g]],g+=1,_e=util$9.findZero(a,g,h,c),ot.description=util$9.decodeString(a.slice(g,_e),c),g=_e+$,ot.data=Buffer.from(a.slice(g,h)),_=ot}break;case"CNT":case"PCNT":_=Token$r.UINT32_BE.get(a,0);break;case"SYLT":for(g+=7,_=[];g<h;){const ot=a.slice(g,g=util$9.findZero(a,g,h,c));g+=5,_.push(util$9.decodeString(ot,c))}break;case"ULT":case"USLT":case"COM":case"COMM":g+=1,tt.language=util$9.decodeString(a.slice(g,g+3),defaultEnc),g+=3,_e=util$9.findZero(a,g,h,c),tt.description=util$9.decodeString(a.slice(g,_e),c),g=_e+$,tt.text=util$9.decodeString(a.slice(g,h),c).replace(/\x00+$/,""),_=[tt];break;case"UFID":_=FrameParser.readIdentifierAndData(a,g,h,defaultEnc),_={owner_identifier:_.id,identifier:_.data};break;case"PRIV":_=FrameParser.readIdentifierAndData(a,g,h,defaultEnc),_={owner_identifier:_.id,data:_.data};break;case"POPM":_e=util$9.findZero(a,g,h,defaultEnc);const lt=util$9.decodeString(a.slice(g,_e),defaultEnc);g=_e+1;const dt=h-g;_={email:lt,rating:Token$r.UINT8.get(a,g),counter:dt>=5?Token$r.UINT32_BE.get(a,g+1):void 0};break;case"GEOB":{_e=util$9.findZero(a,g+1,h,c);const ot=util$9.decodeString(a.slice(g+1,_e),defaultEnc);g=_e+1,_e=util$9.findZero(a,g,h-g,c);const gt=util$9.decodeString(a.slice(g,_e),defaultEnc);g=_e+1,_e=util$9.findZero(a,g,h-g,c);const pt=util$9.decodeString(a.slice(g,_e),defaultEnc);_={type:ot,filename:gt,description:pt,data:a.slice(g+1,h)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":_=util$9.decodeString(a.slice(g,_e),defaultEnc);break;case"WXXX":{_e=util$9.findZero(a,g+1,h,c);const ot=util$9.decodeString(a.slice(g+1,_e),c);g=_e+(c==="utf16le"?2:1),_={description:ot,url:util$9.decodeString(a.slice(g,h),defaultEnc)};break}case"WFD":case"WFED":_=util$9.decodeString(a.slice(g+1,util$9.findZero(a,g+1,h,c)),c);break;case"MCDI":{_=a.slice(0,h);break}default:debug$l("Warning: unsupported id3v2-tag-type: "+s);break}return _}static fixPictureMimeType(a){switch(a=a.toLocaleLowerCase(),a){case"jpg":return"image/jpeg";case"png":return"image/png"}return a}static functionList(a){const s={};for(let o=0;o+1<a.length;o+=2){const c=a[o+1].split(",");s[a[o]]=s.hasOwnProperty(a[o])?s[a[o]].concat(c):c}return s}splitValue(a,s){let o;return this.major<4?(o=s.split(/\x00/g),o.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${a} uses non standard null-separator.`):o=s.split(/\//g)):o=s.split(/\x00/g),FrameParser.trimArray(o)}static trimArray(a){return a.map(s=>s.replace(/\x00+$/,"").trim())}static readIdentifierAndData(a,s,o,c){const d=util$9.findZero(a,s,o,c),h=util$9.decodeString(a.slice(s,d),c);return s=d+FrameParser.getNullTerminatorLength(c),{id:h,data:a.slice(s,o)}}static getNullTerminatorLength(a){return a==="utf16le"?2:1}}FrameParser$1.FrameParser=FrameParser;Object.defineProperty(ID3v2Parser$1,"__esModule",{value:!0});ID3v2Parser$1.ID3v2Parser=void 0;const Token$q=lib$1,util$8=Util,FrameParser_1=FrameParser$1,ID3v2Token_1$2=ID3v2Token;class ID3v2Parser{static removeUnsyncBytes(a){let s=0,o=0;for(;s<a.length-1;)s!==o&&(a[o]=a[s]),s+=a[s]===255&&a[s+1]===0?2:1,o++;return s<a.length&&(a[o++]=a[s]),a.slice(0,o)}static getFrameHeaderLength(a){switch(a){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(a){return{status:{tag_alter_preservation:util$8.getBit(a,0,6),file_alter_preservation:util$8.getBit(a,0,5),read_only:util$8.getBit(a,0,4)},format:{grouping_identity:util$8.getBit(a,1,7),compression:util$8.getBit(a,1,3),encryption:util$8.getBit(a,1,2),unsynchronisation:util$8.getBit(a,1,1),data_length_indicator:util$8.getBit(a,1,0)}}}static readFrameData(a,s,o,c,d){const h=new FrameParser_1.FrameParser(o,d);switch(o){case 2:return h.readData(a,s.id,c);case 3:case 4:return s.flags.format.unsynchronisation&&(a=ID3v2Parser.removeUnsyncBytes(a)),s.flags.format.data_length_indicator&&(a=a.slice(4,a.length)),h.readData(a,s.id,c);default:throw new Error("Unexpected majorVer: "+o)}}static makeDescriptionTagName(a,s){return a+(s?":"+s:"")}async parse(a,s,o){this.tokenizer=s,this.metadata=a,this.options=o;const c=await this.tokenizer.readToken(ID3v2Token_1$2.ID3v2Header);if(c.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=c,this.headerType="ID3v2."+c.version.major,c.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(c.size)}async parseExtendedHeader(){const a=await this.tokenizer.readToken(ID3v2Token_1$2.ExtendedHeader),s=a.size-ID3v2Token_1$2.ExtendedHeader.len;return s>0?this.parseExtendedHeaderData(s,a.size):this.parseId3Data(this.id3Header.size-a.size)}async parseExtendedHeaderData(a,s){return await this.tokenizer.ignore(a),this.parseId3Data(this.id3Header.size-s)}async parseId3Data(a){const s=await this.tokenizer.readToken(new Token$q.Uint8ArrayType(a));for(const o of this.parseMetadata(s))if(o.id==="TXXX"){if(o.value)for(const c of o.value.text)this.addTag(ID3v2Parser.makeDescriptionTagName(o.id,o.value.description),c)}else if(o.id==="COM")for(const c of o.value)this.addTag(ID3v2Parser.makeDescriptionTagName(o.id,c.description),c.text);else if(o.id==="COMM")for(const c of o.value)this.addTag(ID3v2Parser.makeDescriptionTagName(o.id,c.description),c);else if(Array.isArray(o.value))for(const c of o.value)this.addTag(o.id,c);else this.addTag(o.id,o.value)}addTag(a,s){this.metadata.addTag(this.headerType,a,s)}parseMetadata(a){let s=0;const o=[];for(;s!==a.length;){const c=ID3v2Parser.getFrameHeaderLength(this.id3Header.version.major);if(s+c>a.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const d=a.slice(s,s+=c),h=this.readFrameHeader(d,this.id3Header.version.major),g=a.slice(s,s+=h.length),_=ID3v2Parser.readFrameData(g,h,this.id3Header.version.major,!this.options.skipCovers,this.metadata);_&&o.push({id:h.id,value:_})}return o}readFrameHeader(a,s){let o;switch(s){case 2:o={id:Buffer.from(a.slice(0,3)).toString("ascii"),length:Token$q.UINT24_BE.get(a,3)},o.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${o.id}`);break;case 3:case 4:o={id:Buffer.from(a.slice(0,4)).toString("ascii"),length:(s===4?ID3v2Token_1$2.UINT32SYNCSAFE:Token$q.UINT32_BE).get(a,4),flags:ID3v2Parser.readFrameFlags(a.slice(8,10))},o.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${o.id}`);break;default:throw new Error("Unexpected majorVer: "+s)}return o}}ID3v2Parser$1.ID3v2Parser=ID3v2Parser;var AiffToken$1={};Object.defineProperty(AiffToken$1,"__esModule",{value:!0});AiffToken$1.Common=void 0;const Token$p=lib$1,FourCC_1$a=FourCC;class Common{constructor(a,s){this.isAifc=s;const o=s?22:18;if(a.chunkSize<o)throw new Error(`COMMON CHUNK size should always be at least ${o}`);this.len=a.chunkSize}get(a,s){const o=a.readUInt16BE(s+8)-16398,c=a.readUInt16BE(s+8+2),d={numChannels:a.readUInt16BE(s),numSampleFrames:a.readUInt32BE(s+2),sampleSize:a.readUInt16BE(s+6),sampleRate:o<0?c>>Math.abs(o):c<<o};if(this.isAifc){if(d.compressionType=FourCC_1$a.FourCcToken.get(a,s+18),this.len>22){const h=a.readInt8(s+22);if(h>0){const g=(h+1)%2;if(23+h+g===this.len)d.compressionName=new Token$p.StringType(h,"binary").get(a,s+23);else throw new Error("Illegal pstring length")}else d.compressionName=void 0}}else d.compressionName="PCM";return d}}AiffToken$1.Common=Common;var iff$1={};Object.defineProperty(iff$1,"__esModule",{value:!0});iff$1.Header=void 0;const Token$o=lib$1,FourCC_1$9=FourCC;iff$1.Header={len:8,get:(e,a)=>({chunkID:FourCC_1$9.FourCcToken.get(e,a),chunkSize:Number(BigInt(Token$o.UINT32_BE.get(e,a+4)))})};Object.defineProperty(AiffParser,"__esModule",{value:!0});AiffParser.AIFFParser=void 0;const Token$n=lib$1,debug_1$k=browserExports$1,strtok3$3=core$1,ID3v2Parser_1$4=ID3v2Parser$1,FourCC_1$8=FourCC,BasicParser_1$a=BasicParser$1,AiffToken=AiffToken$1,iff=iff$1,debug$k=(0,debug_1$k.default)("music-metadata:parser:aiff"),compressionTypes={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class AIFFParser extends BasicParser_1$a.BasicParser{async parse(){if((await this.tokenizer.readToken(iff.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const s=await this.tokenizer.readToken(FourCC_1$8.FourCcToken);switch(s){case"AIFF":this.metadata.setFormat("container",s),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+s)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=iff.Header.len;){debug$k("Reading AIFF chunk at offset="+this.tokenizer.position);const o=await this.tokenizer.readToken(iff.Header),c=2*Math.round(o.chunkSize/2),d=await this.readData(o);await this.tokenizer.ignore(c-d)}}catch(o){if(o instanceof strtok3$3.EndOfStreamError)debug$k("End-of-stream");else throw o}}async readData(a){var s;switch(a.chunkID){case"COMM":const o=await this.tokenizer.readToken(new AiffToken.Common(a,this.isCompressed));return this.metadata.setFormat("bitsPerSample",o.sampleSize),this.metadata.setFormat("sampleRate",o.sampleRate),this.metadata.setFormat("numberOfChannels",o.numChannels),this.metadata.setFormat("numberOfSamples",o.numSampleFrames),this.metadata.setFormat("duration",o.numSampleFrames/o.sampleRate),this.metadata.setFormat("codec",(s=o.compressionName)!==null&&s!==void 0?s:compressionTypes[o.compressionType]),a.chunkSize;case"ID3 ":const c=await this.tokenizer.readToken(new Token$n.Uint8ArrayType(a.chunkSize)),d=strtok3$3.fromBuffer(c);return await new ID3v2Parser_1$4.ID3v2Parser().parse(this.metadata,d,this.options),a.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*a.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(a);default:return debug$k(`Ignore chunk id=${a.chunkID}, size=${a.chunkSize}`),0}}async readTextChunk(a){return(await this.tokenizer.readToken(new Token$n.StringType(a.chunkSize,"ascii"))).split("\0").map(o=>o.trim()).filter(o=>o&&o.length>0).forEach(o=>{this.metadata.addTag("AIFF",a.chunkID,o.trim())}),a.chunkSize}}AiffParser.AIFFParser=AIFFParser;var AsfParser$1={},GUID$1={};Object.defineProperty(GUID$1,"__esModule",{value:!0});class GUID{static fromBin(a,s=0){return new GUID(this.decode(a,s))}static decode(a,s=0){return(a.readUInt32LE(s).toString(16)+"-"+a.readUInt16LE(s+4).toString(16)+"-"+a.readUInt16LE(s+6).toString(16)+"-"+a.readUInt16BE(s+8).toString(16)+"-"+a.slice(s+10,s+16).toString("hex")).toUpperCase()}static decodeMediaType(a){switch(a.str){case GUID.AudioMedia.str:return"audio";case GUID.VideoMedia.str:return"video";case GUID.CommandMedia.str:return"command";case GUID.Degradable_JPEG_Media.str:return"degradable-jpeg";case GUID.FileTransferMedia.str:return"file-transfer";case GUID.BinaryMedia.str:return"binary"}}static encode(a){const s=Buffer.alloc(16);return s.writeUInt32LE(parseInt(a.slice(0,8),16),0),s.writeUInt16LE(parseInt(a.slice(9,13),16),4),s.writeUInt16LE(parseInt(a.slice(14,18),16),6),Buffer.from(a.slice(19,23),"hex").copy(s,8),Buffer.from(a.slice(24),"hex").copy(s,10),s}constructor(a){this.str=a}equals(a){return this.str===a.str}toBin(){return GUID.encode(this.str)}}GUID.HeaderObject=new GUID("75B22630-668E-11CF-A6D9-00AA0062CE6C");GUID.DataObject=new GUID("75B22636-668E-11CF-A6D9-00AA0062CE6C");GUID.SimpleIndexObject=new GUID("33000890-E5B1-11CF-89F4-00A0C90349CB");GUID.IndexObject=new GUID("D6E229D3-35DA-11D1-9034-00A0C90349BE");GUID.MediaObjectIndexObject=new GUID("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");GUID.TimecodeIndexObject=new GUID("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");GUID.FilePropertiesObject=new GUID("8CABDCA1-A947-11CF-8EE4-00C00C205365");GUID.StreamPropertiesObject=new GUID("B7DC0791-A9B7-11CF-8EE6-00C00C205365");GUID.HeaderExtensionObject=new GUID("5FBF03B5-A92E-11CF-8EE3-00C00C205365");GUID.CodecListObject=new GUID("86D15240-311D-11D0-A3A4-00A0C90348F6");GUID.ScriptCommandObject=new GUID("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");GUID.MarkerObject=new GUID("F487CD01-A951-11CF-8EE6-00C00C205365");GUID.BitrateMutualExclusionObject=new GUID("D6E229DC-35DA-11D1-9034-00A0C90349BE");GUID.ErrorCorrectionObject=new GUID("75B22635-668E-11CF-A6D9-00AA0062CE6C");GUID.ContentDescriptionObject=new GUID("75B22633-668E-11CF-A6D9-00AA0062CE6C");GUID.ExtendedContentDescriptionObject=new GUID("D2D0A440-E307-11D2-97F0-00A0C95EA850");GUID.ContentBrandingObject=new GUID("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");GUID.StreamBitratePropertiesObject=new GUID("7BF875CE-468D-11D1-8D82-006097C9A2B2");GUID.ContentEncryptionObject=new GUID("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");GUID.ExtendedContentEncryptionObject=new GUID("298AE614-2622-4C17-B935-DAE07EE9289C");GUID.DigitalSignatureObject=new GUID("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");GUID.PaddingObject=new GUID("1806D474-CADF-4509-A4BA-9AABCB96AAE8");GUID.ExtendedStreamPropertiesObject=new GUID("14E6A5CB-C672-4332-8399-A96952065B5A");GUID.AdvancedMutualExclusionObject=new GUID("A08649CF-4775-4670-8A16-6E35357566CD");GUID.GroupMutualExclusionObject=new GUID("D1465A40-5A79-4338-B71B-E36B8FD6C249");GUID.StreamPrioritizationObject=new GUID("D4FED15B-88D3-454F-81F0-ED5C45999E24");GUID.BandwidthSharingObject=new GUID("A69609E6-517B-11D2-B6AF-00C04FD908E9");GUID.LanguageListObject=new GUID("7C4346A9-EFE0-4BFC-B229-393EDE415C85");GUID.MetadataObject=new GUID("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");GUID.MetadataLibraryObject=new GUID("44231C94-9498-49D1-A141-1D134E457054");GUID.IndexParametersObject=new GUID("D6E229DF-35DA-11D1-9034-00A0C90349BE");GUID.MediaObjectIndexParametersObject=new GUID("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");GUID.TimecodeIndexParametersObject=new GUID("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");GUID.CompatibilityObject=new GUID("26F18B5D-4584-47EC-9F5F-0E651F0452C9");GUID.AdvancedContentEncryptionObject=new GUID("43058533-6981-49E6-9B74-AD12CB86D58C");GUID.AudioMedia=new GUID("F8699E40-5B4D-11CF-A8FD-00805F5C442B");GUID.VideoMedia=new GUID("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");GUID.CommandMedia=new GUID("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");GUID.JFIF_Media=new GUID("B61BE100-5B4E-11CF-A8FD-00805F5C442B");GUID.Degradable_JPEG_Media=new GUID("35907DE0-E415-11CF-A917-00805F5C442B");GUID.FileTransferMedia=new GUID("91BD222C-F21C-497A-8B6D-5AA86BFC0185");GUID.BinaryMedia=new GUID("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");GUID.ASF_Index_Placeholder_Object=new GUID("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");GUID$1.default=GUID;var AsfObject$1={},AsfUtil$1={};Object.defineProperty(AsfUtil$1,"__esModule",{value:!0});AsfUtil$1.AsfUtil=void 0;const Token$m=lib$1,util$7=Util;class AsfUtil{static getParserForAttr(a){return AsfUtil.attributeParsers[a]}static parseUnicodeAttr(a){return util$7.stripNulls(util$7.decodeString(a,"utf16le"))}static parseByteArrayAttr(a){return Buffer.from(a)}static parseBoolAttr(a,s=0){return AsfUtil.parseWordAttr(a,s)===1}static parseDWordAttr(a,s=0){return a.readUInt32LE(s)}static parseQWordAttr(a,s=0){return Token$m.UINT64_LE.get(a,s)}static parseWordAttr(a,s=0){return a.readUInt16LE(s)}}AsfUtil.attributeParsers=[AsfUtil.parseUnicodeAttr,AsfUtil.parseByteArrayAttr,AsfUtil.parseBoolAttr,AsfUtil.parseDWordAttr,AsfUtil.parseQWordAttr,AsfUtil.parseWordAttr,AsfUtil.parseByteArrayAttr];AsfUtil$1.AsfUtil=AsfUtil;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WmPictureToken=e.MetadataLibraryObjectState=e.MetadataObjectState=e.ExtendedStreamPropertiesObjectState=e.ExtendedContentDescriptionObjectState=e.ContentDescriptionObjectState=e.readCodecEntries=e.HeaderExtensionObject=e.StreamPropertiesObject=e.FilePropertiesObject=e.IgnoreObjectState=e.State=e.HeaderObjectToken=e.TopLevelHeaderObjectToken=e.DataType=void 0;const a=Util,s=lib$1,o=GUID$1,c=AsfUtil$1,d=ID3v2Token;(function(Tt){Tt[Tt.UnicodeString=0]="UnicodeString",Tt[Tt.ByteArray=1]="ByteArray",Tt[Tt.Bool=2]="Bool",Tt[Tt.DWord=3]="DWord",Tt[Tt.QWord=4]="QWord",Tt[Tt.Word=5]="Word"})(e.DataType||(e.DataType={})),e.TopLevelHeaderObjectToken={len:30,get:(Tt,ut)=>({objectId:o.default.fromBin(new s.BufferType(16).get(Tt,ut)),objectSize:Number(s.UINT64_LE.get(Tt,ut+16)),numberOfHeaderObjects:s.UINT32_LE.get(Tt,ut+24)})},e.HeaderObjectToken={len:24,get:(Tt,ut)=>({objectId:o.default.fromBin(new s.BufferType(16).get(Tt,ut)),objectSize:Number(s.UINT64_LE.get(Tt,ut+16))})};class h{constructor(ut){this.len=Number(ut.objectSize)-e.HeaderObjectToken.len}postProcessTag(ut,bt,zt,Ht){if(bt==="WM/Picture")ut.push({id:bt,value:_t.fromBuffer(Ht)});else{const Qt=c.AsfUtil.getParserForAttr(zt);if(!Qt)throw new Error("unexpected value headerType: "+zt);ut.push({id:bt,value:Qt(Ht)})}}}e.State=h;class g extends h{constructor(ut){super(ut)}get(ut,bt){return null}}e.IgnoreObjectState=g;class _ extends h{constructor(ut){super(ut)}get(ut,bt){return{fileId:o.default.fromBin(ut,bt),fileSize:s.UINT64_LE.get(ut,bt+16),creationDate:s.UINT64_LE.get(ut,bt+24),dataPacketsCount:s.UINT64_LE.get(ut,bt+32),playDuration:s.UINT64_LE.get(ut,bt+40),sendDuration:s.UINT64_LE.get(ut,bt+48),preroll:s.UINT64_LE.get(ut,bt+56),flags:{broadcast:a.getBit(ut,bt+64,24),seekable:a.getBit(ut,bt+64,25)},minimumDataPacketSize:s.UINT32_LE.get(ut,bt+68),maximumDataPacketSize:s.UINT32_LE.get(ut,bt+72),maximumBitrate:s.UINT32_LE.get(ut,bt+76)}}}_.guid=o.default.FilePropertiesObject,e.FilePropertiesObject=_;class $ extends h{constructor(ut){super(ut)}get(ut,bt){return{streamType:o.default.decodeMediaType(o.default.fromBin(ut,bt)),errorCorrectionType:o.default.fromBin(ut,bt+8)}}}$.guid=o.default.StreamPropertiesObject,e.StreamPropertiesObject=$;class _e{constructor(){this.len=22}get(ut,bt){return{reserved1:o.default.fromBin(ut,bt),reserved2:ut.readUInt16LE(bt+16),extensionDataSize:ut.readUInt32LE(bt+18)}}}_e.guid=o.default.HeaderExtensionObject,e.HeaderExtensionObject=_e;const tt={len:20,get:(Tt,ut)=>({entryCount:Tt.readUInt16LE(ut+16)})};async function nt(Tt){const ut=await Tt.readNumber(s.UINT16_LE);return(await Tt.readToken(new s.StringType(ut*2,"utf16le"))).replace("\0","")}async function lt(Tt){const ut=await Tt.readToken(tt),bt=[];for(let zt=0;zt<ut.entryCount;++zt)bt.push(await ot(Tt));return bt}e.readCodecEntries=lt;async function dt(Tt){const ut=await Tt.readNumber(s.UINT16_LE),bt=Buffer.alloc(ut);return await Tt.readBuffer(bt),bt}async function ot(Tt){const ut=await Tt.readNumber(s.UINT16_LE);return{type:{videoCodec:(ut&1)===1,audioCodec:(ut&2)===2},codecName:await nt(Tt),description:await nt(Tt),information:await dt(Tt)}}class gt extends h{constructor(ut){super(ut)}get(ut,bt){const zt=[];let Ht=bt+10;for(let Qt=0;Qt<gt.contentDescTags.length;++Qt){const sr=ut.readUInt16LE(bt+Qt*2);if(sr>0){const Ut=gt.contentDescTags[Qt],vr=Ht+sr;zt.push({id:Ut,value:c.AsfUtil.parseUnicodeAttr(ut.slice(Ht,vr))}),Ht=vr}}return zt}}gt.guid=o.default.ContentDescriptionObject,gt.contentDescTags=["Title","Author","Copyright","Description","Rating"],e.ContentDescriptionObjectState=gt;class pt extends h{constructor(ut){super(ut)}get(ut,bt){const zt=[],Ht=ut.readUInt16LE(bt);let Qt=bt+2;for(let sr=0;sr<Ht;sr+=1){const Ut=ut.readUInt16LE(Qt);Qt+=2;const vr=c.AsfUtil.parseUnicodeAttr(ut.slice(Qt,Qt+Ut));Qt+=Ut;const xr=ut.readUInt16LE(Qt);Qt+=2;const mr=ut.readUInt16LE(Qt);Qt+=2;const br=ut.slice(Qt,Qt+mr);Qt+=mr,this.postProcessTag(zt,vr,xr,br)}return zt}}pt.guid=o.default.ExtendedContentDescriptionObject,e.ExtendedContentDescriptionObjectState=pt;class mt extends h{constructor(ut){super(ut)}get(ut,bt){return{startTime:s.UINT64_LE.get(ut,bt),endTime:s.UINT64_LE.get(ut,bt+8),dataBitrate:ut.readInt32LE(bt+12),bufferSize:ut.readInt32LE(bt+16),initialBufferFullness:ut.readInt32LE(bt+20),alternateDataBitrate:ut.readInt32LE(bt+24),alternateBufferSize:ut.readInt32LE(bt+28),alternateInitialBufferFullness:ut.readInt32LE(bt+32),maximumObjectSize:ut.readInt32LE(bt+36),flags:{reliableFlag:a.getBit(ut,bt+40,0),seekableFlag:a.getBit(ut,bt+40,1),resendLiveCleanpointsFlag:a.getBit(ut,bt+40,2)},streamNumber:ut.readInt16LE(bt+42),streamLanguageId:ut.readInt16LE(bt+44),averageTimePerFrame:ut.readInt32LE(bt+52),streamNameCount:ut.readInt32LE(bt+54),payloadExtensionSystems:ut.readInt32LE(bt+56),streamNames:[],streamPropertiesObject:null}}}mt.guid=o.default.ExtendedStreamPropertiesObject,e.ExtendedStreamPropertiesObjectState=mt;class ht extends h{constructor(ut){super(ut)}get(ut,bt){const zt=[],Ht=Buffer.from(ut),Qt=Ht.readUInt16LE(bt);let sr=bt+2;for(let Ut=0;Ut<Qt;Ut+=1){sr+=4;const vr=Ht.readUInt16LE(sr);sr+=2;const xr=Ht.readUInt16LE(sr);sr+=2;const mr=Ht.readUInt32LE(sr);sr+=4;const br=c.AsfUtil.parseUnicodeAttr(Ht.slice(sr,sr+vr));sr+=vr;const Gt=Ht.slice(sr,sr+mr);sr+=mr,this.postProcessTag(zt,br,xr,Gt)}return zt}}ht.guid=o.default.MetadataObject,e.MetadataObjectState=ht;class St extends ht{constructor(ut){super(ut)}}St.guid=o.default.MetadataLibraryObject,e.MetadataLibraryObjectState=St;class _t{static fromBase64(ut){return this.fromBuffer(Buffer.from(ut,"base64"))}static fromBuffer(ut){return new _t(ut.length).get(ut,0)}constructor(ut){this.len=ut}get(ut,bt){const zt=ut.readUInt8(bt++),Ht=ut.readInt32LE(bt);let Qt=5;for(;ut.readUInt16BE(Qt)!==0;)Qt+=2;const sr=ut.slice(5,Qt).toString("utf16le");for(;ut.readUInt16BE(Qt)!==0;)Qt+=2;const Ut=ut.slice(5,Qt).toString("utf16le");return{type:d.AttachedPictureType[zt],format:sr,description:Ut,size:Ht,data:ut.slice(Qt+4)}}}e.WmPictureToken=_t})(AsfObject$1);Object.defineProperty(AsfParser$1,"__esModule",{value:!0});AsfParser$1.AsfParser=void 0;const debug_1$j=browserExports$1,type_1$1=type,GUID_1=GUID$1,AsfObject=AsfObject$1,BasicParser_1$9=BasicParser$1,debug$j=(0,debug_1$j.default)("music-metadata:parser:ASF"),headerType="asf";class AsfParser extends BasicParser_1$9.BasicParser{async parse(){const a=await this.tokenizer.readToken(AsfObject.TopLevelHeaderObjectToken);if(!a.objectId.equals(GUID_1.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+a.objectId.str);try{await this.parseObjectHeader(a.numberOfHeaderObjects)}catch(s){debug$j("Error while parsing ASF: %s",s)}}async parseObjectHeader(a){let s;do{const o=await this.tokenizer.readToken(AsfObject.HeaderObjectToken);switch(debug$j("header GUID=%s",o.objectId.str),o.objectId.str){case AsfObject.FilePropertiesObject.guid.str:const c=await this.tokenizer.readToken(new AsfObject.FilePropertiesObject(o));this.metadata.setFormat("duration",Number(c.playDuration/BigInt(1e3))/1e4-Number(c.preroll)/1e3),this.metadata.setFormat("bitrate",c.maximumBitrate);break;case AsfObject.StreamPropertiesObject.guid.str:const d=await this.tokenizer.readToken(new AsfObject.StreamPropertiesObject(o));this.metadata.setFormat("container","ASF/"+d.streamType);break;case AsfObject.HeaderExtensionObject.guid.str:const h=await this.tokenizer.readToken(new AsfObject.HeaderExtensionObject);await this.parseExtensionObject(h.extensionDataSize);break;case AsfObject.ContentDescriptionObjectState.guid.str:s=await this.tokenizer.readToken(new AsfObject.ContentDescriptionObjectState(o)),this.addTags(s);break;case AsfObject.ExtendedContentDescriptionObjectState.guid.str:s=await this.tokenizer.readToken(new AsfObject.ExtendedContentDescriptionObjectState(o)),this.addTags(s);break;case GUID_1.default.CodecListObject.str:const g=await AsfObject.readCodecEntries(this.tokenizer);g.forEach($=>{this.metadata.addStreamInfo({type:$.type.videoCodec?type_1$1.TrackType.video:type_1$1.TrackType.audio,codecName:$.codecName})});const _=g.filter($=>$.type.audioCodec).map($=>$.codecName).join("/");this.metadata.setFormat("codec",_);break;case GUID_1.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(o.objectSize-AsfObject.HeaderObjectToken.len);break;case GUID_1.default.PaddingObject.str:debug$j("Padding: %s bytes",o.objectSize-AsfObject.HeaderObjectToken.len),await this.tokenizer.ignore(o.objectSize-AsfObject.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+o.objectId.str),debug$j("Ignore ASF-Object-GUID: %s",o.objectId.str),await this.tokenizer.readToken(new AsfObject.IgnoreObjectState(o))}}while(--a)}addTags(a){a.forEach(s=>{this.metadata.addTag(headerType,s.id,s.value)})}async parseExtensionObject(a){do{const s=await this.tokenizer.readToken(AsfObject.HeaderObjectToken),o=s.objectSize-AsfObject.HeaderObjectToken.len;switch(s.objectId.str){case AsfObject.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new AsfObject.ExtendedStreamPropertiesObjectState(s));break;case AsfObject.MetadataObjectState.guid.str:const c=await this.tokenizer.readToken(new AsfObject.MetadataObjectState(s));this.addTags(c);break;case AsfObject.MetadataLibraryObjectState.guid.str:const d=await this.tokenizer.readToken(new AsfObject.MetadataLibraryObjectState(s));this.addTags(d);break;case GUID_1.default.PaddingObject.str:await this.tokenizer.ignore(o);break;case GUID_1.default.CompatibilityObject.str:this.tokenizer.ignore(o);break;case GUID_1.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(o);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+s.objectId.str),await this.tokenizer.readToken(new AsfObject.IgnoreObjectState(s));break}a-=s.objectSize}while(a>0)}}AsfParser$1.AsfParser=AsfParser;var FlacParser$1={},Vorbis={};Object.defineProperty(Vorbis,"__esModule",{value:!0});Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const Token$l=lib$1,ID3v2Token_1$1=ID3v2Token;class VorbisPictureToken{static fromBase64(a){return this.fromBuffer(Buffer.from(a,"base64"))}static fromBuffer(a){return new VorbisPictureToken(a.length).get(a,0)}constructor(a){this.len=a}get(a,s){const o=ID3v2Token_1$1.AttachedPictureType[Token$l.UINT32_BE.get(a,s)],c=Token$l.UINT32_BE.get(a,s+=4),d=a.toString("utf-8",s+=4,s+c),h=Token$l.UINT32_BE.get(a,s+=c),g=a.toString("utf-8",s+=4,s+h),_=Token$l.UINT32_BE.get(a,s+=h),$=Token$l.UINT32_BE.get(a,s+=4),_e=Token$l.UINT32_BE.get(a,s+=4),tt=Token$l.UINT32_BE.get(a,s+=4),nt=Token$l.UINT32_BE.get(a,s+=4),lt=Buffer.from(a.slice(s+=4,s+nt));return{type:o,format:d,description:g,width:_,height:$,colour_depth:_e,indexed_color:tt,data:lt}}}Vorbis.VorbisPictureToken=VorbisPictureToken;Vorbis.CommonHeader={len:7,get:(e,a)=>({packetType:e.readUInt8(a),vorbis:new Token$l.StringType(6,"ascii").get(e,a+1)})};Vorbis.IdentificationHeader={len:23,get:(e,a)=>{const s=new DataView(e.buffer,e.byteOffset);return{version:s.getUint32(a+0,!0),channelMode:s.getUint8(a+4),sampleRate:s.getUint32(a+5,!0),bitrateMax:s.getUint32(a+9,!0),bitrateNominal:s.getUint32(a+13,!0),bitrateMin:s.getUint32(a+17,!0)}}};var AbstractID3Parser$1={};Object.defineProperty(AbstractID3Parser$1,"__esModule",{value:!0});AbstractID3Parser$1.AbstractID3Parser=void 0;const core_1$2=core$1,debug_1$i=browserExports$1,ID3v2Token_1=ID3v2Token,ID3v2Parser_1$3=ID3v2Parser$1,ID3v1Parser_1$2=ID3v1Parser,BasicParser_1$8=BasicParser$1,debug$i=(0,debug_1$i.default)("music-metadata:parser:ID3");class AbstractID3Parser extends BasicParser_1$8.BasicParser{constructor(){super(...arguments),this.id3parser=new ID3v2Parser_1$3.ID3v2Parser}static async startsWithID3v2Header(a){return(await a.peekToken(ID3v2Token_1.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(a){if(a instanceof core_1$2.EndOfStreamError)debug$i("End-of-stream");else throw a}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),debug$i("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new ID3v1Parser_1$2.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(ID3v2Token_1.ID3v2Header)).fileIdentifier==="ID3")return debug$i("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}AbstractID3Parser$1.AbstractID3Parser=AbstractID3Parser;var VorbisParser$1={},VorbisDecoder$1={};Object.defineProperty(VorbisDecoder$1,"__esModule",{value:!0});VorbisDecoder$1.VorbisDecoder=void 0;const Token$k=lib$1;class VorbisDecoder{constructor(a,s){this.data=a,this.offset=s}readInt32(){const a=Token$k.UINT32_LE.get(this.data,this.offset);return this.offset+=4,a}readStringUtf8(){const a=this.readInt32(),s=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+a);return this.offset+=a,s}parseUserComment(){const a=this.offset,s=this.readStringUtf8(),o=s.indexOf("=");return{key:s.slice(0,o).toUpperCase(),value:s.slice(o+1),len:this.offset-a}}}VorbisDecoder$1.VorbisDecoder=VorbisDecoder;Object.defineProperty(VorbisParser$1,"__esModule",{value:!0});VorbisParser$1.VorbisParser=void 0;const Token$j=lib$1,debug_1$h=browserExports$1,VorbisDecoder_1$1=VorbisDecoder$1,Vorbis_1$1=Vorbis,debug$h=(0,debug_1$h.default)("music-metadata:parser:ogg:vorbis1");class VorbisParser{constructor(a,s){this.metadata=a,this.options=s,this.pageSegments=[]}parsePage(a,s){if(a.headerType.firstPage)this.parseFirstPage(a,s);else{if(a.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(s)}if(a.headerType.lastPage||!a.headerType.continued){if(this.pageSegments.length>0){const o=Buffer.concat(this.pageSegments);this.parseFullPage(o)}this.pageSegments=a.headerType.lastPage?[]:[s]}}a.headerType.lastPage&&this.calculateDuration(a)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(a,s){const c=new VorbisDecoder_1$1.VorbisDecoder(a,s).parseUserComment();return this.addTag(c.key,c.value),c.len}addTag(a,s){if(a==="METADATA_BLOCK_PICTURE"&&typeof s=="string"){if(this.options.skipCovers){debug$h("Ignore picture");return}s=Vorbis_1$1.VorbisPictureToken.fromBase64(s),debug$h(`Push picture: id=${a}, format=${s.format}`)}else debug$h(`Push tag: id=${a}, value=${s}`);this.metadata.addTag("vorbis",a,s)}calculateDuration(a){this.metadata.format.sampleRate&&a.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",a.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(a,s){this.metadata.setFormat("codec","Vorbis I"),debug$h("Parse first page");const o=Vorbis_1$1.CommonHeader.get(s,0);if(o.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(o.packetType===1){const c=Vorbis_1$1.IdentificationHeader.get(s,Vorbis_1$1.CommonHeader.len);this.metadata.setFormat("sampleRate",c.sampleRate),this.metadata.setFormat("bitrate",c.bitrateNominal),this.metadata.setFormat("numberOfChannels",c.channelMode),debug$h("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",c.sampleRate,c.bitrateNominal,c.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(a){const s=Vorbis_1$1.CommonHeader.get(a,0);switch(debug$h("Parse full page: type=%s, byteLength=%s",s.packetType,a.byteLength),s.packetType){case 3:return this.parseUserCommentList(a,Vorbis_1$1.CommonHeader.len)}}parseUserCommentList(a,s){const o=Token$j.UINT32_LE.get(a,s);s+=4,s+=o;let c=Token$j.UINT32_LE.get(a,s);for(s+=4;c-- >0;)s+=this.parseUserComment(a,s)}}VorbisParser$1.VorbisParser=VorbisParser;Object.defineProperty(FlacParser$1,"__esModule",{value:!0});FlacParser$1.FlacParser=void 0;const token_types_1$1=lib$1,debug_1$g=browserExports$1,util$6=Util,Vorbis_1=Vorbis,AbstractID3Parser_1$3=AbstractID3Parser$1,FourCC_1$7=FourCC,VorbisParser_1$3=VorbisParser$1,VorbisDecoder_1=VorbisDecoder$1,debug$g=(0,debug_1$g.default)("music-metadata:parser:FLAC");var BlockType;(function(e){e[e.STREAMINFO=0]="STREAMINFO",e[e.PADDING=1]="PADDING",e[e.APPLICATION=2]="APPLICATION",e[e.SEEKTABLE=3]="SEEKTABLE",e[e.VORBIS_COMMENT=4]="VORBIS_COMMENT",e[e.CUESHEET=5]="CUESHEET",e[e.PICTURE=6]="PICTURE"})(BlockType||(BlockType={}));class FlacParser extends AbstractID3Parser_1$3.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(a,s,o){return super.init(a,s,o),this.vorbisParser=new VorbisParser_1$3.VorbisParser(a,o),this}async postId3v2Parse(){if((await this.tokenizer.readToken(FourCC_1$7.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let s;do s=await this.tokenizer.readToken(Metadata.BlockHeader),await this.parseDataBlock(s);while(!s.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const o=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*o/this.metadata.format.duration)}}parseDataBlock(a){switch(debug$g(`blockHeader type=${a.type}, length=${a.length}`),a.type){case BlockType.STREAMINFO:return this.parseBlockStreamInfo(a.length);case BlockType.PADDING:this.padding+=a.length;break;case BlockType.APPLICATION:break;case BlockType.SEEKTABLE:break;case BlockType.VORBIS_COMMENT:return this.parseComment(a.length);case BlockType.CUESHEET:break;case BlockType.PICTURE:return this.parsePicture(a.length).then();default:this.metadata.addWarning("Unknown block type: "+a.type)}return this.tokenizer.ignore(a.length).then()}async parseBlockStreamInfo(a){if(a!==Metadata.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const s=await this.tokenizer.readToken(Metadata.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",s.channels),this.metadata.setFormat("bitsPerSample",s.bitsPerSample),this.metadata.setFormat("sampleRate",s.sampleRate),s.totalSamples>0&&this.metadata.setFormat("duration",s.totalSamples/s.sampleRate)}async parseComment(a){const s=await this.tokenizer.readToken(new token_types_1$1.Uint8ArrayType(a)),o=new VorbisDecoder_1.VorbisDecoder(s,0);o.readStringUtf8();const c=o.readInt32();for(let d=0;d<c;d++){const h=o.parseUserComment();this.vorbisParser.addTag(h.key,h.value)}}async parsePicture(a){if(this.options.skipCovers)return this.tokenizer.ignore(a);{const s=await this.tokenizer.readToken(new Vorbis_1.VorbisPictureToken(a));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",s)}}}FlacParser$1.FlacParser=FlacParser;class Metadata{}Metadata.BlockHeader={len:4,get:(e,a)=>({lastBlock:util$6.getBit(e,a,7),type:util$6.getBitAllignedNumber(e,a,1,7),length:token_types_1$1.UINT24_BE.get(e,a+1)})};Metadata.BlockStreamInfo={len:34,get:(e,a)=>({minimumBlockSize:token_types_1$1.UINT16_BE.get(e,a),maximumBlockSize:token_types_1$1.UINT16_BE.get(e,a+2)/1e3,minimumFrameSize:token_types_1$1.UINT24_BE.get(e,a+4),maximumFrameSize:token_types_1$1.UINT24_BE.get(e,a+7),sampleRate:token_types_1$1.UINT24_BE.get(e,a+10)>>4,channels:util$6.getBitAllignedNumber(e,a+12,4,3)+1,bitsPerSample:util$6.getBitAllignedNumber(e,a+12,7,5)+1,totalSamples:util$6.getBitAllignedNumber(e,a+13,4,36),fileMD5:new token_types_1$1.Uint8ArrayType(16).get(e,a+18)})};var MP4Parser$1={},Atom$1={},AtomToken$2={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ChapterText=e.StcoAtom=e.StszAtom=e.StscAtom=e.SampleToChunkToken=e.SttsAtom=e.TimeToSampleToken=e.SoundSampleDescriptionV0=e.SoundSampleDescriptionVersion=e.StsdAtom=e.TrackHeaderAtom=e.NameAtom=e.DataAtom=e.MvhdAtom=e.MdhdAtom=e.FixedLengthAtom=e.mhdr=e.tkhd=e.ftyp=e.ExtendedSize=e.Header=void 0;const a=lib$1,s=browserExports$1,o=FourCC,c=(0,s.default)("music-metadata:parser:MP4:atom");e.Header={len:8,get:(Tt,ut)=>{const bt=a.UINT32_BE.get(Tt,ut);if(bt<0)throw new Error("Invalid atom header length");return{length:BigInt(bt),name:new a.StringType(4,"binary").get(Tt,ut+4)}},put:(Tt,ut,bt)=>(a.UINT32_BE.put(Tt,ut,Number(bt.length)),o.FourCcToken.put(Tt,ut+4,bt.name))},e.ExtendedSize=a.UINT64_BE,e.ftyp={len:4,get:(Tt,ut)=>({type:new a.StringType(4,"ascii").get(Tt,ut)})},e.tkhd={len:4,get:(Tt,ut)=>({type:new a.StringType(4,"ascii").get(Tt,ut)})},e.mhdr={len:8,get:(Tt,ut)=>({version:a.UINT8.get(Tt,ut),flags:a.UINT24_BE.get(Tt,ut+1),nextItemID:a.UINT32_BE.get(Tt,ut+4)})};class d{constructor(ut,bt,zt){if(this.len=ut,ut<bt)throw new Error(`Atom ${zt} expected to be ${bt}, but specifies ${ut} bytes long.`);ut>bt&&c(`Warning: atom ${zt} expected to be ${bt}, but was actually ${ut} bytes long.`)}}e.FixedLengthAtom=d;const h={len:4,get:(Tt,ut)=>{const bt=a.UINT32_BE.get(Tt,ut)-2082844800;return new Date(bt*1e3)}};class g extends d{constructor(ut){super(ut,24,"mdhd"),this.len=ut}get(ut,bt){return{version:a.UINT8.get(ut,bt+0),flags:a.UINT24_BE.get(ut,bt+1),creationTime:h.get(ut,bt+4),modificationTime:h.get(ut,bt+8),timeScale:a.UINT32_BE.get(ut,bt+12),duration:a.UINT32_BE.get(ut,bt+16),language:a.UINT16_BE.get(ut,bt+20),quality:a.UINT16_BE.get(ut,bt+22)}}}e.MdhdAtom=g;class _ extends d{constructor(ut){super(ut,100,"mvhd"),this.len=ut}get(ut,bt){return{version:a.UINT8.get(ut,bt),flags:a.UINT24_BE.get(ut,bt+1),creationTime:h.get(ut,bt+4),modificationTime:h.get(ut,bt+8),timeScale:a.UINT32_BE.get(ut,bt+12),duration:a.UINT32_BE.get(ut,bt+16),preferredRate:a.UINT32_BE.get(ut,bt+20),preferredVolume:a.UINT16_BE.get(ut,bt+24),previewTime:a.UINT32_BE.get(ut,bt+72),previewDuration:a.UINT32_BE.get(ut,bt+76),posterTime:a.UINT32_BE.get(ut,bt+80),selectionTime:a.UINT32_BE.get(ut,bt+84),selectionDuration:a.UINT32_BE.get(ut,bt+88),currentTime:a.UINT32_BE.get(ut,bt+92),nextTrackID:a.UINT32_BE.get(ut,bt+96)}}}e.MvhdAtom=_;class ${constructor(ut){this.len=ut}get(ut,bt){return{type:{set:a.UINT8.get(ut,bt+0),type:a.UINT24_BE.get(ut,bt+1)},locale:a.UINT24_BE.get(ut,bt+4),value:Buffer.from(new a.Uint8ArrayType(this.len-8).get(ut,bt+8))}}}e.DataAtom=$;class _e{constructor(ut){this.len=ut}get(ut,bt){return{version:a.UINT8.get(ut,bt),flags:a.UINT24_BE.get(ut,bt+1),name:new a.StringType(this.len-4,"utf-8").get(ut,bt+4)}}}e.NameAtom=_e;class tt{constructor(ut){this.len=ut}get(ut,bt){return{version:a.UINT8.get(ut,bt),flags:a.UINT24_BE.get(ut,bt+1),creationTime:h.get(ut,bt+4),modificationTime:h.get(ut,bt+8),trackId:a.UINT32_BE.get(ut,bt+12),duration:a.UINT32_BE.get(ut,bt+20),layer:a.UINT16_BE.get(ut,bt+24),alternateGroup:a.UINT16_BE.get(ut,bt+26),volume:a.UINT16_BE.get(ut,bt+28)}}}e.TrackHeaderAtom=tt;const nt={len:8,get:(Tt,ut)=>({version:a.UINT8.get(Tt,ut),flags:a.UINT24_BE.get(Tt,ut+1),numberOfEntries:a.UINT32_BE.get(Tt,ut+4)})};class lt{constructor(ut){this.len=ut}get(ut,bt){return{dataFormat:o.FourCcToken.get(ut,bt),dataReferenceIndex:a.UINT16_BE.get(ut,bt+10),description:new a.Uint8ArrayType(this.len-12).get(ut,bt+12)}}}class dt{constructor(ut){this.len=ut}get(ut,bt){const zt=nt.get(ut,bt);bt+=nt.len;const Ht=[];for(let Qt=0;Qt<zt.numberOfEntries;++Qt){const sr=a.UINT32_BE.get(ut,bt);bt+=a.UINT32_BE.len,Ht.push(new lt(sr).get(ut,bt)),bt+=sr}return{header:zt,table:Ht}}}e.StsdAtom=dt,e.SoundSampleDescriptionVersion={len:8,get(Tt,ut){return{version:a.INT16_BE.get(Tt,ut),revision:a.INT16_BE.get(Tt,ut+2),vendor:a.INT32_BE.get(Tt,ut+4)}}},e.SoundSampleDescriptionV0={len:12,get(Tt,ut){return{numAudioChannels:a.INT16_BE.get(Tt,ut+0),sampleSize:a.INT16_BE.get(Tt,ut+2),compressionId:a.INT16_BE.get(Tt,ut+4),packetSize:a.INT16_BE.get(Tt,ut+6),sampleRate:a.UINT16_BE.get(Tt,ut+8)+a.UINT16_BE.get(Tt,ut+10)/1e4}}};class ot{constructor(ut,bt){this.len=ut,this.token=bt}get(ut,bt){const zt=a.INT32_BE.get(ut,bt+4);return{version:a.INT8.get(ut,bt+0),flags:a.INT24_BE.get(ut,bt+1),numberOfEntries:zt,entries:_t(ut,this.token,bt+8,this.len-8,zt)}}}e.TimeToSampleToken={len:8,get(Tt,ut){return{count:a.INT32_BE.get(Tt,ut+0),duration:a.INT32_BE.get(Tt,ut+4)}}};class gt extends ot{constructor(ut){super(ut,e.TimeToSampleToken),this.len=ut}}e.SttsAtom=gt,e.SampleToChunkToken={len:12,get(Tt,ut){return{firstChunk:a.INT32_BE.get(Tt,ut),samplesPerChunk:a.INT32_BE.get(Tt,ut+4),sampleDescriptionId:a.INT32_BE.get(Tt,ut+8)}}};class pt extends ot{constructor(ut){super(ut,e.SampleToChunkToken),this.len=ut}}e.StscAtom=pt;class mt{constructor(ut){this.len=ut}get(ut,bt){const zt=a.INT32_BE.get(ut,bt+8);return{version:a.INT8.get(ut,bt),flags:a.INT24_BE.get(ut,bt+1),sampleSize:a.INT32_BE.get(ut,bt+4),numberOfEntries:zt,entries:_t(ut,a.INT32_BE,bt+12,this.len-12,zt)}}}e.StszAtom=mt;class ht extends ot{constructor(ut){super(ut,a.INT32_BE),this.len=ut}}e.StcoAtom=ht;class St{constructor(ut){this.len=ut}get(ut,bt){const zt=a.INT16_BE.get(ut,bt+0);return new a.StringType(zt,"utf-8").get(ut,bt+2)}}e.ChapterText=St;function _t(Tt,ut,bt,zt,Ht){if(c(`remainingLen=${zt}, numberOfEntries=${Ht} * token-len=${ut.len}`),zt===0)return[];if(zt!==Ht*ut.len)throw new Error("mismatch number-of-entries with remaining atom-length");const Qt=[];for(let sr=0;sr<Ht;++sr)Qt.push(ut.get(Tt,bt)),bt+=ut.len;return Qt}})(AtomToken$2);Object.defineProperty(Atom$1,"__esModule",{value:!0});Atom$1.Atom=void 0;const debug_1$f=browserExports$1,AtomToken$1=AtomToken$2,debug$f=(0,debug_1$f.default)("music-metadata:parser:MP4:Atom");class Atom{static async readAtom(a,s,o,c){const d=a.position,h=await a.readToken(AtomToken$1.Header);h.length===BigInt(1)&&(h.length=await a.readToken(AtomToken$1.ExtendedSize));const _=new Atom(h,h.length===BigInt(1),o),$=_.getPayloadLength(c);return debug$f(`parse atom name=${_.atomPath}, extended=${_.extended}, offset=${d}, len=${_.header.length}`),await _.readData(a,s,$),_}constructor(a,s,o){this.header=a,this.extended=s,this.parent=o,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(a){return(this.header.length===BigInt(0)?a:Number(this.header.length))-this.getHeaderLength()}async readAtoms(a,s,o){for(;o>0;){const c=await Atom.readAtom(a,s,this,o);this.children.push(c),o-=c.header.length===BigInt(0)?o:Number(c.header.length)}}async readData(a,s,o){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(a,s,this.getPayloadLength(o));case"meta":const d=(await a.peekToken(AtomToken$1.Header)).name==="hdlr"?0:4;return await a.ignore(d),this.readAtoms(a,s,this.getPayloadLength(o)-d);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return s(this,o)}}}Atom$1.Atom=Atom;Object.defineProperty(MP4Parser$1,"__esModule",{value:!0});MP4Parser$1.MP4Parser=void 0;const debug_1$e=browserExports$1,Token$i=lib$1,BasicParser_1$7=BasicParser$1,ID3v1Parser_1$1=ID3v1Parser,type_1=type,Atom_1=Atom$1,AtomToken=AtomToken$2,debug$e=(0,debug_1$e.default)("music-metadata:parser:MP4"),tagFormat="iTunes",encoderDict={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function distinct(e,a,s){return s.indexOf(e)===a}class MP4Parser extends BasicParser_1$7.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async a=>{const s=await this.tokenizer.readToken(new AtomToken.MvhdAtom(a));this.metadata.setFormat("creationTime",s.creationTime),this.metadata.setFormat("modificationTime",s.modificationTime)},mdhd:async a=>{const s=await this.tokenizer.readToken(new AtomToken.MdhdAtom(a)),o=this.getTrackDescription();o.creationTime=s.creationTime,o.modificationTime=s.modificationTime,o.timeScale=s.timeScale,o.duration=s.duration},chap:async a=>{const s=this.getTrackDescription(),o=[];for(;a>=Token$i.UINT32_BE.len;)o.push(await this.tokenizer.readNumber(Token$i.UINT32_BE)),a-=Token$i.UINT32_BE.len;s.chapterList=o},tkhd:async a=>{const s=await this.tokenizer.readToken(new AtomToken.TrackHeaderAtom(a));this.tracks.push(s)},mdat:async a=>{if(this.audioLengthInBytes=a,this.calculateBitRate(),this.options.includeChapters){const s=this.tracks.filter(o=>o.chapterList);if(s.length===1){const o=s[0].chapterList,c=this.tracks.filter(d=>o.indexOf(d.trackId)!==-1);if(c.length===1)return this.parseChapterTrack(c[0],s[0],a)}}await this.tokenizer.ignore(a)},ftyp:async a=>{const s=[];for(;a>0;){const c=await this.tokenizer.readToken(AtomToken.ftyp);a-=AtomToken.ftyp.len;const d=c.type.replace(/\W/g,"");d.length>0&&s.push(d)}debug$e(`ftyp: ${s.join("/")}`);const o=s.filter(distinct).join("/");this.metadata.setFormat("container",o)},stsd:async a=>{const s=await this.tokenizer.readToken(new AtomToken.StsdAtom(a)),o=this.getTrackDescription();o.soundSampleDescription=s.table.map(c=>this.parseSoundSampleDescription(c))},stsc:async a=>{const s=await this.tokenizer.readToken(new AtomToken.StscAtom(a));this.getTrackDescription().sampleToChunkTable=s.entries},stts:async a=>{const s=await this.tokenizer.readToken(new AtomToken.SttsAtom(a));this.getTrackDescription().timeToSampleTable=s.entries},stsz:async a=>{const s=await this.tokenizer.readToken(new AtomToken.StszAtom(a)),o=this.getTrackDescription();o.sampleSize=s.sampleSize,o.sampleSizeTable=s.entries},stco:async a=>{const s=await this.tokenizer.readToken(new AtomToken.StcoAtom(a));this.getTrackDescription().chunkOffsetTable=s.entries},date:async a=>{const s=await this.tokenizer.readToken(new Token$i.StringType(a,"utf-8"));this.addTag("date",s)}}}static read_BE_Integer(a,s){const o=(s?"INT":"UINT")+a.length*8+(a.length>1?"_BE":""),c=Token$i[o];if(!c)throw new Error('Token for integer type not found: "'+o+'"');return Number(c.get(a,0))}async parse(){this.tracks=[];let a=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||a>0;){try{if((await this.tokenizer.peekToken(AtomToken.Header)).name==="\0\0\0\0"){const h=`Error at offset=${this.tokenizer.position}: box.id=0`;debug$e(h),this.addWarning(h);break}}catch(d){const h=`Error at offset=${this.tokenizer.position}: ${d.message}`;debug$e(h),this.addWarning(h);break}const c=await Atom_1.Atom.readAtom(this.tokenizer,(d,h)=>this.handleAtom(d,h),null,a);a-=c.header.length===BigInt(0)?a:Number(c.header.length)}const s=[];this.tracks.forEach(c=>{const d=[];c.soundSampleDescription.forEach(h=>{const g={},_=encoderDict[h.dataFormat];if(_?(d.push(_.format),g.codecName=_.format):g.codecName=`<${h.dataFormat}>`,h.description){const{description:$}=h;$.sampleRate>0&&(g.type=type_1.TrackType.audio,g.audio={samplingFrequency:$.sampleRate,bitDepth:$.sampleSize,channels:$.numAudioChannels})}this.metadata.addStreamInfo(g)}),d.length>=1&&s.push(d.join("/"))}),s.length>0&&this.metadata.setFormat("codec",s.filter(distinct).join("+"));const o=this.tracks.filter(c=>c.soundSampleDescription.length>=1&&c.soundSampleDescription[0].description&&c.soundSampleDescription[0].description.numAudioChannels>0);if(o.length>=1){const c=o[0];if(c.timeScale>0){const g=c.duration/c.timeScale;this.metadata.setFormat("duration",g)}const d=c.soundSampleDescription[0];if(d.description&&(this.metadata.setFormat("sampleRate",d.description.sampleRate),this.metadata.setFormat("bitsPerSample",d.description.sampleSize),this.metadata.setFormat("numberOfChannels",d.description.numAudioChannels),c.timeScale===0&&c.timeToSampleTable.length>0)){const _=c.timeToSampleTable.map($=>$.count*$.duration).reduce(($,_e)=>$+_e)/d.description.sampleRate;this.metadata.setFormat("duration",_)}const h=encoderDict[d.dataFormat];h&&this.metadata.setFormat("lossless",!h.lossy),this.calculateBitRate()}}async handleAtom(a,s){if(a.parent)switch(a.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(a)}if(this.atomParsers[a.header.name])return this.atomParsers[a.header.name](s);debug$e(`No parser for atom path=${a.atomPath}, payload-len=${s}, ignoring atom`),await this.tokenizer.ignore(s)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(a,s){this.metadata.addTag(tagFormat,a,s)}addWarning(a){debug$e("Warning: "+a),this.metadata.addWarning(a)}parseMetadataItemData(a){let s=a.header.name;return a.readAtoms(this.tokenizer,async(o,c)=>{const d=o.getPayloadLength(c);switch(o.header.name){case"data":return this.parseValueAtom(s,o);case"name":case"mean":case"rate":const h=await this.tokenizer.readToken(new AtomToken.NameAtom(d));s+=":"+h.name;break;default:const g=await this.tokenizer.readToken(new Token$i.BufferType(d));this.addWarning("Unsupported meta-item: "+s+"["+o.header.name+"] => value="+g.toString("hex")+" ascii="+g.toString("ascii"))}},a.getPayloadLength(0))}async parseValueAtom(a,s){const o=await this.tokenizer.readToken(new AtomToken.DataAtom(Number(s.header.length)-AtomToken.Header.len));if(o.type.set!==0)throw new Error("Unsupported type-set != 0: "+o.type.set);switch(o.type.type){case 0:switch(a){case"trkn":case"disk":const c=Token$i.UINT8.get(o.value,3),d=Token$i.UINT8.get(o.value,5);this.addTag(a,c+"/"+d);break;case"gnre":const h=Token$i.UINT8.get(o.value,1),g=ID3v1Parser_1$1.Genres[h-1];this.addTag(a,g);break;case"rate":const _=o.value.toString("ascii");this.addTag(a,_);break;default:debug$e("unknown proprietary value type for: "+s.atomPath)}break;case 1:case 18:this.addTag(a,o.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(a,{format:"image/jpeg",data:Buffer.from(o.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(a,{format:"image/png",data:Buffer.from(o.value)});break;case 21:this.addTag(a,MP4Parser.read_BE_Integer(o.value,!0));break;case 22:this.addTag(a,MP4Parser.read_BE_Integer(o.value,!1));break;case 65:this.addTag(a,o.value.readInt8(0));break;case 66:this.addTag(a,o.value.readInt16BE(0));break;case 67:this.addTag(a,o.value.readInt32BE(0));break;default:this.addWarning(`atom key=${a}, has unknown well-known-type (data-type): ${o.type.type}`)}}parseSoundSampleDescription(a){const s={dataFormat:a.dataFormat,dataReferenceIndex:a.dataReferenceIndex};let o=0;const c=AtomToken.SoundSampleDescriptionVersion.get(a.description,o);return o+=AtomToken.SoundSampleDescriptionVersion.len,c.version===0||c.version===1?s.description=AtomToken.SoundSampleDescriptionV0.get(a.description,o):debug$e(`Warning: sound-sample-description ${c} not implemented`),s}async parseChapterTrack(a,s,o){if(!a.sampleSize&&a.chunkOffsetTable.length!==a.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const c=[];for(let d=0;d<a.chunkOffsetTable.length&&o>0;++d){const g=a.chunkOffsetTable[d]-this.tokenizer.position,_=a.sampleSize>0?a.sampleSize:a.sampleSizeTable[d];if(o-=g+_,o<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(g);const $=await this.tokenizer.readToken(new AtomToken.ChapterText(_));debug$e(`Chapter ${d+1}: ${$}`);const _e={title:$,sampleOffset:this.findSampleOffset(s,this.tokenizer.position)};debug$e(`Chapter title=${_e.title}, offset=${_e.sampleOffset}/${this.tracks[0].duration}`),c.push(_e)}this.metadata.setFormat("chapters",c),await this.tokenizer.ignore(o)}findSampleOffset(a,s){let o=0;a.timeToSampleTable.forEach(d=>{o+=d.count*d.duration}),debug$e(`Total duration=${o}`);let c=0;for(;c<a.chunkOffsetTable.length&&a.chunkOffsetTable[c]<s;)++c;return this.getChunkDuration(c+1,a)}getChunkDuration(a,s){let o=0,c=s.timeToSampleTable[o].count,d=s.timeToSampleTable[o].duration,h=1,g=this.getSamplesPerChunk(h,s.sampleToChunkTable),_=0;for(;h<a;){const $=Math.min(c,g);_+=$*d,c-=$,g-=$,g===0?(++h,g=this.getSamplesPerChunk(h,s.sampleToChunkTable)):(++o,c=s.timeToSampleTable[o].count,d=s.timeToSampleTable[o].duration)}return _}getSamplesPerChunk(a,s){for(let o=0;o<s.length-1;++o)if(a>=s[o].firstChunk&&a<s[o+1].firstChunk)return s[o].samplesPerChunk;return s[s.length-1].samplesPerChunk}}MP4Parser$1.MP4Parser=MP4Parser;var MpegParser$1={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={};Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0});ReplayGainDataFormat.ReplayGain=void 0;const common$2=Util;var NameCode;(function(e){e[e.not_set=0]="not_set",e[e.radio=1]="radio",e[e.audiophile=2]="audiophile"})(NameCode||(NameCode={}));var ReplayGainOriginator;(function(e){e[e.unspecified=0]="unspecified",e[e.engineer=1]="engineer",e[e.user=2]="user",e[e.automatic=3]="automatic",e[e.rms_average=4]="rms_average"})(ReplayGainOriginator||(ReplayGainOriginator={}));ReplayGainDataFormat.ReplayGain={len:2,get:(e,a)=>{const s=common$2.getBitAllignedNumber(e,a,0,3),o=common$2.getBitAllignedNumber(e,a,6,1),c=common$2.getBitAllignedNumber(e,a,7,9)/10;if(s>0)return{type:common$2.getBitAllignedNumber(e,a,0,3),origin:common$2.getBitAllignedNumber(e,a,3,3),adjustment:o?-c:c}}};Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0});ExtendedLameHeader.ExtendedLameHeader=void 0;const Token$h=lib$1,common$1=Util,ReplayGainDataFormat_1=ReplayGainDataFormat;ExtendedLameHeader.ExtendedLameHeader={len:27,get:(e,a)=>{const s=Token$h.UINT32_BE.get(e,a+2);return{revision:common$1.getBitAllignedNumber(e,a,0,4),vbr_method:common$1.getBitAllignedNumber(e,a,4,4),lowpass_filter:100*Token$h.UINT8.get(e,a+1),track_peak:s===0?void 0:s/Math.pow(2,23),track_gain:ReplayGainDataFormat_1.ReplayGain.get(e,6),album_gain:ReplayGainDataFormat_1.ReplayGain.get(e,8),music_length:Token$h.UINT32_BE.get(e,a+20),music_crc:Token$h.UINT8.get(e,a+24),header_crc:Token$h.UINT16_BE.get(e,a+24)}}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readXingHeader=e.XingHeaderFlags=e.LameEncoderVersion=e.InfoTagHeaderTag=void 0;const a=lib$1,s=Util,o=ExtendedLameHeader;e.InfoTagHeaderTag=new a.StringType(4,"ascii"),e.LameEncoderVersion=new a.StringType(6,"ascii"),e.XingHeaderFlags={len:4,get:(d,h)=>({frames:s.isBitSet(d,h,31),bytes:s.isBitSet(d,h,30),toc:s.isBitSet(d,h,29),vbrScale:s.isBitSet(d,h,28)})};async function c(d){const h=await d.readToken(e.XingHeaderFlags),g={};if(h.frames&&(g.numFrames=await d.readToken(a.UINT32_BE)),h.bytes&&(g.streamSize=await d.readToken(a.UINT32_BE)),h.toc&&(g.toc=Buffer.alloc(100),await d.readBuffer(g.toc)),h.vbrScale&&(g.vbrScale=await d.readToken(a.UINT32_BE)),await d.peekToken(new a.StringType(4,"ascii"))==="LAME"&&(await d.ignore(4),g.lame={version:await d.readToken(new a.StringType(5,"ascii"))},g.lame.version.match(/\d+.\d+/g))){const tt=g.lame.version.match(/\d+.\d+/g)[0].split(".").map(nt=>parseInt(nt,10));tt[0]>=3&&tt[1]>=90&&(g.lame.extended=await d.readToken(o.ExtendedLameHeader))}return g}e.readXingHeader=c})(XingTag);Object.defineProperty(MpegParser$1,"__esModule",{value:!0});MpegParser$1.MpegParser=void 0;const Token$g=lib$1,core_1$1=core$1,debug_1$d=browserExports$1,common=Util,AbstractID3Parser_1$2=AbstractID3Parser$1,XingTag_1=XingTag,debug$d=(0,debug_1$d.default)("music-metadata:parser:mpeg"),maxPeekLen=1024,MPEG4={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},MPEG4_ChannelConfigurations=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class MpegFrameHeader{constructor(a,s){this.versionIndex=common.getBitAllignedNumber(a,s+1,3,2),this.layer=MpegFrameHeader.LayerDescription[common.getBitAllignedNumber(a,s+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(a,s):this.parseMpegHeader(a,s),this.isProtectedByCRC=!common.isBitSet(a,s+1,7)}calcDuration(a){return a*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return MpegFrameHeader.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(a,s){this.container="MPEG",this.bitrateIndex=common.getBitAllignedNumber(a,s+2,0,4),this.sampRateFreqIndex=common.getBitAllignedNumber(a,s+2,4,2),this.padding=common.isBitSet(a,s+2,6),this.privateBit=common.isBitSet(a,s+2,7),this.channelModeIndex=common.getBitAllignedNumber(a,s+3,0,2),this.modeExtension=common.getBitAllignedNumber(a,s+3,2,2),this.isCopyrighted=common.isBitSet(a,s+3,4),this.isOriginalMedia=common.isBitSet(a,s+3,5),this.emphasis=common.getBitAllignedNumber(a,s+3,7,2),this.version=MpegFrameHeader.VersionID[this.versionIndex],this.channelMode=MpegFrameHeader.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const o=this.calcBitrate();if(!o)throw new Error("Cannot determine bit-rate");if(this.bitrate=o*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(a,s){debug$d("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const o=common.getBitAllignedNumber(a,s+2,0,2);this.codec="AAC",this.codecProfile=MPEG4.AudioObjectTypes[o],debug$d(`MPEG-4 audio-codec=${this.codec}`);const c=common.getBitAllignedNumber(a,s+2,2,4);this.samplingRate=MPEG4.SamplingFrequencies[c],debug$d(`sampling-rate=${this.samplingRate}`);const d=common.getBitAllignedNumber(a,s+2,7,3);this.mp4ChannelConfig=MPEG4_ChannelConfigurations[d],debug$d(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=common.getBitAllignedNumber(a,s+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const a=`${Math.floor(this.version)}${this.layer}`;return MpegFrameHeader.bitrate_index[this.bitrateIndex][a]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:MpegFrameHeader.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}MpegFrameHeader.SyncByte1=255;MpegFrameHeader.SyncByte2=224;MpegFrameHeader.VersionID=[2.5,null,2,1];MpegFrameHeader.LayerDescription=[0,3,2,1];MpegFrameHeader.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];MpegFrameHeader.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};MpegFrameHeader.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};MpegFrameHeader.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const FrameHeader={len:4,get:(e,a)=>new MpegFrameHeader(e,a)};function getVbrCodecProfile(e){return"V"+Math.floor((100-e)/10)}class MpegParser extends AbstractID3Parser_1$2.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(maxPeekLen),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let a=!1;for(;!a;)await this.sync(),a=await this.parseCommonMpegHeader()}catch(a){if(a instanceof core_1$1.EndOfStreamError){if(debug$d("End-of-stream"),this.calculateEofDuration){const s=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",s);const o=s/this.metadata.format.sampleRate;debug$d(`Calculate duration at EOF: ${o} sec.`,o),this.metadata.setFormat("duration",o)}}else throw a}}finalize(){const a=this.metadata.format,s=this.metadata.native.hasOwnProperty("ID3v1");if(a.duration&&this.tokenizer.fileInfo.size){const o=this.tokenizer.fileInfo.size-this.mpegOffset-(s?128:0);a.codecProfile&&a.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",o*8/a.duration)}else if(this.tokenizer.fileInfo.size&&a.codecProfile==="CBR"){const o=this.tokenizer.fileInfo.size-this.mpegOffset-(s?128:0),c=Math.round(o/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",c);const d=c/a.sampleRate;debug$d("Calculate CBR duration based on file size: %s",d),this.metadata.setFormat("duration",d)}}async sync(){let a=!1;for(;;){let s=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:maxPeekLen,mayBeLess:!0}),this.syncPeek.len<=163)throw new core_1$1.EndOfStreamError;for(;;)if(a&&(this.syncPeek.buf[s]&224)===224){this.buf_frame_header[0]=MpegFrameHeader.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[s],await this.tokenizer.ignore(s),debug$d(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(debug$d(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(a=!1,s=this.syncPeek.buf.indexOf(MpegFrameHeader.SyncByte1,s),s===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new core_1$1.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++s,a=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let a;try{a=FrameHeader.get(this.buf_frame_header,0)}catch(s){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+s.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",a.container),this.metadata.setFormat("codec",a.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",a.samplingRate),this.frameCount++,a.version>=2&&a.layer===0?this.parseAdts(a):this.parseAudioFrameHeader(a)}async parseAudioFrameHeader(a){this.metadata.setFormat("numberOfChannels",a.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",a.bitrate),this.frameCount<20*1e4&&debug$d("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,a.layer,a.bitrate,a.samplingRate);const s=a.calcSlotSize();if(s===null)throw new Error("invalid slot_size");const o=a.calcSamplesPerFrame();debug$d(`samples_per_frame=${o}`);const d=o/8*a.bitrate/a.samplingRate+(a.padding?s:0);if(this.frame_size=Math.floor(d),this.audioFrameHeader=a,this.bitrates.push(a.bitrate),this.frameCount===1)return this.offset=FrameHeader.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=o,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=o,this.calculateEofDuration=!0),this.offset=4,a.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(a){const s=Buffer.alloc(3);await this.tokenizer.readBuffer(s),a.frameLength+=common.getBitAllignedNumber(s,0,0,11),this.totalDataLength+=a.frameLength,this.samplesPerFrame=1024;const o=a.samplingRate/this.samplesPerFrame,d=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*o+.5;if(this.metadata.setFormat("bitrate",d),debug$d(`frame-count=${this.frameCount}, size=${a.frameLength} bytes, bit-rate=${d}`),await this.tokenizer.ignore(a.frameLength>7?a.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",a.codecProfile),a.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",a.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Token$g.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const a=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new Token$g.Uint8ArrayType(a)),this.offset+=a,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const a=await this.tokenizer.readToken(XingTag_1.InfoTagHeaderTag);switch(this.offset+=XingTag_1.InfoTagHeaderTag.len,a){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const o=await this.readXingInfoHeader(),c=getVbrCodecProfile(o.vbrScale);return this.metadata.setFormat("codecProfile",c),null;case"Xtra":break;case"LAME":const d=await this.tokenizer.readToken(XingTag_1.LameEncoderVersion);if(this.frame_size>=this.offset+XingTag_1.LameEncoderVersion.len)return this.offset+=XingTag_1.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+d),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const s=this.frame_size-this.offset;return s<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(s),null}async readXingInfoHeader(){const a=this.tokenizer.position,s=await(0,XingTag_1.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-a,s.lame&&(this.metadata.setFormat("tool","LAME "+common.stripNulls(s.lame.version)),s.lame.extended&&(this.metadata.setFormat("trackPeakLevel",s.lame.extended.track_peak),s.lame.extended.track_gain&&this.metadata.setFormat("trackGain",s.lame.extended.track_gain.adjustment),s.lame.extended.album_gain&&this.metadata.setFormat("albumGain",s.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",s.lame.extended.music_length/1e3))),s.streamSize){const c=this.audioFrameHeader.calcDuration(s.numFrames);return this.metadata.setFormat("duration",c),debug$d("Get duration from Xing header: %s",this.metadata.format.duration),s}const o=this.frame_size-this.offset;return await this.skipFrameData(o),s}async skipFrameData(a){if(a<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(a),this.countSkipFrameData+=a}areAllSame(a){const s=a[0];return a.every(o=>o===s)}}MpegParser$1.MpegParser=MpegParser;var musepack={},MpcSv8Parser$1={},StreamVersion8={};Object.defineProperty(StreamVersion8,"__esModule",{value:!0});StreamVersion8.StreamReader=void 0;const Token$f=lib$1,debug_1$c=browserExports$1,util$5=Util,debug$c=(0,debug_1$c.default)("music-metadata:parser:musepack:sv8"),PacketKey=new Token$f.StringType(2,"binary"),SH_part1={len:5,get:(e,a)=>({crc:Token$f.UINT32_LE.get(e,a),streamVersion:Token$f.UINT8.get(e,a+4)})},SH_part3={len:2,get:(e,a)=>({sampleFrequency:[44100,48e3,37800,32e3][util$5.getBitAllignedNumber(e,a,0,3)],maxUsedBands:util$5.getBitAllignedNumber(e,a,3,5),channelCount:util$5.getBitAllignedNumber(e,a+1,0,4)+1,msUsed:util$5.isBitSet(e,a+1,4),audioBlockFrames:util$5.getBitAllignedNumber(e,a+1,5,3)})};class StreamReader{constructor(a){this.tokenizer=a}async readPacketHeader(){const a=await this.tokenizer.readToken(PacketKey),s=await this.readVariableSizeField();return{key:a,payloadLength:s.value-2-s.len}}async readStreamHeader(a){const s={};debug$c(`Reading SH at offset=${this.tokenizer.position}`);const o=await this.tokenizer.readToken(SH_part1);a-=SH_part1.len,Object.assign(s,o),debug$c(`SH.streamVersion = ${o.streamVersion}`);const c=await this.readVariableSizeField();a-=c.len,s.sampleCount=c.value;const d=await this.readVariableSizeField();a-=d.len,s.beginningOfSilence=d.value;const h=await this.tokenizer.readToken(SH_part3);return a-=SH_part3.len,Object.assign(s,h),await this.tokenizer.ignore(a),s}async readVariableSizeField(a=1,s=0){let o=await this.tokenizer.readNumber(Token$f.UINT8);return o&128?(o&=127,o+=s,this.readVariableSizeField(a+1,o<<7)):{len:a,value:s+o}}}StreamVersion8.StreamReader=StreamReader;Object.defineProperty(MpcSv8Parser$1,"__esModule",{value:!0});MpcSv8Parser$1.MpcSv8Parser=void 0;const debug_1$b=browserExports$1,BasicParser_1$6=BasicParser$1,APEv2Parser_1$4=APEv2Parser$1,FourCC_1$6=FourCC,SV8=StreamVersion8,debug$b=(0,debug_1$b.default)("music-metadata:parser:musepack");class MpcSv8Parser extends BasicParser_1$6.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(FourCC_1$6.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const a=new SV8.StreamReader(this.tokenizer);do{const s=await a.readPacketHeader();switch(debug$b(`packet-header key=${s.key}, payloadLength=${s.payloadLength}`),s.key){case"SH":const o=await a.readStreamHeader(s.payloadLength);this.metadata.setFormat("numberOfSamples",o.sampleCount),this.metadata.setFormat("sampleRate",o.sampleFrequency),this.metadata.setFormat("duration",o.sampleCount/o.sampleFrequency),this.metadata.setFormat("numberOfChannels",o.channelCount);break;case"AP":this.audioLength+=s.payloadLength,await this.tokenizer.ignore(s.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(s.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),APEv2Parser_1$4.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${s.key}`)}}while(!0)}}MpcSv8Parser$1.MpcSv8Parser=MpcSv8Parser;var MpcSv7Parser$1={},BitReader$1={};Object.defineProperty(BitReader$1,"__esModule",{value:!0});BitReader$1.BitReader=void 0;const Token$e=lib$1;class BitReader{constructor(a){this.tokenizer=a,this.pos=0,this.dword=void 0}async read(a){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(Token$e.UINT32_LE);let s=this.dword;return this.pos+=a,this.pos<32?(s>>>=32-this.pos,s&(1<<a)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,s&(1<<a)-1):(this.dword=await this.tokenizer.readToken(Token$e.UINT32_LE),this.pos&&(s<<=this.pos,s|=this.dword>>>32-this.pos),s&(1<<a)-1))}async ignore(a){if(this.pos>0){const c=32-this.pos;this.dword=void 0,a-=c,this.pos=0}const s=a%32,o=(a-s)/32;return await this.tokenizer.ignore(o*4),this.read(s)}}BitReader$1.BitReader=BitReader;var StreamVersion7={};Object.defineProperty(StreamVersion7,"__esModule",{value:!0});StreamVersion7.Header=void 0;const Token$d=lib$1,util$4=Util;StreamVersion7.Header={len:6*4,get:(e,a)=>{const s={signature:Buffer.from(e).toString("latin1",a,a+3),streamMinorVersion:util$4.getBitAllignedNumber(e,a+3,0,4),streamMajorVersion:util$4.getBitAllignedNumber(e,a+3,4,4),frameCount:Token$d.UINT32_LE.get(e,a+4),maxLevel:Token$d.UINT16_LE.get(e,a+8),sampleFrequency:[44100,48e3,37800,32e3][util$4.getBitAllignedNumber(e,a+10,0,2)],link:util$4.getBitAllignedNumber(e,a+10,2,2),profile:util$4.getBitAllignedNumber(e,a+10,4,4),maxBand:util$4.getBitAllignedNumber(e,a+11,0,6),intensityStereo:util$4.isBitSet(e,a+11,6),midSideStereo:util$4.isBitSet(e,a+11,7),titlePeak:Token$d.UINT16_LE.get(e,a+12),titleGain:Token$d.UINT16_LE.get(e,a+14),albumPeak:Token$d.UINT16_LE.get(e,a+16),albumGain:Token$d.UINT16_LE.get(e,a+18),lastFrameLength:Token$d.UINT32_LE.get(e,a+20)>>>20&2047,trueGapless:util$4.isBitSet(e,a+23,0)};return s.lastFrameLength=s.trueGapless?Token$d.UINT32_LE.get(e,20)>>>20&2047:0,s}};Object.defineProperty(MpcSv7Parser$1,"__esModule",{value:!0});MpcSv7Parser$1.MpcSv7Parser=void 0;const debug_1$a=browserExports$1,BasicParser_1$5=BasicParser$1,APEv2Parser_1$3=APEv2Parser$1,BitReader_1=BitReader$1,SV7=StreamVersion7,debug$a=(0,debug_1$a.default)("music-metadata:parser:musepack");class MpcSv7Parser extends BasicParser_1$5.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const a=await this.tokenizer.readToken(SV7.Header);if(a.signature!=="MP+")throw new Error("Unexpected magic number");debug$a(`stream-version=${a.streamMajorVersion}.${a.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",a.sampleFrequency);const s=1152*(a.frameCount-1)+a.lastFrameLength;this.metadata.setFormat("numberOfSamples",s),this.duration=s/a.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new BitReader_1.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",a.midSideStereo||a.intensityStereo?2:1);const o=await this.bitreader.read(8);return this.metadata.setFormat("codec",(o/100).toFixed(2)),await this.skipAudioData(a.frameCount),debug$a(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),APEv2Parser_1$3.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(a){for(;a-- >0;){const o=await this.bitreader.read(20);this.audioLength+=20+o,await this.bitreader.ignore(o)}const s=await this.bitreader.read(11);this.audioLength+=s,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}MpcSv7Parser$1.MpcSv7Parser=MpcSv7Parser;Object.defineProperty(musepack,"__esModule",{value:!0});const debug_1$9=browserExports$1,Token$c=lib$1,AbstractID3Parser_1$1=AbstractID3Parser$1,MpcSv8Parser_1=MpcSv8Parser$1,MpcSv7Parser_1=MpcSv7Parser$1,debug$9=(0,debug_1$9.default)("music-metadata:parser:musepack");class MusepackParser extends AbstractID3Parser_1$1.AbstractID3Parser{async postId3v2Parse(){const a=await this.tokenizer.peekToken(new Token$c.StringType(3,"binary"));let s;switch(a){case"MP+":{debug$9("Musepack stream-version 7"),s=new MpcSv7Parser_1.MpcSv7Parser;break}case"MPC":{debug$9("Musepack stream-version 8"),s=new MpcSv8Parser_1.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return s.init(this.metadata,this.tokenizer,this.options),s.parse()}}musepack.default=MusepackParser;var OggParser$1={},OpusParser$1={},Opus$1={};Object.defineProperty(Opus$1,"__esModule",{value:!0});Opus$1.IdHeader=void 0;const Token$b=lib$1;class IdHeader{constructor(a){if(this.len=a,a<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(a,s){return{magicSignature:new Token$b.StringType(8,"ascii").get(a,s+0),version:a.readUInt8(s+8),channelCount:a.readUInt8(s+9),preSkip:a.readInt16LE(s+10),inputSampleRate:a.readInt32LE(s+12),outputGain:a.readInt16LE(s+16),channelMapping:a.readUInt8(s+18)}}}Opus$1.IdHeader=IdHeader;Object.defineProperty(OpusParser$1,"__esModule",{value:!0});OpusParser$1.OpusParser=void 0;const Token$a=lib$1,VorbisParser_1$2=VorbisParser$1,Opus=Opus$1;class OpusParser extends VorbisParser_1$2.VorbisParser{constructor(a,s,o){super(a,s),this.tokenizer=o,this.lastPos=-1}parseFirstPage(a,s){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new Opus.IdHeader(s.length).get(s,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(a){switch(new Token$a.StringType(8,"ascii").get(a,0)){case"OpusTags":this.parseUserCommentList(a,8),this.lastPos=this.tokenizer.position-a.length;break}}calculateDuration(a){if(this.metadata.format.sampleRate&&a.absoluteGranulePosition>=0){const s=a.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",s),this.metadata.setFormat("duration",s/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const o=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*o/this.metadata.format.duration)}}}}OpusParser$1.OpusParser=OpusParser;var SpeexParser$1={},Speex$1={};Object.defineProperty(Speex$1,"__esModule",{value:!0});Speex$1.Header=void 0;const Token$9=lib$1,util$3=Util;Speex$1.Header={len:80,get:(e,a)=>({speex:new Token$9.StringType(8,"ascii").get(e,a+0),version:util$3.trimRightNull(new Token$9.StringType(20,"ascii").get(e,a+8)),version_id:e.readInt32LE(a+28),header_size:e.readInt32LE(a+32),rate:e.readInt32LE(a+36),mode:e.readInt32LE(a+40),mode_bitstream_version:e.readInt32LE(a+44),nb_channels:e.readInt32LE(a+48),bitrate:e.readInt32LE(a+52),frame_size:e.readInt32LE(a+56),vbr:e.readInt32LE(a+60),frames_per_packet:e.readInt32LE(a+64),extra_headers:e.readInt32LE(a+68),reserved1:e.readInt32LE(a+72),reserved2:e.readInt32LE(a+76)})};Object.defineProperty(SpeexParser$1,"__esModule",{value:!0});SpeexParser$1.SpeexParser=void 0;const debug_1$8=browserExports$1,VorbisParser_1$1=VorbisParser$1,Speex=Speex$1,debug$8=(0,debug_1$8.default)("music-metadata:parser:ogg:speex");class SpeexParser extends VorbisParser_1$1.VorbisParser{constructor(a,s,o){super(a,s),this.tokenizer=o}parseFirstPage(a,s){debug$8("First Ogg/Speex page");const o=Speex.Header.get(s,0);this.metadata.setFormat("codec",`Speex ${o.version}`),this.metadata.setFormat("numberOfChannels",o.nb_channels),this.metadata.setFormat("sampleRate",o.rate),o.bitrate!==-1&&this.metadata.setFormat("bitrate",o.bitrate)}}SpeexParser$1.SpeexParser=SpeexParser;var TheoraParser$1={},Theora={};Object.defineProperty(Theora,"__esModule",{value:!0});Theora.IdentificationHeader=void 0;const Token$8=lib$1;Theora.IdentificationHeader={len:42,get:(e,a)=>({id:new Token$8.StringType(7,"ascii").get(e,a),vmaj:e.readUInt8(a+7),vmin:e.readUInt8(a+8),vrev:e.readUInt8(a+9),vmbw:e.readUInt16BE(a+10),vmbh:e.readUInt16BE(a+17),nombr:Token$8.UINT24_BE.get(e,a+37),nqual:e.readUInt8(a+40)})};Object.defineProperty(TheoraParser$1,"__esModule",{value:!0});TheoraParser$1.TheoraParser=void 0;const debug_1$7=browserExports$1,Theora_1=Theora,debug$7=(0,debug_1$7.default)("music-metadata:parser:ogg:theora");class TheoraParser{constructor(a,s,o){this.metadata=a,this.tokenizer=o}parsePage(a,s){a.headerType.firstPage&&this.parseFirstPage(a,s)}flush(){debug$7("flush")}calculateDuration(a){debug$7("duration calculation not implemented")}parseFirstPage(a,s){debug$7("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const o=Theora_1.IdentificationHeader.get(s,0);this.metadata.setFormat("bitrate",o.nombr)}}TheoraParser$1.TheoraParser=TheoraParser;Object.defineProperty(OggParser$1,"__esModule",{value:!0});OggParser$1.OggParser=OggParser$1.SegmentTable=void 0;const Token$7=lib$1,core_1=core$1,debug_1$6=browserExports$1,util$2=Util,FourCC_1$5=FourCC,BasicParser_1$4=BasicParser$1,VorbisParser_1=VorbisParser$1,OpusParser_1=OpusParser$1,SpeexParser_1=SpeexParser$1,TheoraParser_1=TheoraParser$1,debug$6=(0,debug_1$6.default)("music-metadata:parser:ogg");class SegmentTable{static sum(a,s,o){let c=0;for(let d=s;d<s+o;++d)c+=a[d];return c}constructor(a){this.len=a.page_segments}get(a,s){return{totalPageSize:SegmentTable.sum(a,s,this.len)}}}OggParser$1.SegmentTable=SegmentTable;class OggParser extends BasicParser_1$4.BasicParser{async parse(){debug$6("pos=%s, parsePage()",this.tokenizer.position);try{let a;do{if(a=await this.tokenizer.readToken(OggParser.Header),a.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=a,this.pageNumber=a.pageSequenceNo,debug$6("page#=%s, Ogg.id=%s",a.pageSequenceNo,a.capturePattern);const s=await this.tokenizer.readToken(new SegmentTable(a));debug$6("totalPageSize=%s",s.totalPageSize);const o=await this.tokenizer.readToken(new Token$7.Uint8ArrayType(s.totalPageSize));if(debug$6("firstPage=%s, lastPage=%s, continued=%s",a.headerType.firstPage,a.headerType.lastPage,a.headerType.continued),a.headerType.firstPage){const c=new Token$7.StringType(7,"ascii").get(Buffer.from(o),0);switch(c){case"vorbis":debug$6("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new VorbisParser_1.VorbisParser(this.metadata,this.options);break;case"OpusHea":debug$6("Set page consumer to Ogg/Opus"),this.pageConsumer=new OpusParser_1.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":debug$6("Set page consumer to Ogg/Speex"),this.pageConsumer=new SpeexParser_1.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":debug$6("Set page consumer to Ogg/Theora"),this.pageConsumer=new TheoraParser_1.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+c+")")}}this.pageConsumer.parsePage(a,o)}while(!a.headerType.lastPage)}catch(a){if(a instanceof core_1.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),debug$6("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(a.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw a}}}OggParser.Header={len:27,get:(e,a)=>({capturePattern:FourCC_1$5.FourCcToken.get(e,a),version:Token$7.UINT8.get(e,a+4),headerType:{continued:util$2.getBit(e,a+5,0),firstPage:util$2.getBit(e,a+5,1),lastPage:util$2.getBit(e,a+5,2)},absoluteGranulePosition:Number(Token$7.UINT64_LE.get(e,a+6)),streamSerialNumber:Token$7.UINT32_LE.get(e,a+14),pageSequenceNo:Token$7.UINT32_LE.get(e,a+18),pageChecksum:Token$7.UINT32_LE.get(e,a+22),page_segments:Token$7.UINT8.get(e,a+26)})};OggParser$1.OggParser=OggParser;var WaveParser$1={},RiffChunk={};Object.defineProperty(RiffChunk,"__esModule",{value:!0});RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const Token$6=lib$1;RiffChunk.Header={len:8,get:(e,a)=>({chunkID:e.toString("binary",a,a+4),chunkSize:Token$6.UINT32_LE.get(e,4)})};class ListInfoTagValue{constructor(a){this.tagHeader=a,this.len=a.chunkSize,this.len+=this.len&1}get(a,s){return new Token$6.StringType(this.tagHeader.chunkSize,"ascii").get(a,s)}}RiffChunk.ListInfoTagValue=ListInfoTagValue;var WaveChunk$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FactChunk=e.Format=e.WaveFormat=void 0,function(o){o[o.PCM=1]="PCM",o[o.ADPCM=2]="ADPCM",o[o.IEEE_FLOAT=3]="IEEE_FLOAT",o[o.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",o[o.MPEG_LOAS=5634]="MPEG_LOAS",o[o.RAW_AAC1=255]="RAW_AAC1",o[o.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",o[o.DVM=8192]="DVM",o[o.RAW_SPORT=576]="RAW_SPORT",o[o.ESST_AC3=577]="ESST_AC3",o[o.DRM=9]="DRM",o[o.DTS2=8193]="DTS2",o[o.MPEG=80]="MPEG"}(e.WaveFormat||(e.WaveFormat={}));class a{constructor(c){if(c.chunkSize<16)throw new Error("Invalid chunk size");this.len=c.chunkSize}get(c,d){return{wFormatTag:c.readUInt16LE(d),nChannels:c.readUInt16LE(d+2),nSamplesPerSec:c.readUInt32LE(d+4),nAvgBytesPerSec:c.readUInt32LE(d+8),nBlockAlign:c.readUInt16LE(d+12),wBitsPerSample:c.readUInt16LE(d+14)}}}e.Format=a;class s{constructor(c){if(c.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=c.chunkSize}get(c,d){return{dwSampleLength:c.readUInt32LE(d)}}}e.FactChunk=s})(WaveChunk$1);var BwfChunk={};Object.defineProperty(BwfChunk,"__esModule",{value:!0});BwfChunk.BroadcastAudioExtensionChunk=void 0;const Token$5=lib$1,Util_1=Util;BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(e,a)=>({description:(0,Util_1.stripNulls)(new Token$5.StringType(256,"ascii").get(e,a)).trim(),originator:(0,Util_1.stripNulls)(new Token$5.StringType(32,"ascii").get(e,a+256)).trim(),originatorReference:(0,Util_1.stripNulls)(new Token$5.StringType(32,"ascii").get(e,a+288)).trim(),originationDate:(0,Util_1.stripNulls)(new Token$5.StringType(10,"ascii").get(e,a+320)).trim(),originationTime:(0,Util_1.stripNulls)(new Token$5.StringType(8,"ascii").get(e,a+330)).trim(),timeReferenceLow:Token$5.UINT32_LE.get(e,a+338),timeReferenceHigh:Token$5.UINT32_LE.get(e,a+342),version:Token$5.UINT16_LE.get(e,a+346),umid:new Token$5.Uint8ArrayType(64).get(e,a+348),loudnessValue:Token$5.UINT16_LE.get(e,a+412),maxTruePeakLevel:Token$5.UINT16_LE.get(e,a+414),maxMomentaryLoudness:Token$5.UINT16_LE.get(e,a+416),maxShortTermLoudness:Token$5.UINT16_LE.get(e,a+418)})};Object.defineProperty(WaveParser$1,"__esModule",{value:!0});WaveParser$1.WaveParser=void 0;const strtok3$2=core$1,Token$4=lib$1,debug_1$5=browserExports$1,riff=RiffChunk,WaveChunk=WaveChunk$1,ID3v2Parser_1$2=ID3v2Parser$1,util$1=Util,FourCC_1$4=FourCC,BasicParser_1$3=BasicParser$1,BwfChunk_1=BwfChunk,debug$5=(0,debug_1$5.default)("music-metadata:parser:RIFF");class WaveParser extends BasicParser_1$3.BasicParser{async parse(){const a=await this.tokenizer.readToken(riff.Header);if(debug$5(`pos=${this.tokenizer.position}, parse: chunkID=${a.chunkID}`),a.chunkID==="RIFF")return this.parseRiffChunk(a.chunkSize).catch(s=>{if(!(s instanceof strtok3$2.EndOfStreamError))throw s})}async parseRiffChunk(a){const s=await this.tokenizer.readToken(FourCC_1$4.FourCcToken);switch(this.metadata.setFormat("container",s),s){case"WAVE":return this.readWaveChunk(a-FourCC_1$4.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${s}`)}}async readWaveChunk(a){for(;a>=riff.Header.len;){const s=await this.tokenizer.readToken(riff.Header);switch(a-=riff.Header.len+s.chunkSize,s.chunkSize>a&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=s,debug$5(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${s.chunkID}`),s.chunkID){case"LIST":await this.parseListTag(s);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new WaveChunk.FactChunk(s));break;case"fmt ":const o=await this.tokenizer.readToken(new WaveChunk.Format(s));let c=WaveChunk.WaveFormat[o.wFormatTag];c||(debug$5("WAVE/non-PCM format="+o.wFormatTag),c="non-PCM ("+o.wFormatTag+")"),this.metadata.setFormat("codec",c),this.metadata.setFormat("bitsPerSample",o.wBitsPerSample),this.metadata.setFormat("sampleRate",o.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",o.nChannels),this.metadata.setFormat("bitrate",o.nBlockAlign*o.nSamplesPerSec*8),this.blockAlign=o.nBlockAlign;break;case"id3 ":case"ID3 ":const d=await this.tokenizer.readToken(new Token$4.Uint8ArrayType(s.chunkSize)),h=strtok3$2.fromBuffer(d);await new ID3v2Parser_1$2.ID3v2Parser().parse(this.metadata,h,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let g=s.chunkSize;if(this.tokenizer.fileInfo.size){const tt=this.tokenizer.fileInfo.size-this.tokenizer.position;tt<g&&(this.metadata.addWarning("data chunk length exceeding file length"),g=tt)}const _=this.fact?this.fact.dwSampleLength:g===4294967295?void 0:g/this.blockAlign;_&&(this.metadata.setFormat("numberOfSamples",_),this.metadata.setFormat("duration",_/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(s.chunkSize);break;case"bext":const $=await this.tokenizer.readToken(BwfChunk_1.BroadcastAudioExtensionChunk);Object.keys($).forEach(tt=>{this.metadata.addTag("exif","bext."+tt,$[tt])});const _e=s.chunkSize-BwfChunk_1.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(_e);break;case"\0\0\0\0":debug$5(`Ignore padding chunk: RIFF/${s.chunkID} of ${s.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+s.chunkID),await this.tokenizer.ignore(s.chunkSize);break;default:debug$5(`Ignore chunk: RIFF/${s.chunkID} of ${s.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+s.chunkID),await this.tokenizer.ignore(s.chunkSize)}this.header.chunkSize%2===1&&(debug$5("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(a){const s=await this.tokenizer.readToken(new Token$4.StringType(4,"binary"));switch(debug$5("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,s),s){case"INFO":return this.parseRiffInfoTags(a.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+s),debug$5("Ignoring chunkID=RIFF/WAVE/LIST/"+s),this.tokenizer.ignore(a.chunkSize-4).then()}}async parseRiffInfoTags(a){for(;a>=8;){const s=await this.tokenizer.readToken(riff.Header),o=new riff.ListInfoTagValue(s),c=await this.tokenizer.readToken(o);this.addTag(s.chunkID,util$1.stripNulls(c)),a-=8+o.len}if(a!==0)throw Error("Illegal remaining size: "+a)}addTag(a,s){this.metadata.addTag("exif",a,s)}}WaveParser$1.WaveParser=WaveParser;var WavPackParser$1={},WavPackToken={};Object.defineProperty(WavPackToken,"__esModule",{value:!0});WavPackToken.WavPack=void 0;const Token$3=lib$1,FourCC_1$3=FourCC,SampleRates=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class WavPack{static isBitSet(a,s){return WavPack.getBitAllignedNumber(a,s,1)===1}static getBitAllignedNumber(a,s,o){return a>>>s&4294967295>>>32-o}}WavPack.BlockHeaderToken={len:32,get:(e,a)=>{const s=Token$3.UINT32_LE.get(e,a+24),o={BlockID:FourCC_1$3.FourCcToken.get(e,a),blockSize:Token$3.UINT32_LE.get(e,a+4),version:Token$3.UINT16_LE.get(e,a+8),totalSamples:Token$3.UINT32_LE.get(e,a+12),blockIndex:Token$3.UINT32_LE.get(e,a+16),blockSamples:Token$3.UINT32_LE.get(e,a+20),flags:{bitsPerSample:(1+WavPack.getBitAllignedNumber(s,0,2))*8,isMono:WavPack.isBitSet(s,2),isHybrid:WavPack.isBitSet(s,3),isJointStereo:WavPack.isBitSet(s,4),crossChannel:WavPack.isBitSet(s,5),hybridNoiseShaping:WavPack.isBitSet(s,6),floatingPoint:WavPack.isBitSet(s,7),samplingRate:SampleRates[WavPack.getBitAllignedNumber(s,23,4)],isDSD:WavPack.isBitSet(s,31)},crc:new Token$3.Uint8ArrayType(4).get(e,a+28)};return o.flags.isDSD&&(o.totalSamples*=8),o}};WavPack.MetadataIdToken={len:1,get:(e,a)=>({functionId:WavPack.getBitAllignedNumber(e[a],0,6),isOptional:WavPack.isBitSet(e[a],5),isOddSize:WavPack.isBitSet(e[a],6),largeBlock:WavPack.isBitSet(e[a],7)})};WavPackToken.WavPack=WavPack;Object.defineProperty(WavPackParser$1,"__esModule",{value:!0});WavPackParser$1.WavPackParser=void 0;const Token$2=lib$1,APEv2Parser_1$2=APEv2Parser$1,FourCC_1$2=FourCC,BasicParser_1$2=BasicParser$1,WavPackToken_1=WavPackToken,debug_1$4=browserExports$1,debug$4=(0,debug_1$4.default)("music-metadata:parser:WavPack");class WavPackParser extends BasicParser_1$2.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),APEv2Parser_1$2.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(FourCC_1$2.FourCcToken)!=="wvpk")break;const s=await this.tokenizer.readToken(WavPackToken_1.WavPack.BlockHeaderToken);if(s.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");debug$4(`WavPack header blockIndex=${s.blockIndex}, len=${WavPackToken_1.WavPack.BlockHeaderToken.len}`),s.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!s.flags.isHybrid),this.metadata.setFormat("bitsPerSample",s.flags.bitsPerSample),s.flags.isDSD||(this.metadata.setFormat("sampleRate",s.flags.samplingRate),this.metadata.setFormat("duration",s.totalSamples/s.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",s.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",s.totalSamples),this.metadata.setFormat("codec",s.flags.isDSD?"DSD":"PCM"));const o=s.blockSize-(WavPackToken_1.WavPack.BlockHeaderToken.len-8);await(s.blockIndex===0?this.parseMetadataSubBlock(s,o):this.tokenizer.ignore(o)),s.blockSamples>0&&(this.audioDataSize+=s.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=WavPackToken_1.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(a,s){for(;s>WavPackToken_1.WavPack.MetadataIdToken.len;){const o=await this.tokenizer.readToken(WavPackToken_1.WavPack.MetadataIdToken),c=await this.tokenizer.readNumber(o.largeBlock?Token$2.UINT24_LE:Token$2.UINT8),d=Buffer.alloc(c*2-(o.isOddSize?1:0));switch(await this.tokenizer.readBuffer(d),debug$4(`Metadata Sub-Blocks functionId=0x${o.functionId.toString(16)}, id.largeBlock=${o.largeBlock},data-size=${d.length}`),o.functionId){case 0:break;case 14:debug$4("ID_DSD_BLOCK");const h=1<<d.readUInt8(0),g=a.flags.samplingRate*h*8;if(!a.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",g),this.metadata.setFormat("duration",a.totalSamples/g);break;case 36:debug$4("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",d);break;case 47:debug$4(`ID_BLOCK_CHECKSUM: checksum=${d.toString("hex")}`);break;default:debug$4(`Ignore unsupported meta-sub-block-id functionId=0x${o.functionId.toString(16)}`);break}s-=WavPackToken_1.WavPack.MetadataIdToken.len+(o.largeBlock?Token$2.UINT24_LE.len:Token$2.UINT8.len)+c*2,debug$4(`remainingLength=${s}`),o.isOddSize&&this.tokenizer.ignore(1)}if(s!==0)throw new Error("metadata-sub-block should fit it remaining length")}}WavPackParser$1.WavPackParser=WavPackParser;var DsfParser$1={},DsfChunk={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FormatChunk=e.ChannelType=e.DsdChunk=e.ChunkHeader=void 0;const a=lib$1,s=FourCC;e.ChunkHeader={len:12,get:(o,c)=>({id:s.FourCcToken.get(o,c),size:a.UINT64_LE.get(o,c+4)})},e.DsdChunk={len:16,get:(o,c)=>({fileSize:a.INT64_LE.get(o,c),metadataPointer:a.INT64_LE.get(o,c+8)})},function(o){o[o.mono=1]="mono",o[o.stereo=2]="stereo",o[o.channels=3]="channels",o[o.quad=4]="quad",o[o["4 channels"]=5]="4 channels",o[o["5 channels"]=6]="5 channels",o[o["5.1 channels"]=7]="5.1 channels"}(e.ChannelType||(e.ChannelType={})),e.FormatChunk={len:40,get:(o,c)=>({formatVersion:a.INT32_LE.get(o,c),formatID:a.INT32_LE.get(o,c+4),channelType:a.INT32_LE.get(o,c+8),channelNum:a.INT32_LE.get(o,c+12),samplingFrequency:a.INT32_LE.get(o,c+16),bitsPerSample:a.INT32_LE.get(o,c+20),sampleCount:a.INT64_LE.get(o,c+24),blockSizePerChannel:a.INT32_LE.get(o,c+32)})}})(DsfChunk);Object.defineProperty(DsfParser$1,"__esModule",{value:!0});DsfParser$1.DsfParser=void 0;const debug_1$3=browserExports$1,AbstractID3Parser_1=AbstractID3Parser$1,DsfChunk_1=DsfChunk,ID3v2Parser_1$1=ID3v2Parser$1,debug$3=(0,debug_1$3.default)("music-metadata:parser:DSF");class DsfParser extends AbstractID3Parser_1.AbstractID3Parser{async postId3v2Parse(){const a=this.tokenizer.position,s=await this.tokenizer.readToken(DsfChunk_1.ChunkHeader);if(s.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const o=await this.tokenizer.readToken(DsfChunk_1.DsdChunk);if(o.metadataPointer===BigInt(0))debug$3("No ID3v2 tag present");else return debug$3(`expect ID3v2 at offset=${o.metadataPointer}`),await this.parseChunks(o.fileSize-s.size),await this.tokenizer.ignore(Number(o.metadataPointer)-this.tokenizer.position-a),new ID3v2Parser_1$1.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(a){for(;a>=DsfChunk_1.ChunkHeader.len;){const s=await this.tokenizer.readToken(DsfChunk_1.ChunkHeader);switch(debug$3(`Parsing chunk name=${s.id} size=${s.size}`),s.id){case"fmt ":const o=await this.tokenizer.readToken(DsfChunk_1.FormatChunk);this.metadata.setFormat("numberOfChannels",o.channelNum),this.metadata.setFormat("sampleRate",o.samplingFrequency),this.metadata.setFormat("bitsPerSample",o.bitsPerSample),this.metadata.setFormat("numberOfSamples",o.sampleCount),this.metadata.setFormat("duration",Number(o.sampleCount)/o.samplingFrequency);const c=o.bitsPerSample*o.samplingFrequency*o.channelNum;this.metadata.setFormat("bitrate",c);return;default:this.tokenizer.ignore(Number(s.size)-DsfChunk_1.ChunkHeader.len);break}a-=s.size}}}DsfParser$1.DsfParser=DsfParser;var DsdiffParser$1={},DsdiffToken={};Object.defineProperty(DsdiffToken,"__esModule",{value:!0});DsdiffToken.ChunkHeader64=void 0;const Token$1=lib$1,FourCC_1$1=FourCC;DsdiffToken.ChunkHeader64={len:12,get:(e,a)=>({chunkID:FourCC_1$1.FourCcToken.get(e,a),chunkSize:Token$1.INT64_BE.get(e,a+4)})};Object.defineProperty(DsdiffParser$1,"__esModule",{value:!0});DsdiffParser$1.DsdiffParser=void 0;const Token=lib$1,debug_1$2=browserExports$1,strtok3$1=core$1,FourCC_1=FourCC,BasicParser_1$1=BasicParser$1,ID3v2Parser_1=ID3v2Parser$1,DsdiffToken_1=DsdiffToken,debug$2=(0,debug_1$2.default)("music-metadata:parser:aiff");class DsdiffParser extends BasicParser_1$1.BasicParser{async parse(){const a=await this.tokenizer.readToken(DsdiffToken_1.ChunkHeader64);if(a.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const s=(await this.tokenizer.readToken(FourCC_1.FourCcToken)).trim();switch(s){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${s}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(a.chunkSize-BigInt(FourCC_1.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${s}`)}}async readFmt8Chunks(a){for(;a>=DsdiffToken_1.ChunkHeader64.len;){const s=await this.tokenizer.readToken(DsdiffToken_1.ChunkHeader64);debug$2(`Chunk id=${s.chunkID}`),await this.readData(s),a-=BigInt(DsdiffToken_1.ChunkHeader64.len)+s.chunkSize}}async readData(a){debug$2(`Reading data of chunk[ID=${a.chunkID}, size=${a.chunkSize}]`);const s=this.tokenizer.position;switch(a.chunkID.trim()){case"FVER":const c=await this.tokenizer.readToken(Token.UINT32_LE);debug$2(`DSDIFF version=${c}`);break;case"PROP":if(await this.tokenizer.readToken(FourCC_1.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(a.chunkSize-BigInt(FourCC_1.FourCcToken.len));break;case"ID3":const h=await this.tokenizer.readToken(new Token.Uint8ArrayType(Number(a.chunkSize))),g=strtok3$1.fromBuffer(h);await new ID3v2Parser_1.ID3v2Parser().parse(this.metadata,g,this.options);break;default:debug$2(`Ignore chunk[ID=${a.chunkID}, size=${a.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(a.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const o=a.chunkSize-BigInt(this.tokenizer.position-s);o>0&&(debug$2(`After Parsing chunk, remaining ${o} bytes`),await this.tokenizer.ignore(Number(o)))}async handleSoundPropertyChunks(a){for(debug$2(`Parsing sound-property-chunks, remainingSize=${a}`);a>0;){const s=await this.tokenizer.readToken(DsdiffToken_1.ChunkHeader64);debug$2(`Sound-property-chunk[ID=${s.chunkID}, size=${s.chunkSize}]`);const o=this.tokenizer.position;switch(s.chunkID.trim()){case"FS":const d=await this.tokenizer.readToken(Token.UINT32_BE);this.metadata.setFormat("sampleRate",d);break;case"CHNL":const h=await this.tokenizer.readToken(Token.UINT16_BE);this.metadata.setFormat("numberOfChannels",h),await this.handleChannelChunks(s.chunkSize-BigInt(Token.UINT16_BE.len));break;case"CMPR":const g=(await this.tokenizer.readToken(FourCC_1.FourCcToken)).trim(),_=await this.tokenizer.readToken(Token.UINT8),$=await this.tokenizer.readToken(new Token.StringType(_,"ascii"));g==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${g} (${$})`);break;case"ABSS":const _e=await this.tokenizer.readToken(Token.UINT16_BE),tt=await this.tokenizer.readToken(Token.UINT8),nt=await this.tokenizer.readToken(Token.UINT8),lt=await this.tokenizer.readToken(Token.UINT32_BE);debug$2(`ABSS ${_e}:${tt}:${nt}.${lt}`);break;case"LSCO":const dt=await this.tokenizer.readToken(Token.UINT16_BE);debug$2(`LSCO lsConfig=${dt}`);break;case"COMT":default:debug$2(`Unknown sound-property-chunk[ID=${s.chunkID}, size=${s.chunkSize}]`),await this.tokenizer.ignore(Number(s.chunkSize))}const c=s.chunkSize-BigInt(this.tokenizer.position-o);c>0&&(debug$2(`After Parsing sound-property-chunk ${s.chunkSize}, remaining ${c} bytes`),await this.tokenizer.ignore(Number(c))),a-=BigInt(DsdiffToken_1.ChunkHeader64.len)+s.chunkSize,debug$2(`Parsing sound-property-chunks, remainingSize=${a}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const s=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",s)}}async handleChannelChunks(a){debug$2(`Parsing channel-chunks, remainingSize=${a}`);const s=[];for(;a>=FourCC_1.FourCcToken.len;){const o=await this.tokenizer.readToken(FourCC_1.FourCcToken);debug$2(`Channel[ID=${o}]`),s.push(o),a-=BigInt(FourCC_1.FourCcToken.len)}return debug$2(`Channels: ${s.join(", ")}`),s}}DsdiffParser$1.DsdiffParser=DsdiffParser;var MatroskaParser$1={},MatroskaDtd={};Object.defineProperty(MatroskaDtd,"__esModule",{value:!0});MatroskaDtd.elements=void 0;const types_1$1=types;MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:types_1$1.DataType.uint},17143:{name:"ebmlReadVersion",value:types_1$1.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:types_1$1.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:types_1$1.DataType.uint},17026:{name:"docType",value:types_1$1.DataType.string},17031:{name:"docTypeVersion",value:types_1$1.DataType.uint},17029:{name:"docTypeReadVersion",value:types_1$1.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:types_1$1.DataType.binary},21420:{name:"seekPosition",value:types_1$1.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:types_1$1.DataType.uid},29572:{name:"filename",value:types_1$1.DataType.string},3979555:{name:"prevUID",value:types_1$1.DataType.uid},3965867:{name:"prevFilename",value:types_1$1.DataType.string},4110627:{name:"nextUID",value:types_1$1.DataType.uid},4096955:{name:"nextFilename",value:types_1$1.DataType.string},2807729:{name:"timecodeScale",value:types_1$1.DataType.uint},17545:{name:"duration",value:types_1$1.DataType.float},17505:{name:"dateUTC",value:types_1$1.DataType.uint},31657:{name:"title",value:types_1$1.DataType.string},19840:{name:"muxingApp",value:types_1$1.DataType.string},22337:{name:"writingApp",value:types_1$1.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:types_1$1.DataType.uid},163:{name:"unknown",value:types_1$1.DataType.binary},167:{name:"position",value:types_1$1.DataType.uid},171:{name:"prevSize",value:types_1$1.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:types_1$1.DataType.uint},29637:{name:"uid",value:types_1$1.DataType.uid},131:{name:"trackType",value:types_1$1.DataType.uint},185:{name:"flagEnabled",value:types_1$1.DataType.bool},136:{name:"flagDefault",value:types_1$1.DataType.bool},21930:{name:"flagForced",value:types_1$1.DataType.bool},156:{name:"flagLacing",value:types_1$1.DataType.bool},28135:{name:"minCache",value:types_1$1.DataType.uint},28136:{name:"maxCache",value:types_1$1.DataType.uint},2352003:{name:"defaultDuration",value:types_1$1.DataType.uint},2306383:{name:"timecodeScale",value:types_1$1.DataType.float},21358:{name:"name",value:types_1$1.DataType.string},2274716:{name:"language",value:types_1$1.DataType.string},134:{name:"codecID",value:types_1$1.DataType.string},25506:{name:"codecPrivate",value:types_1$1.DataType.binary},2459272:{name:"codecName",value:types_1$1.DataType.string},3839639:{name:"codecSettings",value:types_1$1.DataType.string},3883072:{name:"codecInfoUrl",value:types_1$1.DataType.string},2536e3:{name:"codecDownloadUrl",value:types_1$1.DataType.string},170:{name:"codecDecodeAll",value:types_1$1.DataType.bool},28587:{name:"trackOverlay",value:types_1$1.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:types_1$1.DataType.bool},21432:{name:"stereoMode",value:types_1$1.DataType.uint},176:{name:"pixelWidth",value:types_1$1.DataType.uint},186:{name:"pixelHeight",value:types_1$1.DataType.uint},21680:{name:"displayWidth",value:types_1$1.DataType.uint},21690:{name:"displayHeight",value:types_1$1.DataType.uint},21683:{name:"aspectRatioType",value:types_1$1.DataType.uint},3061028:{name:"colourSpace",value:types_1$1.DataType.uint},3126563:{name:"gammaValue",value:types_1$1.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:types_1$1.DataType.float},30901:{name:"outputSamplingFrequency",value:types_1$1.DataType.float},159:{name:"channels",value:types_1$1.DataType.uint},148:{name:"channels",value:types_1$1.DataType.uint},32123:{name:"channelPositions",value:types_1$1.DataType.binary},25188:{name:"bitDepth",value:types_1$1.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:types_1$1.DataType.uint},20530:{name:"scope",value:types_1$1.DataType.bool},20531:{name:"type",value:types_1$1.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:types_1$1.DataType.uint},16981:{name:"contentCompSettings",value:types_1$1.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:types_1$1.DataType.uint},18402:{name:"contentEncKeyID",value:types_1$1.DataType.binary},18403:{name:"contentSignature ",value:types_1$1.DataType.binary},18404:{name:"ContentSigKeyID  ",value:types_1$1.DataType.binary},18405:{name:"contentSigAlgo ",value:types_1$1.DataType.uint},18406:{name:"contentSigHashAlgo ",value:types_1$1.DataType.uint}}},25188:{name:"bitDepth",value:types_1$1.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:types_1$1.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:types_1$1.DataType.uint},241:{name:"clusterPosition",value:types_1$1.DataType.uint},21368:{name:"blockNumber",value:types_1$1.DataType.uint},234:{name:"codecState",value:types_1$1.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:types_1$1.DataType.uint},151:{name:"cluster",value:types_1$1.DataType.uint},21343:{name:"number",value:types_1$1.DataType.uint},235:{name:"codecState",value:types_1$1.DataType.uint}}},240:{name:"relativePosition",value:types_1$1.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:types_1$1.DataType.string},18030:{name:"name",value:types_1$1.DataType.string},18016:{name:"mimeType",value:types_1$1.DataType.string},18012:{name:"data",value:types_1$1.DataType.binary},18094:{name:"uid",value:types_1$1.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:types_1$1.DataType.uid},145:{name:"timeStart",value:types_1$1.DataType.uint},146:{name:"timeEnd",value:types_1$1.DataType.uid},152:{name:"hidden",value:types_1$1.DataType.bool},17816:{name:"enabled",value:types_1$1.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:types_1$1.DataType.uid},128:{name:"display",container:{133:{name:"string",value:types_1$1.DataType.string},17276:{name:"language ",value:types_1$1.DataType.string},17278:{name:"country ",value:types_1$1.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:types_1$1.DataType.uid},25540:{name:"tagChapterUID",value:types_1$1.DataType.uint},25542:{name:"tagAttachmentUID",value:types_1$1.DataType.uid},25546:{name:"targetType",value:types_1$1.DataType.string},26826:{name:"targetTypeValue",value:types_1$1.DataType.uint},25545:{name:"tagEditionUID",value:types_1$1.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:types_1$1.DataType.string},17543:{name:"string",value:types_1$1.DataType.string},17541:{name:"binary",value:types_1$1.DataType.binary},17530:{name:"language",value:types_1$1.DataType.string},17531:{name:"languageIETF",value:types_1$1.DataType.string},17540:{name:"default",value:types_1$1.DataType.bool}}}}}}}}}};Object.defineProperty(MatroskaParser$1,"__esModule",{value:!0});MatroskaParser$1.MatroskaParser=void 0;const token_types_1=lib$1,debug_1$1=browserExports$1,BasicParser_1=BasicParser$1,types_1=types,matroskaDtd=MatroskaDtd,debug$1=(0,debug_1$1.default)("music-metadata:parser:matroska");class MatroskaParser extends BasicParser_1.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(types_1.DataType.uint,a=>this.readUint(a)),this.parserMap.set(types_1.DataType.string,a=>this.readString(a)),this.parserMap.set(types_1.DataType.binary,a=>this.readBuffer(a)),this.parserMap.set(types_1.DataType.uid,async a=>await this.readUint(a)===1),this.parserMap.set(types_1.DataType.bool,a=>this.readFlag(a)),this.parserMap.set(types_1.DataType.float,a=>this.readFloat(a))}init(a,s,o){return super.init(a,s,o),this}async parse(){const a=await this.parseContainer(matroskaDtd.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${a.ebml.docType}`),a.segment){const s=a.segment.info;if(s){const c=s.timecodeScale?s.timecodeScale:1e6;if(typeof s.duration=="number"){const d=s.duration*c/1e9;this.addTag("segment:title",s.title),this.metadata.setFormat("duration",d)}}const o=a.segment.tracks;if(o&&o.entries){o.entries.forEach(d=>{const h={codecName:d.codecID.replace("A_","").replace("V_",""),codecSettings:d.codecSettings,flagDefault:d.flagDefault,flagLacing:d.flagLacing,flagEnabled:d.flagEnabled,language:d.language,name:d.name,type:d.trackType,audio:d.audio,video:d.video};this.metadata.addStreamInfo(h)});const c=o.entries.filter(d=>d.trackType===types_1.TrackType.audio.valueOf()).reduce((d,h)=>!d||!d.flagDefault&&h.flagDefault||h.trackNumber&&h.trackNumber<d.trackNumber?h:d,null);c&&(this.metadata.setFormat("codec",c.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",c.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",c.audio.channels)),a.segment.tags&&a.segment.tags.tag.forEach(d=>{const h=d.target,g=h!=null&&h.targetTypeValue?types_1.TargetType[h.targetTypeValue]:h!=null&&h.targetType?h.targetType:"track";d.simpleTags.forEach(_=>{const $=_.string?_.string:_.binary;this.addTag(`${g}:${_.name}`,$)})}),a.segment.attachments&&a.segment.attachments.attachedFiles.filter(d=>d.mimeType.startsWith("image/")).map(d=>({data:d.data,format:d.mimeType,description:d.description,name:d.name})).forEach(d=>{this.addTag("picture",d)})}}}async parseContainer(a,s,o){const c={};for(;this.tokenizer.position<s;){let d;try{d=await this.readElement()}catch(g){if(g.message==="End-Of-Stream")break;throw g}const h=a[d.id];if(h)if(debug$1(`Element: name=${h.name}, container=${!!h.container}`),h.container){const g=await this.parseContainer(h.container,d.len>=0?this.tokenizer.position+d.len:-1,o.concat([h.name]));h.multiple?(c[h.name]||(c[h.name]=[]),c[h.name].push(g)):c[h.name]=g}else c[h.name]=await this.parserMap.get(h.value)(d);else switch(d.id){case 236:this.padding+=d.len,await this.tokenizer.ignore(d.len);break;default:debug$1(`parseEbml: path=${o.join("/")}, unknown element: id=${d.id.toString(16)}`),this.padding+=d.len,await this.tokenizer.ignore(d.len)}}return c}async readVintData(a){const s=await this.tokenizer.peekNumber(token_types_1.UINT8);let o=128,c=1;for(;!(s&o);){if(c>a)throw new Error("VINT value exceeding maximum size");++c,o>>=1}const d=Buffer.alloc(c);return await this.tokenizer.readBuffer(d),d}async readElement(){const a=await this.readVintData(this.ebmlMaxIDLength),s=await this.readVintData(this.ebmlMaxSizeLength);s[0]^=128>>s.length-1;const o=Math.min(6,s.length);return{id:a.readUIntBE(0,a.length),len:s.readUIntBE(s.length-o,o)}}isMaxValue(a){if(a.length===this.ebmlMaxSizeLength){for(let s=1;s<this.ebmlMaxSizeLength;++s)if(a[s]!==255)return!1;return!0}return!1}async readFloat(a){switch(a.len){case 0:return 0;case 4:return this.tokenizer.readNumber(token_types_1.Float32_BE);case 8:return this.tokenizer.readNumber(token_types_1.Float64_BE);case 10:return this.tokenizer.readNumber(token_types_1.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${a.len}`)}}async readFlag(a){return await this.readUint(a)===1}async readUint(a){const s=await this.readBuffer(a),o=Math.min(6,a.len);return s.readUIntBE(a.len-o,o)}async readString(a){return(await this.tokenizer.readToken(new token_types_1.StringType(a.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(a){const s=Buffer.alloc(a.len);return await this.tokenizer.readBuffer(s),s}addTag(a,s){this.metadata.addTag("matroska",a,s)}}MatroskaParser$1.MatroskaParser=MatroskaParser;Object.defineProperty(ParserFactory$1,"__esModule",{value:!0});ParserFactory$1.ParserFactory=ParserFactory$1.parseHttpContentType=void 0;const FileType=core,ContentType=contentType,MimeType=mediaTyper,debug_1=browserExports$1,MetadataCollector_1=MetadataCollector$1,AiffParser_1=AiffParser,APEv2Parser_1$1=APEv2Parser$1,AsfParser_1=AsfParser$1,FlacParser_1=FlacParser$1,MP4Parser_1=MP4Parser$1,MpegParser_1=MpegParser$1,musepack_1=musepack,OggParser_1=OggParser$1,WaveParser_1=WaveParser$1,WavPackParser_1=WavPackParser$1,DsfParser_1=DsfParser$1,DsdiffParser_1=DsdiffParser$1,MatroskaParser_1=MatroskaParser$1,debug=(0,debug_1.default)("music-metadata:parser:factory");function parseHttpContentType(e){const a=ContentType.parse(e),s=MimeType.parse(a.type);return{type:s.type,subtype:s.subtype,suffix:s.suffix,parameters:a.parameters}}ParserFactory$1.parseHttpContentType=parseHttpContentType;async function parse(e,a,s={}){const o=await ParserFactory.loadParser(a),c=new MetadataCollector_1.MetadataCollector(s);return await o.init(c,e,s).parse(),c.toCommonMetadata()}class ParserFactory{static async parseOnContentType(a,s){const{mimeType:o,path:c,url:d}=await a.fileInfo,h=ParserFactory.getParserIdForMimeType(o)||ParserFactory.getParserIdForExtension(c)||ParserFactory.getParserIdForExtension(d);return h||debug("No parser found for MIME-type / extension: "+o),this.parse(a,h,s)}static async parse(a,s,o){if(!s){debug("Guess parser on content...");const c=Buffer.alloc(4100);if(await a.peekBuffer(c,{mayBeLess:!0}),a.fileInfo.path&&(s=this.getParserIdForExtension(a.fileInfo.path)),!s){const d=await FileType.fromBuffer(c);if(!d)throw new Error("Failed to determine audio format");if(debug(`Guessed file type is mime=${d.mime}, extension=${d.ext}`),s=ParserFactory.getParserIdForMimeType(d.mime),!s)throw new Error("Guessed MIME-type not supported: "+d.mime)}}return parse(a,s,o)}static getParserIdForExtension(a){if(!a)return;switch(this.getExtension(a).toLocaleLowerCase()||a){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(a){switch(a){case"aiff":return new AiffParser_1.AIFFParser;case"adts":case"mpeg":return new MpegParser_1.MpegParser;case"apev2":return new APEv2Parser_1$1.APEv2Parser;case"asf":return new AsfParser_1.AsfParser;case"dsf":return new DsfParser_1.DsfParser;case"dsdiff":return new DsdiffParser_1.DsdiffParser;case"flac":return new FlacParser_1.FlacParser;case"mp4":return new MP4Parser_1.MP4Parser;case"musepack":return new musepack_1.default;case"ogg":return new OggParser_1.OggParser;case"riff":return new WaveParser_1.WaveParser;case"wavpack":return new WavPackParser_1.WavPackParser;case"matroska":return new MatroskaParser_1.MatroskaParser;default:throw new Error(`Unknown parser type: ${a}`)}}static getExtension(a){const s=a.lastIndexOf(".");return s===-1?"":a.slice(s)}static getParserIdForMimeType(a){let s;try{s=parseHttpContentType(a)}catch{debug(`Invalid HTTP Content-Type header value: ${a}`);return}const o=s.subtype.indexOf("x-")===0?s.subtype.substring(2):s.subtype;switch(s.type){case"audio":switch(o){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(o){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(o){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}}ParserFactory$1.ParserFactory=ParserFactory;var RandomUint8ArrayReader$1={};Object.defineProperty(RandomUint8ArrayReader$1,"__esModule",{value:!0});RandomUint8ArrayReader$1.RandomUint8ArrayReader=void 0;class RandomUint8ArrayReader{constructor(a){this.uint8Array=a,this.fileSize=a.length}async randomRead(a,s,o,c){return a.set(this.uint8Array.subarray(c,c+o),s),o}}RandomUint8ArrayReader$1.RandomUint8ArrayReader=RandomUint8ArrayReader;var Lyrics3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLyricsHeaderLength=e.endTag2=void 0,e.endTag2="LYRICS200";async function a(s){if(s.fileSize>=143){const o=Buffer.alloc(15);await s.randomRead(o,0,o.length,s.fileSize-143);const c=o.toString("binary");if(c.substr(6)===e.endTag2)return parseInt(c.substr(0,6),10)+15}return 0}e.getLyricsHeaderLength=a})(Lyrics3);Object.defineProperty(core$2,"__esModule",{value:!0});core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const strtok3=core$1,ParserFactory_1=ParserFactory$1,RandomUint8ArrayReader_1=RandomUint8ArrayReader$1,APEv2Parser_1=APEv2Parser$1,ID3v1Parser_1=ID3v1Parser,Lyrics3_1=Lyrics3;function parseStream(e,a,s={}){return parseFromTokenizer(strtok3.fromStream(e,typeof a=="string"?{mimeType:a}:a),s)}core$2.parseStream=parseStream;async function parseBuffer(e,a,s={}){const o=new RandomUint8ArrayReader_1.RandomUint8ArrayReader(e);await scanAppendingHeaders(o,s);const c=strtok3.fromBuffer(e,typeof a=="string"?{mimeType:a}:a);return parseFromTokenizer(c,s)}core$2.parseBuffer=parseBuffer;function parseFromTokenizer(e,a){return ParserFactory_1.ParserFactory.parseOnContentType(e,a)}core$2.parseFromTokenizer=parseFromTokenizer;function orderTags(e){const a={};for(const s of e)(a[s.id]=a[s.id]||[]).push(s.value);return a}core$2.orderTags=orderTags;function ratingToStars(e){return e===void 0?0:1+Math.round(e*4)}core$2.ratingToStars=ratingToStars;function selectCover(e){return e?e.reduce((a,s)=>s.name&&s.name.toLowerCase()in["front","cover","cover (front)"]?s:a):null}core$2.selectCover=selectCover;async function scanAppendingHeaders(e,a={}){let s=e.fileSize;if(await(0,ID3v1Parser_1.hasID3v1Header)(e)){s-=128;const o=await(0,Lyrics3_1.getLyricsHeaderLength)(e);s-=o}a.apeHeader=await APEv2Parser_1.APEv2Parser.findApeFooterOffset(e,s)}core$2.scanAppendingHeaders=scanAppendingHeaders;var lib={},browser$1={exports:{}},stream={exports:{}};let AggregateError$2=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let s="";for(let o=0;o<a.length;o++)s+=`    ${a[o].stack}
`;super(s),this.name="AggregateError",this.errors=a}};var primordials={AggregateError:AggregateError$2,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,a){return e.includes(a)},ArrayPrototypeIndexOf(e,a){return e.indexOf(a)},ArrayPrototypeJoin(e,a){return e.join(a)},ArrayPrototypeMap(e,a){return e.map(a)},ArrayPrototypePop(e,a){return e.pop(a)},ArrayPrototypePush(e,a){return e.push(a)},ArrayPrototypeSlice(e,a,s){return e.slice(a,s)},Error,FunctionPrototypeCall(e,a,...s){return e.call(a,...s)},FunctionPrototypeSymbolHasInstance(e,a){return Function.prototype[Symbol.hasInstance].call(e,a)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,a){return Object.defineProperties(e,a)},ObjectDefineProperty(e,a,s){return Object.defineProperty(e,a,s)},ObjectGetOwnPropertyDescriptor(e,a){return Object.getOwnPropertyDescriptor(e,a)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,a){return Object.setPrototypeOf(e,a)},Promise,PromisePrototypeCatch(e,a){return e.catch(a)},PromisePrototypeThen(e,a,s){return e.then(a,s)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,a){return e.test(a)},SafeSet:Set,String,StringPrototypeSlice(e,a,s){return e.slice(a,s)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,a,s){return e.set(a,s)},Boolean,Uint8Array},util={exports:{}},inspect$2={format(e,...a){return e.replace(/%([sdifj])/g,function(...[s,o]){const c=a.shift();return o==="f"?c.toFixed(6):o==="j"?JSON.stringify(c):o==="s"&&typeof c=="object"?`${c.constructor!==Object?c.constructor.name:""} {}`.trim():c.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}};const{format,inspect:inspect$1}=inspect$2,{AggregateError:CustomAggregateError}=primordials,AggregateError$1=globalThis.AggregateError||CustomAggregateError,kIsNodeError=Symbol("kIsNodeError"),kTypes=["string","function","number","object","Function","Object","boolean","bigint","symbol"],classRegExp=/^([A-Z][a-z0-9]*)+$/,nodeInternalPrefix="__node_internal_",codes$1={};function assert(e,a){if(!e)throw new codes$1.ERR_INTERNAL_ASSERTION(a)}function addNumericalSeparator(e){let a="",s=e.length;const o=e[0]==="-"?1:0;for(;s>=o+4;s-=3)a=`_${e.slice(s-3,s)}${a}`;return`${e.slice(0,s)}${a}`}function getMessage(e,a,s){if(typeof a=="function")return assert(a.length<=s.length,`Code: ${e}; The provided arguments length (${s.length}) does not match the required ones (${a.length}).`),a(...s);const o=(a.match(/%[dfijoOs]/g)||[]).length;return assert(o===s.length,`Code: ${e}; The provided arguments length (${s.length}) does not match the required ones (${o}).`),s.length===0?a:format(a,...s)}function E(e,a,s){s||(s=Error);class o extends s{constructor(...d){super(getMessage(e,a,d))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(o.prototype,{name:{value:s.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),o.prototype.code=e,o.prototype[kIsNodeError]=!0,codes$1[e]=o}function hideStackFrames$1(e){const a=nodeInternalPrefix+e.name;return Object.defineProperty(e,"name",{value:a}),e}function aggregateTwoErrors$2(e,a){if(e&&a&&e!==a){if(Array.isArray(a.errors))return a.errors.push(e),a;const s=new AggregateError$1([a,e],a.message);return s.code=a.code,s}return e||a}let AbortError$5=class extends Error{constructor(a="The operation was aborted",s=void 0){if(s!==void 0&&typeof s!="object")throw new codes$1.ERR_INVALID_ARG_TYPE("options","Object",s);super(a,s),this.code="ABORT_ERR",this.name="AbortError"}};E("ERR_ASSERTION","%s",Error);E("ERR_INVALID_ARG_TYPE",(e,a,s)=>{assert(typeof e=="string","'name' must be a string"),Array.isArray(a)||(a=[a]);let o="The ";e.endsWith(" argument")?o+=`${e} `:o+=`"${e}" ${e.includes(".")?"property":"argument"} `,o+="must be ";const c=[],d=[],h=[];for(const _ of a)assert(typeof _=="string","All expected entries have to be of type string"),kTypes.includes(_)?c.push(_.toLowerCase()):classRegExp.test(_)?d.push(_):(assert(_!=="object",'The value "object" should be written as "Object"'),h.push(_));if(d.length>0){const _=c.indexOf("object");_!==-1&&(c.splice(c,_,1),d.push("Object"))}if(c.length>0){switch(c.length){case 1:o+=`of type ${c[0]}`;break;case 2:o+=`one of type ${c[0]} or ${c[1]}`;break;default:{const _=c.pop();o+=`one of type ${c.join(", ")}, or ${_}`}}(d.length>0||h.length>0)&&(o+=" or ")}if(d.length>0){switch(d.length){case 1:o+=`an instance of ${d[0]}`;break;case 2:o+=`an instance of ${d[0]} or ${d[1]}`;break;default:{const _=d.pop();o+=`an instance of ${d.join(", ")}, or ${_}`}}h.length>0&&(o+=" or ")}switch(h.length){case 0:break;case 1:h[0].toLowerCase()!==h[0]&&(o+="an "),o+=`${h[0]}`;break;case 2:o+=`one of ${h[0]} or ${h[1]}`;break;default:{const _=h.pop();o+=`one of ${h.join(", ")}, or ${_}`}}if(s==null)o+=`. Received ${s}`;else if(typeof s=="function"&&s.name)o+=`. Received function ${s.name}`;else if(typeof s=="object"){var g;if((g=s.constructor)!==null&&g!==void 0&&g.name)o+=`. Received an instance of ${s.constructor.name}`;else{const _=inspect$1(s,{depth:-1});o+=`. Received ${_}`}}else{let _=inspect$1(s,{colors:!1});_.length>25&&(_=`${_.slice(0,25)}...`),o+=`. Received type ${typeof s} (${_})`}return o},TypeError);E("ERR_INVALID_ARG_VALUE",(e,a,s="is invalid")=>{let o=inspect$1(a);return o.length>128&&(o=o.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${s}. Received ${o}`},TypeError);E("ERR_INVALID_RETURN_VALUE",(e,a,s)=>{var o;const c=s!=null&&(o=s.constructor)!==null&&o!==void 0&&o.name?`instance of ${s.constructor.name}`:`type ${typeof s}`;return`Expected ${e} to be returned from the "${a}" function but got ${c}.`},TypeError);E("ERR_MISSING_ARGS",(...e)=>{assert(e.length>0,"At least one arg needs to be specified");let a;const s=e.length;switch(e=(Array.isArray(e)?e:[e]).map(o=>`"${o}"`).join(" or "),s){case 1:a+=`The ${e[0]} argument`;break;case 2:a+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const o=e.pop();a+=`The ${e.join(", ")}, and ${o} arguments`}break}return`${a} must be specified`},TypeError);E("ERR_OUT_OF_RANGE",(e,a,s)=>{assert(a,'Missing "range" argument');let o;if(Number.isInteger(s)&&Math.abs(s)>2**32)o=addNumericalSeparator(String(s));else if(typeof s=="bigint"){o=String(s);const c=BigInt(2)**BigInt(32);(s>c||s<-c)&&(o=addNumericalSeparator(o)),o+="n"}else o=inspect$1(s);return`The value of "${e}" is out of range. It must be ${a}. Received ${o}`},RangeError);E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);E("ERR_STREAM_WRITE_AFTER_END","write after end",Error);E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var errors={AbortError:AbortError$5,aggregateTwoErrors:hideStackFrames$1(aggregateTwoErrors$2),hideStackFrames:hideStackFrames$1,codes:codes$1},browser={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser.exports;hasRequiredBrowser=1;const{AbortController:e,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser.exports=e,browser.exports.AbortSignal=a,browser.exports.default=e,browser.exports}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function e(a,s,o){return Function.prototype.apply.call(a,s,o)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:ReflectOwnKeys=function(a){return Object.getOwnPropertyNames(a)};function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}var NumberIsNaN$2=Number.isNaN||function e(a){return a!==a};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once$2;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if(typeof e!="number"||e<0||NumberIsNaN$2(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function e(a){if(typeof a!="number"||a<0||NumberIsNaN$2(a))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+a+".");return this._maxListeners=a,this};function _getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function e(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function e(a){for(var s=[],o=1;o<arguments.length;o++)s.push(arguments[o]);var c=a==="error",d=this._events;if(d!==void 0)c=c&&d.error===void 0;else if(!c)return!1;if(c){var h;if(s.length>0&&(h=s[0]),h instanceof Error)throw h;var g=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw g.context=h,g}var _=d[a];if(_===void 0)return!1;if(typeof _=="function")ReflectApply(_,this,s);else for(var $=_.length,_e=arrayClone(_,$),o=0;o<$;++o)ReflectApply(_e[o],this,s);return!0};function _addListener(e,a,s,o){var c,d,h;if(checkListener(s),d=e._events,d===void 0?(d=e._events=Object.create(null),e._eventsCount=0):(d.newListener!==void 0&&(e.emit("newListener",a,s.listener?s.listener:s),d=e._events),h=d[a]),h===void 0)h=d[a]=s,++e._eventsCount;else if(typeof h=="function"?h=d[a]=o?[s,h]:[h,s]:o?h.unshift(s):h.push(s),c=_getMaxListeners(e),c>0&&h.length>c&&!h.warned){h.warned=!0;var g=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(a)+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning",g.emitter=e,g.type=a,g.count=h.length,ProcessEmitWarning(g)}return e}EventEmitter.prototype.addListener=function e(a,s){return _addListener(this,a,s,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function e(a,s){return _addListener(this,a,s,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,a,s){var o={fired:!1,wrapFn:void 0,target:e,type:a,listener:s},c=onceWrapper.bind(o);return c.listener=s,o.wrapFn=c,c}EventEmitter.prototype.once=function e(a,s){return checkListener(s),this.on(a,_onceWrap(this,a,s)),this};EventEmitter.prototype.prependOnceListener=function e(a,s){return checkListener(s),this.prependListener(a,_onceWrap(this,a,s)),this};EventEmitter.prototype.removeListener=function e(a,s){var o,c,d,h,g;if(checkListener(s),c=this._events,c===void 0)return this;if(o=c[a],o===void 0)return this;if(o===s||o.listener===s)--this._eventsCount===0?this._events=Object.create(null):(delete c[a],c.removeListener&&this.emit("removeListener",a,o.listener||s));else if(typeof o!="function"){for(d=-1,h=o.length-1;h>=0;h--)if(o[h]===s||o[h].listener===s){g=o[h].listener,d=h;break}if(d<0)return this;d===0?o.shift():spliceOne(o,d),o.length===1&&(c[a]=o[0]),c.removeListener!==void 0&&this.emit("removeListener",a,g||s)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function e(a){var s,o,c;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[a]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[a]),this;if(arguments.length===0){var d=Object.keys(o),h;for(c=0;c<d.length;++c)h=d[c],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(s=o[a],typeof s=="function")this.removeListener(a,s);else if(s!==void 0)for(c=s.length-1;c>=0;c--)this.removeListener(a,s[c]);return this};function _listeners(e,a,s){var o=e._events;if(o===void 0)return[];var c=o[a];return c===void 0?[]:typeof c=="function"?s?[c.listener||c]:[c]:s?unwrapListeners(c):arrayClone(c,c.length)}EventEmitter.prototype.listeners=function e(a){return _listeners(this,a,!0)};EventEmitter.prototype.rawListeners=function e(a){return _listeners(this,a,!1)};EventEmitter.listenerCount=function(e,a){return typeof e.listenerCount=="function"?e.listenerCount(a):listenerCount.call(e,a)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(e){var a=this._events;if(a!==void 0){var s=a[e];if(typeof s=="function")return 1;if(s!==void 0)return s.length}return 0}EventEmitter.prototype.eventNames=function e(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(e,a){for(var s=new Array(a),o=0;o<a;++o)s[o]=e[o];return s}function spliceOne(e,a){for(;a+1<e.length;a++)e[a]=e[a+1];e.pop()}function unwrapListeners(e){for(var a=new Array(e.length),s=0;s<a.length;++s)a[s]=e[s].listener||e[s];return a}function once$2(e,a){return new Promise(function(s,o){function c(h){e.removeListener(a,d),o(h)}function d(){typeof e.removeListener=="function"&&e.removeListener("error",c),s([].slice.call(arguments))}eventTargetAgnosticAddListener(e,a,d,{once:!0}),a!=="error"&&addErrorHandlerIfEventEmitter(e,c,{once:!0})})}function addErrorHandlerIfEventEmitter(e,a,s){typeof e.on=="function"&&eventTargetAgnosticAddListener(e,"error",a,s)}function eventTargetAgnosticAddListener(e,a,s,o){if(typeof e.on=="function")o.once?e.once(a,s):e.on(a,s);else if(typeof e.addEventListener=="function")e.addEventListener(a,function c(d){o.once&&e.removeEventListener(a,c),s(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var eventsExports=events.exports;(function(e){const a=buffer,{format:s,inspect:o}=inspect$2,{codes:{ERR_INVALID_ARG_TYPE:c}}=errors,{kResistStopPropagation:d,AggregateError:h,SymbolDispose:g}=primordials,_=globalThis.AbortSignal||requireBrowser().AbortSignal,$=globalThis.AbortController||requireBrowser().AbortController,_e=Object.getPrototypeOf(async function(){}).constructor,tt=globalThis.Blob||a.Blob,nt=typeof tt<"u"?function(gt){return gt instanceof tt}:function(gt){return!1},lt=(ot,gt)=>{if(ot!==void 0&&(ot===null||typeof ot!="object"||!("aborted"in ot)))throw new c(gt,"AbortSignal",ot)},dt=(ot,gt)=>{if(typeof ot!="function")throw new c(gt,"Function",ot)};e.exports={AggregateError:h,kEmptyObject:Object.freeze({}),once(ot){let gt=!1;return function(...pt){gt||(gt=!0,ot.apply(this,pt))}},createDeferredPromise:function(){let ot,gt;return{promise:new Promise((mt,ht)=>{ot=mt,gt=ht}),resolve:ot,reject:gt}},promisify(ot){return new Promise((gt,pt)=>{ot((mt,...ht)=>mt?pt(mt):gt(...ht))})},debuglog(){return function(){}},format:s,inspect:o,types:{isAsyncFunction(ot){return ot instanceof _e},isArrayBufferView(ot){return ArrayBuffer.isView(ot)}},isBlob:nt,deprecate(ot,gt){return ot},addAbortListener:eventsExports.addAbortListener||function(gt,pt){if(gt===void 0)throw new c("signal","AbortSignal",gt);lt(gt,"signal"),dt(pt,"listener");let mt;return gt.aborted?queueMicrotask(()=>pt()):(gt.addEventListener("abort",pt,{__proto__:null,once:!0,[d]:!0}),mt=()=>{gt.removeEventListener("abort",pt)}),{__proto__:null,[g](){var ht;(ht=mt)===null||ht===void 0||ht()}}},AbortSignalAny:_.any||function(gt){if(gt.length===1)return gt[0];const pt=new $,mt=()=>pt.abort();return gt.forEach(ht=>{lt(ht,"signals"),ht.addEventListener("abort",mt,{once:!0})}),pt.signal.addEventListener("abort",()=>{gt.forEach(ht=>ht.removeEventListener("abort",mt))},{once:!0}),pt.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util);var utilExports=util.exports,operators={};const{ArrayIsArray:ArrayIsArray$2,ArrayPrototypeIncludes,ArrayPrototypeJoin,ArrayPrototypeMap,NumberIsInteger:NumberIsInteger$1,NumberIsNaN:NumberIsNaN$1,NumberMAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER,NumberParseInt,ObjectPrototypeHasOwnProperty,RegExpPrototypeExec,String:String$1,StringPrototypeToUpperCase,StringPrototypeTrim}=primordials,{hideStackFrames,codes:{ERR_SOCKET_BAD_PORT,ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$4,ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$3,ERR_OUT_OF_RANGE:ERR_OUT_OF_RANGE$1,ERR_UNKNOWN_SIGNAL}}=errors,{normalizeEncoding:normalizeEncoding$1}=utilExports,{isAsyncFunction,isArrayBufferView:isArrayBufferView$1}=utilExports.types,validateInteger$2=hideStackFrames((e,a,s=NumberMIN_SAFE_INTEGER,o=NumberMAX_SAFE_INTEGER)=>{if(typeof e!="number")throw new ERR_INVALID_ARG_TYPE$4(a,"number",e);if(!NumberIsInteger$1(e))throw new ERR_OUT_OF_RANGE$1(a,"an integer",e);if(e<s||e>o)throw new ERR_OUT_OF_RANGE$1(a,`>= ${s} && <= ${o}`,e)});hideStackFrames((e,a,s=-2147483648,o=2147483647)=>{if(typeof e!="number")throw new ERR_INVALID_ARG_TYPE$4(a,"number",e);if(!NumberIsInteger$1(e))throw new ERR_OUT_OF_RANGE$1(a,"an integer",e);if(e<s||e>o)throw new ERR_OUT_OF_RANGE$1(a,`>= ${s} && <= ${o}`,e)});hideStackFrames((e,a,s=!1)=>{if(typeof e!="number")throw new ERR_INVALID_ARG_TYPE$4(a,"number",e);if(!NumberIsInteger$1(e))throw new ERR_OUT_OF_RANGE$1(a,"an integer",e);const o=s?1:0,c=4294967295;if(e<o||e>c)throw new ERR_OUT_OF_RANGE$1(a,`>= ${o} && <= ${c}`,e)});hideStackFrames((e,a,s)=>{if(!ArrayPrototypeIncludes(s,e)){const c="must be one of: "+ArrayPrototypeJoin(ArrayPrototypeMap(s,d=>typeof d=="string"?`'${d}'`:String$1(d)),", ");throw new ERR_INVALID_ARG_VALUE$3(a,e,c)}});function validateBoolean$1(e,a){if(typeof e!="boolean")throw new ERR_INVALID_ARG_TYPE$4(a,"boolean",e)}function getOwnPropertyValueOrDefault(e,a,s){return e==null||!ObjectPrototypeHasOwnProperty(e,a)?s:e[a]}const validateObject$2=hideStackFrames((e,a,s=null)=>{const o=getOwnPropertyValueOrDefault(s,"allowArray",!1),c=getOwnPropertyValueOrDefault(s,"allowFunction",!1);if(!getOwnPropertyValueOrDefault(s,"nullable",!1)&&e===null||!o&&ArrayIsArray$2(e)||typeof e!="object"&&(!c||typeof e!="function"))throw new ERR_INVALID_ARG_TYPE$4(a,"Object",e)});hideStackFrames((e,a)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new ERR_INVALID_ARG_TYPE$4(a,"a dictionary",e)});hideStackFrames((e,a,s=0)=>{if(!ArrayIsArray$2(e))throw new ERR_INVALID_ARG_TYPE$4(a,"Array",e);if(e.length<s){const o=`must be longer than ${s}`;throw new ERR_INVALID_ARG_VALUE$3(a,e,o)}});hideStackFrames((e,a="buffer")=>{if(!isArrayBufferView$1(e))throw new ERR_INVALID_ARG_TYPE$4(a,["Buffer","TypedArray","DataView"],e)});const validateAbortSignal$3=hideStackFrames((e,a)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new ERR_INVALID_ARG_TYPE$4(a,"AbortSignal",e)}),validateFunction$2=hideStackFrames((e,a)=>{if(typeof e!="function")throw new ERR_INVALID_ARG_TYPE$4(a,"Function",e)});hideStackFrames((e,a)=>{if(typeof e!="function"||isAsyncFunction(e))throw new ERR_INVALID_ARG_TYPE$4(a,"Function",e)});hideStackFrames((e,a)=>{if(e!==void 0)throw new ERR_INVALID_ARG_TYPE$4(a,"undefined",e)});var validators$2={validateBoolean:validateBoolean$1,validateFunction:validateFunction$2,validateInteger:validateInteger$2,validateObject:validateObject$2,validateAbortSignal:validateAbortSignal$3},endOfStream={exports:{}};const{SymbolAsyncIterator:SymbolAsyncIterator$2,SymbolIterator:SymbolIterator$2,SymbolFor}=primordials,kIsDestroyed$1=SymbolFor("nodejs.stream.destroyed"),kIsErrored=SymbolFor("nodejs.stream.errored"),kIsReadable=SymbolFor("nodejs.stream.readable"),kIsWritable=SymbolFor("nodejs.stream.writable"),kIsDisturbed=SymbolFor("nodejs.stream.disturbed"),kIsClosedPromise$1=SymbolFor("nodejs.webstream.isClosedPromise"),kControllerErrorFunction=SymbolFor("nodejs.webstream.controllerErrorFunction");function isReadableNodeStream$2(e,a=!1){var s;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!a||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((s=e._readableState)===null||s===void 0?void 0:s.readable)!==!1)&&(!e._writableState||e._readableState))}function isWritableNodeStream$1(e){var a;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((a=e._writableState)===null||a===void 0?void 0:a.writable)!==!1))}function isDuplexNodeStream(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function isNodeStream$4(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function isReadableStream$4(e){return!!(e&&!isNodeStream$4(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function isWritableStream$2(e){return!!(e&&!isNodeStream$4(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function isTransformStream$2(e){return!!(e&&!isNodeStream$4(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function isWebStream$2(e){return isReadableStream$4(e)||isWritableStream$2(e)||isTransformStream$2(e)}function isIterable$2(e,a){return e==null?!1:a===!0?typeof e[SymbolAsyncIterator$2]=="function":a===!1?typeof e[SymbolIterator$2]=="function":typeof e[SymbolAsyncIterator$2]=="function"||typeof e[SymbolIterator$2]=="function"}function isDestroyed$1(e){if(!isNodeStream$4(e))return null;const a=e._writableState,s=e._readableState,o=a||s;return!!(e.destroyed||e[kIsDestroyed$1]||o!=null&&o.destroyed)}function isWritableEnded(e){if(!isWritableNodeStream$1(e))return null;if(e.writableEnded===!0)return!0;const a=e._writableState;return a!=null&&a.errored?!1:typeof(a==null?void 0:a.ended)!="boolean"?null:a.ended}function isWritableFinished$1(e,a){if(!isWritableNodeStream$1(e))return null;if(e.writableFinished===!0)return!0;const s=e._writableState;return s!=null&&s.errored?!1:typeof(s==null?void 0:s.finished)!="boolean"?null:!!(s.finished||a===!1&&s.ended===!0&&s.length===0)}function isReadableFinished$2(e,a){if(!isReadableNodeStream$2(e))return null;const s=e._readableState;return s!=null&&s.errored?!1:typeof(s==null?void 0:s.endEmitted)!="boolean"?null:!!(s.endEmitted||a===!1&&s.ended===!0&&s.length===0)}function isReadable$3(e){return e&&e[kIsReadable]!=null?e[kIsReadable]:typeof(e==null?void 0:e.readable)!="boolean"?null:isDestroyed$1(e)?!1:isReadableNodeStream$2(e)&&e.readable&&!isReadableFinished$2(e)}function isWritable$3(e){return e&&e[kIsWritable]!=null?e[kIsWritable]:typeof(e==null?void 0:e.writable)!="boolean"?null:isDestroyed$1(e)?!1:isWritableNodeStream$1(e)&&e.writable&&!isWritableEnded(e)}function isFinished$1(e,a){return isNodeStream$4(e)?isDestroyed$1(e)?!0:!((a==null?void 0:a.readable)!==!1&&isReadable$3(e)||(a==null?void 0:a.writable)!==!1&&isWritable$3(e)):null}function isWritableErrored$1(e){var a,s;return isNodeStream$4(e)?e.writableErrored?e.writableErrored:(a=(s=e._writableState)===null||s===void 0?void 0:s.errored)!==null&&a!==void 0?a:null:null}function isReadableErrored$1(e){var a,s;return isNodeStream$4(e)?e.readableErrored?e.readableErrored:(a=(s=e._readableState)===null||s===void 0?void 0:s.errored)!==null&&a!==void 0?a:null:null}function isClosed$1(e){if(!isNodeStream$4(e))return null;if(typeof e.closed=="boolean")return e.closed;const a=e._writableState,s=e._readableState;return typeof(a==null?void 0:a.closed)=="boolean"||typeof(s==null?void 0:s.closed)=="boolean"?(a==null?void 0:a.closed)||(s==null?void 0:s.closed):typeof e._closed=="boolean"&&isOutgoingMessage(e)?e._closed:null}function isOutgoingMessage(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function isServerResponse(e){return typeof e._sent100=="boolean"&&isOutgoingMessage(e)}function isServerRequest$1(e){var a;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((a=e.req)===null||a===void 0?void 0:a.upgradeOrConnect)===void 0}function willEmitClose(e){if(!isNodeStream$4(e))return null;const a=e._writableState,s=e._readableState,o=a||s;return!o&&isServerResponse(e)||!!(o&&o.autoDestroy&&o.emitClose&&o.closed===!1)}function isDisturbed(e){var a;return!!(e&&((a=e[kIsDisturbed])!==null&&a!==void 0?a:e.readableDidRead||e.readableAborted))}function isErrored(e){var a,s,o,c,d,h,g,_,$,_e;return!!(e&&((a=(s=(o=(c=(d=(h=e[kIsErrored])!==null&&h!==void 0?h:e.readableErrored)!==null&&d!==void 0?d:e.writableErrored)!==null&&c!==void 0?c:(g=e._readableState)===null||g===void 0?void 0:g.errorEmitted)!==null&&o!==void 0?o:(_=e._writableState)===null||_===void 0?void 0:_.errorEmitted)!==null&&s!==void 0?s:($=e._readableState)===null||$===void 0?void 0:$.errored)!==null&&a!==void 0?a:!((_e=e._writableState)===null||_e===void 0)&&_e.errored))}var utils$2={isDestroyed:isDestroyed$1,kIsDestroyed:kIsDestroyed$1,isDisturbed,isErrored,isReadable:isReadable$3,kIsClosedPromise:kIsClosedPromise$1,kControllerErrorFunction,isClosed:isClosed$1,isDuplexNodeStream,isFinished:isFinished$1,isIterable:isIterable$2,isReadableNodeStream:isReadableNodeStream$2,isReadableStream:isReadableStream$4,isReadableFinished:isReadableFinished$2,isReadableErrored:isReadableErrored$1,isNodeStream:isNodeStream$4,isWebStream:isWebStream$2,isWritable:isWritable$3,isWritableNodeStream:isWritableNodeStream$1,isWritableStream:isWritableStream$2,isWritableFinished:isWritableFinished$1,isWritableErrored:isWritableErrored$1,isServerRequest:isServerRequest$1,willEmitClose,isTransformStream:isTransformStream$2};const process$4=browserExports$2,{AbortError:AbortError$4,codes}=errors,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$3,ERR_STREAM_PREMATURE_CLOSE:ERR_STREAM_PREMATURE_CLOSE$1}=codes,{kEmptyObject,once:once$1}=utilExports,{validateAbortSignal:validateAbortSignal$2,validateFunction:validateFunction$1,validateObject:validateObject$1,validateBoolean}=validators$2,{Promise:Promise$3,PromisePrototypeThen:PromisePrototypeThen$2,SymbolDispose:SymbolDispose$1}=primordials,{isClosed,isReadable:isReadable$2,isReadableNodeStream:isReadableNodeStream$1,isReadableStream:isReadableStream$3,isReadableFinished:isReadableFinished$1,isReadableErrored,isWritable:isWritable$2,isWritableNodeStream,isWritableStream:isWritableStream$1,isWritableFinished,isWritableErrored,isNodeStream:isNodeStream$3,willEmitClose:_willEmitClose,kIsClosedPromise}=utils$2;let addAbortListener$1;function isRequest$2(e){return e.setHeader&&typeof e.abort=="function"}const nop=()=>{};function eos$2(e,a,s){var o,c;if(arguments.length===2?(s=a,a=kEmptyObject):a==null?a=kEmptyObject:validateObject$1(a,"options"),validateFunction$1(s,"callback"),validateAbortSignal$2(a.signal,"options.signal"),s=once$1(s),isReadableStream$3(e)||isWritableStream$1(e))return eosWeb(e,a,s);if(!isNodeStream$3(e))throw new ERR_INVALID_ARG_TYPE$3("stream",["ReadableStream","WritableStream","Stream"],e);const d=(o=a.readable)!==null&&o!==void 0?o:isReadableNodeStream$1(e),h=(c=a.writable)!==null&&c!==void 0?c:isWritableNodeStream(e),g=e._writableState,_=e._readableState,$=()=>{e.writable||nt()};let _e=_willEmitClose(e)&&isReadableNodeStream$1(e)===d&&isWritableNodeStream(e)===h,tt=isWritableFinished(e,!1);const nt=()=>{tt=!0,e.destroyed&&(_e=!1),!(_e&&(!e.readable||d))&&(!d||lt)&&s.call(e)};let lt=isReadableFinished$1(e,!1);const dt=()=>{lt=!0,e.destroyed&&(_e=!1),!(_e&&(!e.writable||h))&&(!h||tt)&&s.call(e)},ot=_t=>{s.call(e,_t)};let gt=isClosed(e);const pt=()=>{gt=!0;const _t=isWritableErrored(e)||isReadableErrored(e);if(_t&&typeof _t!="boolean")return s.call(e,_t);if(d&&!lt&&isReadableNodeStream$1(e,!0)&&!isReadableFinished$1(e,!1))return s.call(e,new ERR_STREAM_PREMATURE_CLOSE$1);if(h&&!tt&&!isWritableFinished(e,!1))return s.call(e,new ERR_STREAM_PREMATURE_CLOSE$1);s.call(e)},mt=()=>{gt=!0;const _t=isWritableErrored(e)||isReadableErrored(e);if(_t&&typeof _t!="boolean")return s.call(e,_t);s.call(e)},ht=()=>{e.req.on("finish",nt)};isRequest$2(e)?(e.on("complete",nt),_e||e.on("abort",pt),e.req?ht():e.on("request",ht)):h&&!g&&(e.on("end",$),e.on("close",$)),!_e&&typeof e.aborted=="boolean"&&e.on("aborted",pt),e.on("end",dt),e.on("finish",nt),a.error!==!1&&e.on("error",ot),e.on("close",pt),gt?process$4.nextTick(pt):g!=null&&g.errorEmitted||_!=null&&_.errorEmitted?_e||process$4.nextTick(mt):(!d&&(!_e||isReadable$2(e))&&(tt||isWritable$2(e)===!1)||!h&&(!_e||isWritable$2(e))&&(lt||isReadable$2(e)===!1)||_&&e.req&&e.aborted)&&process$4.nextTick(mt);const St=()=>{s=nop,e.removeListener("aborted",pt),e.removeListener("complete",nt),e.removeListener("abort",pt),e.removeListener("request",ht),e.req&&e.req.removeListener("finish",nt),e.removeListener("end",$),e.removeListener("close",$),e.removeListener("finish",nt),e.removeListener("end",dt),e.removeListener("error",ot),e.removeListener("close",pt)};if(a.signal&&!gt){const _t=()=>{const Tt=s;St(),Tt.call(e,new AbortError$4(void 0,{cause:a.signal.reason}))};if(a.signal.aborted)process$4.nextTick(_t);else{addAbortListener$1=addAbortListener$1||utilExports.addAbortListener;const Tt=addAbortListener$1(a.signal,_t),ut=s;s=once$1((...bt)=>{Tt[SymbolDispose$1](),ut.apply(e,bt)})}}return St}function eosWeb(e,a,s){let o=!1,c=nop;if(a.signal)if(c=()=>{o=!0,s.call(e,new AbortError$4(void 0,{cause:a.signal.reason}))},a.signal.aborted)process$4.nextTick(c);else{addAbortListener$1=addAbortListener$1||utilExports.addAbortListener;const h=addAbortListener$1(a.signal,c),g=s;s=once$1((..._)=>{h[SymbolDispose$1](),g.apply(e,_)})}const d=(...h)=>{o||process$4.nextTick(()=>s.apply(e,h))};return PromisePrototypeThen$2(e[kIsClosedPromise].promise,d,d),nop}function finished$1(e,a){var s;let o=!1;return a===null&&(a=kEmptyObject),(s=a)!==null&&s!==void 0&&s.cleanup&&(validateBoolean(a.cleanup,"cleanup"),o=a.cleanup),new Promise$3((c,d)=>{const h=eos$2(e,a,g=>{o&&h(),g?d(g):c()})})}endOfStream.exports=eos$2;endOfStream.exports.finished=finished$1;var endOfStreamExports=endOfStream.exports;const process$3=browserExports$2,{aggregateTwoErrors:aggregateTwoErrors$1,codes:{ERR_MULTIPLE_CALLBACK},AbortError:AbortError$3}=errors,{Symbol:Symbol$3}=primordials,{kIsDestroyed,isDestroyed,isFinished,isServerRequest}=utils$2,kDestroy=Symbol$3("kDestroy"),kConstruct=Symbol$3("kConstruct");function checkError(e,a,s){e&&(e.stack,a&&!a.errored&&(a.errored=e),s&&!s.errored&&(s.errored=e))}function destroy(e,a){const s=this._readableState,o=this._writableState,c=o||s;return o!=null&&o.destroyed||s!=null&&s.destroyed?(typeof a=="function"&&a(),this):(checkError(e,o,s),o&&(o.destroyed=!0),s&&(s.destroyed=!0),c.constructed?_destroy(this,e,a):this.once(kDestroy,function(d){_destroy(this,aggregateTwoErrors$1(d,e),a)}),this)}function _destroy(e,a,s){let o=!1;function c(d){if(o)return;o=!0;const h=e._readableState,g=e._writableState;checkError(d,g,h),g&&(g.closed=!0),h&&(h.closed=!0),typeof s=="function"&&s(d),d?process$3.nextTick(emitErrorCloseNT,e,d):process$3.nextTick(emitCloseNT,e)}try{e._destroy(a||null,c)}catch(d){c(d)}}function emitErrorCloseNT(e,a){emitErrorNT(e,a),emitCloseNT(e)}function emitCloseNT(e){const a=e._readableState,s=e._writableState;s&&(s.closeEmitted=!0),a&&(a.closeEmitted=!0),(s!=null&&s.emitClose||a!=null&&a.emitClose)&&e.emit("close")}function emitErrorNT(e,a){const s=e._readableState,o=e._writableState;o!=null&&o.errorEmitted||s!=null&&s.errorEmitted||(o&&(o.errorEmitted=!0),s&&(s.errorEmitted=!0),e.emit("error",a))}function undestroy(){const e=this._readableState,a=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),a&&(a.constructed=!0,a.destroyed=!1,a.closed=!1,a.closeEmitted=!1,a.errored=null,a.errorEmitted=!1,a.finalCalled=!1,a.prefinished=!1,a.ended=a.writable===!1,a.ending=a.writable===!1,a.finished=a.writable===!1)}function errorOrDestroy(e,a,s){const o=e._readableState,c=e._writableState;if(c!=null&&c.destroyed||o!=null&&o.destroyed)return this;o!=null&&o.autoDestroy||c!=null&&c.autoDestroy?e.destroy(a):a&&(a.stack,c&&!c.errored&&(c.errored=a),o&&!o.errored&&(o.errored=a),s?process$3.nextTick(emitErrorNT,e,a):emitErrorNT(e,a))}function construct(e,a){if(typeof e._construct!="function")return;const s=e._readableState,o=e._writableState;s&&(s.constructed=!1),o&&(o.constructed=!1),e.once(kConstruct,a),!(e.listenerCount(kConstruct)>1)&&process$3.nextTick(constructNT,e)}function constructNT(e){let a=!1;function s(o){if(a){errorOrDestroy(e,o??new ERR_MULTIPLE_CALLBACK);return}a=!0;const c=e._readableState,d=e._writableState,h=d||c;c&&(c.constructed=!0),d&&(d.constructed=!0),h.destroyed?e.emit(kDestroy,o):o?errorOrDestroy(e,o,!0):process$3.nextTick(emitConstructNT,e)}try{e._construct(o=>{process$3.nextTick(s,o)})}catch(o){process$3.nextTick(s,o)}}function emitConstructNT(e){e.emit(kConstruct)}function isRequest$1(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function emitCloseLegacy(e){e.emit("close")}function emitErrorCloseLegacy(e,a){e.emit("error",a),process$3.nextTick(emitCloseLegacy,e)}function destroyer$2(e,a){!e||isDestroyed(e)||(!a&&!isFinished(e)&&(a=new AbortError$3),isServerRequest(e)?(e.socket=null,e.destroy(a)):isRequest$1(e)?e.abort():isRequest$1(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(a):typeof e.close=="function"?e.close():a?process$3.nextTick(emitErrorCloseLegacy,e,a):process$3.nextTick(emitCloseLegacy,e),e.destroyed||(e[kIsDestroyed]=!0))}var destroy_1={construct,destroyer:destroyer$2,destroy,undestroy,errorOrDestroy};const{ArrayIsArray:ArrayIsArray$1,ObjectSetPrototypeOf:ObjectSetPrototypeOf$2}=primordials,{EventEmitter:EE}=eventsExports;function Stream(e){EE.call(this,e)}ObjectSetPrototypeOf$2(Stream.prototype,EE.prototype);ObjectSetPrototypeOf$2(Stream,EE);Stream.prototype.pipe=function(e,a){const s=this;function o(_e){e.writable&&e.write(_e)===!1&&s.pause&&s.pause()}s.on("data",o);function c(){s.readable&&s.resume&&s.resume()}e.on("drain",c),!e._isStdio&&(!a||a.end!==!1)&&(s.on("end",h),s.on("close",g));let d=!1;function h(){d||(d=!0,e.end())}function g(){d||(d=!0,typeof e.destroy=="function"&&e.destroy())}function _(_e){$(),EE.listenerCount(this,"error")===0&&this.emit("error",_e)}prependListener(s,"error",_),prependListener(e,"error",_);function $(){s.removeListener("data",o),e.removeListener("drain",c),s.removeListener("end",h),s.removeListener("close",g),s.removeListener("error",_),e.removeListener("error",_),s.removeListener("end",$),s.removeListener("close",$),e.removeListener("close",$)}return s.on("end",$),s.on("close",$),e.on("close",$),e.emit("pipe",s),e};function prependListener(e,a,s){if(typeof e.prependListener=="function")return e.prependListener(a,s);!e._events||!e._events[a]?e.on(a,s):ArrayIsArray$1(e._events[a])?e._events[a].unshift(s):e._events[a]=[s,e._events[a]]}var legacy={Stream,prependListener},addAbortSignal={exports:{}};(function(e){const{SymbolDispose:a}=primordials,{AbortError:s,codes:o}=errors,{isNodeStream:c,isWebStream:d,kControllerErrorFunction:h}=utils$2,g=endOfStreamExports,{ERR_INVALID_ARG_TYPE:_}=o;let $;const _e=(tt,nt)=>{if(typeof tt!="object"||!("aborted"in tt))throw new _(nt,"AbortSignal",tt)};e.exports.addAbortSignal=function(nt,lt){if(_e(nt,"signal"),!c(lt)&&!d(lt))throw new _("stream",["ReadableStream","WritableStream","Stream"],lt);return e.exports.addAbortSignalNoValidate(nt,lt)},e.exports.addAbortSignalNoValidate=function(tt,nt){if(typeof tt!="object"||!("aborted"in tt))return nt;const lt=c(nt)?()=>{nt.destroy(new s(void 0,{cause:tt.reason}))}:()=>{nt[h](new s(void 0,{cause:tt.reason}))};if(tt.aborted)lt();else{$=$||utilExports.addAbortListener;const dt=$(tt,lt);g(nt,dt[a])}return nt}})(addAbortSignal);var addAbortSignalExports=addAbortSignal.exports;const{StringPrototypeSlice,SymbolIterator:SymbolIterator$1,TypedArrayPrototypeSet,Uint8Array:Uint8Array$1}=primordials,{Buffer:Buffer$3}=buffer,{inspect}=utilExports;var buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){const s={data:a,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}unshift(a){const s={data:a,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}shift(){if(this.length===0)return;const a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let s=this.head,o=""+s.data;for(;(s=s.next)!==null;)o+=a+s.data;return o}concat(a){if(this.length===0)return Buffer$3.alloc(0);const s=Buffer$3.allocUnsafe(a>>>0);let o=this.head,c=0;for(;o;)TypedArrayPrototypeSet(s,o.data,c),c+=o.data.length,o=o.next;return s}consume(a,s){const o=this.head.data;if(a<o.length){const c=o.slice(0,a);return this.head.data=o.slice(a),c}return a===o.length?this.shift():s?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[SymbolIterator$1](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let s="",o=this.head,c=0;do{const d=o.data;if(a>d.length)s+=d,a-=d.length;else{a===d.length?(s+=d,++c,o.next?this.head=o.next:this.head=this.tail=null):(s+=StringPrototypeSlice(d,0,a),this.head=o,o.data=StringPrototypeSlice(d,a));break}++c}while((o=o.next)!==null);return this.length-=c,s}_getBuffer(a){const s=Buffer$3.allocUnsafe(a),o=a;let c=this.head,d=0;do{const h=c.data;if(a>h.length)TypedArrayPrototypeSet(s,h,o-a),a-=h.length;else{a===h.length?(TypedArrayPrototypeSet(s,h,o-a),++d,c.next?this.head=c.next:this.head=this.tail=null):(TypedArrayPrototypeSet(s,new Uint8Array$1(h.buffer,h.byteOffset,a),o-a),this.head=c,c.data=h.slice(a));break}++d}while((c=c.next)!==null);return this.length-=d,s}[Symbol.for("nodejs.util.inspect.custom")](a,s){return inspect(this,{...s,depth:0,customInspect:!1})}};const{MathFloor:MathFloor$1,NumberIsInteger}=primordials,{validateInteger:validateInteger$1}=validators$2,{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$2}=errors.codes;let defaultHighWaterMarkBytes=16*1024,defaultHighWaterMarkObjectMode=16;function highWaterMarkFrom(e,a,s){return e.highWaterMark!=null?e.highWaterMark:a?e[s]:null}function getDefaultHighWaterMark(e){return e?defaultHighWaterMarkObjectMode:defaultHighWaterMarkBytes}function setDefaultHighWaterMark(e,a){validateInteger$1(a,"value",0),e?defaultHighWaterMarkObjectMode=a:defaultHighWaterMarkBytes=a}function getHighWaterMark$1(e,a,s,o){const c=highWaterMarkFrom(a,o,s);if(c!=null){if(!NumberIsInteger(c)||c<0){const d=o?`options.${s}`:"options.highWaterMark";throw new ERR_INVALID_ARG_VALUE$2(d,c)}return MathFloor$1(c)}return getDefaultHighWaterMark(e.objectMode)}var state={getHighWaterMark:getHighWaterMark$1,getDefaultHighWaterMark,setDefaultHighWaterMark},string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,a){var s=buffer,o=s.Buffer;function c(h,g){for(var _ in h)g[_]=h[_]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=s:(c(s,a),a.Buffer=d);function d(h,g,_){return o(h,g,_)}d.prototype=Object.create(o.prototype),c(o,d),d.from=function(h,g,_){if(typeof h=="number")throw new TypeError("Argument must not be a number");return o(h,g,_)},d.alloc=function(h,g,_){if(typeof h!="number")throw new TypeError("Argument must be a number");var $=o(h);return g!==void 0?typeof _=="string"?$.fill(g,_):$.fill(g):$.fill(0),$},d.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return o(h)},d.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(h)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,Buffer$2=safeBufferExports.Buffer,isEncoding=Buffer$2.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(e){if(!e)return"utf8";for(var a;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(a)return;e=(""+e).toLowerCase(),a=!0}}function normalizeEncoding(e){var a=_normalizeEncoding(e);if(typeof a!="string"&&(Buffer$2.isEncoding===isEncoding||!isEncoding(e)))throw new Error("Unknown encoding: "+e);return a||e}string_decoder.StringDecoder=StringDecoder;function StringDecoder(e){this.encoding=normalizeEncoding(e);var a;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,a=4;break;case"utf8":this.fillLast=utf8FillLast,a=4;break;case"base64":this.text=base64Text,this.end=base64End,a=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$2.allocUnsafe(a)}StringDecoder.prototype.write=function(e){if(e.length===0)return"";var a,s;if(this.lastNeed){if(a=this.fillLast(e),a===void 0)return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<e.length?a?a+this.text(e,s):this.text(e,s):a||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function utf8CheckByte(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function utf8CheckIncomplete(e,a,s){var o=a.length-1;if(o<s)return 0;var c=utf8CheckByte(a[o]);return c>=0?(c>0&&(e.lastNeed=c-1),c):--o<s||c===-2?0:(c=utf8CheckByte(a[o]),c>=0?(c>0&&(e.lastNeed=c-2),c):--o<s||c===-2?0:(c=utf8CheckByte(a[o]),c>=0?(c>0&&(c===2?c=0:e.lastNeed=c-3),c):0))}function utf8CheckExtraBytes(e,a,s){if((a[0]&192)!==128)return e.lastNeed=0,"";if(e.lastNeed>1&&a.length>1){if((a[1]&192)!==128)return e.lastNeed=1,"";if(e.lastNeed>2&&a.length>2&&(a[2]&192)!==128)return e.lastNeed=2,""}}function utf8FillLast(e){var a=this.lastTotal-this.lastNeed,s=utf8CheckExtraBytes(this,e);if(s!==void 0)return s;if(this.lastNeed<=e.length)return e.copy(this.lastChar,a,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,a,0,e.length),this.lastNeed-=e.length}function utf8Text(e,a){var s=utf8CheckIncomplete(this,e,a);if(!this.lastNeed)return e.toString("utf8",a);this.lastTotal=s;var o=e.length-(s-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",a,o)}function utf8End(e){var a=e&&e.length?this.write(e):"";return this.lastNeed?a+"":a}function utf16Text(e,a){if((e.length-a)%2===0){var s=e.toString("utf16le",a);if(s){var o=s.charCodeAt(s.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",a,e.length-1)}function utf16End(e){var a=e&&e.length?this.write(e):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,s)}return a}function base64Text(e,a){var s=(e.length-a)%3;return s===0?e.toString("base64",a):(this.lastNeed=3-s,this.lastTotal=3,s===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",a,e.length-s))}function base64End(e){var a=e&&e.length?this.write(e):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}const process$2=browserExports$2,{PromisePrototypeThen:PromisePrototypeThen$1,SymbolAsyncIterator:SymbolAsyncIterator$1,SymbolIterator}=primordials,{Buffer:Buffer$1}=buffer,{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$2,ERR_STREAM_NULL_VALUES}=errors.codes;function from(e,a,s){let o;if(typeof a=="string"||a instanceof Buffer$1)return new e({objectMode:!0,...s,read(){this.push(a),this.push(null)}});let c;if(a&&a[SymbolAsyncIterator$1])c=!0,o=a[SymbolAsyncIterator$1]();else if(a&&a[SymbolIterator])c=!1,o=a[SymbolIterator]();else throw new ERR_INVALID_ARG_TYPE$2("iterable",["Iterable"],a);const d=new e({objectMode:!0,highWaterMark:1,...s});let h=!1;d._read=function(){h||(h=!0,_())},d._destroy=function($,_e){PromisePrototypeThen$1(g($),()=>process$2.nextTick(_e,$),tt=>process$2.nextTick(_e,tt||$))};async function g($){const _e=$!=null,tt=typeof o.throw=="function";if(_e&&tt){const{value:nt,done:lt}=await o.throw($);if(await nt,lt)return}if(typeof o.return=="function"){const{value:nt}=await o.return();await nt}}async function _(){for(;;){try{const{value:$,done:_e}=c?await o.next():o.next();if(_e)d.push(null);else{const tt=$&&typeof $.then=="function"?await $:$;if(tt===null)throw h=!1,new ERR_STREAM_NULL_VALUES;if(d.push(tt))continue;h=!1}}catch($){d.destroy($)}break}}return d}var from_1=from,readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const e=browserExports$2,{ArrayPrototypeIndexOf:a,NumberIsInteger:s,NumberIsNaN:o,NumberParseInt:c,ObjectDefineProperties:d,ObjectKeys:h,ObjectSetPrototypeOf:g,Promise:_,SafeSet:$,SymbolAsyncDispose:_e,SymbolAsyncIterator:tt,Symbol:nt}=primordials;readable=yr,yr.ReadableState=Ur;const{EventEmitter:lt}=eventsExports,{Stream:dt,prependListener:ot}=legacy,{Buffer:gt}=buffer,{addAbortSignal:pt}=addAbortSignalExports,mt=endOfStreamExports;let ht=utilExports.debuglog("stream",vt=>{ht=vt});const St=buffer_list,_t=destroy_1,{getHighWaterMark:Tt,getDefaultHighWaterMark:ut}=state,{aggregateTwoErrors:bt,codes:{ERR_INVALID_ARG_TYPE:zt,ERR_METHOD_NOT_IMPLEMENTED:Ht,ERR_OUT_OF_RANGE:Qt,ERR_STREAM_PUSH_AFTER_EOF:sr,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Ut},AbortError:vr}=errors,{validateObject:xr}=validators$2,mr=nt("kPaused"),{StringDecoder:br}=string_decoder,Gt=from_1;g(yr.prototype,dt.prototype),g(yr,dt);const nr=()=>{},{errorOrDestroy:or}=_t,ir=1,wr=2,fr=4,Ar=8,Lr=16,zr=32,Hr=64,Jr=128,pr=256,hn=512,nn=1024,Pr=2048,Nt=4096,Ot=8192,qt=16384,gr=32768,hr=65536,Fr=1<<17,Or=1<<18;function Dr(vt){return{enumerable:!1,get(){return(this.state&vt)!==0},set(wt){wt?this.state|=vt:this.state&=~vt}}}d(Ur.prototype,{objectMode:Dr(ir),ended:Dr(wr),endEmitted:Dr(fr),reading:Dr(Ar),constructed:Dr(Lr),sync:Dr(zr),needReadable:Dr(Hr),emittedReadable:Dr(Jr),readableListening:Dr(pr),resumeScheduled:Dr(hn),errorEmitted:Dr(nn),emitClose:Dr(Pr),autoDestroy:Dr(Nt),destroyed:Dr(Ot),closed:Dr(qt),closeEmitted:Dr(gr),multiAwaitDrain:Dr(hr),readingMore:Dr(Fr),dataEmitted:Dr(Or)});function Ur(vt,wt,Yt){typeof Yt!="boolean"&&(Yt=wt instanceof requireDuplex()),this.state=Pr|Nt|Lr|zr,vt&&vt.objectMode&&(this.state|=ir),Yt&&vt&&vt.readableObjectMode&&(this.state|=ir),this.highWaterMark=vt?Tt(this,vt,"readableHighWaterMark",Yt):ut(!1),this.buffer=new St,this.length=0,this.pipes=[],this.flowing=null,this[mr]=null,vt&&vt.emitClose===!1&&(this.state&=~Pr),vt&&vt.autoDestroy===!1&&(this.state&=~Nt),this.errored=null,this.defaultEncoding=vt&&vt.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,vt&&vt.encoding&&(this.decoder=new br(vt.encoding),this.encoding=vt.encoding)}function yr(vt){if(!(this instanceof yr))return new yr(vt);const wt=this instanceof requireDuplex();this._readableState=new Ur(vt,this,wt),vt&&(typeof vt.read=="function"&&(this._read=vt.read),typeof vt.destroy=="function"&&(this._destroy=vt.destroy),typeof vt.construct=="function"&&(this._construct=vt.construct),vt.signal&&!wt&&pt(vt.signal,this)),dt.call(this,vt),_t.construct(this,()=>{this._readableState.needReadable&&Ct(this,this._readableState)})}yr.prototype.destroy=_t.destroy,yr.prototype._undestroy=_t.undestroy,yr.prototype._destroy=function(vt,wt){wt(vt)},yr.prototype[lt.captureRejectionSymbol]=function(vt){this.destroy(vt)},yr.prototype[_e]=function(){let vt;return this.destroyed||(vt=this.readableEnded?null:new vr,this.destroy(vt)),new _((wt,Yt)=>mt(this,Jt=>Jt&&Jt!==vt?Yt(Jt):wt(null)))},yr.prototype.push=function(vt,wt){return Gr(this,vt,wt,!1)},yr.prototype.unshift=function(vt,wt){return Gr(this,vt,wt,!0)};function Gr(vt,wt,Yt,Jt){ht("readableAddChunk",wt);const dr=vt._readableState;let kr;if(dr.state&ir||(typeof wt=="string"?(Yt=Yt||dr.defaultEncoding,dr.encoding!==Yt&&(Jt&&dr.encoding?wt=gt.from(wt,Yt).toString(dr.encoding):(wt=gt.from(wt,Yt),Yt=""))):wt instanceof gt?Yt="":dt._isUint8Array(wt)?(wt=dt._uint8ArrayToBuffer(wt),Yt=""):wt!=null&&(kr=new zt("chunk",["string","Buffer","Uint8Array"],wt))),kr)or(vt,kr);else if(wt===null)dr.state&=~Ar,rt(vt,dr);else if(dr.state&ir||wt&&wt.length>0)if(Jt)if(dr.state&fr)or(vt,new Ut);else{if(dr.destroyed||dr.errored)return!1;yn(vt,dr,wt,!0)}else if(dr.ended)or(vt,new sr);else{if(dr.destroyed||dr.errored)return!1;dr.state&=~Ar,dr.decoder&&!Yt?(wt=dr.decoder.write(wt),dr.objectMode||wt.length!==0?yn(vt,dr,wt,!1):Ct(vt,dr)):yn(vt,dr,wt,!1)}else Jt||(dr.state&=~Ar,Ct(vt,dr));return!dr.ended&&(dr.length<dr.highWaterMark||dr.length===0)}function yn(vt,wt,Yt,Jt){wt.flowing&&wt.length===0&&!wt.sync&&vt.listenerCount("data")>0?(wt.state&hr?wt.awaitDrainWriters.clear():wt.awaitDrainWriters=null,wt.dataEmitted=!0,vt.emit("data",Yt)):(wt.length+=wt.objectMode?1:Yt.length,Jt?wt.buffer.unshift(Yt):wt.buffer.push(Yt),wt.state&Hr&&it(vt)),Ct(vt,wt)}yr.prototype.isPaused=function(){const vt=this._readableState;return vt[mr]===!0||vt.flowing===!1},yr.prototype.setEncoding=function(vt){const wt=new br(vt);this._readableState.decoder=wt,this._readableState.encoding=this._readableState.decoder.encoding;const Yt=this._readableState.buffer;let Jt="";for(const dr of Yt)Jt+=wt.write(dr);return Yt.clear(),Jt!==""&&Yt.push(Jt),this._readableState.length=Jt.length,this};const qr=1073741824;function un(vt){if(vt>qr)throw new Qt("size","<= 1GiB",vt);return vt--,vt|=vt>>>1,vt|=vt>>>2,vt|=vt>>>4,vt|=vt>>>8,vt|=vt>>>16,vt++,vt}function ft(vt,wt){return vt<=0||wt.length===0&&wt.ended?0:wt.state&ir?1:o(vt)?wt.flowing&&wt.length?wt.buffer.first().length:wt.length:vt<=wt.length?vt:wt.ended?wt.length:0}yr.prototype.read=function(vt){ht("read",vt),vt===void 0?vt=NaN:s(vt)||(vt=c(vt,10));const wt=this._readableState,Yt=vt;if(vt>wt.highWaterMark&&(wt.highWaterMark=un(vt)),vt!==0&&(wt.state&=~Jr),vt===0&&wt.needReadable&&((wt.highWaterMark!==0?wt.length>=wt.highWaterMark:wt.length>0)||wt.ended))return ht("read: emitReadable",wt.length,wt.ended),wt.length===0&&wt.ended?$n(this):it(this),null;if(vt=ft(vt,wt),vt===0&&wt.ended)return wt.length===0&&$n(this),null;let Jt=(wt.state&Hr)!==0;if(ht("need readable",Jt),(wt.length===0||wt.length-vt<wt.highWaterMark)&&(Jt=!0,ht("length less than watermark",Jt)),wt.ended||wt.reading||wt.destroyed||wt.errored||!wt.constructed)Jt=!1,ht("reading, ended or constructing",Jt);else if(Jt){ht("do read"),wt.state|=Ar|zr,wt.length===0&&(wt.state|=Hr);try{this._read(wt.highWaterMark)}catch(kr){or(this,kr)}wt.state&=~zr,wt.reading||(vt=ft(Yt,wt))}let dr;return vt>0?dr=Dn(vt,wt):dr=null,dr===null?(wt.needReadable=wt.length<=wt.highWaterMark,vt=0):(wt.length-=vt,wt.multiAwaitDrain?wt.awaitDrainWriters.clear():wt.awaitDrainWriters=null),wt.length===0&&(wt.ended||(wt.needReadable=!0),Yt!==vt&&wt.ended&&$n(this)),dr!==null&&!wt.errorEmitted&&!wt.closeEmitted&&(wt.dataEmitted=!0,this.emit("data",dr)),dr};function rt(vt,wt){if(ht("onEofChunk"),!wt.ended){if(wt.decoder){const Yt=wt.decoder.end();Yt&&Yt.length&&(wt.buffer.push(Yt),wt.length+=wt.objectMode?1:Yt.length)}wt.ended=!0,wt.sync?it(vt):(wt.needReadable=!1,wt.emittedReadable=!0,xt(vt))}}function it(vt){const wt=vt._readableState;ht("emitReadable",wt.needReadable,wt.emittedReadable),wt.needReadable=!1,wt.emittedReadable||(ht("emitReadable",wt.flowing),wt.emittedReadable=!0,e.nextTick(xt,vt))}function xt(vt){const wt=vt._readableState;ht("emitReadable_",wt.destroyed,wt.length,wt.ended),!wt.destroyed&&!wt.errored&&(wt.length||wt.ended)&&(vt.emit("readable"),wt.emittedReadable=!1),wt.needReadable=!wt.flowing&&!wt.ended&&wt.length<=wt.highWaterMark,Ir(vt)}function Ct(vt,wt){!wt.readingMore&&wt.constructed&&(wt.readingMore=!0,e.nextTick(jt,vt,wt))}function jt(vt,wt){for(;!wt.reading&&!wt.ended&&(wt.length<wt.highWaterMark||wt.flowing&&wt.length===0);){const Yt=wt.length;if(ht("maybeReadMore read 0"),vt.read(0),Yt===wt.length)break}wt.readingMore=!1}yr.prototype._read=function(vt){throw new Ht("_read()")},yr.prototype.pipe=function(vt,wt){const Yt=this,Jt=this._readableState;Jt.pipes.length===1&&(Jt.multiAwaitDrain||(Jt.multiAwaitDrain=!0,Jt.awaitDrainWriters=new $(Jt.awaitDrainWriters?[Jt.awaitDrainWriters]:[]))),Jt.pipes.push(vt),ht("pipe count=%d opts=%j",Jt.pipes.length,wt);const kr=(!wt||wt.end!==!1)&&vt!==e.stdout&&vt!==e.stderr?Zn:kn;Jt.endEmitted?e.nextTick(kr):Yt.once("end",kr),vt.on("unpipe",Nr);function Nr(Xr,on){ht("onunpipe"),Xr===Yt&&on&&on.hasUnpiped===!1&&(on.hasUnpiped=!0,Mn())}function Zn(){ht("onend"),vt.end()}let an,Sn=!1;function Mn(){ht("cleanup"),vt.removeListener("close",sn),vt.removeListener("finish",vn),an&&vt.removeListener("drain",an),vt.removeListener("error",dn),vt.removeListener("unpipe",Nr),Yt.removeListener("end",Zn),Yt.removeListener("end",kn),Yt.removeListener("data",cn),Sn=!0,an&&Jt.awaitDrainWriters&&(!vt._writableState||vt._writableState.needDrain)&&an()}function Jn(){Sn||(Jt.pipes.length===1&&Jt.pipes[0]===vt?(ht("false write response, pause",0),Jt.awaitDrainWriters=vt,Jt.multiAwaitDrain=!1):Jt.pipes.length>1&&Jt.pipes.includes(vt)&&(ht("false write response, pause",Jt.awaitDrainWriters.size),Jt.awaitDrainWriters.add(vt)),Yt.pause()),an||(an=Wt(Yt,vt),vt.on("drain",an))}Yt.on("data",cn);function cn(Xr){ht("ondata");const on=vt.write(Xr);ht("dest.write",on),on===!1&&Jn()}function dn(Xr){if(ht("onerror",Xr),kn(),vt.removeListener("error",dn),vt.listenerCount("error")===0){const on=vt._writableState||vt._readableState;on&&!on.errorEmitted?or(vt,Xr):vt.emit("error",Xr)}}ot(vt,"error",dn);function sn(){vt.removeListener("finish",vn),kn()}vt.once("close",sn);function vn(){ht("onfinish"),vt.removeListener("close",sn),kn()}vt.once("finish",vn);function kn(){ht("unpipe"),Yt.unpipe(vt)}return vt.emit("pipe",Yt),vt.writableNeedDrain===!0?Jn():Jt.flowing||(ht("pipe resume"),Yt.resume()),vt};function Wt(vt,wt){return function(){const Jt=vt._readableState;Jt.awaitDrainWriters===wt?(ht("pipeOnDrain",1),Jt.awaitDrainWriters=null):Jt.multiAwaitDrain&&(ht("pipeOnDrain",Jt.awaitDrainWriters.size),Jt.awaitDrainWriters.delete(wt)),(!Jt.awaitDrainWriters||Jt.awaitDrainWriters.size===0)&&vt.listenerCount("data")&&vt.resume()}}yr.prototype.unpipe=function(vt){const wt=this._readableState,Yt={hasUnpiped:!1};if(wt.pipes.length===0)return this;if(!vt){const dr=wt.pipes;wt.pipes=[],this.pause();for(let kr=0;kr<dr.length;kr++)dr[kr].emit("unpipe",this,{hasUnpiped:!1});return this}const Jt=a(wt.pipes,vt);return Jt===-1?this:(wt.pipes.splice(Jt,1),wt.pipes.length===0&&this.pause(),vt.emit("unpipe",this,Yt),this)},yr.prototype.on=function(vt,wt){const Yt=dt.prototype.on.call(this,vt,wt),Jt=this._readableState;return vt==="data"?(Jt.readableListening=this.listenerCount("readable")>0,Jt.flowing!==!1&&this.resume()):vt==="readable"&&!Jt.endEmitted&&!Jt.readableListening&&(Jt.readableListening=Jt.needReadable=!0,Jt.flowing=!1,Jt.emittedReadable=!1,ht("on readable",Jt.length,Jt.reading),Jt.length?it(this):Jt.reading||e.nextTick($r,this)),Yt},yr.prototype.addListener=yr.prototype.on,yr.prototype.removeListener=function(vt,wt){const Yt=dt.prototype.removeListener.call(this,vt,wt);return vt==="readable"&&e.nextTick(Er,this),Yt},yr.prototype.off=yr.prototype.removeListener,yr.prototype.removeAllListeners=function(vt){const wt=dt.prototype.removeAllListeners.apply(this,arguments);return(vt==="readable"||vt===void 0)&&e.nextTick(Er,this),wt};function Er(vt){const wt=vt._readableState;wt.readableListening=vt.listenerCount("readable")>0,wt.resumeScheduled&&wt[mr]===!1?wt.flowing=!0:vt.listenerCount("data")>0?vt.resume():wt.readableListening||(wt.flowing=null)}function $r(vt){ht("readable nexttick read 0"),vt.read(0)}yr.prototype.resume=function(){const vt=this._readableState;return vt.flowing||(ht("resume"),vt.flowing=!vt.readableListening,er(this,vt)),vt[mr]=!1,this};function er(vt,wt){wt.resumeScheduled||(wt.resumeScheduled=!0,e.nextTick(Br,vt,wt))}function Br(vt,wt){ht("resume",wt.reading),wt.reading||vt.read(0),wt.resumeScheduled=!1,vt.emit("resume"),Ir(vt),wt.flowing&&!wt.reading&&vt.read(0)}yr.prototype.pause=function(){return ht("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ht("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[mr]=!0,this};function Ir(vt){const wt=vt._readableState;for(ht("flow",wt.flowing);wt.flowing&&vt.read()!==null;);}yr.prototype.wrap=function(vt){let wt=!1;vt.on("data",Jt=>{!this.push(Jt)&&vt.pause&&(wt=!0,vt.pause())}),vt.on("end",()=>{this.push(null)}),vt.on("error",Jt=>{or(this,Jt)}),vt.on("close",()=>{this.destroy()}),vt.on("destroy",()=>{this.destroy()}),this._read=()=>{wt&&vt.resume&&(wt=!1,vt.resume())};const Yt=h(vt);for(let Jt=1;Jt<Yt.length;Jt++){const dr=Yt[Jt];this[dr]===void 0&&typeof vt[dr]=="function"&&(this[dr]=vt[dr].bind(vt))}return this},yr.prototype[tt]=function(){return En(this)},yr.prototype.iterator=function(vt){return vt!==void 0&&xr(vt,"options"),En(this,vt)};function En(vt,wt){typeof vt.read!="function"&&(vt=yr.wrap(vt,{objectMode:!0}));const Yt=ur(vt,wt);return Yt.stream=vt,Yt}async function*ur(vt,wt){let Yt=nr;function Jt(Nr){this===vt?(Yt(),Yt=nr):Yt=Nr}vt.on("readable",Jt);let dr;const kr=mt(vt,{writable:!1},Nr=>{dr=Nr?bt(dr,Nr):null,Yt(),Yt=nr});try{for(;;){const Nr=vt.destroyed?null:vt.read();if(Nr!==null)yield Nr;else{if(dr)throw dr;if(dr===null)return;await new _(Jt)}}}catch(Nr){throw dr=bt(dr,Nr),dr}finally{(dr||(wt==null?void 0:wt.destroyOnReturn)!==!1)&&(dr===void 0||vt._readableState.autoDestroy)?_t.destroyer(vt,null):(vt.off("readable",Jt),kr())}}d(yr.prototype,{readable:{__proto__:null,get(){const vt=this._readableState;return!!vt&&vt.readable!==!1&&!vt.destroyed&&!vt.errorEmitted&&!vt.endEmitted},set(vt){this._readableState&&(this._readableState.readable=!!vt)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(vt){this._readableState&&(this._readableState.flowing=vt)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(vt){this._readableState&&(this._readableState.destroyed=vt)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),d(Ur.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[mr]!==!1},set(vt){this[mr]=!!vt}}}),yr._fromList=Dn;function Dn(vt,wt){if(wt.length===0)return null;let Yt;return wt.objectMode?Yt=wt.buffer.shift():!vt||vt>=wt.length?(wt.decoder?Yt=wt.buffer.join(""):wt.buffer.length===1?Yt=wt.buffer.first():Yt=wt.buffer.concat(wt.length),wt.buffer.clear()):Yt=wt.buffer.consume(vt,wt.decoder),Yt}function $n(vt){const wt=vt._readableState;ht("endReadable",wt.endEmitted),wt.endEmitted||(wt.ended=!0,e.nextTick(Ln,wt,vt))}function Ln(vt,wt){if(ht("endReadableNT",vt.endEmitted,vt.length),!vt.errored&&!vt.closeEmitted&&!vt.endEmitted&&vt.length===0){if(vt.endEmitted=!0,wt.emit("end"),wt.writable&&wt.allowHalfOpen===!1)e.nextTick(Yn,wt);else if(vt.autoDestroy){const Yt=wt._writableState;(!Yt||Yt.autoDestroy&&(Yt.finished||Yt.writable===!1))&&wt.destroy()}}}function Yn(vt){vt.writable&&!vt.writableEnded&&!vt.destroyed&&vt.end()}yr.from=function(vt,wt){return Gt(yr,vt,wt)};let Tn;function Qn(){return Tn===void 0&&(Tn={}),Tn}return yr.fromWeb=function(vt,wt){return Qn().newStreamReadableFromReadableStream(vt,wt)},yr.toWeb=function(vt,wt){return Qn().newReadableStreamFromStreamReadable(vt,wt)},yr.wrap=function(vt,wt){var Yt,Jt;return new yr({objectMode:(Yt=(Jt=vt.readableObjectMode)!==null&&Jt!==void 0?Jt:vt.objectMode)!==null&&Yt!==void 0?Yt:!0,...wt,destroy(dr,kr){_t.destroyer(vt,dr),kr(dr)}}).wrap(vt)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const e=browserExports$2,{ArrayPrototypeSlice:a,Error:s,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:c,ObjectDefineProperties:d,ObjectSetPrototypeOf:h,StringPrototypeToLowerCase:g,Symbol:_,SymbolHasInstance:$}=primordials;writable=xr,xr.WritableState=Ut;const{EventEmitter:_e}=eventsExports,tt=legacy.Stream,{Buffer:nt}=buffer,lt=destroy_1,{addAbortSignal:dt}=addAbortSignalExports,{getHighWaterMark:ot,getDefaultHighWaterMark:gt}=state,{ERR_INVALID_ARG_TYPE:pt,ERR_METHOD_NOT_IMPLEMENTED:mt,ERR_MULTIPLE_CALLBACK:ht,ERR_STREAM_CANNOT_PIPE:St,ERR_STREAM_DESTROYED:_t,ERR_STREAM_ALREADY_FINISHED:Tt,ERR_STREAM_NULL_VALUES:ut,ERR_STREAM_WRITE_AFTER_END:bt,ERR_UNKNOWN_ENCODING:zt}=errors.codes,{errorOrDestroy:Ht}=lt;h(xr.prototype,tt.prototype),h(xr,tt);function Qt(){}const sr=_("kOnFinished");function Ut(Nt,Ot,qt){typeof qt!="boolean"&&(qt=Ot instanceof requireDuplex()),this.objectMode=!!(Nt&&Nt.objectMode),qt&&(this.objectMode=this.objectMode||!!(Nt&&Nt.writableObjectMode)),this.highWaterMark=Nt?ot(this,Nt,"writableHighWaterMark",qt):gt(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const gr=!!(Nt&&Nt.decodeStrings===!1);this.decodeStrings=!gr,this.defaultEncoding=Nt&&Nt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=or.bind(void 0,Ot),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,vr(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Nt||Nt.emitClose!==!1,this.autoDestroy=!Nt||Nt.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[sr]=[]}function vr(Nt){Nt.buffered=[],Nt.bufferedIndex=0,Nt.allBuffers=!0,Nt.allNoop=!0}Ut.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},c(Ut.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function xr(Nt){const Ot=this instanceof requireDuplex();if(!Ot&&!o(xr,this))return new xr(Nt);this._writableState=new Ut(Nt,this,Ot),Nt&&(typeof Nt.write=="function"&&(this._write=Nt.write),typeof Nt.writev=="function"&&(this._writev=Nt.writev),typeof Nt.destroy=="function"&&(this._destroy=Nt.destroy),typeof Nt.final=="function"&&(this._final=Nt.final),typeof Nt.construct=="function"&&(this._construct=Nt.construct),Nt.signal&&dt(Nt.signal,this)),tt.call(this,Nt),lt.construct(this,()=>{const qt=this._writableState;qt.writing||Ar(this,qt),Jr(this,qt)})}c(xr,$,{__proto__:null,value:function(Nt){return o(this,Nt)?!0:this!==xr?!1:Nt&&Nt._writableState instanceof Ut}}),xr.prototype.pipe=function(){Ht(this,new St)};function mr(Nt,Ot,qt,gr){const hr=Nt._writableState;if(typeof qt=="function")gr=qt,qt=hr.defaultEncoding;else{if(!qt)qt=hr.defaultEncoding;else if(qt!=="buffer"&&!nt.isEncoding(qt))throw new zt(qt);typeof gr!="function"&&(gr=Qt)}if(Ot===null)throw new ut;if(!hr.objectMode)if(typeof Ot=="string")hr.decodeStrings!==!1&&(Ot=nt.from(Ot,qt),qt="buffer");else if(Ot instanceof nt)qt="buffer";else if(tt._isUint8Array(Ot))Ot=tt._uint8ArrayToBuffer(Ot),qt="buffer";else throw new pt("chunk",["string","Buffer","Uint8Array"],Ot);let Fr;return hr.ending?Fr=new bt:hr.destroyed&&(Fr=new _t("write")),Fr?(e.nextTick(gr,Fr),Ht(Nt,Fr,!0),Fr):(hr.pendingcb++,br(Nt,hr,Ot,qt,gr))}xr.prototype.write=function(Nt,Ot,qt){return mr(this,Nt,Ot,qt)===!0},xr.prototype.cork=function(){this._writableState.corked++},xr.prototype.uncork=function(){const Nt=this._writableState;Nt.corked&&(Nt.corked--,Nt.writing||Ar(this,Nt))},xr.prototype.setDefaultEncoding=function(Ot){if(typeof Ot=="string"&&(Ot=g(Ot)),!nt.isEncoding(Ot))throw new zt(Ot);return this._writableState.defaultEncoding=Ot,this};function br(Nt,Ot,qt,gr,hr){const Fr=Ot.objectMode?1:qt.length;Ot.length+=Fr;const Or=Ot.length<Ot.highWaterMark;return Or||(Ot.needDrain=!0),Ot.writing||Ot.corked||Ot.errored||!Ot.constructed?(Ot.buffered.push({chunk:qt,encoding:gr,callback:hr}),Ot.allBuffers&&gr!=="buffer"&&(Ot.allBuffers=!1),Ot.allNoop&&hr!==Qt&&(Ot.allNoop=!1)):(Ot.writelen=Fr,Ot.writecb=hr,Ot.writing=!0,Ot.sync=!0,Nt._write(qt,gr,Ot.onwrite),Ot.sync=!1),Or&&!Ot.errored&&!Ot.destroyed}function Gt(Nt,Ot,qt,gr,hr,Fr,Or){Ot.writelen=gr,Ot.writecb=Or,Ot.writing=!0,Ot.sync=!0,Ot.destroyed?Ot.onwrite(new _t("write")):qt?Nt._writev(hr,Ot.onwrite):Nt._write(hr,Fr,Ot.onwrite),Ot.sync=!1}function nr(Nt,Ot,qt,gr){--Ot.pendingcb,gr(qt),fr(Ot),Ht(Nt,qt)}function or(Nt,Ot){const qt=Nt._writableState,gr=qt.sync,hr=qt.writecb;if(typeof hr!="function"){Ht(Nt,new ht);return}qt.writing=!1,qt.writecb=null,qt.length-=qt.writelen,qt.writelen=0,Ot?(Ot.stack,qt.errored||(qt.errored=Ot),Nt._readableState&&!Nt._readableState.errored&&(Nt._readableState.errored=Ot),gr?e.nextTick(nr,Nt,qt,Ot,hr):nr(Nt,qt,Ot,hr)):(qt.buffered.length>qt.bufferedIndex&&Ar(Nt,qt),gr?qt.afterWriteTickInfo!==null&&qt.afterWriteTickInfo.cb===hr?qt.afterWriteTickInfo.count++:(qt.afterWriteTickInfo={count:1,cb:hr,stream:Nt,state:qt},e.nextTick(ir,qt.afterWriteTickInfo)):wr(Nt,qt,1,hr))}function ir({stream:Nt,state:Ot,count:qt,cb:gr}){return Ot.afterWriteTickInfo=null,wr(Nt,Ot,qt,gr)}function wr(Nt,Ot,qt,gr){for(!Ot.ending&&!Nt.destroyed&&Ot.length===0&&Ot.needDrain&&(Ot.needDrain=!1,Nt.emit("drain"));qt-- >0;)Ot.pendingcb--,gr();Ot.destroyed&&fr(Ot),Jr(Nt,Ot)}function fr(Nt){if(Nt.writing)return;for(let hr=Nt.bufferedIndex;hr<Nt.buffered.length;++hr){var Ot;const{chunk:Fr,callback:Or}=Nt.buffered[hr],Dr=Nt.objectMode?1:Fr.length;Nt.length-=Dr,Or((Ot=Nt.errored)!==null&&Ot!==void 0?Ot:new _t("write"))}const qt=Nt[sr].splice(0);for(let hr=0;hr<qt.length;hr++){var gr;qt[hr]((gr=Nt.errored)!==null&&gr!==void 0?gr:new _t("end"))}vr(Nt)}function Ar(Nt,Ot){if(Ot.corked||Ot.bufferProcessing||Ot.destroyed||!Ot.constructed)return;const{buffered:qt,bufferedIndex:gr,objectMode:hr}=Ot,Fr=qt.length-gr;if(!Fr)return;let Or=gr;if(Ot.bufferProcessing=!0,Fr>1&&Nt._writev){Ot.pendingcb-=Fr-1;const Dr=Ot.allNoop?Qt:yr=>{for(let Gr=Or;Gr<qt.length;++Gr)qt[Gr].callback(yr)},Ur=Ot.allNoop&&Or===0?qt:a(qt,Or);Ur.allBuffers=Ot.allBuffers,Gt(Nt,Ot,!0,Ot.length,Ur,"",Dr),vr(Ot)}else{do{const{chunk:Dr,encoding:Ur,callback:yr}=qt[Or];qt[Or++]=null;const Gr=hr?1:Dr.length;Gt(Nt,Ot,!1,Gr,Dr,Ur,yr)}while(Or<qt.length&&!Ot.writing);Or===qt.length?vr(Ot):Or>256?(qt.splice(0,Or),Ot.bufferedIndex=0):Ot.bufferedIndex=Or}Ot.bufferProcessing=!1}xr.prototype._write=function(Nt,Ot,qt){if(this._writev)this._writev([{chunk:Nt,encoding:Ot}],qt);else throw new mt("_write()")},xr.prototype._writev=null,xr.prototype.end=function(Nt,Ot,qt){const gr=this._writableState;typeof Nt=="function"?(qt=Nt,Nt=null,Ot=null):typeof Ot=="function"&&(qt=Ot,Ot=null);let hr;if(Nt!=null){const Fr=mr(this,Nt,Ot);Fr instanceof s&&(hr=Fr)}return gr.corked&&(gr.corked=1,this.uncork()),hr||(!gr.errored&&!gr.ending?(gr.ending=!0,Jr(this,gr,!0),gr.ended=!0):gr.finished?hr=new Tt("end"):gr.destroyed&&(hr=new _t("end"))),typeof qt=="function"&&(hr||gr.finished?e.nextTick(qt,hr):gr[sr].push(qt)),this};function Lr(Nt){return Nt.ending&&!Nt.destroyed&&Nt.constructed&&Nt.length===0&&!Nt.errored&&Nt.buffered.length===0&&!Nt.finished&&!Nt.writing&&!Nt.errorEmitted&&!Nt.closeEmitted}function zr(Nt,Ot){let qt=!1;function gr(hr){if(qt){Ht(Nt,hr??ht());return}if(qt=!0,Ot.pendingcb--,hr){const Fr=Ot[sr].splice(0);for(let Or=0;Or<Fr.length;Or++)Fr[Or](hr);Ht(Nt,hr,Ot.sync)}else Lr(Ot)&&(Ot.prefinished=!0,Nt.emit("prefinish"),Ot.pendingcb++,e.nextTick(pr,Nt,Ot))}Ot.sync=!0,Ot.pendingcb++;try{Nt._final(gr)}catch(hr){gr(hr)}Ot.sync=!1}function Hr(Nt,Ot){!Ot.prefinished&&!Ot.finalCalled&&(typeof Nt._final=="function"&&!Ot.destroyed?(Ot.finalCalled=!0,zr(Nt,Ot)):(Ot.prefinished=!0,Nt.emit("prefinish")))}function Jr(Nt,Ot,qt){Lr(Ot)&&(Hr(Nt,Ot),Ot.pendingcb===0&&(qt?(Ot.pendingcb++,e.nextTick((gr,hr)=>{Lr(hr)?pr(gr,hr):hr.pendingcb--},Nt,Ot)):Lr(Ot)&&(Ot.pendingcb++,pr(Nt,Ot))))}function pr(Nt,Ot){Ot.pendingcb--,Ot.finished=!0;const qt=Ot[sr].splice(0);for(let gr=0;gr<qt.length;gr++)qt[gr]();if(Nt.emit("finish"),Ot.autoDestroy){const gr=Nt._readableState;(!gr||gr.autoDestroy&&(gr.endEmitted||gr.readable===!1))&&Nt.destroy()}}d(xr.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Nt){this._writableState&&(this._writableState.destroyed=Nt)}},writable:{__proto__:null,get(){const Nt=this._writableState;return!!Nt&&Nt.writable!==!1&&!Nt.destroyed&&!Nt.errored&&!Nt.ending&&!Nt.ended},set(Nt){this._writableState&&(this._writableState.writable=!!Nt)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Nt=this._writableState;return Nt?!Nt.destroyed&&!Nt.ending&&Nt.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const hn=lt.destroy;xr.prototype.destroy=function(Nt,Ot){const qt=this._writableState;return!qt.destroyed&&(qt.bufferedIndex<qt.buffered.length||qt[sr].length)&&e.nextTick(fr,qt),hn.call(this,Nt,Ot),this},xr.prototype._undestroy=lt.undestroy,xr.prototype._destroy=function(Nt,Ot){Ot(Nt)},xr.prototype[_e.captureRejectionSymbol]=function(Nt){this.destroy(Nt)};let nn;function Pr(){return nn===void 0&&(nn={}),nn}return xr.fromWeb=function(Nt,Ot){return Pr().newStreamWritableFromWritableStream(Nt,Ot)},xr.toWeb=function(Nt){return Pr().newWritableStreamFromStreamWritable(Nt)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const e=browserExports$2,a=buffer,{isReadable:s,isWritable:o,isIterable:c,isNodeStream:d,isReadableNodeStream:h,isWritableNodeStream:g,isDuplexNodeStream:_,isReadableStream:$,isWritableStream:_e}=utils$2,tt=endOfStreamExports,{AbortError:nt,codes:{ERR_INVALID_ARG_TYPE:lt,ERR_INVALID_RETURN_VALUE:dt}}=errors,{destroyer:ot}=destroy_1,gt=requireDuplex(),pt=requireReadable(),mt=requireWritable(),{createDeferredPromise:ht}=utilExports,St=from_1,_t=globalThis.Blob||a.Blob,Tt=typeof _t<"u"?function(Ut){return Ut instanceof _t}:function(Ut){return!1},ut=globalThis.AbortController||requireBrowser().AbortController,{FunctionPrototypeCall:bt}=primordials;class zt extends gt{constructor(Ut){super(Ut),(Ut==null?void 0:Ut.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Ut==null?void 0:Ut.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function sr(Ut,vr){if(_(Ut))return Ut;if(h(Ut))return Qt({readable:Ut});if(g(Ut))return Qt({writable:Ut});if(d(Ut))return Qt({writable:!1,readable:!1});if($(Ut))return Qt({readable:pt.fromWeb(Ut)});if(_e(Ut))return Qt({writable:mt.fromWeb(Ut)});if(typeof Ut=="function"){const{value:mr,write:br,final:Gt,destroy:nr}=Ht(Ut);if(c(mr))return St(zt,mr,{objectMode:!0,write:br,final:Gt,destroy:nr});const or=mr==null?void 0:mr.then;if(typeof or=="function"){let ir;const wr=bt(or,mr,fr=>{if(fr!=null)throw new dt("nully","body",fr)},fr=>{ot(ir,fr)});return ir=new zt({objectMode:!0,readable:!1,write:br,final(fr){Gt(async()=>{try{await wr,e.nextTick(fr,null)}catch(Ar){e.nextTick(fr,Ar)}})},destroy:nr})}throw new dt("Iterable, AsyncIterable or AsyncFunction",vr,mr)}if(Tt(Ut))return sr(Ut.arrayBuffer());if(c(Ut))return St(zt,Ut,{objectMode:!0,writable:!1});if($(Ut==null?void 0:Ut.readable)&&_e(Ut==null?void 0:Ut.writable))return zt.fromWeb(Ut);if(typeof(Ut==null?void 0:Ut.writable)=="object"||typeof(Ut==null?void 0:Ut.readable)=="object"){const mr=Ut!=null&&Ut.readable?h(Ut==null?void 0:Ut.readable)?Ut==null?void 0:Ut.readable:sr(Ut.readable):void 0,br=Ut!=null&&Ut.writable?g(Ut==null?void 0:Ut.writable)?Ut==null?void 0:Ut.writable:sr(Ut.writable):void 0;return Qt({readable:mr,writable:br})}const xr=Ut==null?void 0:Ut.then;if(typeof xr=="function"){let mr;return bt(xr,Ut,br=>{br!=null&&mr.push(br),mr.push(null)},br=>{ot(mr,br)}),mr=new zt({objectMode:!0,writable:!1,read(){}})}throw new lt(vr,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Ut)};function Ht(sr){let{promise:Ut,resolve:vr}=ht();const xr=new ut,mr=xr.signal;return{value:sr(async function*(){for(;;){const Gt=Ut;Ut=null;const{chunk:nr,done:or,cb:ir}=await Gt;if(e.nextTick(ir),or)return;if(mr.aborted)throw new nt(void 0,{cause:mr.reason});({promise:Ut,resolve:vr}=ht()),yield nr}}(),{signal:mr}),write(Gt,nr,or){const ir=vr;vr=null,ir({chunk:Gt,done:!1,cb:or})},final(Gt){const nr=vr;vr=null,nr({done:!0,cb:Gt})},destroy(Gt,nr){xr.abort(),nr(Gt)}}}function Qt(sr){const Ut=sr.readable&&typeof sr.readable.read!="function"?pt.wrap(sr.readable):sr.readable,vr=sr.writable;let xr=!!s(Ut),mr=!!o(vr),br,Gt,nr,or,ir;function wr(fr){const Ar=or;or=null,Ar?Ar(fr):fr&&ir.destroy(fr)}return ir=new zt({readableObjectMode:!!(Ut!=null&&Ut.readableObjectMode),writableObjectMode:!!(vr!=null&&vr.writableObjectMode),readable:xr,writable:mr}),mr&&(tt(vr,fr=>{mr=!1,fr&&ot(Ut,fr),wr(fr)}),ir._write=function(fr,Ar,Lr){vr.write(fr,Ar)?Lr():br=Lr},ir._final=function(fr){vr.end(),Gt=fr},vr.on("drain",function(){if(br){const fr=br;br=null,fr()}}),vr.on("finish",function(){if(Gt){const fr=Gt;Gt=null,fr()}})),xr&&(tt(Ut,fr=>{xr=!1,fr&&ot(Ut,fr),wr(fr)}),Ut.on("readable",function(){if(nr){const fr=nr;nr=null,fr()}}),Ut.on("end",function(){ir.push(null)}),ir._read=function(){for(;;){const fr=Ut.read();if(fr===null){nr=ir._read;return}if(!ir.push(fr))return}}),ir._destroy=function(fr,Ar){!fr&&or!==null&&(fr=new nt),nr=null,br=null,Gt=null,or===null?Ar(fr):(or=Ar,ot(vr,fr),ot(Ut,fr))},ir}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:s,ObjectSetPrototypeOf:o}=primordials;duplex=h;const c=requireReadable(),d=requireWritable();o(h.prototype,c.prototype),o(h,c);{const _e=s(d.prototype);for(let tt=0;tt<_e.length;tt++){const nt=_e[tt];h.prototype[nt]||(h.prototype[nt]=d.prototype[nt])}}function h(_e){if(!(this instanceof h))return new h(_e);c.call(this,_e),d.call(this,_e),_e?(this.allowHalfOpen=_e.allowHalfOpen!==!1,_e.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),_e.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(h.prototype,{writable:{__proto__:null,...a(d.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(d.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(d.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(d.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(d.prototype,"writableLength")},writableFinished:{__proto__:null,...a(d.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(d.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(d.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(d.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(_e){this._readableState&&this._writableState&&(this._readableState.destroyed=_e,this._writableState.destroyed=_e)}}});let g;function _(){return g===void 0&&(g={}),g}h.fromWeb=function(_e,tt){return _().newStreamDuplexFromReadableWritablePair(_e,tt)},h.toWeb=function(_e){return _().newReadableWritablePairFromDuplex(_e)};let $;return h.from=function(_e){return $||($=requireDuplexify()),$(_e,"body")},duplex}const{ObjectSetPrototypeOf:ObjectSetPrototypeOf$1,Symbol:Symbol$2}=primordials;var transform=Transform$1;const{ERR_METHOD_NOT_IMPLEMENTED}=errors.codes,Duplex$2=requireDuplex(),{getHighWaterMark}=state;ObjectSetPrototypeOf$1(Transform$1.prototype,Duplex$2.prototype);ObjectSetPrototypeOf$1(Transform$1,Duplex$2);const kCallback=Symbol$2("kCallback");function Transform$1(e){if(!(this instanceof Transform$1))return new Transform$1(e);const a=e?getHighWaterMark(this,e,"readableHighWaterMark",!0):null;a===0&&(e={...e,highWaterMark:null,readableHighWaterMark:a,writableHighWaterMark:e.writableHighWaterMark||0}),Duplex$2.call(this,e),this._readableState.sync=!1,this[kCallback]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",prefinish)}function final(e){typeof this._flush=="function"&&!this.destroyed?this._flush((a,s)=>{if(a){e?e(a):this.destroy(a);return}s!=null&&this.push(s),this.push(null),e&&e()}):(this.push(null),e&&e())}function prefinish(){this._final!==final&&final.call(this)}Transform$1.prototype._final=final;Transform$1.prototype._transform=function(e,a,s){throw new ERR_METHOD_NOT_IMPLEMENTED("_transform()")};Transform$1.prototype._write=function(e,a,s){const o=this._readableState,c=this._writableState,d=o.length;this._transform(e,a,(h,g)=>{if(h){s(h);return}g!=null&&this.push(g),c.ended||d===o.length||o.length<o.highWaterMark?s():this[kCallback]=s})};Transform$1.prototype._read=function(){if(this[kCallback]){const e=this[kCallback];this[kCallback]=null,e()}};const{ObjectSetPrototypeOf}=primordials;var passthrough=PassThrough$1;const Transform=transform;ObjectSetPrototypeOf(PassThrough$1.prototype,Transform.prototype);ObjectSetPrototypeOf(PassThrough$1,Transform);function PassThrough$1(e){if(!(this instanceof PassThrough$1))return new PassThrough$1(e);Transform.call(this,e)}PassThrough$1.prototype._transform=function(e,a,s){s(null,e)};const process$1=browserExports$2,{ArrayIsArray,Promise:Promise$2,SymbolAsyncIterator,SymbolDispose}=primordials,eos$1=endOfStreamExports,{once}=utilExports,destroyImpl=destroy_1,Duplex$1=requireDuplex(),{aggregateTwoErrors,codes:{ERR_INVALID_ARG_TYPE:ERR_INVALID_ARG_TYPE$1,ERR_INVALID_RETURN_VALUE,ERR_MISSING_ARGS:ERR_MISSING_ARGS$2,ERR_STREAM_DESTROYED,ERR_STREAM_PREMATURE_CLOSE},AbortError:AbortError$2}=errors,{validateFunction,validateAbortSignal:validateAbortSignal$1}=validators$2,{isIterable:isIterable$1,isReadable:isReadable$1,isReadableNodeStream,isNodeStream:isNodeStream$2,isTransformStream:isTransformStream$1,isWebStream:isWebStream$1,isReadableStream:isReadableStream$2,isReadableFinished}=utils$2,AbortController$2=globalThis.AbortController||requireBrowser().AbortController;let PassThrough,Readable,addAbortListener;function destroyer$1(e,a,s){let o=!1;e.on("close",()=>{o=!0});const c=eos$1(e,{readable:a,writable:s},d=>{o=!d});return{destroy:d=>{o||(o=!0,destroyImpl.destroyer(e,d||new ERR_STREAM_DESTROYED("pipe")))},cleanup:c}}function popCallback(e){return validateFunction(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function makeAsyncIterable(e){if(isIterable$1(e))return e;if(isReadableNodeStream(e))return fromReadable(e);throw new ERR_INVALID_ARG_TYPE$1("val",["Readable","Iterable","AsyncIterable"],e)}async function*fromReadable(e){Readable||(Readable=requireReadable()),yield*Readable.prototype[SymbolAsyncIterator].call(e)}async function pumpToNode(e,a,s,{end:o}){let c,d=null;const h=$=>{if($&&(c=$),d){const _e=d;d=null,_e()}},g=()=>new Promise$2(($,_e)=>{c?_e(c):d=()=>{c?_e(c):$()}});a.on("drain",h);const _=eos$1(a,{readable:!1},h);try{a.writableNeedDrain&&await g();for await(const $ of e)a.write($)||await g();o&&(a.end(),await g()),s()}catch($){s(c!==$?aggregateTwoErrors(c,$):$)}finally{_(),a.off("drain",h)}}async function pumpToWeb(e,a,s,{end:o}){isTransformStream$1(a)&&(a=a.writable);const c=a.getWriter();try{for await(const d of e)await c.ready,c.write(d).catch(()=>{});await c.ready,o&&await c.close(),s()}catch(d){try{await c.abort(d),s(d)}catch(h){s(h)}}}function pipeline$1(...e){return pipelineImpl(e,once(popCallback(e)))}function pipelineImpl(e,a,s){if(e.length===1&&ArrayIsArray(e[0])&&(e=e[0]),e.length<2)throw new ERR_MISSING_ARGS$2("streams");const o=new AbortController$2,c=o.signal,d=s==null?void 0:s.signal,h=[];validateAbortSignal$1(d,"options.signal");function g(){dt(new AbortError$2)}addAbortListener=addAbortListener||utilExports.addAbortListener;let _;d&&(_=addAbortListener(d,g));let $,_e;const tt=[];let nt=0;function lt(ht){dt(ht,--nt===0)}function dt(ht,St){var _t;if(ht&&(!$||$.code==="ERR_STREAM_PREMATURE_CLOSE")&&($=ht),!(!$&&!St)){for(;tt.length;)tt.shift()($);(_t=_)===null||_t===void 0||_t[SymbolDispose](),o.abort(),St&&($||h.forEach(Tt=>Tt()),process$1.nextTick(a,$,_e))}}let ot;for(let ht=0;ht<e.length;ht++){const St=e[ht],_t=ht<e.length-1,Tt=ht>0,ut=_t||(s==null?void 0:s.end)!==!1,bt=ht===e.length-1;if(isNodeStream$2(St)){let zt=function(Ht){Ht&&Ht.name!=="AbortError"&&Ht.code!=="ERR_STREAM_PREMATURE_CLOSE"&&lt(Ht)};var mt=zt;if(ut){const{destroy:Ht,cleanup:Qt}=destroyer$1(St,_t,Tt);tt.push(Ht),isReadable$1(St)&&bt&&h.push(Qt)}St.on("error",zt),isReadable$1(St)&&bt&&h.push(()=>{St.removeListener("error",zt)})}if(ht===0)if(typeof St=="function"){if(ot=St({signal:c}),!isIterable$1(ot))throw new ERR_INVALID_RETURN_VALUE("Iterable, AsyncIterable or Stream","source",ot)}else isIterable$1(St)||isReadableNodeStream(St)||isTransformStream$1(St)?ot=St:ot=Duplex$1.from(St);else if(typeof St=="function"){if(isTransformStream$1(ot)){var gt;ot=makeAsyncIterable((gt=ot)===null||gt===void 0?void 0:gt.readable)}else ot=makeAsyncIterable(ot);if(ot=St(ot,{signal:c}),_t){if(!isIterable$1(ot,!0))throw new ERR_INVALID_RETURN_VALUE("AsyncIterable",`transform[${ht-1}]`,ot)}else{var pt;PassThrough||(PassThrough=passthrough);const zt=new PassThrough({objectMode:!0}),Ht=(pt=ot)===null||pt===void 0?void 0:pt.then;if(typeof Ht=="function")nt++,Ht.call(ot,Ut=>{_e=Ut,Ut!=null&&zt.write(Ut),ut&&zt.end(),process$1.nextTick(lt)},Ut=>{zt.destroy(Ut),process$1.nextTick(lt,Ut)});else if(isIterable$1(ot,!0))nt++,pumpToNode(ot,zt,lt,{end:ut});else if(isReadableStream$2(ot)||isTransformStream$1(ot)){const Ut=ot.readable||ot;nt++,pumpToNode(Ut,zt,lt,{end:ut})}else throw new ERR_INVALID_RETURN_VALUE("AsyncIterable or Promise","destination",ot);ot=zt;const{destroy:Qt,cleanup:sr}=destroyer$1(ot,!1,!0);tt.push(Qt),bt&&h.push(sr)}}else if(isNodeStream$2(St)){if(isReadableNodeStream(ot)){nt+=2;const zt=pipe(ot,St,lt,{end:ut});isReadable$1(St)&&bt&&h.push(zt)}else if(isTransformStream$1(ot)||isReadableStream$2(ot)){const zt=ot.readable||ot;nt++,pumpToNode(zt,St,lt,{end:ut})}else if(isIterable$1(ot))nt++,pumpToNode(ot,St,lt,{end:ut});else throw new ERR_INVALID_ARG_TYPE$1("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ot);ot=St}else if(isWebStream$1(St)){if(isReadableNodeStream(ot))nt++,pumpToWeb(makeAsyncIterable(ot),St,lt,{end:ut});else if(isReadableStream$2(ot)||isIterable$1(ot))nt++,pumpToWeb(ot,St,lt,{end:ut});else if(isTransformStream$1(ot))nt++,pumpToWeb(ot.readable,St,lt,{end:ut});else throw new ERR_INVALID_ARG_TYPE$1("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ot);ot=St}else ot=Duplex$1.from(St)}return(c!=null&&c.aborted||d!=null&&d.aborted)&&process$1.nextTick(g),ot}function pipe(e,a,s,{end:o}){let c=!1;if(a.on("close",()=>{c||s(new ERR_STREAM_PREMATURE_CLOSE)}),e.pipe(a,{end:!1}),o){let h=function(){c=!0,a.end()};var d=h;isReadableFinished(e)?process$1.nextTick(h):e.once("end",h)}else s();return eos$1(e,{readable:!0,writable:!1},h=>{const g=e._readableState;h&&h.code==="ERR_STREAM_PREMATURE_CLOSE"&&g&&g.ended&&!g.errored&&!g.errorEmitted?e.once("end",s).once("error",s):s(h)}),eos$1(a,{readable:!1,writable:!0},s)}var pipeline_1={pipelineImpl,pipeline:pipeline$1};const{pipeline}=pipeline_1,Duplex=requireDuplex(),{destroyer}=destroy_1,{isNodeStream:isNodeStream$1,isReadable,isWritable:isWritable$1,isWebStream,isTransformStream,isWritableStream,isReadableStream:isReadableStream$1}=utils$2,{AbortError:AbortError$1,codes:{ERR_INVALID_ARG_VALUE:ERR_INVALID_ARG_VALUE$1,ERR_MISSING_ARGS:ERR_MISSING_ARGS$1}}=errors,eos=endOfStreamExports;var compose$1=function e(...a){if(a.length===0)throw new ERR_MISSING_ARGS$1("streams");if(a.length===1)return Duplex.from(a[0]);const s=[...a];if(typeof a[0]=="function"&&(a[0]=Duplex.from(a[0])),typeof a[a.length-1]=="function"){const lt=a.length-1;a[lt]=Duplex.from(a[lt])}for(let lt=0;lt<a.length;++lt)if(!(!isNodeStream$1(a[lt])&&!isWebStream(a[lt]))){if(lt<a.length-1&&!(isReadable(a[lt])||isReadableStream$1(a[lt])||isTransformStream(a[lt])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${lt}]`,s[lt],"must be readable");if(lt>0&&!(isWritable$1(a[lt])||isWritableStream(a[lt])||isTransformStream(a[lt])))throw new ERR_INVALID_ARG_VALUE$1(`streams[${lt}]`,s[lt],"must be writable")}let o,c,d,h,g;function _(lt){const dt=h;h=null,dt?dt(lt):lt?g.destroy(lt):!nt&&!tt&&g.destroy()}const $=a[0],_e=pipeline(a,_),tt=!!(isWritable$1($)||isWritableStream($)||isTransformStream($)),nt=!!(isReadable(_e)||isReadableStream$1(_e)||isTransformStream(_e));if(g=new Duplex({writableObjectMode:!!($!=null&&$.writableObjectMode),readableObjectMode:!!(_e!=null&&_e.readableObjectMode),writable:tt,readable:nt}),tt){if(isNodeStream$1($))g._write=function(dt,ot,gt){$.write(dt,ot)?gt():o=gt},g._final=function(dt){$.end(),c=dt},$.on("drain",function(){if(o){const dt=o;o=null,dt()}});else if(isWebStream($)){const ot=(isTransformStream($)?$.writable:$).getWriter();g._write=async function(gt,pt,mt){try{await ot.ready,ot.write(gt).catch(()=>{}),mt()}catch(ht){mt(ht)}},g._final=async function(gt){try{await ot.ready,ot.close().catch(()=>{}),c=gt}catch(pt){gt(pt)}}}const lt=isTransformStream(_e)?_e.readable:_e;eos(lt,()=>{if(c){const dt=c;c=null,dt()}})}if(nt){if(isNodeStream$1(_e))_e.on("readable",function(){if(d){const lt=d;d=null,lt()}}),_e.on("end",function(){g.push(null)}),g._read=function(){for(;;){const lt=_e.read();if(lt===null){d=g._read;return}if(!g.push(lt))return}};else if(isWebStream(_e)){const dt=(isTransformStream(_e)?_e.readable:_e).getReader();g._read=async function(){for(;;)try{const{value:ot,done:gt}=await dt.read();if(!g.push(ot))return;if(gt){g.push(null);return}}catch{return}}}}return g._destroy=function(lt,dt){!lt&&h!==null&&(lt=new AbortError$1),d=null,o=null,c=null,h===null?dt(lt):(h=dt,isNodeStream$1(_e)&&destroyer(_e,lt))},g};const AbortController$1=globalThis.AbortController||requireBrowser().AbortController,{codes:{ERR_INVALID_ARG_VALUE,ERR_INVALID_ARG_TYPE,ERR_MISSING_ARGS,ERR_OUT_OF_RANGE},AbortError}=errors,{validateAbortSignal,validateInteger,validateObject}=validators$2,kWeakHandler=primordials.Symbol("kWeak"),kResistStopPropagation=primordials.Symbol("kResistStopPropagation"),{finished}=endOfStreamExports,staticCompose=compose$1,{addAbortSignalNoValidate}=addAbortSignalExports,{isWritable,isNodeStream}=utils$2,{deprecate}=utilExports,{ArrayPrototypePush,Boolean:Boolean$1,MathFloor,Number:Number$1,NumberIsNaN,Promise:Promise$1,PromiseReject,PromiseResolve,PromisePrototypeThen,Symbol:Symbol$1}=primordials,kEmpty=Symbol$1("kEmpty"),kEof=Symbol$1("kEof");function compose(e,a){if(a!=null&&validateObject(a,"options"),(a==null?void 0:a.signal)!=null&&validateAbortSignal(a.signal,"options.signal"),isNodeStream(e)&&!isWritable(e))throw new ERR_INVALID_ARG_VALUE("stream",e,"must be writable");const s=staticCompose(this,e);return a!=null&&a.signal&&addAbortSignalNoValidate(a.signal,s),s}function map(e,a){if(typeof e!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],e);a!=null&&validateObject(a,"options"),(a==null?void 0:a.signal)!=null&&validateAbortSignal(a.signal,"options.signal");let s=1;(a==null?void 0:a.concurrency)!=null&&(s=MathFloor(a.concurrency));let o=s-1;return(a==null?void 0:a.highWaterMark)!=null&&(o=MathFloor(a.highWaterMark)),validateInteger(s,"options.concurrency",1),validateInteger(o,"options.highWaterMark",0),o+=s,(async function*(){const d=utilExports.AbortSignalAny([a==null?void 0:a.signal].filter(Boolean$1)),h=this,g=[],_={signal:d};let $,_e,tt=!1,nt=0;function lt(){tt=!0,dt()}function dt(){nt-=1,ot()}function ot(){_e&&!tt&&nt<s&&g.length<o&&(_e(),_e=null)}async function gt(){try{for await(let pt of h){if(tt)return;if(d.aborted)throw new AbortError;try{if(pt=e(pt,_),pt===kEmpty)continue;pt=PromiseResolve(pt)}catch(mt){pt=PromiseReject(mt)}nt+=1,PromisePrototypeThen(pt,dt,lt),g.push(pt),$&&($(),$=null),!tt&&(g.length>=o||nt>=s)&&await new Promise$1(mt=>{_e=mt})}g.push(kEof)}catch(pt){const mt=PromiseReject(pt);PromisePrototypeThen(mt,dt,lt),g.push(mt)}finally{tt=!0,$&&($(),$=null)}}gt();try{for(;;){for(;g.length>0;){const pt=await g[0];if(pt===kEof)return;if(d.aborted)throw new AbortError;pt!==kEmpty&&(yield pt),g.shift(),ot()}await new Promise$1(pt=>{$=pt})}}finally{tt=!0,_e&&(_e(),_e=null)}}).call(this)}function asIndexedPairs(e=void 0){return e!=null&&validateObject(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal(e.signal,"options.signal"),(async function*(){let s=0;for await(const c of this){var o;if(e!=null&&(o=e.signal)!==null&&o!==void 0&&o.aborted)throw new AbortError({cause:e.signal.reason});yield[s++,c]}}).call(this)}async function some(e,a=void 0){for await(const s of filter.call(this,e,a))return!0;return!1}async function every(e,a=void 0){if(typeof e!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],e);return!await some.call(this,async(...s)=>!await e(...s),a)}async function find(e,a){for await(const s of filter.call(this,e,a))return s}async function forEach$1(e,a){if(typeof e!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],e);async function s(o,c){return await e(o,c),kEmpty}for await(const o of map.call(this,s,a));}function filter(e,a){if(typeof e!="function")throw new ERR_INVALID_ARG_TYPE("fn",["Function","AsyncFunction"],e);async function s(o,c){return await e(o,c)?o:kEmpty}return map.call(this,s,a)}class ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function reduce(e,a,s){var o;if(typeof e!="function")throw new ERR_INVALID_ARG_TYPE("reducer",["Function","AsyncFunction"],e);s!=null&&validateObject(s,"options"),(s==null?void 0:s.signal)!=null&&validateAbortSignal(s.signal,"options.signal");let c=arguments.length>1;if(s!=null&&(o=s.signal)!==null&&o!==void 0&&o.aborted){const $=new AbortError(void 0,{cause:s.signal.reason});throw this.once("error",()=>{}),await finished(this.destroy($)),$}const d=new AbortController$1,h=d.signal;if(s!=null&&s.signal){const $={once:!0,[kWeakHandler]:this,[kResistStopPropagation]:!0};s.signal.addEventListener("abort",()=>d.abort(),$)}let g=!1;try{for await(const $ of this){var _;if(g=!0,s!=null&&(_=s.signal)!==null&&_!==void 0&&_.aborted)throw new AbortError;c?a=await e(a,$,{signal:h}):(a=$,c=!0)}if(!g&&!c)throw new ReduceAwareErrMissingArgs}finally{d.abort()}return a}async function toArray$1(e){e!=null&&validateObject(e,"options"),(e==null?void 0:e.signal)!=null&&validateAbortSignal(e.signal,"options.signal");const a=[];for await(const o of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new AbortError(void 0,{cause:e.signal.reason});ArrayPrototypePush(a,o)}return a}function flatMap(e,a){const s=map.call(this,e,a);return(async function*(){for await(const c of s)yield*c}).call(this)}function toIntegerOrInfinity(e){if(e=Number$1(e),NumberIsNaN(e))return 0;if(e<0)throw new ERR_OUT_OF_RANGE("number",">= 0",e);return e}function drop(e,a=void 0){return a!=null&&validateObject(a,"options"),(a==null?void 0:a.signal)!=null&&validateAbortSignal(a.signal,"options.signal"),e=toIntegerOrInfinity(e),(async function*(){var o;if(a!=null&&(o=a.signal)!==null&&o!==void 0&&o.aborted)throw new AbortError;for await(const d of this){var c;if(a!=null&&(c=a.signal)!==null&&c!==void 0&&c.aborted)throw new AbortError;e--<=0&&(yield d)}}).call(this)}function take(e,a=void 0){return a!=null&&validateObject(a,"options"),(a==null?void 0:a.signal)!=null&&validateAbortSignal(a.signal,"options.signal"),e=toIntegerOrInfinity(e),(async function*(){var o;if(a!=null&&(o=a.signal)!==null&&o!==void 0&&o.aborted)throw new AbortError;for await(const d of this){var c;if(a!=null&&(c=a.signal)!==null&&c!==void 0&&c.aborted)throw new AbortError;if(e-- >0&&(yield d),e<=0)return}}).call(this)}operators.streamReturningOperators={asIndexedPairs:deprecate(asIndexedPairs,"readable.asIndexedPairs will be removed in a future version."),drop,filter,flatMap,map,take,compose};operators.promiseReturningOperators={every,forEach:forEach$1,reduce,toArray:toArray$1,some,find};var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:e,Promise:a}=primordials,{isIterable:s,isNodeStream:o,isWebStream:c}=utils$2,{pipelineImpl:d}=pipeline_1,{finished:h}=endOfStreamExports;requireStream();function g(..._){return new a(($,_e)=>{let tt,nt;const lt=_[_.length-1];if(lt&&typeof lt=="object"&&!o(lt)&&!s(lt)&&!c(lt)){const dt=e(_);tt=dt.signal,nt=dt.end}d(_,(dt,ot)=>{dt?_e(dt):$(ot)},{signal:tt,end:nt})})}return promises={finished:h,pipeline:g},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:e}=buffer,{ObjectDefineProperty:a,ObjectKeys:s,ReflectApply:o}=primordials,{promisify:{custom:c}}=utilExports,{streamReturningOperators:d,promiseReturningOperators:h}=operators,{codes:{ERR_ILLEGAL_CONSTRUCTOR:g}}=errors,_=compose$1,{setDefaultHighWaterMark:$,getDefaultHighWaterMark:_e}=state,{pipeline:tt}=pipeline_1,{destroyer:nt}=destroy_1,lt=endOfStreamExports,dt=requirePromises(),ot=utils$2,gt=stream.exports=legacy.Stream;gt.isDestroyed=ot.isDestroyed,gt.isDisturbed=ot.isDisturbed,gt.isErrored=ot.isErrored,gt.isReadable=ot.isReadable,gt.isWritable=ot.isWritable,gt.Readable=requireReadable();for(const ht of s(d)){let _t=function(...Tt){if(new.target)throw g();return gt.Readable.from(o(St,this,Tt))};var mt=_t;const St=d[ht];a(_t,"name",{__proto__:null,value:St.name}),a(_t,"length",{__proto__:null,value:St.length}),a(gt.Readable.prototype,ht,{__proto__:null,value:_t,enumerable:!1,configurable:!0,writable:!0})}for(const ht of s(h)){let _t=function(...ut){if(new.target)throw g();return o(St,this,ut)};var mt=_t;const St=h[ht];a(_t,"name",{__proto__:null,value:St.name}),a(_t,"length",{__proto__:null,value:St.length}),a(gt.Readable.prototype,ht,{__proto__:null,value:_t,enumerable:!1,configurable:!0,writable:!0})}gt.Writable=requireWritable(),gt.Duplex=requireDuplex(),gt.Transform=transform,gt.PassThrough=passthrough,gt.pipeline=tt;const{addAbortSignal:pt}=addAbortSignalExports;return gt.addAbortSignal=pt,gt.finished=lt,gt.destroy=nt,gt.compose=_,gt.setDefaultHighWaterMark=$,gt.getDefaultHighWaterMark=_e,a(gt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return dt}}),a(tt,c,{__proto__:null,enumerable:!0,get(){return dt.pipeline}}),a(lt,c,{__proto__:null,enumerable:!0,get(){return dt.finished}}),gt.Stream=gt,gt._isUint8Array=function(St){return St instanceof Uint8Array},gt._uint8ArrayToBuffer=function(St){return e.from(St.buffer,St.byteOffset,St.byteLength)},stream.exports}(function(e){const a=requireStream(),s=requirePromises(),o=a.Readable.destroy;e.exports=a.Readable,e.exports._uint8ArrayToBuffer=a._uint8ArrayToBuffer,e.exports._isUint8Array=a._isUint8Array,e.exports.isDisturbed=a.isDisturbed,e.exports.isErrored=a.isErrored,e.exports.isReadable=a.isReadable,e.exports.Readable=a.Readable,e.exports.Writable=a.Writable,e.exports.Duplex=a.Duplex,e.exports.Transform=a.Transform,e.exports.PassThrough=a.PassThrough,e.exports.addAbortSignal=a.addAbortSignal,e.exports.finished=a.finished,e.exports.destroy=a.destroy,e.exports.destroy=o,e.exports.pipeline=a.pipeline,e.exports.compose=a.compose,Object.defineProperty(a,"promises",{configurable:!0,enumerable:!0,get(){return s}}),e.exports.Stream=a.Stream,e.exports.default=e.exports})(browser$1);var browserExports=browser$1.exports;Object.defineProperty(lib,"__esModule",{value:!0});lib.ReadableWebToNodeStream=void 0;const readable_stream_1=browserExports;class ReadableWebToNodeStream extends readable_stream_1.Readable{constructor(a){super(),this.bytesRead=0,this.released=!1,this.reader=a.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(a=>{delete this.pendingRead,a.done||this.released?this.push(null):(this.bytesRead+=a.value.length,this.push(a.value))}).catch(a=>{this.destroy(a)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}lib.ReadableWebToNodeStream=ReadableWebToNodeStream;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchFromUrl=e.parseBlob=e.parseReadableStream=e.parseNodeStream=e.selectCover=e.ratingToStars=e.orderTags=e.parseFromTokenizer=e.parseBuffer=void 0;const a=browserExports$1,s=core$2,o=lib,c=a("music-metadata-browser:main");var d=core$2;Object.defineProperty(e,"parseBuffer",{enumerable:!0,get:function(){return d.parseBuffer}}),Object.defineProperty(e,"parseFromTokenizer",{enumerable:!0,get:function(){return d.parseFromTokenizer}}),Object.defineProperty(e,"orderTags",{enumerable:!0,get:function(){return d.orderTags}}),Object.defineProperty(e,"ratingToStars",{enumerable:!0,get:function(){return d.ratingToStars}}),Object.defineProperty(e,"selectCover",{enumerable:!0,get:function(){return d.selectCover}}),e.parseNodeStream=s.parseStream;async function h(_e,tt,nt){const lt=new o.ReadableWebToNodeStream(_e),dt=await(0,e.parseNodeStream)(lt,typeof tt=="string"?{mimeType:tt}:tt,nt);return await lt.close(),dt}e.parseReadableStream=h;async function g(_e,tt){_e.type,_e.size,_e instanceof File&&_e.name;const nt=_e.stream?_e.stream():_(_e);return h(nt,{mimeType:_e.type,size:_e.size},tt)}e.parseBlob=g;function _(_e){const tt=new FileReader;return new ReadableStream({start(nt){tt.onloadend=lt=>{let dt=lt.target.result;dt instanceof ArrayBuffer&&(dt=new Uint8Array(dt)),nt.enqueue(dt),nt.close()},tt.onerror=lt=>{nt.close()},tt.onabort=lt=>{nt.close()},tt.readAsArrayBuffer(_e)}})}async function $(_e,tt){const nt=await fetch(_e),lt={size:parseInt(nt.headers.get("Content-Length"),10),mimeType:nt.headers.get("Content-Type")};if(nt.ok)if(nt.body){const dt=await h(nt.body,lt,tt);return c("Closing HTTP-readable-stream..."),nt.body.locked||await nt.body.cancel(),c("HTTP-readable-stream closed."),dt}else return g(await nt.blob(),tt);else throw new Error(`HTTP error status=${nt.status}: ${nt.statusText}`)}e.fetchFromUrl=$})(lib$3);const importMusicFromFolder=async()=>{try{const e=await window.showDirectoryPicker(),a=[];for await(const s of getFilesRecursively(e))if(s.kind==="file"&&isAudioFile(s.name)){const o=await s.getFile();try{const c=await lib$3.parseBlob(o),{common:d,format:h}=c;let g=null;if(d.picture&&d.picture.length>0){const _=d.picture[0],$=new Blob([_.data],{type:_.format});g=URL.createObjectURL($)}a.push({title:d.title||o.name,artist:d.artist||"Unknown Artist",album:d.album||"Unknown Album",duration:h.duration||0,fileHandle:s})}catch(c){console.warn("Failed to parse metadata for",s.name,c),a.push({title:s.name,artist:"Unknown",album:"Unknown",duration:0,fileHandle:s})}}return a}catch(e){if(e.name==="AbortError")return[];throw console.error("Error importing music:",e),e}};async function*getFilesRecursively(e){if(e.kind==="file")yield e;else if(e.kind==="directory")for await(const a of e.values())yield*getFilesRecursively(a)}const AUDIO_EXTENSIONS=[".mp3",".flac",".wav",".m4a",".aac",".ogg"];function isAudioFile(e){const a=e.toLowerCase();return AUDIO_EXTENSIONS.some(s=>a.endsWith(s))}const SongList=()=>{const{songs:e,loadSongs:a,addSongsToLibrary:s,isLoading:o}=useLibraryStore(),{playSong:c,currentSong:d,isPlaying:h,toggleLike:g}=usePlayerStore();reactExports.useEffect(()=>{a()},[a]);const _=async()=>{try{const _e=await importMusicFromFolder();_e.length>0&&await s(_e)}catch(_e){console.error("Import failed",_e)}},$=_e=>{if(!_e)return"--:--";const tt=Math.floor(_e/60),nt=Math.floor(_e%60);return`${tt}:${nt.toString().padStart(2,"0")}`};return jsxRuntimeExports.jsxs("div",{className:"flex-1 h-full overflow-hidden flex flex-col bg-black",children:[jsxRuntimeExports.jsxs("div",{className:"p-8 pb-4 flex justify-between items-end",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Songs"}),jsxRuntimeExports.jsxs("p",{className:"text-white/60 text-sm",children:[e.length," songs"]})]}),jsxRuntimeExports.jsxs("button",{onClick:_,className:"flex items-center gap-2 bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-lg font-medium transition-colors text-sm",children:[jsxRuntimeExports.jsx(FolderPlus,{size:18}),"Add Folder"]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8 pt-0",children:jsxRuntimeExports.jsxs("div",{className:"w-full text-left border-collapse",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-black z-10 grid grid-cols-[auto_1fr_1fr_1fr_auto_auto] gap-4 py-3 border-b border-white/10 text-xs font-medium text-white/40 uppercase tracking-wider",children:[jsxRuntimeExports.jsx("div",{className:"w-8 text-center",children:"#"}),jsxRuntimeExports.jsx("div",{children:"Title"}),jsxRuntimeExports.jsx("div",{children:"Artist"}),jsxRuntimeExports.jsx("div",{children:"Album"}),jsxRuntimeExports.jsx("div",{className:"w-8"}),jsxRuntimeExports.jsx("div",{className:"w-16 text-right",children:jsxRuntimeExports.jsx(Clock,{size:14,className:"ml-auto"})})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 space-y-1",children:o?jsxRuntimeExports.jsx("div",{className:"text-center py-10 text-white/40",children:"Loading library..."}):e.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-20 text-white/40",children:[jsxRuntimeExports.jsx("p",{className:"text-lg mb-2",children:"No music found"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:'Click "Add Folder" to import your local music.'})]}):e.map((_e,tt)=>{const nt=(d==null?void 0:d.id)===_e.id;return jsxRuntimeExports.jsxs("div",{onDoubleClick:()=>c(_e,e),className:`grid grid-cols-[auto_1fr_1fr_1fr_auto_auto] gap-4 py-2.5 px-2 rounded-lg items-center text-sm group hover:bg-white/10 transition-colors cursor-default ${nt?"bg-white/10 text-pink-500":"text-white/80"}`,children:[jsxRuntimeExports.jsxs("div",{className:"w-8 text-center relative flex justify-center",children:[jsxRuntimeExports.jsx("span",{className:`group-hover:hidden ${nt?"hidden":"block"}`,children:tt+1}),jsxRuntimeExports.jsx("button",{onClick:()=>c(_e,e),className:`hidden group-hover:block ${nt&&h?"hidden":""}`,children:jsxRuntimeExports.jsx(Play,{size:14,fill:"currentColor"})}),nt&&h&&jsxRuntimeExports.jsxs("div",{className:"w-3 h-3 flex gap-0.5 items-end justify-center",children:[jsxRuntimeExports.jsx("div",{className:"w-0.5 bg-pink-500 animate-[bounce_1s_infinite]"}),jsxRuntimeExports.jsx("div",{className:"w-0.5 bg-pink-500 animate-[bounce_1.2s_infinite]"}),jsxRuntimeExports.jsx("div",{className:"w-0.5 bg-pink-500 animate-[bounce_0.8s_infinite]"})]})]}),jsxRuntimeExports.jsx("div",{className:"font-medium truncate text-white",children:_e.title}),jsxRuntimeExports.jsx("div",{className:"truncate text-white/60",children:_e.artist}),jsxRuntimeExports.jsx("div",{className:"truncate text-white/60",children:_e.album}),jsxRuntimeExports.jsx("div",{className:"w-8 flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:lt=>{lt.stopPropagation(),g(_e)},className:`transition-all ${_e.liked?"opacity-100 text-pink-500":"opacity-0 group-hover:opacity-100 text-white/40 hover:text-white"}`,children:jsxRuntimeExports.jsx(Heart,{size:16,fill:_e.liked?"currentColor":"none"})})}),jsxRuntimeExports.jsx("div",{className:"w-16 text-right text-white/40 font-variant-numeric tabular-nums",children:$(_e.duration)})]},_e.id)})})]})})]})};function bind(e,a){return function(){return e.apply(a,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(e=>a=>{const s=toString.call(a);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),a=>kindOf(a)===e),typeOfTest=e=>a=>typeof a===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction$1(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(e):a=e&&e.buffer&&isArrayBuffer(e.buffer),a}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>e!==null&&typeof e=="object",isBoolean=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const a=getPrototypeOf(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(toStringTag in e)&&!(iterator in e)},isEmptyObject=e=>{if(!isObject(e)||isBuffer(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction$1(e.pipe),isFormData=e=>{let a;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction$1(e.append)&&((a=kindOf(e))==="formdata"||a==="object"&&isFunction$1(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,a,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let o,c;if(typeof e!="object"&&(e=[e]),isArray(e))for(o=0,c=e.length;o<c;o++)a.call(null,e[o],o,e);else{if(isBuffer(e))return;const d=s?Object.getOwnPropertyNames(e):Object.keys(e),h=d.length;let g;for(o=0;o<h;o++)g=d[o],a.call(null,e[g],g,e)}}function findKey(e,a){if(isBuffer(e))return null;a=a.toLowerCase();const s=Object.keys(e);let o=s.length,c;for(;o-- >0;)if(c=s[o],a===c.toLowerCase())return c;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e,skipUndefined:a}=isContextDefined(this)&&this||{},s={},o=(c,d)=>{const h=e&&findKey(s,d)||d;isPlainObject(s[h])&&isPlainObject(c)?s[h]=merge(s[h],c):isPlainObject(c)?s[h]=merge({},c):isArray(c)?s[h]=c.slice():(!a||!isUndefined(c))&&(s[h]=c)};for(let c=0,d=arguments.length;c<d;c++)arguments[c]&&forEach(arguments[c],o);return s}const extend=(e,a,s,{allOwnKeys:o}={})=>(forEach(a,(c,d)=>{s&&isFunction$1(c)?e[d]=bind(c,s):e[d]=c},{allOwnKeys:o}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,a,s,o)=>{e.prototype=Object.create(a.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject=(e,a,s,o)=>{let c,d,h;const g={};if(a=a||{},e==null)return a;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)h=c[d],(!o||o(h,e,a))&&!g[h]&&(a[h]=e[h],g[h]=!0);e=s!==!1&&getPrototypeOf(e)}while(e&&(!s||s(e,a))&&e!==Object.prototype);return a},endsWith=(e,a,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=a.length;const o=e.indexOf(a,s);return o!==-1&&o===s},toArray=e=>{if(!e)return null;if(isArray(e))return e;let a=e.length;if(!isNumber(a))return null;const s=new Array(a);for(;a-- >0;)s[a]=e[a];return s},isTypedArray=(e=>a=>e&&a instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,a)=>{const o=(e&&e[iterator]).call(e);let c;for(;(c=o.next())&&!c.done;){const d=c.value;a.call(e,d[0],d[1])}},matchAll=(e,a)=>{let s;const o=[];for(;(s=e.exec(a))!==null;)o.push(s);return o},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,o,c){return o.toUpperCase()+c}),hasOwnProperty=(({hasOwnProperty:e})=>(a,s)=>e.call(a,s))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,a)=>{const s=Object.getOwnPropertyDescriptors(e),o={};forEach(s,(c,d)=>{let h;(h=a(c,d,e))!==!1&&(o[d]=h||c)}),Object.defineProperties(e,o)},freezeMethods=e=>{reduceDescriptors(e,(a,s)=>{if(isFunction$1(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const o=e[s];if(isFunction$1(o)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},toObjectSet=(e,a)=>{const s={},o=c=>{c.forEach(d=>{s[d]=!0})};return isArray(e)?o(e):o(String(e).split(a)),s},noop=()=>{},toFiniteNumber=(e,a)=>e!=null&&Number.isFinite(e=+e)?e:a;function isSpecCompliantForm(e){return!!(e&&isFunction$1(e.append)&&e[toStringTag]==="FormData"&&e[iterator])}const toJSONObject=e=>{const a=new Array(10),s=(o,c)=>{if(isObject(o)){if(a.indexOf(o)>=0)return;if(isBuffer(o))return o;if(!("toJSON"in o)){a[c]=o;const d=isArray(o)?[]:{};return forEach(o,(h,g)=>{const _=s(h,c+1);!isUndefined(_)&&(d[g]=_)}),a[c]=void 0,d}}return o};return s(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction$1(e))&&isFunction$1(e.then)&&isFunction$1(e.catch),_setImmediate=((e,a)=>e?setImmediate:a?((s,o)=>(_global.addEventListener("message",({source:c,data:d})=>{c===_global&&d===s&&o.length&&o.shift()()},!1),c=>{o.push(c),_global.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=e=>e!=null&&isFunction$1(e[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError$1(e,a,s,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",a&&(this.code=a),s&&(this.config=s),o&&(this.request=o),c&&(this.response=c,this.status=c.status?c.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function e(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(e,a,s,o,c,d)=>{const h=Object.create(prototype$1);utils$1.toFlatObject(e,h,function(_e){return _e!==Error.prototype},$=>$!=="isAxiosError");const g=e&&e.message?e.message:"Error",_=a==null&&e?e.code:a;return AxiosError$1.call(h,g,_,s,o,c),e&&h.cause==null&&Object.defineProperty(h,"cause",{value:e,configurable:!0}),h.name=e&&e.name||"Error",d&&Object.assign(h,d),h};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,a,s){return e?e.concat(a).map(function(c,d){return c=removeBrackets(c),!s&&d?"["+c+"]":c}).join(s?".":""):a}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function e(a){return/^is[A-Z]/.test(a)});function toFormData$1(e,a,s){if(!utils$1.isObject(e))throw new TypeError("target must be an object");a=a||new FormData,s=utils$1.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ot,gt){return!utils$1.isUndefined(gt[ot])});const o=s.metaTokens,c=s.visitor||_e,d=s.dots,h=s.indexes,_=(s.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(a);if(!utils$1.isFunction(c))throw new TypeError("visitor must be a function");function $(dt){if(dt===null)return"";if(utils$1.isDate(dt))return dt.toISOString();if(utils$1.isBoolean(dt))return dt.toString();if(!_&&utils$1.isBlob(dt))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(dt)||utils$1.isTypedArray(dt)?_&&typeof Blob=="function"?new Blob([dt]):Buffer.from(dt):dt}function _e(dt,ot,gt){let pt=dt;if(dt&&!gt&&typeof dt=="object"){if(utils$1.endsWith(ot,"{}"))ot=o?ot:ot.slice(0,-2),dt=JSON.stringify(dt);else if(utils$1.isArray(dt)&&isFlatArray(dt)||(utils$1.isFileList(dt)||utils$1.endsWith(ot,"[]"))&&(pt=utils$1.toArray(dt)))return ot=removeBrackets(ot),pt.forEach(function(ht,St){!(utils$1.isUndefined(ht)||ht===null)&&a.append(h===!0?renderKey([ot],St,d):h===null?ot:ot+"[]",$(ht))}),!1}return isVisitable(dt)?!0:(a.append(renderKey(gt,ot,d),$(dt)),!1)}const tt=[],nt=Object.assign(predicates,{defaultVisitor:_e,convertValue:$,isVisitable});function lt(dt,ot){if(!utils$1.isUndefined(dt)){if(tt.indexOf(dt)!==-1)throw Error("Circular reference detected in "+ot.join("."));tt.push(dt),utils$1.forEach(dt,function(pt,mt){(!(utils$1.isUndefined(pt)||pt===null)&&c.call(a,pt,utils$1.isString(mt)?mt.trim():mt,ot,nt))===!0&&lt(pt,ot?ot.concat(mt):[mt])}),tt.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return lt(e),a}function encode$1(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return a[o]})}function AxiosURLSearchParams(e,a){this._pairs=[],e&&toFormData$1(e,this,a)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function e(a,s){this._pairs.push([a,s])};prototype.toString=function e(a){const s=a?function(o){return a.call(this,o,encode$1)}:encode$1;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(e,a,s){if(!a)return e;const o=s&&s.encode||encode;utils$1.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let d;if(c?d=c(a,s):d=utils$1.isURLSearchParams(a)?a.toString():new AxiosURLSearchParams(a,s).toString(o),d){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class InterceptorManager{constructor(){this.handlers=[]}use(a,s,o){return this.handlers.push({fulfilled:a,rejected:s,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){utils$1.forEach(this.handlers,function(o){o!==null&&a(o)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,a){return toFormData$1(e,new platform.classes.URLSearchParams,{visitor:function(s,o,c,d){return platform.isNode&&utils$1.isBuffer(s)?(this.append(o,s.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(a=>a[0]==="[]"?"":a[1]||a[0])}function arrayToObject(e){const a={},s=Object.keys(e);let o;const c=s.length;let d;for(o=0;o<c;o++)d=s[o],a[d]=e[d];return a}function formDataToJSON(e){function a(s,o,c,d){let h=s[d++];if(h==="__proto__")return!0;const g=Number.isFinite(+h),_=d>=s.length;return h=!h&&utils$1.isArray(c)?c.length:h,_?(utils$1.hasOwnProp(c,h)?c[h]=[c[h],o]:c[h]=o,!g):((!c[h]||!utils$1.isObject(c[h]))&&(c[h]=[]),a(s,o,c[h],d)&&utils$1.isArray(c[h])&&(c[h]=arrayToObject(c[h])),!g)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const s={};return utils$1.forEachEntry(e,(o,c)=>{a(parsePropPath(o),c,s,0)}),s}return null}function stringifySafely(e,a,s){if(utils$1.isString(e))try{return(a||JSON.parse)(e),utils$1.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(s||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function e(a,s){const o=s.getContentType()||"",c=o.indexOf("application/json")>-1,d=utils$1.isObject(a);if(d&&utils$1.isHTMLForm(a)&&(a=new FormData(a)),utils$1.isFormData(a))return c?JSON.stringify(formDataToJSON(a)):a;if(utils$1.isArrayBuffer(a)||utils$1.isBuffer(a)||utils$1.isStream(a)||utils$1.isFile(a)||utils$1.isBlob(a)||utils$1.isReadableStream(a))return a;if(utils$1.isArrayBufferView(a))return a.buffer;if(utils$1.isURLSearchParams(a))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let g;if(d){if(o.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(a,this.formSerializer).toString();if((g=utils$1.isFileList(a))||o.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return toFormData$1(g?{"files[]":a}:a,_&&new _,this.formSerializer)}}return d||c?(s.setContentType("application/json",!1),stringifySafely(a)):a}],transformResponse:[function e(a){const s=this.transitional||defaults.transitional,o=s&&s.forcedJSONParsing,c=this.responseType==="json";if(utils$1.isResponse(a)||utils$1.isReadableStream(a))return a;if(a&&utils$1.isString(a)&&(o&&!this.responseType||c)){const h=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(a,this.parseReviver)}catch(g){if(h)throw g.name==="SyntaxError"?AxiosError$1.from(g,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):g}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function e(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const a={};let s,o,c;return e&&e.split(`
`).forEach(function(h){c=h.indexOf(":"),s=h.substring(0,c).trim().toLowerCase(),o=h.substring(c+1).trim(),!(!s||a[s]&&ignoreDuplicateOf[s])&&(s==="set-cookie"?a[s]?a[s].push(o):a[s]=[o]:a[s]=a[s]?a[s]+", "+o:o)}),a},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const a=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=s.exec(e);)a[o[1]]=o[2];return a}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,a,s,o,c){if(utils$1.isFunction(o))return o.call(this,a,s);if(c&&(a=s),!!utils$1.isString(a)){if(utils$1.isString(o))return a.indexOf(o)!==-1;if(utils$1.isRegExp(o))return o.test(a)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,s,o)=>s.toUpperCase()+o)}function buildAccessors(e,a){const s=utils$1.toCamelCase(" "+a);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+s,{value:function(c,d,h){return this[o].call(this,a,c,d,h)},configurable:!0})})}let AxiosHeaders$1=class{constructor(a){a&&this.set(a)}set(a,s,o){const c=this;function d(g,_,$){const _e=normalizeHeader(_);if(!_e)throw new Error("header name must be a non-empty string");const tt=utils$1.findKey(c,_e);(!tt||c[tt]===void 0||$===!0||$===void 0&&c[tt]!==!1)&&(c[tt||_]=normalizeValue(g))}const h=(g,_)=>utils$1.forEach(g,($,_e)=>d($,_e,_));if(utils$1.isPlainObject(a)||a instanceof this.constructor)h(a,s);else if(utils$1.isString(a)&&(a=a.trim())&&!isValidHeaderName(a))h(parseHeaders(a),s);else if(utils$1.isObject(a)&&utils$1.isIterable(a)){let g={},_,$;for(const _e of a){if(!utils$1.isArray(_e))throw TypeError("Object iterator must return a key-value pair");g[$=_e[0]]=(_=g[$])?utils$1.isArray(_)?[..._,_e[1]]:[_,_e[1]]:_e[1]}h(g,s)}else a!=null&&d(s,a,o);return this}get(a,s){if(a=normalizeHeader(a),a){const o=utils$1.findKey(this,a);if(o){const c=this[o];if(!s)return c;if(s===!0)return parseTokens(c);if(utils$1.isFunction(s))return s.call(this,c,o);if(utils$1.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,s){if(a=normalizeHeader(a),a){const o=utils$1.findKey(this,a);return!!(o&&this[o]!==void 0&&(!s||matchHeaderValue(this,this[o],o,s)))}return!1}delete(a,s){const o=this;let c=!1;function d(h){if(h=normalizeHeader(h),h){const g=utils$1.findKey(o,h);g&&(!s||matchHeaderValue(o,o[g],g,s))&&(delete o[g],c=!0)}}return utils$1.isArray(a)?a.forEach(d):d(a),c}clear(a){const s=Object.keys(this);let o=s.length,c=!1;for(;o--;){const d=s[o];(!a||matchHeaderValue(this,this[d],d,a,!0))&&(delete this[d],c=!0)}return c}normalize(a){const s=this,o={};return utils$1.forEach(this,(c,d)=>{const h=utils$1.findKey(o,d);if(h){s[h]=normalizeValue(c),delete s[d];return}const g=a?formatHeader(d):String(d).trim();g!==d&&delete s[d],s[g]=normalizeValue(c),o[g]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const s=Object.create(null);return utils$1.forEach(this,(o,c)=>{o!=null&&o!==!1&&(s[c]=a&&utils$1.isArray(o)?o.join(", "):o)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,s])=>a+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...s){const o=new this(a);return s.forEach(c=>o.set(c)),o}static accessor(a){const o=(this[$internals]=this[$internals]={accessors:{}}).accessors,c=this.prototype;function d(h){const g=normalizeHeader(h);o[g]||(buildAccessors(c,h),o[g]=!0)}return utils$1.isArray(a)?a.forEach(d):d(a),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:e},a)=>{let s=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(o){this[s]=o}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(e,a){const s=this||defaults,o=a||s,c=AxiosHeaders$1.from(o.headers);let d=o.data;return utils$1.forEach(e,function(g){d=g.call(s,d,c.normalize(),a?a.status:void 0)}),c.normalize(),d}function isCancel$1(e){return!!(e&&e.__CANCEL__)}function CanceledError$1(e,a,s){AxiosError$1.call(this,e??"canceled",AxiosError$1.ERR_CANCELED,a,s),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(e,a,s){const o=s.config.validateStatus;!s.status||!o||o(s.status)?e(s):a(new AxiosError$1("Request failed with status code "+s.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function parseProtocol(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}function speedometer(e,a){e=e||10;const s=new Array(e),o=new Array(e);let c=0,d=0,h;return a=a!==void 0?a:1e3,function(_){const $=Date.now(),_e=o[d];h||(h=$),s[c]=_,o[c]=$;let tt=d,nt=0;for(;tt!==c;)nt+=s[tt++],tt=tt%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),$-h<a)return;const lt=_e&&$-_e;return lt?Math.round(nt*1e3/lt):void 0}}function throttle(e,a){let s=0,o=1e3/a,c,d;const h=($,_e=Date.now())=>{s=_e,c=null,d&&(clearTimeout(d),d=null),e(...$)};return[(...$)=>{const _e=Date.now(),tt=_e-s;tt>=o?h($,_e):(c=$,d||(d=setTimeout(()=>{d=null,h(c)},o-tt)))},()=>c&&h(c)]}const progressEventReducer=(e,a,s=3)=>{let o=0;const c=speedometer(50,250);return throttle(d=>{const h=d.loaded,g=d.lengthComputable?d.total:void 0,_=h-o,$=c(_),_e=h<=g;o=h;const tt={loaded:h,total:g,progress:g?h/g:void 0,bytes:_,rate:$||void 0,estimated:$&&g&&_e?(g-h)/$:void 0,event:d,lengthComputable:g!=null,[a?"download":"upload"]:!0};e(tt)},s)},progressEventDecorator=(e,a)=>{const s=e!=null;return[o=>a[0]({lengthComputable:s,total:e,loaded:o}),a[1]]},asyncDecorator=e=>(...a)=>utils$1.asap(()=>e(...a)),isURLSameOrigin=platform.hasStandardBrowserEnv?((e,a)=>s=>(s=new URL(s,platform.origin),e.protocol===s.protocol&&e.host===s.host&&(a||e.port===s.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(e,a,s,o,c,d,h){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(a)}`];utils$1.isNumber(s)&&g.push(`expires=${new Date(s).toUTCString()}`),utils$1.isString(o)&&g.push(`path=${o}`),utils$1.isString(c)&&g.push(`domain=${c}`),d===!0&&g.push("secure"),utils$1.isString(h)&&g.push(`SameSite=${h}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const a=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return a?decodeURIComponent(a[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}function buildFullPath(e,a,s){let o=!isAbsoluteURL(a);return e&&(o||s==!1)?combineURLs(e,a):a}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig$1(e,a){a=a||{};const s={};function o($,_e,tt,nt){return utils$1.isPlainObject($)&&utils$1.isPlainObject(_e)?utils$1.merge.call({caseless:nt},$,_e):utils$1.isPlainObject(_e)?utils$1.merge({},_e):utils$1.isArray(_e)?_e.slice():_e}function c($,_e,tt,nt){if(utils$1.isUndefined(_e)){if(!utils$1.isUndefined($))return o(void 0,$,tt,nt)}else return o($,_e,tt,nt)}function d($,_e){if(!utils$1.isUndefined(_e))return o(void 0,_e)}function h($,_e){if(utils$1.isUndefined(_e)){if(!utils$1.isUndefined($))return o(void 0,$)}else return o(void 0,_e)}function g($,_e,tt){if(tt in a)return o($,_e);if(tt in e)return o(void 0,$)}const _={url:d,method:d,data:d,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:g,headers:($,_e,tt)=>c(headersToObject($),headersToObject(_e),tt,!0)};return utils$1.forEach(Object.keys({...e,...a}),function(_e){const tt=_[_e]||c,nt=tt(e[_e],a[_e],_e);utils$1.isUndefined(nt)&&tt!==g||(s[_e]=nt)}),s}const resolveConfig=e=>{const a=mergeConfig$1({},e);let{data:s,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:d,headers:h,auth:g}=a;if(a.headers=h=AxiosHeaders$1.from(h),a.url=buildURL(buildFullPath(a.baseURL,a.url,a.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&h.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),utils$1.isFormData(s)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(utils$1.isFunction(s.getHeaders)){const _=s.getHeaders(),$=["content-type","content-length"];Object.entries(_).forEach(([_e,tt])=>{$.includes(_e.toLowerCase())&&h.set(_e,tt)})}}if(platform.hasStandardBrowserEnv&&(o&&utils$1.isFunction(o)&&(o=o(a)),o||o!==!1&&isURLSameOrigin(a.url))){const _=c&&d&&cookies.read(d);_&&h.set(c,_)}return a},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(s,o){const c=resolveConfig(e);let d=c.data;const h=AxiosHeaders$1.from(c.headers).normalize();let{responseType:g,onUploadProgress:_,onDownloadProgress:$}=c,_e,tt,nt,lt,dt;function ot(){lt&&lt(),dt&&dt(),c.cancelToken&&c.cancelToken.unsubscribe(_e),c.signal&&c.signal.removeEventListener("abort",_e)}let gt=new XMLHttpRequest;gt.open(c.method.toUpperCase(),c.url,!0),gt.timeout=c.timeout;function pt(){if(!gt)return;const ht=AxiosHeaders$1.from("getAllResponseHeaders"in gt&&gt.getAllResponseHeaders()),_t={data:!g||g==="text"||g==="json"?gt.responseText:gt.response,status:gt.status,statusText:gt.statusText,headers:ht,config:e,request:gt};settle(function(ut){s(ut),ot()},function(ut){o(ut),ot()},_t),gt=null}"onloadend"in gt?gt.onloadend=pt:gt.onreadystatechange=function(){!gt||gt.readyState!==4||gt.status===0&&!(gt.responseURL&&gt.responseURL.indexOf("file:")===0)||setTimeout(pt)},gt.onabort=function(){gt&&(o(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,gt)),gt=null)},gt.onerror=function(St){const _t=St&&St.message?St.message:"Network Error",Tt=new AxiosError$1(_t,AxiosError$1.ERR_NETWORK,e,gt);Tt.event=St||null,o(Tt),gt=null},gt.ontimeout=function(){let St=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const _t=c.transitional||transitionalDefaults;c.timeoutErrorMessage&&(St=c.timeoutErrorMessage),o(new AxiosError$1(St,_t.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,gt)),gt=null},d===void 0&&h.setContentType(null),"setRequestHeader"in gt&&utils$1.forEach(h.toJSON(),function(St,_t){gt.setRequestHeader(_t,St)}),utils$1.isUndefined(c.withCredentials)||(gt.withCredentials=!!c.withCredentials),g&&g!=="json"&&(gt.responseType=c.responseType),$&&([nt,dt]=progressEventReducer($,!0),gt.addEventListener("progress",nt)),_&&gt.upload&&([tt,lt]=progressEventReducer(_),gt.upload.addEventListener("progress",tt),gt.upload.addEventListener("loadend",lt)),(c.cancelToken||c.signal)&&(_e=ht=>{gt&&(o(!ht||ht.type?new CanceledError$1(null,e,gt):ht),gt.abort(),gt=null)},c.cancelToken&&c.cancelToken.subscribe(_e),c.signal&&(c.signal.aborted?_e():c.signal.addEventListener("abort",_e)));const mt=parseProtocol(c.url);if(mt&&platform.protocols.indexOf(mt)===-1){o(new AxiosError$1("Unsupported protocol "+mt+":",AxiosError$1.ERR_BAD_REQUEST,e));return}gt.send(d||null)})},composeSignals=(e,a)=>{const{length:s}=e=e?e.filter(Boolean):[];if(a||s){let o=new AbortController,c;const d=function($){if(!c){c=!0,g();const _e=$ instanceof Error?$:this.reason;o.abort(_e instanceof AxiosError$1?_e:new CanceledError$1(_e instanceof Error?_e.message:_e))}};let h=a&&setTimeout(()=>{h=null,d(new AxiosError$1(`timeout ${a} of ms exceeded`,AxiosError$1.ETIMEDOUT))},a);const g=()=>{e&&(h&&clearTimeout(h),h=null,e.forEach($=>{$.unsubscribe?$.unsubscribe(d):$.removeEventListener("abort",d)}),e=null)};e.forEach($=>$.addEventListener("abort",d));const{signal:_}=o;return _.unsubscribe=()=>utils$1.asap(g),_}},streamChunk=function*(e,a){let s=e.byteLength;if(s<a){yield e;return}let o=0,c;for(;o<s;)c=o+a,yield e.slice(o,c),o=c},readBytes=async function*(e,a){for await(const s of readStream(e))yield*streamChunk(s,a)},readStream=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const a=e.getReader();try{for(;;){const{done:s,value:o}=await a.read();if(s)break;yield o}}finally{await a.cancel()}},trackStream=(e,a,s,o)=>{const c=readBytes(e,a);let d=0,h,g=_=>{h||(h=!0,o&&o(_))};return new ReadableStream({async pull(_){try{const{done:$,value:_e}=await c.next();if($){g(),_.close();return}let tt=_e.byteLength;if(s){let nt=d+=tt;s(nt)}_.enqueue(new Uint8Array(_e))}catch($){throw g($),$}},cancel(_){return g(_),c.return()}},{highWaterMark:2})},DEFAULT_CHUNK_SIZE=64*1024,{isFunction}=utils$1,globalFetchAPI=(({Request:e,Response:a})=>({Request:e,Response:a}))(utils$1.global),{ReadableStream:ReadableStream$1,TextEncoder}=utils$1.global,test=(e,...a)=>{try{return!!e(...a)}catch{return!1}},factory=e=>{e=utils$1.merge.call({skipUndefined:!0},globalFetchAPI,e);const{fetch:a,Request:s,Response:o}=e,c=a?isFunction(a):typeof fetch=="function",d=isFunction(s),h=isFunction(o);if(!c)return!1;const g=c&&isFunction(ReadableStream$1),_=c&&(typeof TextEncoder=="function"?(dt=>ot=>dt.encode(ot))(new TextEncoder):async dt=>new Uint8Array(await new s(dt).arrayBuffer())),$=d&&g&&test(()=>{let dt=!1;const ot=new s(platform.origin,{body:new ReadableStream$1,method:"POST",get duplex(){return dt=!0,"half"}}).headers.has("Content-Type");return dt&&!ot}),_e=h&&g&&test(()=>utils$1.isReadableStream(new o("").body)),tt={stream:_e&&(dt=>dt.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(dt=>{!tt[dt]&&(tt[dt]=(ot,gt)=>{let pt=ot&&ot[dt];if(pt)return pt.call(ot);throw new AxiosError$1(`Response type '${dt}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,gt)})});const nt=async dt=>{if(dt==null)return 0;if(utils$1.isBlob(dt))return dt.size;if(utils$1.isSpecCompliantForm(dt))return(await new s(platform.origin,{method:"POST",body:dt}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(dt)||utils$1.isArrayBuffer(dt))return dt.byteLength;if(utils$1.isURLSearchParams(dt)&&(dt=dt+""),utils$1.isString(dt))return(await _(dt)).byteLength},lt=async(dt,ot)=>{const gt=utils$1.toFiniteNumber(dt.getContentLength());return gt??nt(ot)};return async dt=>{let{url:ot,method:gt,data:pt,signal:mt,cancelToken:ht,timeout:St,onDownloadProgress:_t,onUploadProgress:Tt,responseType:ut,headers:bt,withCredentials:zt="same-origin",fetchOptions:Ht}=resolveConfig(dt),Qt=a||fetch;ut=ut?(ut+"").toLowerCase():"text";let sr=composeSignals([mt,ht&&ht.toAbortSignal()],St),Ut=null;const vr=sr&&sr.unsubscribe&&(()=>{sr.unsubscribe()});let xr;try{if(Tt&&$&&gt!=="get"&&gt!=="head"&&(xr=await lt(bt,pt))!==0){let ir=new s(ot,{method:"POST",body:pt,duplex:"half"}),wr;if(utils$1.isFormData(pt)&&(wr=ir.headers.get("content-type"))&&bt.setContentType(wr),ir.body){const[fr,Ar]=progressEventDecorator(xr,progressEventReducer(asyncDecorator(Tt)));pt=trackStream(ir.body,DEFAULT_CHUNK_SIZE,fr,Ar)}}utils$1.isString(zt)||(zt=zt?"include":"omit");const mr=d&&"credentials"in s.prototype,br={...Ht,signal:sr,method:gt.toUpperCase(),headers:bt.normalize().toJSON(),body:pt,duplex:"half",credentials:mr?zt:void 0};Ut=d&&new s(ot,br);let Gt=await(d?Qt(Ut,Ht):Qt(ot,br));const nr=_e&&(ut==="stream"||ut==="response");if(_e&&(_t||nr&&vr)){const ir={};["status","statusText","headers"].forEach(Lr=>{ir[Lr]=Gt[Lr]});const wr=utils$1.toFiniteNumber(Gt.headers.get("content-length")),[fr,Ar]=_t&&progressEventDecorator(wr,progressEventReducer(asyncDecorator(_t),!0))||[];Gt=new o(trackStream(Gt.body,DEFAULT_CHUNK_SIZE,fr,()=>{Ar&&Ar(),vr&&vr()}),ir)}ut=ut||"text";let or=await tt[utils$1.findKey(tt,ut)||"text"](Gt,dt);return!nr&&vr&&vr(),await new Promise((ir,wr)=>{settle(ir,wr,{data:or,headers:AxiosHeaders$1.from(Gt.headers),status:Gt.status,statusText:Gt.statusText,config:dt,request:Ut})})}catch(mr){throw vr&&vr(),mr&&mr.name==="TypeError"&&/Load failed|fetch/i.test(mr.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,dt,Ut),{cause:mr.cause||mr}):AxiosError$1.from(mr,mr&&mr.code,dt,Ut)}}},seedCache=new Map,getFetch=e=>{let a=e&&e.env||{};const{fetch:s,Request:o,Response:c}=a,d=[o,c,s];let h=d.length,g=h,_,$,_e=seedCache;for(;g--;)_=d[g],$=_e.get(_),$===void 0&&_e.set(_,$=g?new Map:factory(a)),_e=$;return $};getFetch();const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:{get:getFetch}};utils$1.forEach(knownAdapters,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch{}Object.defineProperty(e,"adapterName",{value:a})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1;function getAdapter$1(e,a){e=utils$1.isArray(e)?e:[e];const{length:s}=e;let o,c;const d={};for(let h=0;h<s;h++){o=e[h];let g;if(c=o,!isResolvedHandle(o)&&(c=knownAdapters[(g=String(o)).toLowerCase()],c===void 0))throw new AxiosError$1(`Unknown adapter '${g}'`);if(c&&(utils$1.isFunction(c)||(c=c.get(a))))break;d[g||"#"+h]=c}if(!c){const h=Object.entries(d).map(([_,$])=>`adapter ${_} `+($===!1?"is not supported by the environment":"is not available in the build"));let g=s?h.length>1?`since :
`+h.map(renderReason).join(`
`):" "+renderReason(h[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return c}const adapters={getAdapter:getAdapter$1,adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults.adapter,e)(e).then(function(o){return throwIfCancellationRequested(e),o.data=transformData.call(e,e.transformResponse,o),o.headers=AxiosHeaders$1.from(o.headers),o},function(o){return isCancel$1(o)||(throwIfCancellationRequested(e),o&&o.response&&(o.response.data=transformData.call(e,e.transformResponse,o.response),o.response.headers=AxiosHeaders$1.from(o.response.headers))),Promise.reject(o)})}const VERSION$1="1.13.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{validators$1[e]=function(o){return typeof o===e||"a"+(a<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function e(a,s,o){function c(d,h){return"[Axios v"+VERSION$1+"] Transitional option '"+d+"'"+h+(o?". "+o:"")}return(d,h,g)=>{if(a===!1)throw new AxiosError$1(c(h," has been removed"+(s?" in "+s:"")),AxiosError$1.ERR_DEPRECATED);return s&&!deprecatedWarnings[h]&&(deprecatedWarnings[h]=!0,console.warn(c(h," has been deprecated since v"+s+" and will be removed in the near future"))),a?a(d,h,g):!0}};validators$1.spelling=function e(a){return(s,o)=>(console.warn(`${o} is likely a misspelling of ${a}`),!0)};function assertOptions(e,a,s){if(typeof e!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let c=o.length;for(;c-- >0;){const d=o[c],h=a[d];if(h){const g=e[d],_=g===void 0||h(g,d,e);if(_!==!0)throw new AxiosError$1("option "+d+" must be "+_,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new AxiosError$1("Unknown option "+d,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(a){this.defaults=a||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(a,s){try{return await this._request(a,s)}catch(o){if(o instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const d=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?d&&!String(o.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+d):o.stack=d}catch{}}throw o}}_request(a,s){typeof a=="string"?(s=s||{},s.url=a):s=a||{},s=mergeConfig$1(this.defaults,s);const{transitional:o,paramsSerializer:c,headers:d}=s;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),c!=null&&(utils$1.isFunction(c)?s.paramsSerializer={serialize:c}:validator.assertOptions(c,{encode:validators.function,serialize:validators.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),validator.assertOptions(s,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let h=d&&utils$1.merge(d.common,d[s.method]);d&&utils$1.forEach(["delete","get","head","post","put","patch","common"],dt=>{delete d[dt]}),s.headers=AxiosHeaders$1.concat(h,d);const g=[];let _=!0;this.interceptors.request.forEach(function(ot){typeof ot.runWhen=="function"&&ot.runWhen(s)===!1||(_=_&&ot.synchronous,g.unshift(ot.fulfilled,ot.rejected))});const $=[];this.interceptors.response.forEach(function(ot){$.push(ot.fulfilled,ot.rejected)});let _e,tt=0,nt;if(!_){const dt=[dispatchRequest.bind(this),void 0];for(dt.unshift(...g),dt.push(...$),nt=dt.length,_e=Promise.resolve(s);tt<nt;)_e=_e.then(dt[tt++],dt[tt++]);return _e}nt=g.length;let lt=s;for(;tt<nt;){const dt=g[tt++],ot=g[tt++];try{lt=dt(lt)}catch(gt){ot.call(this,gt);break}}try{_e=dispatchRequest.call(this,lt)}catch(dt){return Promise.reject(dt)}for(tt=0,nt=$.length;tt<nt;)_e=_e.then($[tt++],$[tt++]);return _e}getUri(a){a=mergeConfig$1(this.defaults,a);const s=buildFullPath(a.baseURL,a.url,a.allowAbsoluteUrls);return buildURL(s,a.params,a.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function e(a){Axios$1.prototype[a]=function(s,o){return this.request(mergeConfig$1(o||{},{method:a,url:s,data:(o||{}).data}))}});utils$1.forEach(["post","put","patch"],function e(a){function s(o){return function(d,h,g){return this.request(mergeConfig$1(g||{},{method:a,headers:o?{"Content-Type":"multipart/form-data"}:{},url:d,data:h}))}}Axios$1.prototype[a]=s(),Axios$1.prototype[a+"Form"]=s(!0)});let CancelToken$1=class go{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(d){s=d});const o=this;this.promise.then(c=>{if(!o._listeners)return;let d=o._listeners.length;for(;d-- >0;)o._listeners[d](c);o._listeners=null}),this.promise.then=c=>{let d;const h=new Promise(g=>{o.subscribe(g),d=g}).then(c);return h.cancel=function(){o.unsubscribe(d)},h},a(function(d,h,g){o.reason||(o.reason=new CanceledError$1(d,h,g),s(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const s=this._listeners.indexOf(a);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const a=new AbortController,s=o=>{a.abort(o)};return this.subscribe(s),a.signal.unsubscribe=()=>this.unsubscribe(s),a.signal}static source(){let a;return{token:new go(function(c){a=c}),cancel:a}}};function spread$1(e){return function(s){return e.apply(null,s)}}function isAxiosError$1(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(HttpStatusCode$1).forEach(([e,a])=>{HttpStatusCode$1[a]=e});function createInstance(e){const a=new Axios$1(e),s=bind(Axios$1.prototype.request,a);return utils$1.extend(s,Axios$1.prototype,a,{allOwnKeys:!0}),utils$1.extend(s,a,null,{allOwnKeys:!0}),s.create=function(c){return createInstance(mergeConfig$1(e,c))},s}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function e(a){return Promise.all(a)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,PROXY_PREFIX$1="/netease",searchMusic$1=async(e,a=1,s=10)=>{var o;try{const c=s*3,d=(a-1)*c,g=((o=(await axios.get(`${PROXY_PREFIX$1}/api/search/get/web`,{params:{s:e,type:1,limit:c,offset:d}})).data.result)==null?void 0:o.songs)||[];if(g.length===0)return[];const _=g.map(nt=>nt.id),$=await axios.get(`${PROXY_PREFIX$1}/api/song/enhance/player/url`,{params:{ids:JSON.stringify(_),br:32e4}}),_e={};return($.data.data||[]).forEach(nt=>{nt.url&&(_e[nt.id]=nt.url)}),g.filter(nt=>_e[nt.id]).map(nt=>{var lt,dt;return{id:nt.id,name:nt.name,artist:nt.artists?nt.artists.map(ot=>ot.name).join(", "):"Unknown",album:((lt=nt.album)==null?void 0:lt.name)||"Unknown Album",picUrl:((dt=nt.album)==null?void 0:dt.picUrl)||null,playUrl:_e[nt.id],duration:nt.duration?nt.duration/1e3:0,source:"wy"}}).slice(0,s)}catch(c){return console.error("Netease search failed:",c),[]}},getPlayUrl=async(e,a="wy")=>{var s,o;try{return((o=(s=(await axios.get(`${PROXY_PREFIX$1}/api/song/enhance/player/url`,{params:{ids:`[${e}]`,br:32e4}})).data.data)==null?void 0:s[0])==null?void 0:o.url)||null}catch(c){return console.error("Get play URL failed:",c),null}},SearchPage=()=>{const[e,a]=reactExports.useState(""),[s,o]=reactExports.useState([]),[c,d]=reactExports.useState(!1),[h,g]=reactExports.useState(!1),{playSong:_}=usePlayerStore(),{songs:$}=useLibraryStore(),_e=usePlayerStore(ot=>ot.toggleLike),tt=async()=>{if(e.trim()){g(!0),o([]);try{const ot=await searchMusic$1(e);o(ot)}catch(ot){console.error("Search error",ot)}finally{g(!1)}}},nt=async ot=>{d(!0);try{let gt=ot.playUrl;if(gt||(gt=await getPlayUrl(ot.id,ot.source)),gt){const pt={id:ot.id,title:ot.name,artist:ot.artist,album:ot.album||"Unknown Album",duration:ot.duration||0,coverUrl:ot.picUrl,remoteCoverUrl:ot.picUrl,url:gt,liked:$.some(mt=>mt.id===ot.id&&mt.liked)};_(pt)}else alert("Failed to get playback URL")}catch(gt){console.error(gt),alert("Error playing song")}finally{d(!1)}},lt=ot=>{ot.playUrl?window.open(ot.playUrl,"_blank"):alert("Failed to get download URL")},dt=ot=>$.some(gt=>gt.id===ot&&gt.liked);return jsxRuntimeExports.jsxs("div",{className:"flex-1 h-full overflow-hidden flex flex-col bg-black p-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Search"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1 max-w-xl",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/40",size:20}),jsxRuntimeExports.jsx("input",{type:"text",value:e,onChange:ot=>a(ot.target.value),onKeyDown:ot=>ot.key==="Enter"&&tt(),placeholder:"Search for songs, artists...",className:"w-full bg-white/10 rounded-xl pl-12 pr-4 py-3 text-lg text-white placeholder-white/40 focus:outline-none focus:bg-white/20 transition-colors"})]}),jsxRuntimeExports.jsx("button",{onClick:tt,disabled:h,className:"bg-pink-500 hover:bg-pink-600 text-white px-8 py-3 rounded-xl font-medium transition-colors disabled:opacity-50",children:h?jsxRuntimeExports.jsx(Loader2,{className:"animate-spin"}):"Search"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[s.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-2",children:s.map(ot=>{const gt=dt(ot.id);return jsxRuntimeExports.jsxs("div",{className:"group flex items-center justify-between p-4 rounded-xl hover:bg-white/10 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[ot.picUrl?jsxRuntimeExports.jsx("img",{src:ot.picUrl,alt:ot.album,className:"w-12 h-12 rounded-md object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-md bg-white/10 flex items-center justify-center text-xs text-white/40",children:"No Cover"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-white truncate",children:ot.name}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-white/60 truncate",children:[ot.artist,"  ",ot.album]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[jsxRuntimeExports.jsx("button",{onClick:pt=>{pt.stopPropagation();const mt={id:ot.id,title:ot.name,artist:ot.artist,album:ot.album||"Unknown Album",duration:ot.duration||0,coverUrl:ot.picUrl,remoteCoverUrl:ot.picUrl,url:ot.playUrl,liked:gt};_e(mt)},className:`transition-all ${gt?"opacity-100 text-pink-500":"text-white/40 hover:text-white"}`,children:jsxRuntimeExports.jsx(Heart,{size:16,fill:gt?"currentColor":"none"})}),jsxRuntimeExports.jsx("button",{onClick:()=>nt(ot),className:"p-2 bg-white text-black rounded-full hover:scale-105 transition",title:"Play",children:jsxRuntimeExports.jsx(Play,{size:16,fill:"currentColor",className:"ml-0.5"})}),jsxRuntimeExports.jsx("button",{onClick:()=>lt(ot),className:"p-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition",title:"Download",children:jsxRuntimeExports.jsx(Download,{size:16})})]})]},ot.id)})}),s.length===0&&!h&&e&&jsxRuntimeExports.jsx("div",{className:"text-center text-white/40 mt-20",children:'Try searching for a song name like ""'})]}),c&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#1c1c1e] p-6 rounded-xl flex flex-col items-center gap-4",children:[jsxRuntimeExports.jsx(Loader2,{className:"animate-spin text-pink-500",size:32}),jsxRuntimeExports.jsx("p",{children:"Fetching song URL..."})]})})]})},AlbumsView=()=>{const{songs:e}=useLibraryStore(),{playSong:a,currentSong:s,isPlaying:o,toggleLike:c}=usePlayerStore(),[d,h]=reactExports.useState(null),g=reactExports.useMemo(()=>{const $={},_e=[];e.forEach(nt=>{nt.liked&&_e.push(nt);const lt=nt.album||"Unknown Album";$[lt]||($[lt]={name:lt,artist:nt.artist||"Unknown Artist",songs:[],cover:nt.remoteCoverUrl||(nt.coverBlob?URL.createObjectURL(new Blob([nt.coverBlob])):null)}),$[lt].songs.push(nt)});const tt=Object.values($).sort((nt,lt)=>nt.name.localeCompare(lt.name));return _e.length>0&&tt.unshift({name:"Favorites",artist:"Various Artists",songs:_e,isFavorites:!0,cover:null}),tt},[e]),_=$=>{if(!$)return"--:--";const _e=Math.floor($/60),tt=Math.floor($%60);return`${_e}:${tt.toString().padStart(2,"0")}`};return d?jsxRuntimeExports.jsxs("div",{className:"flex-1 h-full overflow-hidden flex flex-col bg-black",children:[jsxRuntimeExports.jsxs("div",{className:"p-8 pb-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>h(null),className:"flex items-center gap-1 text-pink-500 hover:underline mb-4 text-sm font-medium",children:[jsxRuntimeExports.jsx(ChevronLeft,{size:16}),"Back to Albums"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-6 items-end",children:[jsxRuntimeExports.jsx("div",{className:"w-40 h-40 shadow-2xl rounded-lg overflow-hidden bg-white/10 flex items-center justify-center relative group",children:d.isFavorites?jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Heart,{size:64,fill:"white",className:"text-white"})}):d.cover?jsxRuntimeExports.jsx("img",{src:d.cover,alt:d.name,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-4xl text-white/20 font-bold",children:d.name[0]})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold mb-2",children:d.name}),jsxRuntimeExports.jsx("p",{className:"text-xl text-pink-500 font-medium",children:d.artist}),jsxRuntimeExports.jsxs("p",{className:"text-white/60 text-sm mt-1",children:[d.songs.length," songs"]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 flex gap-3",children:jsxRuntimeExports.jsxs("button",{onClick:()=>a(d.songs[0],d.songs),className:"flex items-center gap-2 bg-pink-500 hover:bg-pink-600 text-white px-8 py-3 rounded-lg font-bold transition-colors",children:[jsxRuntimeExports.jsx(Play,{fill:"currentColor",size:20}),"Play"]})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8 pt-0",children:jsxRuntimeExports.jsxs("div",{className:"w-full text-left border-collapse",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-black z-10 grid grid-cols-[auto_1fr_1fr_auto_auto] gap-4 py-3 border-b border-white/10 text-xs font-medium text-white/40 uppercase tracking-wider",children:[jsxRuntimeExports.jsx("div",{className:"w-8 text-center",children:"#"}),jsxRuntimeExports.jsx("div",{children:"Title"}),jsxRuntimeExports.jsx("div",{children:"Artist"}),jsxRuntimeExports.jsx("div",{className:"w-8"}),jsxRuntimeExports.jsx("div",{className:"w-16 text-right",children:jsxRuntimeExports.jsx(Clock,{size:14,className:"ml-auto"})})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 space-y-1",children:d.songs.map(($,_e)=>{const tt=(s==null?void 0:s.id)===$.id;return jsxRuntimeExports.jsxs("div",{onDoubleClick:()=>a($,d.songs),className:`grid grid-cols-[auto_1fr_1fr_auto_auto] gap-4 py-2.5 px-2 rounded-lg items-center text-sm group hover:bg-white/10 transition-colors cursor-default ${tt?"bg-white/10 text-pink-500":"text-white/80"}`,children:[jsxRuntimeExports.jsxs("div",{className:"w-8 text-center relative flex justify-center",children:[jsxRuntimeExports.jsx("span",{className:`group-hover:hidden ${tt?"hidden":"block"}`,children:_e+1}),jsxRuntimeExports.jsx("button",{onClick:()=>a($,d.songs),className:`hidden group-hover:block ${tt&&o?"hidden":""}`,children:jsxRuntimeExports.jsx(Play,{size:14,fill:"currentColor"})}),tt&&o&&jsxRuntimeExports.jsxs("div",{className:"w-3 h-3 flex gap-0.5 items-end justify-center",children:[jsxRuntimeExports.jsx("div",{className:"w-0.5 bg-pink-500 animate-[bounce_1s_infinite]"}),jsxRuntimeExports.jsx("div",{className:"w-0.5 bg-pink-500 animate-[bounce_1.2s_infinite]"}),jsxRuntimeExports.jsx("div",{className:"w-0.5 bg-pink-500 animate-[bounce_0.8s_infinite]"})]})]}),jsxRuntimeExports.jsx("div",{className:"font-medium truncate text-white",children:$.title}),jsxRuntimeExports.jsx("div",{className:"truncate text-white/60",children:$.artist}),jsxRuntimeExports.jsx("div",{className:"w-8 flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:nt=>{nt.stopPropagation(),c($)},className:`transition-all ${$.liked?"opacity-100 text-pink-500":"opacity-0 group-hover:opacity-100 text-white/40 hover:text-white"}`,children:jsxRuntimeExports.jsx(Heart,{size:16,fill:$.liked?"currentColor":"none"})})}),jsxRuntimeExports.jsx("div",{className:"w-16 text-right text-white/40 font-variant-numeric tabular-nums",children:_($.duration)})]},$.id)})})]})})]}):jsxRuntimeExports.jsx("div",{className:"flex-1 h-full overflow-hidden flex flex-col bg-black",children:jsxRuntimeExports.jsxs("div",{className:"p-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Albums"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:g.map($=>jsxRuntimeExports.jsxs(motion.div,{whileHover:{y:-5},onClick:()=>h($),className:"group cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"aspect-square w-full rounded-lg overflow-hidden bg-white/5 mb-3 shadow-lg relative",children:[$.isFavorites?jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Heart,{size:48,fill:"white",className:"text-white drop-shadow-md"})}):$.cover?jsxRuntimeExports.jsx("img",{src:$.cover,alt:$.name,className:"w-full h-full object-cover transition duration-500 group-hover:scale-110"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800 text-white/20 font-bold text-4xl",children:$.name[0]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-pink-500 rounded-full flex items-center justify-center shadow-xl transform scale-50 group-hover:scale-100 transition duration-300",children:jsxRuntimeExports.jsx(Play,{fill:"white",className:"ml-1 text-white",size:24})})})]}),jsxRuntimeExports.jsx("h3",{className:"font-bold text-white truncate",children:$.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-white/60 truncate",children:$.artist})]},$.name))})]})})},PROXY_PREFIX="/netease",searchMusic=async e=>{var a,s;try{const o=await fetch(`${PROXY_PREFIX}/api/search/get/web?s=${encodeURIComponent(e)}&type=1&offset=0&total=true&limit=1`);if(!o.ok)throw new Error("Search failed");return((s=(a=(await o.json()).result)==null?void 0:a.songs)==null?void 0:s[0])||null}catch(o){return console.error("Search error:",o),null}},getSongDetail=async e=>{var a;try{const s=await fetch(`${PROXY_PREFIX}/api/song/detail/?id=${e}&ids=[${e}]`);if(!s.ok)throw new Error("Detail fetch failed");return((a=(await s.json()).songs)==null?void 0:a[0])||null}catch(s){return console.error("Detail error:",s),null}},getLyrics=async e=>{var a,s;try{const o=await fetch(`${PROXY_PREFIX}/api/song/lyric?os=pc&id=${e}&lv=-1&kv=-1&tv=-1`);if(!o.ok)throw new Error("Lyrics fetch failed");const c=await o.json();return{original:((a=c.lrc)==null?void 0:a.lyric)||"",translation:((s=c.tlyric)==null?void 0:s.lyric)||""}}catch(o){return console.error("Lyrics error:",o),null}},parseLyrics=e=>{if(!e)return[];const a=e.split(`
`),s=[],o=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/;for(const c of a){const d=o.exec(c);if(d){const h=parseInt(d[1]),g=parseInt(d[2]),_=parseInt(d[3].padEnd(3,"0")),$=h*60+g+_/1e3,_e=c.replace(o,"").trim();_e&&s.push({time:$,text:_e})}}return s},matchAndGetMetadata=async(e,a)=>{var s;try{const o=`${e} ${a}`,c=await searchMusic(o);if(c){const[d,h]=await Promise.all([getSongDetail(c.id),getLyrics(c.id)]),g={};if((s=d==null?void 0:d.album)!=null&&s.picUrl&&(g.remoteCoverUrl=d.album.picUrl),h!=null&&h.original&&(g.lyrics=h.original),Object.keys(g).length>0)return g}return null}catch(o){throw console.error("Match error:",o),o}},PlayerBar=()=>{const{currentSong:e,isPlaying:a,setIsPlaying:s,nextSong:o,prevSong:c,toggleFullScreen:d,volume:h,setVolume:g,currentTime:_,duration:$,setDuration:_e,setCurrentTime:tt,updateCurrentSongMetadata:nt}=usePlayerStore();if(reactExports.useEffect(()=>{(async()=>{if(e!=null&&e.id){const gt=!!e.lyrics,pt=!!e.remoteCoverUrl;if(!gt||!pt)try{const mt=await matchAndGetMetadata(e.title,e.artist);mt&&nt(mt)}catch{}}})()},[e==null?void 0:e.id]),!e)return null;const lt=e.remoteCoverUrl||(e.coverBlob?URL.createObjectURL(new Blob([e.coverBlob])):null),dt=ot=>{const gt=parseFloat(ot.target.value);tt(gt)};return jsxRuntimeExports.jsxs("div",{className:"h-20 bg-[#1c1c1e]/95 backdrop-blur-xl border-t border-white/10 flex items-center px-4 justify-between z-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 w-[30%] min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"w-12 h-12 rounded-md bg-white/10 overflow-hidden flex-shrink-0 relative group cursor-pointer",onClick:d,children:[lt?jsxRuntimeExports.jsx("img",{src:lt,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-white/40",children:"Music"})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 hidden group-hover:flex items-center justify-center",children:jsxRuntimeExports.jsx(Maximize2,{size:16})})]}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"font-medium truncate text-sm hover:underline cursor-pointer",onClick:d,children:e.title}),jsxRuntimeExports.jsx("div",{className:"text-xs text-white/60 truncate hover:underline cursor-pointer",children:e.artist})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-1 w-[40%]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsx("button",{onClick:c,className:"text-white/60 hover:text-white transition",children:jsxRuntimeExports.jsx(SkipBack,{size:20,fill:"currentColor"})}),jsxRuntimeExports.jsx("button",{onClick:()=>s(!a),className:"w-8 h-8 flex items-center justify-center bg-white text-black rounded-full hover:scale-105 transition",children:a?jsxRuntimeExports.jsx(Pause,{size:16,fill:"currentColor"}):jsxRuntimeExports.jsx(Play,{size:16,fill:"currentColor",className:"ml-0.5"})}),jsxRuntimeExports.jsx("button",{onClick:o,className:"text-white/60 hover:text-white transition",children:jsxRuntimeExports.jsx(SkipForward,{size:20,fill:"currentColor"})})]}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md flex items-center gap-2 text-[10px] text-white/40 font-medium tabular-nums",children:[jsxRuntimeExports.jsx("span",{children:formatTime(_)}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:$||100,value:_,onChange:dt,className:"flex-1 h-1 bg-white/10 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2 [&::-webkit-slider-thumb]:h-2 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white hover:[&::-webkit-slider-thumb]:bg-white"}),jsxRuntimeExports.jsx("span",{children:formatTime($)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-4 w-[30%]",children:[jsxRuntimeExports.jsx("button",{className:"text-white/60 hover:text-white",children:jsxRuntimeExports.jsx(ListMusic,{size:18})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 w-24",children:[jsxRuntimeExports.jsx(Volume2,{size:16,className:"text-white/60"}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:1,step:.01,value:h,onChange:ot=>g(parseFloat(ot.target.value)),className:"w-full h-1 bg-white/10 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2 [&::-webkit-slider-thumb]:h-2 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white"})]})]})]})},formatTime=e=>{if(!e)return"0:00";const a=Math.floor(e/60),s=Math.floor(e%60);return`${a}:${s.toString().padStart(2,"0")}`};function FullScreenPlayer(){const{currentSong:e,isPlaying:a,setIsPlaying:s,nextSong:o,prevSong:c,toggleFullScreen:d,volume:h,setVolume:g,currentTime:_,duration:$,setCurrentTime:_e,updateCurrentSongMetadata:tt,toggleLike:nt}=usePlayerStore(),[lt,dt]=reactExports.useState(!1),[ot,gt]=reactExports.useState([]),[pt,mt]=reactExports.useState(!1),[ht,St]=reactExports.useState(-1),_t=reactExports.useRef(null);reactExports.useEffect(()=>{e!=null&&e.lyrics?gt(parseLyrics(e.lyrics)):gt([])},[e]),reactExports.useEffect(()=>{if(!ot.length)return;const zt=ot.findIndex((Ht,Qt)=>{const sr=ot[Qt+1];return _>=Ht.time&&(!sr||_<sr.time)});St(zt)},[_,ot]),reactExports.useEffect(()=>{if(pt&&ht!==-1&&_t.current){const zt=_t.current.children[ht];zt&&zt.scrollIntoView({behavior:"smooth",block:"center"})}},[ht,pt]);const Tt=async(zt=!1)=>{if(e){dt(!0);try{const Ht=await matchAndGetMetadata(e.title,e.artist);Ht?(tt(Ht),!zt&&Ht.lyrics&&mt(!0)):zt||alert("No match found")}catch(Ht){console.error(Ht),zt||alert("Failed to match info")}finally{dt(!1)}}};if(!e)return null;const ut=zt=>{const Ht=Math.floor(zt/60),Qt=Math.floor(zt%60);return`${Ht}:${Qt.toString().padStart(2,"0")}`},bt=e.remoteCoverUrl||(e.coverBlob?URL.createObjectURL(new Blob([e.coverBlob])):"https://upload.wikimedia.org/wikipedia/commons/c/ca/CD-ROM.png");return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden bg-black text-white font-sans",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 z-0 transition-colors duration-1000 ease-in-out opacity-60 bg-gray-900"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 z-0 backdrop-blur-[100px] bg-black/30"}),bt&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 z-[-1] opacity-50 blur-3xl scale-125 transition-all duration-1000",style:{backgroundImage:`url(${bt})`,backgroundPosition:"center",backgroundSize:"cover"}}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col h-full max-w-5xl mx-auto p-8 pt-12",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-8 relative",children:[jsxRuntimeExports.jsx("button",{onClick:d,className:"w-8 h-8 flex items-center justify-center bg-white/10 rounded-full hover:bg-white/20 transition",children:jsxRuntimeExports.jsx(ChevronDown,{size:20})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 bg-black/20 rounded-lg p-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>mt(!1),className:`px-4 py-1 rounded-md text-xs font-medium transition ${pt?"text-white/40 hover:text-white":"bg-white/20 text-white"}`,children:"Cover"}),jsxRuntimeExports.jsx("button",{onClick:()=>mt(!0),className:`px-4 py-1 rounded-md text-xs font-medium transition ${pt?"bg-white/20 text-white":"text-white/40 hover:text-white"}`,children:"Lyrics"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt(!1),disabled:lt,className:"w-8 h-8 flex items-center justify-center bg-white/10 rounded-full hover:bg-white/20 transition disabled:opacity-50",title:"Auto Match Info",children:jsxRuntimeExports.jsx(Wand2,{size:16,className:lt?"animate-spin":""})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col md:flex-row items-center justify-center gap-12 md:gap-24 pb-20",children:[pt?jsxRuntimeExports.jsx("div",{ref:_t,className:"w-full h-[50vh] md:h-[60vh] overflow-y-auto custom-scrollbar text-center space-y-6 mask-linear-gradient",children:ot.length>0?ot.map((zt,Ht)=>jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:10},animate:{opacity:ht===Ht?1:.5,scale:ht===Ht?1.05:1,filter:ht===Ht?"blur(0px)":"blur(0.5px)",color:ht===Ht?"#ffffff":"rgba(255, 255, 255, 0.6)"},className:"text-lg md:text-2xl font-bold transition-all duration-500 cursor-pointer hover:opacity-80",onClick:()=>{const Qt=document.querySelector("audio");Qt&&(Qt.currentTime=zt.time),_e(zt.time)},children:zt.text},Ht)):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/40",children:[jsxRuntimeExports.jsx("p",{children:"No lyrics available"}),jsxRuntimeExports.jsx("button",{onClick:Tt,className:"mt-4 text-pink-500 hover:underline",children:"Try Auto-Match"})]})}):jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,ease:"easeOut"},className:"relative group aspect-square w-full max-w-[350px] md:max-w-[400px] shadow-2xl rounded-xl overflow-hidden bg-white/5",children:[jsxRuntimeExports.jsx("img",{src:bt,alt:e.album,className:"w-full h-full object-cover"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_20px_rgba(0,0,0,0.2)] rounded-xl pointer-events-none"})]},e.id),jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-full max-w-md gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(motion.h1,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},className:"text-2xl md:text-3xl font-bold truncate",children:e.title},e.title),jsxRuntimeExports.jsxs(motion.p,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"text-lg md:text-xl text-white/60 truncate",children:[e.artist,"  ",e.album]},e.artist)]}),jsxRuntimeExports.jsxs("div",{className:"group space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-1.5 bg-white/20 rounded-full cursor-pointer overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full bg-white/80 rounded-full group-hover:bg-white transition-colors",style:{width:`${_/($||1)*100}%`}}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:$||100,value:_,onChange:zt=>_e(parseFloat(zt.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-white/40 font-medium",children:[jsxRuntimeExports.jsx("span",{children:ut(_)}),jsxRuntimeExports.jsxs("span",{children:["-",ut(($||0)-_)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-10",children:[jsxRuntimeExports.jsx("button",{onClick:c,className:"text-white/70 hover:text-white transition transform active:scale-95",children:jsxRuntimeExports.jsx(SkipBack,{size:32,fill:"currentColor"})}),jsxRuntimeExports.jsx("button",{onClick:()=>s(!a),className:"text-white hover:scale-105 transition transform active:scale-95",children:a?jsxRuntimeExports.jsx(Pause,{size:48,fill:"currentColor"}):jsxRuntimeExports.jsx(Play,{size:48,fill:"currentColor"})}),jsxRuntimeExports.jsx("button",{onClick:o,className:"text-white/70 hover:text-white transition transform active:scale-95",children:jsxRuntimeExports.jsx(SkipForward,{size:32,fill:"currentColor"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsx("button",{className:"text-white/50 hover:text-white transition",children:jsxRuntimeExports.jsx(MessageSquareQuote,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>nt(e),className:`transition transform active:scale-95 ${e.liked?"text-pink-500":"text-white/50 hover:text-white"}`,children:jsxRuntimeExports.jsx(Heart,{size:20,fill:e.liked?"currentColor":"none"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 w-32 group",children:[jsxRuntimeExports.jsx(Volume2,{size:18,className:"text-white/50"}),jsxRuntimeExports.jsxs("div",{className:"relative flex-1 h-1 bg-white/20 rounded-full overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full bg-white/80 rounded-full",style:{width:`${h*100}%`}}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:1,step:.01,value:h,onChange:zt=>g(parseFloat(zt.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]})]})]})]})]})]})}const AudioController=()=>{const e=reactExports.useRef(new Audio),{currentSong:a,isPlaying:s,volume:o,setIsPlaying:c,nextSong:d,setCurrentTime:h,setDuration:g,currentTime:_}=usePlayerStore();return reactExports.useEffect(()=>{const $=e.current;if(!a){$.pause(),$.src="";return}return(async()=>{let tt="";if(a.url)tt=a.url;else if(a.fileHandle)try{const nt=await a.fileHandle.getFile();tt=URL.createObjectURL(nt)}catch(nt){console.error("Failed to load file",nt)}tt&&($.src!==tt&&($.src=tt,$.load()),s&&$.play().catch(nt=>console.warn("Autoplay prevented",nt)))})(),()=>{}},[a]),reactExports.useEffect(()=>{const $=e.current;s?$.paused&&$.src&&$.play().catch(()=>{}):$.paused||$.pause()},[s]),reactExports.useEffect(()=>{e.current.volume=o},[o]),reactExports.useEffect(()=>{const $=e.current;Math.abs($.currentTime-_)>1&&($.currentTime=_)},[_]),reactExports.useEffect(()=>{const $=e.current,_e=()=>{$.paused||h($.currentTime)},tt=()=>{g($.duration)},nt=()=>{c(!1),d()};return $.addEventListener("timeupdate",_e),$.addEventListener("loadedmetadata",tt),$.addEventListener("ended",nt),()=>{$.removeEventListener("timeupdate",_e),$.removeEventListener("loadedmetadata",tt),$.removeEventListener("ended",nt)}},[d,c,h,g]),null};function App(){const{isFullScreen:e,currentView:a}=usePlayerStore(),s=()=>{switch(a){case"home":return jsxRuntimeExports.jsx(SearchPage,{});case"albums":return jsxRuntimeExports.jsx(AlbumsView,{});case"library":default:return jsxRuntimeExports.jsx(SongList,{})}};return jsxRuntimeExports.jsxs("div",{className:"flex h-screen w-full bg-black text-white overflow-hidden font-sans selection:bg-pink-500 selection:text-white",children:[jsxRuntimeExports.jsx(AudioController,{}),jsxRuntimeExports.jsx(Sidebar,{}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col relative min-w-0",children:[s(),jsxRuntimeExports.jsx(PlayerBar,{})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsx(motion.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-0 z-[100]",children:jsxRuntimeExports.jsx(FullScreenPlayer,{})})})]})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
